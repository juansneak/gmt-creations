/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/cornerstone-core";
exports.ids = ["vendor-chunks/cornerstone-core"];
exports.modules = {

/***/ "(ssr)/./node_modules/cornerstone-core/dist/cornerstone.js":
/*!***********************************************************!*\
  !*** ./node_modules/cornerstone-core/dist/cornerstone.js ***!
  \***********************************************************/
/***/ ((module) => {

eval("/*! cornerstone-core - 2.6.1 - 2021-11-19 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstone */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \tfunction hotDisposeChunk(chunkId) {\n/******/ \t\tdelete installedChunks[chunkId];\n/******/ \t}\n/******/ \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n/******/ \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n/******/ \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n/******/ \t\thotAddUpdateChunk(chunkId, moreModules);\n/******/ \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n/******/ \t} ;\n/******/\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tfunction hotDownloadUpdateChunk(chunkId) {\n/******/ \t\tvar head = document.getElementsByTagName(\"head\")[0];\n/******/ \t\tvar script = document.createElement(\"script\");\n/******/ \t\tscript.charset = \"utf-8\";\n/******/ \t\tscript.src = __nested_webpack_require_25879__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n/******/ \t\t;\n/******/ \t\thead.appendChild(script);\n/******/ \t}\n/******/\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tfunction hotDownloadManifest(requestTimeout) {\n/******/ \t\trequestTimeout = requestTimeout || 10000;\n/******/ \t\treturn new Promise(function(resolve, reject) {\n/******/ \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n/******/ \t\t\t\treturn reject(new Error(\"No browser support\"));\n/******/ \t\t\t}\n/******/ \t\t\ttry {\n/******/ \t\t\t\tvar request = new XMLHttpRequest();\n/******/ \t\t\t\tvar requestPath = __nested_webpack_require_25879__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n/******/ \t\t\t\trequest.open(\"GET\", requestPath, true);\n/******/ \t\t\t\trequest.timeout = requestTimeout;\n/******/ \t\t\t\trequest.send(null);\n/******/ \t\t\t} catch (err) {\n/******/ \t\t\t\treturn reject(err);\n/******/ \t\t\t}\n/******/ \t\t\trequest.onreadystatechange = function() {\n/******/ \t\t\t\tif (request.readyState !== 4) return;\n/******/ \t\t\t\tif (request.status === 0) {\n/******/ \t\t\t\t\t// timeout\n/******/ \t\t\t\t\treject(\n/******/ \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n/******/ \t\t\t\t\t);\n/******/ \t\t\t\t} else if (request.status === 404) {\n/******/ \t\t\t\t\t// no update available\n/******/ \t\t\t\t\tresolve();\n/******/ \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n/******/ \t\t\t\t\t// other failure\n/******/ \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n/******/ \t\t\t\t} else {\n/******/ \t\t\t\t\t// success\n/******/ \t\t\t\t\ttry {\n/******/ \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n/******/ \t\t\t\t\t} catch (e) {\n/******/ \t\t\t\t\t\treject(e);\n/******/ \t\t\t\t\t\treturn;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tresolve(update);\n/******/ \t\t\t\t}\n/******/ \t\t\t};\n/******/ \t\t});\n/******/ \t}\n/******/\n/******/ \tvar hotApplyOnUpdate = true;\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tvar hotCurrentHash = \"4d8d88ba53621f59b9a9\";\n/******/ \tvar hotRequestTimeout = 10000;\n/******/ \tvar hotCurrentModuleData = {};\n/******/ \tvar hotCurrentChildModule;\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tvar hotCurrentParents = [];\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tvar hotCurrentParentsTemp = [];\n/******/\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tfunction hotCreateRequire(moduleId) {\n/******/ \t\tvar me = installedModules[moduleId];\n/******/ \t\tif (!me) return __nested_webpack_require_25879__;\n/******/ \t\tvar fn = function(request) {\n/******/ \t\t\tif (me.hot.active) {\n/******/ \t\t\t\tif (installedModules[request]) {\n/******/ \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n/******/ \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t} else {\n/******/ \t\t\t\t\thotCurrentParents = [moduleId];\n/******/ \t\t\t\t\thotCurrentChildModule = request;\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif (me.children.indexOf(request) === -1) {\n/******/ \t\t\t\t\tme.children.push(request);\n/******/ \t\t\t\t}\n/******/ \t\t\t} else {\n/******/ \t\t\t\tconsole.warn(\n/******/ \t\t\t\t\t\"[HMR] unexpected require(\" +\n/******/ \t\t\t\t\t\trequest +\n/******/ \t\t\t\t\t\t\") from disposed module \" +\n/******/ \t\t\t\t\t\tmoduleId\n/******/ \t\t\t\t);\n/******/ \t\t\t\thotCurrentParents = [];\n/******/ \t\t\t}\n/******/ \t\t\treturn __nested_webpack_require_25879__(request);\n/******/ \t\t};\n/******/ \t\tvar ObjectFactory = function ObjectFactory(name) {\n/******/ \t\t\treturn {\n/******/ \t\t\t\tconfigurable: true,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: function() {\n/******/ \t\t\t\t\treturn __nested_webpack_require_25879__[name];\n/******/ \t\t\t\t},\n/******/ \t\t\t\tset: function(value) {\n/******/ \t\t\t\t\t__nested_webpack_require_25879__[name] = value;\n/******/ \t\t\t\t}\n/******/ \t\t\t};\n/******/ \t\t};\n/******/ \t\tfor (var name in __nested_webpack_require_25879__) {\n/******/ \t\t\tif (\n/******/ \t\t\t\tObject.prototype.hasOwnProperty.call(__nested_webpack_require_25879__, name) &&\n/******/ \t\t\t\tname !== \"e\" &&\n/******/ \t\t\t\tname !== \"t\"\n/******/ \t\t\t) {\n/******/ \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tfn.e = function(chunkId) {\n/******/ \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n/******/ \t\t\thotChunksLoading++;\n/******/ \t\t\treturn __nested_webpack_require_25879__.e(chunkId).then(finishChunkLoading, function(err) {\n/******/ \t\t\t\tfinishChunkLoading();\n/******/ \t\t\t\tthrow err;\n/******/ \t\t\t});\n/******/\n/******/ \t\t\tfunction finishChunkLoading() {\n/******/ \t\t\t\thotChunksLoading--;\n/******/ \t\t\t\tif (hotStatus === \"prepare\") {\n/******/ \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n/******/ \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n/******/ \t\t\t\t\t\thotUpdateDownloaded();\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t\tfn.t = function(value, mode) {\n/******/ \t\t\tif (mode & 1) value = fn(value);\n/******/ \t\t\treturn __nested_webpack_require_25879__.t(value, mode & ~1);\n/******/ \t\t};\n/******/ \t\treturn fn;\n/******/ \t}\n/******/\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tfunction hotCreateModule(moduleId) {\n/******/ \t\tvar hot = {\n/******/ \t\t\t// private stuff\n/******/ \t\t\t_acceptedDependencies: {},\n/******/ \t\t\t_declinedDependencies: {},\n/******/ \t\t\t_selfAccepted: false,\n/******/ \t\t\t_selfDeclined: false,\n/******/ \t\t\t_disposeHandlers: [],\n/******/ \t\t\t_main: hotCurrentChildModule !== moduleId,\n/******/\n/******/ \t\t\t// Module API\n/******/ \t\t\tactive: true,\n/******/ \t\t\taccept: function(dep, callback) {\n/******/ \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n/******/ \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n/******/ \t\t\t\telse if (typeof dep === \"object\")\n/******/ \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n/******/ \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n/******/ \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n/******/ \t\t\t},\n/******/ \t\t\tdecline: function(dep) {\n/******/ \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n/******/ \t\t\t\telse if (typeof dep === \"object\")\n/******/ \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n/******/ \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n/******/ \t\t\t\telse hot._declinedDependencies[dep] = true;\n/******/ \t\t\t},\n/******/ \t\t\tdispose: function(callback) {\n/******/ \t\t\t\thot._disposeHandlers.push(callback);\n/******/ \t\t\t},\n/******/ \t\t\taddDisposeHandler: function(callback) {\n/******/ \t\t\t\thot._disposeHandlers.push(callback);\n/******/ \t\t\t},\n/******/ \t\t\tremoveDisposeHandler: function(callback) {\n/******/ \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n/******/ \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n/******/ \t\t\t},\n/******/\n/******/ \t\t\t// Management API\n/******/ \t\t\tcheck: hotCheck,\n/******/ \t\t\tapply: hotApply,\n/******/ \t\t\tstatus: function(l) {\n/******/ \t\t\t\tif (!l) return hotStatus;\n/******/ \t\t\t\thotStatusHandlers.push(l);\n/******/ \t\t\t},\n/******/ \t\t\taddStatusHandler: function(l) {\n/******/ \t\t\t\thotStatusHandlers.push(l);\n/******/ \t\t\t},\n/******/ \t\t\tremoveStatusHandler: function(l) {\n/******/ \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n/******/ \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n/******/ \t\t\t},\n/******/\n/******/ \t\t\t//inherit from previous dispose call\n/******/ \t\t\tdata: hotCurrentModuleData[moduleId]\n/******/ \t\t};\n/******/ \t\thotCurrentChildModule = undefined;\n/******/ \t\treturn hot;\n/******/ \t}\n/******/\n/******/ \tvar hotStatusHandlers = [];\n/******/ \tvar hotStatus = \"idle\";\n/******/\n/******/ \tfunction hotSetStatus(newStatus) {\n/******/ \t\thotStatus = newStatus;\n/******/ \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n/******/ \t\t\thotStatusHandlers[i].call(null, newStatus);\n/******/ \t}\n/******/\n/******/ \t// while downloading\n/******/ \tvar hotWaitingFiles = 0;\n/******/ \tvar hotChunksLoading = 0;\n/******/ \tvar hotWaitingFilesMap = {};\n/******/ \tvar hotRequestedFilesMap = {};\n/******/ \tvar hotAvailableFilesMap = {};\n/******/ \tvar hotDeferred;\n/******/\n/******/ \t// The update info\n/******/ \tvar hotUpdate, hotUpdateNewHash;\n/******/\n/******/ \tfunction toModuleId(id) {\n/******/ \t\tvar isNumber = +id + \"\" === id;\n/******/ \t\treturn isNumber ? +id : id;\n/******/ \t}\n/******/\n/******/ \tfunction hotCheck(apply) {\n/******/ \t\tif (hotStatus !== \"idle\") {\n/******/ \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n/******/ \t\t}\n/******/ \t\thotApplyOnUpdate = apply;\n/******/ \t\thotSetStatus(\"check\");\n/******/ \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n/******/ \t\t\tif (!update) {\n/******/ \t\t\t\thotSetStatus(\"idle\");\n/******/ \t\t\t\treturn null;\n/******/ \t\t\t}\n/******/ \t\t\thotRequestedFilesMap = {};\n/******/ \t\t\thotWaitingFilesMap = {};\n/******/ \t\t\thotAvailableFilesMap = update.c;\n/******/ \t\t\thotUpdateNewHash = update.h;\n/******/\n/******/ \t\t\thotSetStatus(\"prepare\");\n/******/ \t\t\tvar promise = new Promise(function(resolve, reject) {\n/******/ \t\t\t\thotDeferred = {\n/******/ \t\t\t\t\tresolve: resolve,\n/******/ \t\t\t\t\treject: reject\n/******/ \t\t\t\t};\n/******/ \t\t\t});\n/******/ \t\t\thotUpdate = {};\n/******/ \t\t\tvar chunkId = \"cornerstone\";\n/******/ \t\t\t// eslint-disable-next-line no-lone-blocks\n/******/ \t\t\t{\n/******/ \t\t\t\t/*globals chunkId */\n/******/ \t\t\t\thotEnsureUpdateChunk(chunkId);\n/******/ \t\t\t}\n/******/ \t\t\tif (\n/******/ \t\t\t\thotStatus === \"prepare\" &&\n/******/ \t\t\t\thotChunksLoading === 0 &&\n/******/ \t\t\t\thotWaitingFiles === 0\n/******/ \t\t\t) {\n/******/ \t\t\t\thotUpdateDownloaded();\n/******/ \t\t\t}\n/******/ \t\t\treturn promise;\n/******/ \t\t});\n/******/ \t}\n/******/\n/******/ \t// eslint-disable-next-line no-unused-vars\n/******/ \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n/******/ \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n/******/ \t\t\treturn;\n/******/ \t\thotRequestedFilesMap[chunkId] = false;\n/******/ \t\tfor (var moduleId in moreModules) {\n/******/ \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n/******/ \t\t\thotUpdateDownloaded();\n/******/ \t\t}\n/******/ \t}\n/******/\n/******/ \tfunction hotEnsureUpdateChunk(chunkId) {\n/******/ \t\tif (!hotAvailableFilesMap[chunkId]) {\n/******/ \t\t\thotWaitingFilesMap[chunkId] = true;\n/******/ \t\t} else {\n/******/ \t\t\thotRequestedFilesMap[chunkId] = true;\n/******/ \t\t\thotWaitingFiles++;\n/******/ \t\t\thotDownloadUpdateChunk(chunkId);\n/******/ \t\t}\n/******/ \t}\n/******/\n/******/ \tfunction hotUpdateDownloaded() {\n/******/ \t\thotSetStatus(\"ready\");\n/******/ \t\tvar deferred = hotDeferred;\n/******/ \t\thotDeferred = null;\n/******/ \t\tif (!deferred) return;\n/******/ \t\tif (hotApplyOnUpdate) {\n/******/ \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n/******/ \t\t\t// avoid triggering uncaught exception warning in Chrome.\n/******/ \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n/******/ \t\t\tPromise.resolve()\n/******/ \t\t\t\t.then(function() {\n/******/ \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n/******/ \t\t\t\t})\n/******/ \t\t\t\t.then(\n/******/ \t\t\t\t\tfunction(result) {\n/******/ \t\t\t\t\t\tdeferred.resolve(result);\n/******/ \t\t\t\t\t},\n/******/ \t\t\t\t\tfunction(err) {\n/******/ \t\t\t\t\t\tdeferred.reject(err);\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t);\n/******/ \t\t} else {\n/******/ \t\t\tvar outdatedModules = [];\n/******/ \t\t\tfor (var id in hotUpdate) {\n/******/ \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n/******/ \t\t\t\t\toutdatedModules.push(toModuleId(id));\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t\tdeferred.resolve(outdatedModules);\n/******/ \t\t}\n/******/ \t}\n/******/\n/******/ \tfunction hotApply(options) {\n/******/ \t\tif (hotStatus !== \"ready\")\n/******/ \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n/******/ \t\toptions = options || {};\n/******/\n/******/ \t\tvar cb;\n/******/ \t\tvar i;\n/******/ \t\tvar j;\n/******/ \t\tvar module;\n/******/ \t\tvar moduleId;\n/******/\n/******/ \t\tfunction getAffectedStuff(updateModuleId) {\n/******/ \t\t\tvar outdatedModules = [updateModuleId];\n/******/ \t\t\tvar outdatedDependencies = {};\n/******/\n/******/ \t\t\tvar queue = outdatedModules.slice().map(function(id) {\n/******/ \t\t\t\treturn {\n/******/ \t\t\t\t\tchain: [id],\n/******/ \t\t\t\t\tid: id\n/******/ \t\t\t\t};\n/******/ \t\t\t});\n/******/ \t\t\twhile (queue.length > 0) {\n/******/ \t\t\t\tvar queueItem = queue.pop();\n/******/ \t\t\t\tvar moduleId = queueItem.id;\n/******/ \t\t\t\tvar chain = queueItem.chain;\n/******/ \t\t\t\tmodule = installedModules[moduleId];\n/******/ \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n/******/ \t\t\t\tif (module.hot._selfDeclined) {\n/******/ \t\t\t\t\treturn {\n/******/ \t\t\t\t\t\ttype: \"self-declined\",\n/******/ \t\t\t\t\t\tchain: chain,\n/******/ \t\t\t\t\t\tmoduleId: moduleId\n/******/ \t\t\t\t\t};\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif (module.hot._main) {\n/******/ \t\t\t\t\treturn {\n/******/ \t\t\t\t\t\ttype: \"unaccepted\",\n/******/ \t\t\t\t\t\tchain: chain,\n/******/ \t\t\t\t\t\tmoduleId: moduleId\n/******/ \t\t\t\t\t};\n/******/ \t\t\t\t}\n/******/ \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n/******/ \t\t\t\t\tvar parentId = module.parents[i];\n/******/ \t\t\t\t\tvar parent = installedModules[parentId];\n/******/ \t\t\t\t\tif (!parent) continue;\n/******/ \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n/******/ \t\t\t\t\t\treturn {\n/******/ \t\t\t\t\t\t\ttype: \"declined\",\n/******/ \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n/******/ \t\t\t\t\t\t\tmoduleId: moduleId,\n/******/ \t\t\t\t\t\t\tparentId: parentId\n/******/ \t\t\t\t\t\t};\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n/******/ \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n/******/ \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n/******/ \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n/******/ \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n/******/ \t\t\t\t\t\tcontinue;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tdelete outdatedDependencies[parentId];\n/******/ \t\t\t\t\toutdatedModules.push(parentId);\n/******/ \t\t\t\t\tqueue.push({\n/******/ \t\t\t\t\t\tchain: chain.concat([parentId]),\n/******/ \t\t\t\t\t\tid: parentId\n/******/ \t\t\t\t\t});\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/\n/******/ \t\t\treturn {\n/******/ \t\t\t\ttype: \"accepted\",\n/******/ \t\t\t\tmoduleId: updateModuleId,\n/******/ \t\t\t\toutdatedModules: outdatedModules,\n/******/ \t\t\t\toutdatedDependencies: outdatedDependencies\n/******/ \t\t\t};\n/******/ \t\t}\n/******/\n/******/ \t\tfunction addAllToSet(a, b) {\n/******/ \t\t\tfor (var i = 0; i < b.length; i++) {\n/******/ \t\t\t\tvar item = b[i];\n/******/ \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// at begin all updates modules are outdated\n/******/ \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n/******/ \t\tvar outdatedDependencies = {};\n/******/ \t\tvar outdatedModules = [];\n/******/ \t\tvar appliedUpdate = {};\n/******/\n/******/ \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n/******/ \t\t\tconsole.warn(\n/******/ \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n/******/ \t\t\t);\n/******/ \t\t};\n/******/\n/******/ \t\tfor (var id in hotUpdate) {\n/******/ \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n/******/ \t\t\t\tmoduleId = toModuleId(id);\n/******/ \t\t\t\t/** @type {TODO} */\n/******/ \t\t\t\tvar result;\n/******/ \t\t\t\tif (hotUpdate[id]) {\n/******/ \t\t\t\t\tresult = getAffectedStuff(moduleId);\n/******/ \t\t\t\t} else {\n/******/ \t\t\t\t\tresult = {\n/******/ \t\t\t\t\t\ttype: \"disposed\",\n/******/ \t\t\t\t\t\tmoduleId: id\n/******/ \t\t\t\t\t};\n/******/ \t\t\t\t}\n/******/ \t\t\t\t/** @type {Error|false} */\n/******/ \t\t\t\tvar abortError = false;\n/******/ \t\t\t\tvar doApply = false;\n/******/ \t\t\t\tvar doDispose = false;\n/******/ \t\t\t\tvar chainInfo = \"\";\n/******/ \t\t\t\tif (result.chain) {\n/******/ \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n/******/ \t\t\t\t}\n/******/ \t\t\t\tswitch (result.type) {\n/******/ \t\t\t\t\tcase \"self-declined\":\n/******/ \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n/******/ \t\t\t\t\t\tif (!options.ignoreDeclined)\n/******/ \t\t\t\t\t\t\tabortError = new Error(\n/******/ \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n/******/ \t\t\t\t\t\t\t\t\tresult.moduleId +\n/******/ \t\t\t\t\t\t\t\t\tchainInfo\n/******/ \t\t\t\t\t\t\t);\n/******/ \t\t\t\t\t\tbreak;\n/******/ \t\t\t\t\tcase \"declined\":\n/******/ \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n/******/ \t\t\t\t\t\tif (!options.ignoreDeclined)\n/******/ \t\t\t\t\t\t\tabortError = new Error(\n/******/ \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n/******/ \t\t\t\t\t\t\t\t\tresult.moduleId +\n/******/ \t\t\t\t\t\t\t\t\t\" in \" +\n/******/ \t\t\t\t\t\t\t\t\tresult.parentId +\n/******/ \t\t\t\t\t\t\t\t\tchainInfo\n/******/ \t\t\t\t\t\t\t);\n/******/ \t\t\t\t\t\tbreak;\n/******/ \t\t\t\t\tcase \"unaccepted\":\n/******/ \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n/******/ \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n/******/ \t\t\t\t\t\t\tabortError = new Error(\n/******/ \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n/******/ \t\t\t\t\t\t\t);\n/******/ \t\t\t\t\t\tbreak;\n/******/ \t\t\t\t\tcase \"accepted\":\n/******/ \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n/******/ \t\t\t\t\t\tdoApply = true;\n/******/ \t\t\t\t\t\tbreak;\n/******/ \t\t\t\t\tcase \"disposed\":\n/******/ \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n/******/ \t\t\t\t\t\tdoDispose = true;\n/******/ \t\t\t\t\t\tbreak;\n/******/ \t\t\t\t\tdefault:\n/******/ \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif (abortError) {\n/******/ \t\t\t\t\thotSetStatus(\"abort\");\n/******/ \t\t\t\t\treturn Promise.reject(abortError);\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif (doApply) {\n/******/ \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n/******/ \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n/******/ \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n/******/ \t\t\t\t\t\tif (\n/******/ \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n/******/ \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n/******/ \t\t\t\t\t\t\t\tmoduleId\n/******/ \t\t\t\t\t\t\t)\n/******/ \t\t\t\t\t\t) {\n/******/ \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n/******/ \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n/******/ \t\t\t\t\t\t\taddAllToSet(\n/******/ \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n/******/ \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n/******/ \t\t\t\t\t\t\t);\n/******/ \t\t\t\t\t\t}\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t\tif (doDispose) {\n/******/ \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n/******/ \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// Store self accepted outdated modules to require them later by the module system\n/******/ \t\tvar outdatedSelfAcceptedModules = [];\n/******/ \t\tfor (i = 0; i < outdatedModules.length; i++) {\n/******/ \t\t\tmoduleId = outdatedModules[i];\n/******/ \t\t\tif (\n/******/ \t\t\t\tinstalledModules[moduleId] &&\n/******/ \t\t\t\tinstalledModules[moduleId].hot._selfAccepted\n/******/ \t\t\t)\n/******/ \t\t\t\toutdatedSelfAcceptedModules.push({\n/******/ \t\t\t\t\tmodule: moduleId,\n/******/ \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n/******/ \t\t\t\t});\n/******/ \t\t}\n/******/\n/******/ \t\t// Now in \"dispose\" phase\n/******/ \t\thotSetStatus(\"dispose\");\n/******/ \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n/******/ \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n/******/ \t\t\t\thotDisposeChunk(chunkId);\n/******/ \t\t\t}\n/******/ \t\t});\n/******/\n/******/ \t\tvar idx;\n/******/ \t\tvar queue = outdatedModules.slice();\n/******/ \t\twhile (queue.length > 0) {\n/******/ \t\t\tmoduleId = queue.pop();\n/******/ \t\t\tmodule = installedModules[moduleId];\n/******/ \t\t\tif (!module) continue;\n/******/\n/******/ \t\t\tvar data = {};\n/******/\n/******/ \t\t\t// Call dispose handlers\n/******/ \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n/******/ \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n/******/ \t\t\t\tcb = disposeHandlers[j];\n/******/ \t\t\t\tcb(data);\n/******/ \t\t\t}\n/******/ \t\t\thotCurrentModuleData[moduleId] = data;\n/******/\n/******/ \t\t\t// disable module (this disables requires from this module)\n/******/ \t\t\tmodule.hot.active = false;\n/******/\n/******/ \t\t\t// remove module from cache\n/******/ \t\t\tdelete installedModules[moduleId];\n/******/\n/******/ \t\t\t// when disposing there is no need to call dispose handler\n/******/ \t\t\tdelete outdatedDependencies[moduleId];\n/******/\n/******/ \t\t\t// remove \"parents\" references from all children\n/******/ \t\t\tfor (j = 0; j < module.children.length; j++) {\n/******/ \t\t\t\tvar child = installedModules[module.children[j]];\n/******/ \t\t\t\tif (!child) continue;\n/******/ \t\t\t\tidx = child.parents.indexOf(moduleId);\n/******/ \t\t\t\tif (idx >= 0) {\n/******/ \t\t\t\t\tchild.parents.splice(idx, 1);\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// remove outdated dependency from module children\n/******/ \t\tvar dependency;\n/******/ \t\tvar moduleOutdatedDependencies;\n/******/ \t\tfor (moduleId in outdatedDependencies) {\n/******/ \t\t\tif (\n/******/ \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n/******/ \t\t\t) {\n/******/ \t\t\t\tmodule = installedModules[moduleId];\n/******/ \t\t\t\tif (module) {\n/******/ \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n/******/ \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n/******/ \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n/******/ \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n/******/ \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// Not in \"apply\" phase\n/******/ \t\thotSetStatus(\"apply\");\n/******/\n/******/ \t\thotCurrentHash = hotUpdateNewHash;\n/******/\n/******/ \t\t// insert new code\n/******/ \t\tfor (moduleId in appliedUpdate) {\n/******/ \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// call accept handlers\n/******/ \t\tvar error = null;\n/******/ \t\tfor (moduleId in outdatedDependencies) {\n/******/ \t\t\tif (\n/******/ \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n/******/ \t\t\t) {\n/******/ \t\t\t\tmodule = installedModules[moduleId];\n/******/ \t\t\t\tif (module) {\n/******/ \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n/******/ \t\t\t\t\tvar callbacks = [];\n/******/ \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n/******/ \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n/******/ \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n/******/ \t\t\t\t\t\tif (cb) {\n/******/ \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n/******/ \t\t\t\t\t\t\tcallbacks.push(cb);\n/******/ \t\t\t\t\t\t}\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n/******/ \t\t\t\t\t\tcb = callbacks[i];\n/******/ \t\t\t\t\t\ttry {\n/******/ \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n/******/ \t\t\t\t\t\t} catch (err) {\n/******/ \t\t\t\t\t\t\tif (options.onErrored) {\n/******/ \t\t\t\t\t\t\t\toptions.onErrored({\n/******/ \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n/******/ \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n/******/ \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n/******/ \t\t\t\t\t\t\t\t\terror: err\n/******/ \t\t\t\t\t\t\t\t});\n/******/ \t\t\t\t\t\t\t}\n/******/ \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n/******/ \t\t\t\t\t\t\t\tif (!error) error = err;\n/******/ \t\t\t\t\t\t\t}\n/******/ \t\t\t\t\t\t}\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// Load self accepted modules\n/******/ \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n/******/ \t\t\tvar item = outdatedSelfAcceptedModules[i];\n/******/ \t\t\tmoduleId = item.module;\n/******/ \t\t\thotCurrentParents = [moduleId];\n/******/ \t\t\ttry {\n/******/ \t\t\t\t__nested_webpack_require_25879__(moduleId);\n/******/ \t\t\t} catch (err) {\n/******/ \t\t\t\tif (typeof item.errorHandler === \"function\") {\n/******/ \t\t\t\t\ttry {\n/******/ \t\t\t\t\t\titem.errorHandler(err);\n/******/ \t\t\t\t\t} catch (err2) {\n/******/ \t\t\t\t\t\tif (options.onErrored) {\n/******/ \t\t\t\t\t\t\toptions.onErrored({\n/******/ \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n/******/ \t\t\t\t\t\t\t\tmoduleId: moduleId,\n/******/ \t\t\t\t\t\t\t\terror: err2,\n/******/ \t\t\t\t\t\t\t\toriginalError: err\n/******/ \t\t\t\t\t\t\t});\n/******/ \t\t\t\t\t\t}\n/******/ \t\t\t\t\t\tif (!options.ignoreErrored) {\n/******/ \t\t\t\t\t\t\tif (!error) error = err2;\n/******/ \t\t\t\t\t\t}\n/******/ \t\t\t\t\t\tif (!error) error = err;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t} else {\n/******/ \t\t\t\t\tif (options.onErrored) {\n/******/ \t\t\t\t\t\toptions.onErrored({\n/******/ \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n/******/ \t\t\t\t\t\t\tmoduleId: moduleId,\n/******/ \t\t\t\t\t\t\terror: err\n/******/ \t\t\t\t\t\t});\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t\tif (!options.ignoreErrored) {\n/******/ \t\t\t\t\t\tif (!error) error = err;\n/******/ \t\t\t\t\t}\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t}\n/******/\n/******/ \t\t// handle errors in accept handlers and self accepted module load\n/******/ \t\tif (error) {\n/******/ \t\t\thotSetStatus(\"fail\");\n/******/ \t\t\treturn Promise.reject(error);\n/******/ \t\t}\n/******/\n/******/ \t\thotSetStatus(\"idle\");\n/******/ \t\treturn new Promise(function(resolve) {\n/******/ \t\t\tresolve(outdatedModules);\n/******/ \t\t});\n/******/ \t}\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_25879__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {},\n/******/ \t\t\thot: hotCreateModule(moduleId),\n/******/ \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n/******/ \t\t\tchildren: []\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__nested_webpack_require_25879__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__nested_webpack_require_25879__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__nested_webpack_require_25879__.d = function(exports, name, getter) {\n/******/ \t\tif(!__nested_webpack_require_25879__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__nested_webpack_require_25879__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__nested_webpack_require_25879__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __nested_webpack_require_25879__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__nested_webpack_require_25879__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __nested_webpack_require_25879__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__nested_webpack_require_25879__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__nested_webpack_require_25879__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__nested_webpack_require_25879__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__nested_webpack_require_25879__.p = \"\";\n/******/\n/******/ \t// __webpack_hash__\n/******/ \t__nested_webpack_require_25879__.h = function() { return hotCurrentHash; };\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn hotCreateRequire(\"./index.js\")(__nested_webpack_require_25879__.s = \"./index.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./canvasToPixel.js\":\n/*!**************************!*\\\n  !*** ./canvasToPixel.js ***!\n  \\**************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_29828__) {\n\n\"use strict\";\n__nested_webpack_require_29828__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_29828__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_29828__(/*! ./internal/getTransform.js */ \"./internal/getTransform.js\");\n\n\n/**\n * Converts a point in the canvas coordinate system to the pixel coordinate system\n * system.  This can be used to reset tools' image coordinates after modifications\n * have been made in canvas space (e.g. moving a tool by a few cm, independent of\n * image resolution).\n *\n * @param {HTMLElement} element The Cornerstone element within which the input point lies\n * @param {{x: Number, y: Number}} pt The input point in the canvas coordinate system\n *\n * @returns {{x: Number, y: Number}} The transformed point in the pixel coordinate system\n * @memberof PixelCoordinateSystem\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, pt) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var transform = Object(_internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement);\n  transform.invert();\n  return transform.transformPoint(pt.x, pt.y);\n});\n\n/***/ }),\n\n/***/ \"./colors/colormap.js\":\n/*!****************************!*\\\n  !*** ./colors/colormap.js ***!\n  \\****************************/\n/*! exports provided: getColormapsList, getColormap */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_31438__) {\n\n\"use strict\";\n__nested_webpack_require_31438__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_31438__.d(__nested_webpack_exports__, \"getColormapsList\", function() { return getColormapsList; });\n/* harmony export (binding) */ __nested_webpack_require_31438__.d(__nested_webpack_exports__, \"getColormap\", function() { return getColormap; });\n/* harmony import */ var _lookupTable_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_31438__(/*! ./lookupTable.js */ \"./colors/lookupTable.js\");\n\nvar COLOR_TRANSPARENT = [0, 0, 0, 0]; // Colormaps\n//\n// Hot Iron, PET, Hot Metal Blue and PET 20 Step are color palettes\n// Defined by the DICOM standard\n// http://dicom.nema.org/dicom/2013/output/chtml/part06/chapter_B.html\n//\n// All Linear Segmented Colormaps were copied from matplotlib\n// https://github.com/stefanv/matplotlib/blob/master/lib/matplotlib/_cm.py\n\nvar colormapsData = {\n  hotIron: {\n    name: 'Hot Iron',\n    numOfColors: 256,\n    colors: [[0, 0, 0, 255], [2, 0, 0, 255], [4, 0, 0, 255], [6, 0, 0, 255], [8, 0, 0, 255], [10, 0, 0, 255], [12, 0, 0, 255], [14, 0, 0, 255], [16, 0, 0, 255], [18, 0, 0, 255], [20, 0, 0, 255], [22, 0, 0, 255], [24, 0, 0, 255], [26, 0, 0, 255], [28, 0, 0, 255], [30, 0, 0, 255], [32, 0, 0, 255], [34, 0, 0, 255], [36, 0, 0, 255], [38, 0, 0, 255], [40, 0, 0, 255], [42, 0, 0, 255], [44, 0, 0, 255], [46, 0, 0, 255], [48, 0, 0, 255], [50, 0, 0, 255], [52, 0, 0, 255], [54, 0, 0, 255], [56, 0, 0, 255], [58, 0, 0, 255], [60, 0, 0, 255], [62, 0, 0, 255], [64, 0, 0, 255], [66, 0, 0, 255], [68, 0, 0, 255], [70, 0, 0, 255], [72, 0, 0, 255], [74, 0, 0, 255], [76, 0, 0, 255], [78, 0, 0, 255], [80, 0, 0, 255], [82, 0, 0, 255], [84, 0, 0, 255], [86, 0, 0, 255], [88, 0, 0, 255], [90, 0, 0, 255], [92, 0, 0, 255], [94, 0, 0, 255], [96, 0, 0, 255], [98, 0, 0, 255], [100, 0, 0, 255], [102, 0, 0, 255], [104, 0, 0, 255], [106, 0, 0, 255], [108, 0, 0, 255], [110, 0, 0, 255], [112, 0, 0, 255], [114, 0, 0, 255], [116, 0, 0, 255], [118, 0, 0, 255], [120, 0, 0, 255], [122, 0, 0, 255], [124, 0, 0, 255], [126, 0, 0, 255], [128, 0, 0, 255], [130, 0, 0, 255], [132, 0, 0, 255], [134, 0, 0, 255], [136, 0, 0, 255], [138, 0, 0, 255], [140, 0, 0, 255], [142, 0, 0, 255], [144, 0, 0, 255], [146, 0, 0, 255], [148, 0, 0, 255], [150, 0, 0, 255], [152, 0, 0, 255], [154, 0, 0, 255], [156, 0, 0, 255], [158, 0, 0, 255], [160, 0, 0, 255], [162, 0, 0, 255], [164, 0, 0, 255], [166, 0, 0, 255], [168, 0, 0, 255], [170, 0, 0, 255], [172, 0, 0, 255], [174, 0, 0, 255], [176, 0, 0, 255], [178, 0, 0, 255], [180, 0, 0, 255], [182, 0, 0, 255], [184, 0, 0, 255], [186, 0, 0, 255], [188, 0, 0, 255], [190, 0, 0, 255], [192, 0, 0, 255], [194, 0, 0, 255], [196, 0, 0, 255], [198, 0, 0, 255], [200, 0, 0, 255], [202, 0, 0, 255], [204, 0, 0, 255], [206, 0, 0, 255], [208, 0, 0, 255], [210, 0, 0, 255], [212, 0, 0, 255], [214, 0, 0, 255], [216, 0, 0, 255], [218, 0, 0, 255], [220, 0, 0, 255], [222, 0, 0, 255], [224, 0, 0, 255], [226, 0, 0, 255], [228, 0, 0, 255], [230, 0, 0, 255], [232, 0, 0, 255], [234, 0, 0, 255], [236, 0, 0, 255], [238, 0, 0, 255], [240, 0, 0, 255], [242, 0, 0, 255], [244, 0, 0, 255], [246, 0, 0, 255], [248, 0, 0, 255], [250, 0, 0, 255], [252, 0, 0, 255], [254, 0, 0, 255], [255, 0, 0, 255], [255, 2, 0, 255], [255, 4, 0, 255], [255, 6, 0, 255], [255, 8, 0, 255], [255, 10, 0, 255], [255, 12, 0, 255], [255, 14, 0, 255], [255, 16, 0, 255], [255, 18, 0, 255], [255, 20, 0, 255], [255, 22, 0, 255], [255, 24, 0, 255], [255, 26, 0, 255], [255, 28, 0, 255], [255, 30, 0, 255], [255, 32, 0, 255], [255, 34, 0, 255], [255, 36, 0, 255], [255, 38, 0, 255], [255, 40, 0, 255], [255, 42, 0, 255], [255, 44, 0, 255], [255, 46, 0, 255], [255, 48, 0, 255], [255, 50, 0, 255], [255, 52, 0, 255], [255, 54, 0, 255], [255, 56, 0, 255], [255, 58, 0, 255], [255, 60, 0, 255], [255, 62, 0, 255], [255, 64, 0, 255], [255, 66, 0, 255], [255, 68, 0, 255], [255, 70, 0, 255], [255, 72, 0, 255], [255, 74, 0, 255], [255, 76, 0, 255], [255, 78, 0, 255], [255, 80, 0, 255], [255, 82, 0, 255], [255, 84, 0, 255], [255, 86, 0, 255], [255, 88, 0, 255], [255, 90, 0, 255], [255, 92, 0, 255], [255, 94, 0, 255], [255, 96, 0, 255], [255, 98, 0, 255], [255, 100, 0, 255], [255, 102, 0, 255], [255, 104, 0, 255], [255, 106, 0, 255], [255, 108, 0, 255], [255, 110, 0, 255], [255, 112, 0, 255], [255, 114, 0, 255], [255, 116, 0, 255], [255, 118, 0, 255], [255, 120, 0, 255], [255, 122, 0, 255], [255, 124, 0, 255], [255, 126, 0, 255], [255, 128, 4, 255], [255, 130, 8, 255], [255, 132, 12, 255], [255, 134, 16, 255], [255, 136, 20, 255], [255, 138, 24, 255], [255, 140, 28, 255], [255, 142, 32, 255], [255, 144, 36, 255], [255, 146, 40, 255], [255, 148, 44, 255], [255, 150, 48, 255], [255, 152, 52, 255], [255, 154, 56, 255], [255, 156, 60, 255], [255, 158, 64, 255], [255, 160, 68, 255], [255, 162, 72, 255], [255, 164, 76, 255], [255, 166, 80, 255], [255, 168, 84, 255], [255, 170, 88, 255], [255, 172, 92, 255], [255, 174, 96, 255], [255, 176, 100, 255], [255, 178, 104, 255], [255, 180, 108, 255], [255, 182, 112, 255], [255, 184, 116, 255], [255, 186, 120, 255], [255, 188, 124, 255], [255, 190, 128, 255], [255, 192, 132, 255], [255, 194, 136, 255], [255, 196, 140, 255], [255, 198, 144, 255], [255, 200, 148, 255], [255, 202, 152, 255], [255, 204, 156, 255], [255, 206, 160, 255], [255, 208, 164, 255], [255, 210, 168, 255], [255, 212, 172, 255], [255, 214, 176, 255], [255, 216, 180, 255], [255, 218, 184, 255], [255, 220, 188, 255], [255, 222, 192, 255], [255, 224, 196, 255], [255, 226, 200, 255], [255, 228, 204, 255], [255, 230, 208, 255], [255, 232, 212, 255], [255, 234, 216, 255], [255, 236, 220, 255], [255, 238, 224, 255], [255, 240, 228, 255], [255, 242, 232, 255], [255, 244, 236, 255], [255, 246, 240, 255], [255, 248, 244, 255], [255, 250, 248, 255], [255, 252, 252, 255], [255, 255, 255, 255]]\n  },\n  pet: {\n    name: 'PET',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 2, 1, 255], [0, 4, 3, 255], [0, 6, 5, 255], [0, 8, 7, 255], [0, 10, 9, 255], [0, 12, 11, 255], [0, 14, 13, 255], [0, 16, 15, 255], [0, 18, 17, 255], [0, 20, 19, 255], [0, 22, 21, 255], [0, 24, 23, 255], [0, 26, 25, 255], [0, 28, 27, 255], [0, 30, 29, 255], [0, 32, 31, 255], [0, 34, 33, 255], [0, 36, 35, 255], [0, 38, 37, 255], [0, 40, 39, 255], [0, 42, 41, 255], [0, 44, 43, 255], [0, 46, 45, 255], [0, 48, 47, 255], [0, 50, 49, 255], [0, 52, 51, 255], [0, 54, 53, 255], [0, 56, 55, 255], [0, 58, 57, 255], [0, 60, 59, 255], [0, 62, 61, 255], [0, 65, 63, 255], [0, 67, 65, 255], [0, 69, 67, 255], [0, 71, 69, 255], [0, 73, 71, 255], [0, 75, 73, 255], [0, 77, 75, 255], [0, 79, 77, 255], [0, 81, 79, 255], [0, 83, 81, 255], [0, 85, 83, 255], [0, 87, 85, 255], [0, 89, 87, 255], [0, 91, 89, 255], [0, 93, 91, 255], [0, 95, 93, 255], [0, 97, 95, 255], [0, 99, 97, 255], [0, 101, 99, 255], [0, 103, 101, 255], [0, 105, 103, 255], [0, 107, 105, 255], [0, 109, 107, 255], [0, 111, 109, 255], [0, 113, 111, 255], [0, 115, 113, 255], [0, 117, 115, 255], [0, 119, 117, 255], [0, 121, 119, 255], [0, 123, 121, 255], [0, 125, 123, 255], [0, 128, 125, 255], [1, 126, 127, 255], [3, 124, 129, 255], [5, 122, 131, 255], [7, 120, 133, 255], [9, 118, 135, 255], [11, 116, 137, 255], [13, 114, 139, 255], [15, 112, 141, 255], [17, 110, 143, 255], [19, 108, 145, 255], [21, 106, 147, 255], [23, 104, 149, 255], [25, 102, 151, 255], [27, 100, 153, 255], [29, 98, 155, 255], [31, 96, 157, 255], [33, 94, 159, 255], [35, 92, 161, 255], [37, 90, 163, 255], [39, 88, 165, 255], [41, 86, 167, 255], [43, 84, 169, 255], [45, 82, 171, 255], [47, 80, 173, 255], [49, 78, 175, 255], [51, 76, 177, 255], [53, 74, 179, 255], [55, 72, 181, 255], [57, 70, 183, 255], [59, 68, 185, 255], [61, 66, 187, 255], [63, 64, 189, 255], [65, 63, 191, 255], [67, 61, 193, 255], [69, 59, 195, 255], [71, 57, 197, 255], [73, 55, 199, 255], [75, 53, 201, 255], [77, 51, 203, 255], [79, 49, 205, 255], [81, 47, 207, 255], [83, 45, 209, 255], [85, 43, 211, 255], [86, 41, 213, 255], [88, 39, 215, 255], [90, 37, 217, 255], [92, 35, 219, 255], [94, 33, 221, 255], [96, 31, 223, 255], [98, 29, 225, 255], [100, 27, 227, 255], [102, 25, 229, 255], [104, 23, 231, 255], [106, 21, 233, 255], [108, 19, 235, 255], [110, 17, 237, 255], [112, 15, 239, 255], [114, 13, 241, 255], [116, 11, 243, 255], [118, 9, 245, 255], [120, 7, 247, 255], [122, 5, 249, 255], [124, 3, 251, 255], [126, 1, 253, 255], [128, 0, 255, 255], [130, 2, 252, 255], [132, 4, 248, 255], [134, 6, 244, 255], [136, 8, 240, 255], [138, 10, 236, 255], [140, 12, 232, 255], [142, 14, 228, 255], [144, 16, 224, 255], [146, 18, 220, 255], [148, 20, 216, 255], [150, 22, 212, 255], [152, 24, 208, 255], [154, 26, 204, 255], [156, 28, 200, 255], [158, 30, 196, 255], [160, 32, 192, 255], [162, 34, 188, 255], [164, 36, 184, 255], [166, 38, 180, 255], [168, 40, 176, 255], [170, 42, 172, 255], [171, 44, 168, 255], [173, 46, 164, 255], [175, 48, 160, 255], [177, 50, 156, 255], [179, 52, 152, 255], [181, 54, 148, 255], [183, 56, 144, 255], [185, 58, 140, 255], [187, 60, 136, 255], [189, 62, 132, 255], [191, 64, 128, 255], [193, 66, 124, 255], [195, 68, 120, 255], [197, 70, 116, 255], [199, 72, 112, 255], [201, 74, 108, 255], [203, 76, 104, 255], [205, 78, 100, 255], [207, 80, 96, 255], [209, 82, 92, 255], [211, 84, 88, 255], [213, 86, 84, 255], [215, 88, 80, 255], [217, 90, 76, 255], [219, 92, 72, 255], [221, 94, 68, 255], [223, 96, 64, 255], [225, 98, 60, 255], [227, 100, 56, 255], [229, 102, 52, 255], [231, 104, 48, 255], [233, 106, 44, 255], [235, 108, 40, 255], [237, 110, 36, 255], [239, 112, 32, 255], [241, 114, 28, 255], [243, 116, 24, 255], [245, 118, 20, 255], [247, 120, 16, 255], [249, 122, 12, 255], [251, 124, 8, 255], [253, 126, 4, 255], [255, 128, 0, 255], [255, 130, 4, 255], [255, 132, 8, 255], [255, 134, 12, 255], [255, 136, 16, 255], [255, 138, 20, 255], [255, 140, 24, 255], [255, 142, 28, 255], [255, 144, 32, 255], [255, 146, 36, 255], [255, 148, 40, 255], [255, 150, 44, 255], [255, 152, 48, 255], [255, 154, 52, 255], [255, 156, 56, 255], [255, 158, 60, 255], [255, 160, 64, 255], [255, 162, 68, 255], [255, 164, 72, 255], [255, 166, 76, 255], [255, 168, 80, 255], [255, 170, 85, 255], [255, 172, 89, 255], [255, 174, 93, 255], [255, 176, 97, 255], [255, 178, 101, 255], [255, 180, 105, 255], [255, 182, 109, 255], [255, 184, 113, 255], [255, 186, 117, 255], [255, 188, 121, 255], [255, 190, 125, 255], [255, 192, 129, 255], [255, 194, 133, 255], [255, 196, 137, 255], [255, 198, 141, 255], [255, 200, 145, 255], [255, 202, 149, 255], [255, 204, 153, 255], [255, 206, 157, 255], [255, 208, 161, 255], [255, 210, 165, 255], [255, 212, 170, 255], [255, 214, 174, 255], [255, 216, 178, 255], [255, 218, 182, 255], [255, 220, 186, 255], [255, 222, 190, 255], [255, 224, 194, 255], [255, 226, 198, 255], [255, 228, 202, 255], [255, 230, 206, 255], [255, 232, 210, 255], [255, 234, 214, 255], [255, 236, 218, 255], [255, 238, 222, 255], [255, 240, 226, 255], [255, 242, 230, 255], [255, 244, 234, 255], [255, 246, 238, 255], [255, 248, 242, 255], [255, 250, 246, 255], [255, 252, 250, 255], [255, 255, 255, 255]]\n  },\n  hotMetalBlue: {\n    name: 'Hot Metal Blue',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 0, 2, 255], [0, 0, 4, 255], [0, 0, 6, 255], [0, 0, 8, 255], [0, 0, 10, 255], [0, 0, 12, 255], [0, 0, 14, 255], [0, 0, 16, 255], [0, 0, 17, 255], [0, 0, 19, 255], [0, 0, 21, 255], [0, 0, 23, 255], [0, 0, 25, 255], [0, 0, 27, 255], [0, 0, 29, 255], [0, 0, 31, 255], [0, 0, 33, 255], [0, 0, 35, 255], [0, 0, 37, 255], [0, 0, 39, 255], [0, 0, 41, 255], [0, 0, 43, 255], [0, 0, 45, 255], [0, 0, 47, 255], [0, 0, 49, 255], [0, 0, 51, 255], [0, 0, 53, 255], [0, 0, 55, 255], [0, 0, 57, 255], [0, 0, 59, 255], [0, 0, 61, 255], [0, 0, 63, 255], [0, 0, 65, 255], [0, 0, 67, 255], [0, 0, 69, 255], [0, 0, 71, 255], [0, 0, 73, 255], [0, 0, 75, 255], [0, 0, 77, 255], [0, 0, 79, 255], [0, 0, 81, 255], [0, 0, 83, 255], [0, 0, 84, 255], [0, 0, 86, 255], [0, 0, 88, 255], [0, 0, 90, 255], [0, 0, 92, 255], [0, 0, 94, 255], [0, 0, 96, 255], [0, 0, 98, 255], [0, 0, 100, 255], [0, 0, 102, 255], [0, 0, 104, 255], [0, 0, 106, 255], [0, 0, 108, 255], [0, 0, 110, 255], [0, 0, 112, 255], [0, 0, 114, 255], [0, 0, 116, 255], [0, 0, 117, 255], [0, 0, 119, 255], [0, 0, 121, 255], [0, 0, 123, 255], [0, 0, 125, 255], [0, 0, 127, 255], [0, 0, 129, 255], [0, 0, 131, 255], [0, 0, 133, 255], [0, 0, 135, 255], [0, 0, 137, 255], [0, 0, 139, 255], [0, 0, 141, 255], [0, 0, 143, 255], [0, 0, 145, 255], [0, 0, 147, 255], [0, 0, 149, 255], [0, 0, 151, 255], [0, 0, 153, 255], [0, 0, 155, 255], [0, 0, 157, 255], [0, 0, 159, 255], [0, 0, 161, 255], [0, 0, 163, 255], [0, 0, 165, 255], [0, 0, 167, 255], [3, 0, 169, 255], [6, 0, 171, 255], [9, 0, 173, 255], [12, 0, 175, 255], [15, 0, 177, 255], [18, 0, 179, 255], [21, 0, 181, 255], [24, 0, 183, 255], [26, 0, 184, 255], [29, 0, 186, 255], [32, 0, 188, 255], [35, 0, 190, 255], [38, 0, 192, 255], [41, 0, 194, 255], [44, 0, 196, 255], [47, 0, 198, 255], [50, 0, 200, 255], [52, 0, 197, 255], [55, 0, 194, 255], [57, 0, 191, 255], [59, 0, 188, 255], [62, 0, 185, 255], [64, 0, 182, 255], [66, 0, 179, 255], [69, 0, 176, 255], [71, 0, 174, 255], [74, 0, 171, 255], [76, 0, 168, 255], [78, 0, 165, 255], [81, 0, 162, 255], [83, 0, 159, 255], [85, 0, 156, 255], [88, 0, 153, 255], [90, 0, 150, 255], [93, 2, 144, 255], [96, 4, 138, 255], [99, 6, 132, 255], [102, 8, 126, 255], [105, 9, 121, 255], [108, 11, 115, 255], [111, 13, 109, 255], [114, 15, 103, 255], [116, 17, 97, 255], [119, 19, 91, 255], [122, 21, 85, 255], [125, 23, 79, 255], [128, 24, 74, 255], [131, 26, 68, 255], [134, 28, 62, 255], [137, 30, 56, 255], [140, 32, 50, 255], [143, 34, 47, 255], [146, 36, 44, 255], [149, 38, 41, 255], [152, 40, 38, 255], [155, 41, 35, 255], [158, 43, 32, 255], [161, 45, 29, 255], [164, 47, 26, 255], [166, 49, 24, 255], [169, 51, 21, 255], [172, 53, 18, 255], [175, 55, 15, 255], [178, 56, 12, 255], [181, 58, 9, 255], [184, 60, 6, 255], [187, 62, 3, 255], [190, 64, 0, 255], [194, 66, 0, 255], [198, 68, 0, 255], [201, 70, 0, 255], [205, 72, 0, 255], [209, 73, 0, 255], [213, 75, 0, 255], [217, 77, 0, 255], [221, 79, 0, 255], [224, 81, 0, 255], [228, 83, 0, 255], [232, 85, 0, 255], [236, 87, 0, 255], [240, 88, 0, 255], [244, 90, 0, 255], [247, 92, 0, 255], [251, 94, 0, 255], [255, 96, 0, 255], [255, 98, 3, 255], [255, 100, 6, 255], [255, 102, 9, 255], [255, 104, 12, 255], [255, 105, 15, 255], [255, 107, 18, 255], [255, 109, 21, 255], [255, 111, 24, 255], [255, 113, 26, 255], [255, 115, 29, 255], [255, 117, 32, 255], [255, 119, 35, 255], [255, 120, 38, 255], [255, 122, 41, 255], [255, 124, 44, 255], [255, 126, 47, 255], [255, 128, 50, 255], [255, 130, 53, 255], [255, 132, 56, 255], [255, 134, 59, 255], [255, 136, 62, 255], [255, 137, 65, 255], [255, 139, 68, 255], [255, 141, 71, 255], [255, 143, 74, 255], [255, 145, 76, 255], [255, 147, 79, 255], [255, 149, 82, 255], [255, 151, 85, 255], [255, 152, 88, 255], [255, 154, 91, 255], [255, 156, 94, 255], [255, 158, 97, 255], [255, 160, 100, 255], [255, 162, 103, 255], [255, 164, 106, 255], [255, 166, 109, 255], [255, 168, 112, 255], [255, 169, 115, 255], [255, 171, 118, 255], [255, 173, 121, 255], [255, 175, 124, 255], [255, 177, 126, 255], [255, 179, 129, 255], [255, 181, 132, 255], [255, 183, 135, 255], [255, 184, 138, 255], [255, 186, 141, 255], [255, 188, 144, 255], [255, 190, 147, 255], [255, 192, 150, 255], [255, 194, 153, 255], [255, 196, 156, 255], [255, 198, 159, 255], [255, 200, 162, 255], [255, 201, 165, 255], [255, 203, 168, 255], [255, 205, 171, 255], [255, 207, 174, 255], [255, 209, 176, 255], [255, 211, 179, 255], [255, 213, 182, 255], [255, 215, 185, 255], [255, 216, 188, 255], [255, 218, 191, 255], [255, 220, 194, 255], [255, 222, 197, 255], [255, 224, 200, 255], [255, 226, 203, 255], [255, 228, 206, 255], [255, 229, 210, 255], [255, 231, 213, 255], [255, 233, 216, 255], [255, 235, 219, 255], [255, 237, 223, 255], [255, 239, 226, 255], [255, 240, 229, 255], [255, 242, 232, 255], [255, 244, 236, 255], [255, 246, 239, 255], [255, 248, 242, 255], [255, 250, 245, 255], [255, 251, 249, 255], [255, 253, 252, 255], [255, 255, 255, 255]]\n  },\n  pet20Step: {\n    name: 'PET 20 Step',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255]]\n  },\n  gray: {\n    name: 'Gray',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 1, 1]]\n    }\n  },\n  jet: {\n    name: 'Jet',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.35, 0, 0], [0.66, 1, 1], [0.89, 1, 1], [1, 0.5, 0.5]],\n      green: [[0, 0, 0], [0.125, 0, 0], [0.375, 1, 1], [0.64, 1, 1], [0.91, 0, 0], [1, 0, 0]],\n      blue: [[0, 0.5, 0.5], [0.11, 1, 1], [0.34, 1, 1], [0.65, 0, 0], [1, 0, 0]]\n    }\n  },\n  hsv: {\n    name: 'HSV',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [0.158730, 1, 1], [0.174603, 0.968750, 0.968750], [0.333333, 0.031250, 0.031250], [0.349206, 0, 0], [0.666667, 0, 0], [0.682540, 0.031250, 0.031250], [0.841270, 0.968750, 0.968750], [0.857143, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.158730, 0.937500, 0.937500], [0.174603, 1, 1], [0.507937, 1, 1], [0.666667, 0.062500, 0.062500], [0.682540, 0, 0], [1, 0, 0]],\n      blue: [[0, 0, 0], [0.333333, 0, 0], [0.349206, 0.062500, 0.062500], [0.507937, 1, 1], [0.841270, 1, 1], [0.857143, 0.937500, 0.937500], [1, 0.09375, 0.09375]]\n    }\n  },\n  hot: {\n    name: 'Hot',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.0416, 0.0416], [0.365079, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0, 0], [0.746032, 1, 1], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.746032, 0, 0], [1, 1, 1]]\n    }\n  },\n  cool: {\n    name: 'Cool',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 1, 1], [1, 0, 0]],\n      blue: [[0, 1, 1], [1, 1, 1]]\n    }\n  },\n  spring: {\n    name: 'Spring',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0, 0]]\n    }\n  },\n  summer: {\n    name: 'Summer',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0.5, 0.5], [1, 1, 1]],\n      blue: [[0, 0.4, 0.4], [1, 0.4, 0.4]]\n    }\n  },\n  autumn: {\n    name: 'Autumn',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 0, 0]]\n    }\n  },\n  winter: {\n    name: 'Winter',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 0, 0]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0.5, 0.5]]\n    }\n  },\n  bone: {\n    name: 'Bone',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.746032, 0.652778, 0.652778], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0.319444, 0.319444], [0.746032, 0.777778, 0.777778], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.365079, 0.444444, 0.444444], [1, 1, 1]]\n    }\n  },\n  copper: {\n    name: 'Copper',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.809524, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 0.7812, 0.7812]],\n      blue: [[0, 0, 0], [1, 0.4975, 0.4975]]\n    }\n  },\n  spectral: {\n    name: 'Spectral',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.05, 0.4667, 0.4667], [0.10, 0.5333, 0.5333], [0.15, 0, 0], [0.20, 0, 0], [0.25, 0, 0], [0.30, 0, 0], [0.35, 0, 0], [0.40, 0, 0], [0.45, 0, 0], [0.50, 0, 0], [0.55, 0, 0], [0.60, 0, 0], [0.65, 0.7333, 0.7333], [0.70, 0.9333, 0.9333], [0.75, 1, 1], [0.80, 1, 1], [0.85, 1, 1], [0.90, 0.8667, 0.8667], [0.95, 0.80, 0.80], [1, 0.80, 0.80]],\n      green: [[0, 0, 0], [0.05, 0, 0], [0.10, 0, 0], [0.15, 0, 0], [0.20, 0, 0], [0.25, 0.4667, 0.4667], [0.30, 0.6000, 0.6000], [0.35, 0.6667, 0.6667], [0.40, 0.6667, 0.6667], [0.45, 0.6000, 0.6000], [0.50, 0.7333, 0.7333], [0.55, 0.8667, 0.8667], [0.60, 1, 1], [0.65, 1, 1], [0.70, 0.9333, 0.9333], [0.75, 0.8000, 0.8000], [0.80, 0.6000, 0.6000], [0.85, 0, 0], [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]],\n      blue: [[0, 0, 0], [0.05, 0.5333, 0.5333], [0.10, 0.6000, 0.6000], [0.15, 0.6667, 0.6667], [0.20, 0.8667, 0.8667], [0.25, 0.8667, 0.8667], [0.30, 0.8667, 0.8667], [0.35, 0.6667, 0.6667], [0.40, 0.5333, 0.5333], [0.45, 0, 0], [0.5, 0, 0], [0.55, 0, 0], [0.60, 0, 0], [0.65, 0, 0], [0.70, 0, 0], [0.75, 0, 0], [0.80, 0, 0], [0.85, 0, 0], [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]]\n    }\n  },\n  coolwarm: {\n    name: 'CoolWarm',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.2298057, 0.2298057], [0.03125, 0.26623388, 0.26623388], [0.0625, 0.30386891, 0.30386891], [0.09375, 0.342804478, 0.342804478], [0.125, 0.38301334, 0.38301334], [0.15625, 0.424369608, 0.424369608], [0.1875, 0.46666708, 0.46666708], [0.21875, 0.509635204, 0.509635204], [0.25, 0.552953156, 0.552953156], [0.28125, 0.596262162, 0.596262162], [0.3125, 0.639176211, 0.639176211], [0.34375, 0.681291281, 0.681291281], [0.375, 0.722193294, 0.722193294], [0.40625, 0.761464949, 0.761464949], [0.4375, 0.798691636, 0.798691636], [0.46875, 0.833466556, 0.833466556], [0.5, 0.865395197, 0.865395197], [0.53125, 0.897787179, 0.897787179], [0.5625, 0.924127593, 0.924127593], [0.59375, 0.944468518, 0.944468518], [0.625, 0.958852946, 0.958852946], [0.65625, 0.96732803, 0.96732803], [0.6875, 0.969954137, 0.969954137], [0.71875, 0.966811177, 0.966811177], [0.75, 0.958003065, 0.958003065], [0.78125, 0.943660866, 0.943660866], [0.8125, 0.923944917, 0.923944917], [0.84375, 0.89904617, 0.89904617], [0.875, 0.869186849, 0.869186849], [0.90625, 0.834620542, 0.834620542], [0.9375, 0.795631745, 0.795631745], [0.96875, 0.752534934, 0.752534934], [1, 0.705673158, 0.705673158]],\n      green: [[0, 0.298717966, 0.298717966], [0.03125, 0.353094838, 0.353094838], [0.0625, 0.406535296, 0.406535296], [0.09375, 0.458757618, 0.458757618], [0.125, 0.50941904, 0.50941904], [0.15625, 0.558148092, 0.558148092], [0.1875, 0.604562568, 0.604562568], [0.21875, 0.648280772, 0.648280772], [0.25, 0.688929332, 0.688929332], [0.28125, 0.726149107, 0.726149107], [0.3125, 0.759599947, 0.759599947], [0.34375, 0.788964712, 0.788964712], [0.375, 0.813952739, 0.813952739], [0.40625, 0.834302879, 0.834302879], [0.4375, 0.849786142, 0.849786142], [0.46875, 0.860207984, 0.860207984], [0.5, 0.86541021, 0.86541021], [0.53125, 0.848937047, 0.848937047], [0.5625, 0.827384882, 0.827384882], [0.59375, 0.800927443, 0.800927443], [0.625, 0.769767752, 0.769767752], [0.65625, 0.734132809, 0.734132809], [0.6875, 0.694266682, 0.694266682], [0.71875, 0.650421156, 0.650421156], [0.75, 0.602842431, 0.602842431], [0.78125, 0.551750968, 0.551750968], [0.8125, 0.49730856, 0.49730856], [0.84375, 0.439559467, 0.439559467], [0.875, 0.378313092, 0.378313092], [0.90625, 0.312874446, 0.312874446], [0.9375, 0.24128379, 0.24128379], [0.96875, 0.157246067, 0.157246067], [1, 0.01555616, 0.01555616]],\n      blue: [[0, 0.753683153, 0.753683153], [0.03125, 0.801466763, 0.801466763], [0.0625, 0.84495867, 0.84495867], [0.09375, 0.883725899, 0.883725899], [0.125, 0.917387822, 0.917387822], [0.15625, 0.945619588, 0.945619588], [0.1875, 0.968154911, 0.968154911], [0.21875, 0.98478814, 0.98478814], [0.25, 0.995375608, 0.995375608], [0.28125, 0.999836203, 0.999836203], [0.3125, 0.998151185, 0.998151185], [0.34375, 0.990363227, 0.990363227], [0.375, 0.976574709, 0.976574709], [0.40625, 0.956945269, 0.956945269], [0.4375, 0.931688648, 0.931688648], [0.46875, 0.901068838, 0.901068838], [0.5, 0.865395561, 0.865395561], [0.53125, 0.820880546, 0.820880546], [0.5625, 0.774508472, 0.774508472], [0.59375, 0.726736146, 0.726736146], [0.625, 0.678007945, 0.678007945], [0.65625, 0.628751763, 0.628751763], [0.6875, 0.579375448, 0.579375448], [0.71875, 0.530263762, 0.530263762], [0.75, 0.481775914, 0.481775914], [0.78125, 0.434243684, 0.434243684], [0.8125, 0.387970225, 0.387970225], [0.84375, 0.343229596, 0.343229596], [0.875, 0.300267182, 0.300267182], [0.90625, 0.259301199, 0.259301199], [0.9375, 0.220525627, 0.220525627], [0.96875, 0.184115123, 0.184115123], [1, 0.150232812, 0.150232812]]\n    }\n  },\n  blues: {\n    name: 'Blues',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.9686274528503418, 0.9686274528503418], [0.125, 0.87058824300765991, 0.87058824300765991], [0.25, 0.7764706015586853, 0.7764706015586853], [0.375, 0.61960786581039429, 0.61960786581039429], [0.5, 0.41960784792900085, 0.41960784792900085], [0.625, 0.25882354378700256, 0.25882354378700256], [0.75, 0.12941177189350128, 0.12941177189350128], [0.875, 0.031372550874948502, 0.031372550874948502], [1, 0.031372550874948502, 0.031372550874948502]],\n      green: [[0, 0.9843137264251709, 0.9843137264251709], [0.125, 0.92156863212585449, 0.92156863212585449], [0.25, 0.85882353782653809, 0.85882353782653809], [0.375, 0.7921568751335144, 0.7921568751335144], [0.5, 0.68235296010971069, 0.68235296010971069], [0.625, 0.57254904508590698, 0.57254904508590698], [0.75, 0.44313725829124451, 0.44313725829124451], [0.875, 0.31764706969261169, 0.31764706969261169], [1, 0.18823529779911041, 0.18823529779911041]],\n      blue: [[0, 1, 1], [0.125, 0.9686274528503418, 0.9686274528503418], [0.25, 0.93725490570068359, 0.93725490570068359], [0.375, 0.88235294818878174, 0.88235294818878174], [0.5, 0.83921569585800171, 0.83921569585800171], [0.625, 0.7764706015586853, 0.7764706015586853], [0.75, 0.70980393886566162, 0.70980393886566162], [0.875, 0.61176472902297974, 0.61176472902297974], [1, 0.41960784792900085, 0.41960784792900085]]\n    }\n  }\n};\n/**\n *  Generate linearly spaced vectors\n*  http://cens.ioc.ee/local/man/matlab/techdoc/ref/linspace.html\n * @param {Number} a A number representing the first vector\n * @param {Number} b A number representing the second vector\n * @param {Number} n The number of linear spaced vectors to generate\n * @returns {Array} An array of points representing linear spaced vectors.\n * @memberof Colors\n */\n\nfunction linspace(a, b, n) {\n  n = n === null ? 100 : n;\n  var increment = (b - a) / (n - 1);\n  var vector = [];\n\n  while (n-- > 0) {\n    vector.push(a);\n    a += increment;\n  } // Make sure the last item will always be \"b\" because most of the\n  // Time we'll get numbers like 1.0000000000000002 instead of 1.\n\n\n  vector[vector.length - 1] = b;\n  return vector;\n}\n/**\n * Returns the \"rank/index\" of the element in a sorted array if found or the highest index if not. Uses (binary search)\n * @param {Array} array A sorted array to search in\n * @param {any} elem the element in the array to search for\n * @returns {number} The rank/index of the element in the given array\n * @memberof Colors\n */\n\n\nfunction getRank(array, elem) {\n  var left = 0;\n  var right = array.length - 1;\n\n  while (left <= right) {\n    var mid = left + Math.floor((right - left) / 2);\n    var midElem = array[mid];\n\n    if (midElem === elem) {\n      return mid;\n    } else if (elem < midElem) {\n      right = mid - 1;\n    } else {\n      left = mid + 1;\n    }\n  }\n\n  return left;\n}\n/**\n * Find the indices into a sorted array a such that, if the corresponding elements\n * In v were inserted before the indices, the order of a would be preserved.\n *  http://lagrange.univ-lyon1.fr/docs/numpy/1.11.0/reference/generated/numpy.searchsorted.html\n * @param {Array} inputArray The array where the values will be inserted\n * @param {Array} values An array of the values to be inserted into the inputArray\n * @returns {Array} The indices where elements should be inserted to maintain order.\n * @memberof Colors\n */\n\n\nfunction searchSorted(inputArray, values) {\n  var i;\n  var indexes = [];\n  var len = values.length;\n  inputArray.sort(function (a, b) {\n    return a - b;\n  });\n\n  for (i = 0; i < len; i++) {\n    indexes[i] = getRank(inputArray, values[i]);\n  }\n\n  return indexes;\n}\n/**\n * Creates an *N* -element 1-d lookup table\n * @param {Number} N The number of elements in the result lookup table\n * @param {Array} data represented by a list of x,y0,y1 mapping correspondences. Each element in this\n * List represents how a value between 0 and 1 (inclusive) represented by x is mapped to\n * A corresponding value between 0 and 1 (inclusive). The two values of y are to allow for\n * Discontinuous mapping functions (say as might be found in a sawtooth) where y0 represents\n * The value of y for values of x <= to that given, and y1 is the value to be used for x >\n * Than that given). The list must start with x=0, end with x=1, and all values of x must be\n * In increasing order. Values between the given mapping points are determined by simple linear\n * Interpolation.\n * @param {any} gamma value denotes a \"gamma curve\" value which adjusts the brightness\n * at the bottom and top of the map.\n * @returns {any[]} an array \"result\" where result[x*(N-1)] gives the closest value for\n * Values of x between 0 and 1.\n * @memberof Colors\n */\n\n\nfunction makeMappingArray(N, data, gamma) {\n  var i;\n  var x = [];\n  var y0 = [];\n  var y1 = [];\n  var lut = [];\n  gamma = gamma === null ? 1 : gamma;\n\n  for (i = 0; i < data.length; i++) {\n    var element = data[i];\n    x.push((N - 1) * element[0]);\n    y0.push(element[1]);\n    y1.push(element[1]);\n  }\n\n  var xLinSpace = linspace(0, 1, N);\n\n  for (i = 0; i < N; i++) {\n    xLinSpace[i] = (N - 1) * Math.pow(xLinSpace[i], gamma);\n  }\n\n  var xLinSpaceIndexes = searchSorted(x, xLinSpace);\n\n  for (i = 1; i < N - 1; i++) {\n    var index = xLinSpaceIndexes[i];\n    var colorPercent = (xLinSpace[i] - x[index - 1]) / (x[index] - x[index - 1]);\n    var colorDelta = y0[index] - y1[index - 1];\n    lut[i] = colorPercent * colorDelta + y1[index - 1];\n  }\n\n  lut[0] = y1[0];\n  lut[N - 1] = y0[data.length - 1];\n  return lut;\n}\n/**\n * Creates a Colormap based on lookup tables using linear segments.\n * @param {{red:Array, green:Array, blue:Array}} segmentedData An object with a red, green and blue entries.\n * Each entry should be a list of x, y0, y1 tuples, forming rows in a table.\n * @param {Number} N The number of elements in the result Colormap\n * @param {any} gamma value denotes a \"gamma curve\" value which adjusts the brightness\n * at the bottom and top of the Colormap.\n * @returns {Array} The created Colormap object\n * @description The lookup table is generated using linear interpolation for each\n *  Primary color, with the 0-1 domain divided into any number of\n * Segments.\n * https://github.com/stefanv/matplotlib/blob/3f1a23755e86fef97d51e30e106195f34425c9e3/lib/matplotlib/colors.py#L663\n * @memberof Colors\n */\n\n\nfunction createLinearSegmentedColormap(segmentedData, N, gamma) {\n  var i;\n  var lut = [];\n  N = N === null ? 256 : N;\n  gamma = gamma === null ? 1 : gamma;\n  var redLut = makeMappingArray(N, segmentedData.red, gamma);\n  var greenLut = makeMappingArray(N, segmentedData.green, gamma);\n  var blueLut = makeMappingArray(N, segmentedData.blue, gamma);\n\n  for (i = 0; i < N; i++) {\n    var red = Math.round(redLut[i] * 255);\n    var green = Math.round(greenLut[i] * 255);\n    var blue = Math.round(blueLut[i] * 255);\n    var rgba = [red, green, blue, 255];\n    lut.push(rgba);\n  }\n\n  return lut;\n}\n/**\n * Return all available colormaps (id and name)\n * @returns {Array<{id,key}>} An array of colormaps with an object containing the \"id\" and display \"name\"\n * @memberof Colors\n */\n\n\nfunction getColormapsList() {\n  var colormaps = [];\n  var keys = Object.keys(colormapsData);\n  keys.forEach(function (key) {\n    if (colormapsData.hasOwnProperty(key)) {\n      var colormap = colormapsData[key];\n      colormaps.push({\n        id: key,\n        name: colormap.name\n      });\n    }\n  });\n  colormaps.sort(function (a, b) {\n    var aName = a.name.toLowerCase();\n    var bName = b.name.toLowerCase();\n\n    if (aName === bName) {\n      return 0;\n    }\n\n    return aName < bName ? -1 : 1;\n  });\n  return colormaps;\n}\n/**\n * Return a colorMap object with the provided id and colormapData\n * if the Id matches existent colorMap objects (check colormapsData) the colormapData is ignored.\n * if the colormapData is not empty, the colorMap will be added to the colormapsData list. Otherwise, an empty colorMap object is returned.\n * @param {string} id The ID of the colormap\n * @param {Object} colormapData - An object that can contain a name, numColors, gama, segmentedData and/or colors\n * @returns {*} The Colormap Object\n * @memberof Colors\n*/\n\nfunction getColormap(id, colormapData) {\n  var colormap = colormapsData[id];\n\n  if (!colormap) {\n    colormap = colormapsData[id] = colormapData || {\n      name: '',\n      colors: []\n    };\n  }\n\n  if (!colormap.colors && colormap.segmentedData) {\n    colormap.colors = createLinearSegmentedColormap(colormap.segmentedData, colormap.numColors, colormap.gamma);\n  }\n\n  return {\n    getId: function getId() {\n      return id;\n    },\n    getColorSchemeName: function getColorSchemeName() {\n      return colormap.name;\n    },\n    setColorSchemeName: function setColorSchemeName(name) {\n      colormap.name = name;\n    },\n    getNumberOfColors: function getNumberOfColors() {\n      return colormap.colors.length;\n    },\n    setNumberOfColors: function setNumberOfColors(numColors) {\n      while (colormap.colors.length < numColors) {\n        colormap.colors.push(COLOR_TRANSPARENT);\n      }\n\n      colormap.colors.length = numColors;\n    },\n    getColor: function getColor(index) {\n      if (this.isValidIndex(index)) {\n        return colormap.colors[index];\n      }\n\n      return COLOR_TRANSPARENT;\n    },\n    getColorRepeating: function getColorRepeating(index) {\n      var numColors = colormap.colors.length;\n      index = numColors ? index % numColors : 0;\n      return this.getColor(index);\n    },\n    setColor: function setColor(index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors[index] = rgba;\n      }\n    },\n    addColor: function addColor(rgba) {\n      colormap.colors.push(rgba);\n    },\n    insertColor: function insertColor(index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1, rgba);\n      }\n    },\n    removeColor: function removeColor(index) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1);\n      }\n    },\n    clearColors: function clearColors() {\n      colormap.colors = [];\n    },\n    buildLookupTable: function buildLookupTable(lut) {\n      if (!lut) {\n        return;\n      }\n\n      var numColors = colormap.colors.length;\n      lut.setNumberOfTableValues(numColors);\n\n      for (var i = 0; i < numColors; i++) {\n        lut.setTableValue(i, colormap.colors[i]);\n      }\n    },\n    createLookupTable: function createLookupTable() {\n      var lut = new _lookupTable_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n      this.buildLookupTable(lut);\n      return lut;\n    },\n    isValidIndex: function isValidIndex(index) {\n      return index >= 0 && index < colormap.colors.length;\n    }\n  };\n}\n\n/***/ }),\n\n/***/ \"./colors/index.js\":\n/*!*************************!*\\\n  !*** ./colors/index.js ***!\n  \\*************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_71608__) {\n\n\"use strict\";\n__nested_webpack_require_71608__.r(__nested_webpack_exports__);\n/* harmony import */ var _colormap_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_71608__(/*! ./colormap.js */ \"./colors/colormap.js\");\n/* harmony import */ var _lookupTable_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_71608__(/*! ./lookupTable.js */ \"./colors/lookupTable.js\");\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  getColormap: _colormap_js__WEBPACK_IMPORTED_MODULE_0__[\"getColormap\"],\n  getColormapsList: _colormap_js__WEBPACK_IMPORTED_MODULE_0__[\"getColormapsList\"],\n  LookupTable: _lookupTable_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n});\n\n/***/ }),\n\n/***/ \"./colors/lookupTable.js\":\n/*!*******************************!*\\\n  !*** ./colors/lookupTable.js ***!\n  \\*******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_72500__) {\n\n\"use strict\";\n__nested_webpack_require_72500__.r(__nested_webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// This code was created based on vtkLookupTable\n// http://www.vtk.org/doc/release/5.0/html/a01697.html\n// https://github.com/Kitware/VTK/blob/master/Common/Core/vtkLookupTable.cxx\nvar BELOW_RANGE_COLOR_INDEX = 0;\nvar ABOVE_RANGE_COLOR_INDEX = 1;\nvar NAN_COLOR_INDEX = 2;\n/**\n * Converts an HSV  (Hue, Saturation, Value) color to RGB (Red, Green, Blue) color value\n * @param {Number} hue A number representing the hue color value\n * @param {any} sat A number representing the saturation color value\n * @param {any} val A number representing the value color value\n * @returns {Numberp[]} An RGB color array\n */\n\nfunction HSVToRGB(hue, sat, val) {\n  if (hue > 1) {\n    throw new Error('HSVToRGB expects hue < 1');\n  }\n\n  var rgb = [];\n\n  if (sat === 0) {\n    rgb[0] = val;\n    rgb[1] = val;\n    rgb[2] = val;\n    return rgb;\n  }\n\n  var hueCase = Math.floor(hue * 6);\n  var frac = 6 * hue - hueCase;\n  var lx = val * (1 - sat);\n  var ly = val * (1 - sat * frac);\n  var lz = val * (1 - sat * (1 - frac));\n\n  switch (hueCase) {\n    /* 0<hue<1/6 */\n    case 0:\n    case 6:\n      rgb[0] = val;\n      rgb[1] = lz;\n      rgb[2] = lx;\n      break;\n\n    /* 1/6<hue<2/6 */\n\n    case 1:\n      rgb[0] = ly;\n      rgb[1] = val;\n      rgb[2] = lx;\n      break;\n\n    /* 2/6<hue<3/6 */\n\n    case 2:\n      rgb[0] = lx;\n      rgb[1] = val;\n      rgb[2] = lz;\n      break;\n\n    /* 3/6<hue/4/6 */\n\n    case 3:\n      rgb[0] = lx;\n      rgb[1] = ly;\n      rgb[2] = val;\n      break;\n\n    /* 4/6<hue<5/6 */\n\n    case 4:\n      rgb[0] = lz;\n      rgb[1] = lx;\n      rgb[2] = val;\n      break;\n\n    /* 5/6<hue<1 */\n\n    case 5:\n      rgb[0] = val;\n      rgb[1] = lx;\n      rgb[2] = ly;\n      break;\n  }\n\n  return rgb;\n}\n/**\n * Maps a value to an index in the table\n * @param {Number} v A double value which table index will be returned.\n * @param {any} p An object that contains the Table \"Range\", the table \"MaxIndex\",\n * A \"Shift\" from first value in the table and the table \"Scale\" value\n * @returns {Number} The mapped index in the table\n * @memberof Colors\n */\n\n\nfunction linearIndexLookupMain(v, p) {\n  var dIndex; // NOTE: Added Math.floor since values were not integers? Check VTK source\n\n  if (v < p.Range[0]) {\n    dIndex = p.MaxIndex + BELOW_RANGE_COLOR_INDEX + 1.5;\n  } else if (v > p.Range[1]) {\n    dIndex = p.MaxIndex + ABOVE_RANGE_COLOR_INDEX + 1.5;\n  } else {\n    dIndex = (v + p.Shift) * p.Scale;\n  }\n\n  return Math.floor(dIndex);\n}\n/**\n * Maps scalar values into colors via a lookup table\n * LookupTable is an object that is used by mapper objects to map scalar values into rgba (red-green-blue-alpha transparency) color specification,\n * or rgba into scalar values. The color table can be created by direct insertion of color values, or by specifying hue, saturation, value, and alpha range and generating a table\n */\n\n\nvar LookupTable = /*#__PURE__*/function () {\n  /**\n   * Creates a default linear LookupTable object with 256 colors.\n   */\n  function LookupTable() {\n    _classCallCheck(this, LookupTable);\n\n    this.NumberOfColors = 256;\n    this.Ramp = 'linear';\n    this.TableRange = [0, 255];\n    this.HueRange = [0, 0.66667];\n    this.SaturationRange = [1, 1];\n    this.ValueRange = [1, 1];\n    this.AlphaRange = [1, 1];\n    this.NaNColor = [128, 0, 0, 255];\n    this.BelowRangeColor = [0, 0, 0, 255];\n    this.UseBelowRangeColor = true;\n    this.AboveRangeColor = [255, 255, 255, 255];\n    this.UseAboveRangeColor = true;\n    this.InputRange = [0, 255];\n    this.Table = [];\n  }\n  /**\n   * Specify the number of values (i.e., colors) in the lookup table.\n   * @param {Number} number The number of colors in he LookupTable\n   * @returns {void}\n   * @memberof Colors\n   */\n\n\n  _createClass(LookupTable, [{\n    key: \"setNumberOfTableValues\",\n    value: function setNumberOfTableValues(number) {\n      this.NumberOfColors = number;\n    }\n    /**\n     * Set the shape of the table ramp to either 'linear', 'scurve' or 'sqrt'\n     * @param {String} ramp A string value representing the shape of the table. Allowed values are 'linear', 'scurve' or 'sqrt'\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setRamp\",\n    value: function setRamp(ramp) {\n      this.Ramp = ramp;\n    }\n    /**\n     * Sets the minimum/maximum scalar values for scalar mapping.\n     * Scalar values less than minimum range value are clamped to minimum range value.\n     * Scalar values greater than maximum range value are clamped to maximum range value.\n     * @param {Number} start A double representing the minimum scaler value of the LookupTable\n     * @param {any} end A double representing the maximum scaler value of the LookupTable\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setTableRange\",\n    value: function setTableRange(start, end) {\n      this.TableRange[0] = start;\n      this.TableRange[1] = end;\n    }\n    /**\n     * Set the range in hue (using automatic generation). Hue ranges between [0,1].\n     * @param {Number} start A double representing the minimum hue value in a range. Min. is 0\n     * @param {Number} end A double representing the maximum hue value in a range. Max. is 1\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setHueRange\",\n    value: function setHueRange(start, end) {\n      this.HueRange[0] = start;\n      this.HueRange[1] = end;\n    }\n    /**\n     * Set the range in saturation (using automatic generation). Saturation ranges between [0,1].\n     * @param {Number} start A double representing the minimum Saturation value in a range. Min. is 0\n     * @param {Number} end A double representing the maximum Saturation value in a range. Max. is 1\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setSaturationRange\",\n    value: function setSaturationRange(start, end) {\n      this.SaturationRange[0] = start;\n      this.SaturationRange[1] = end;\n    }\n    /**\n     * Set the range in value (using automatic generation). Value ranges between [0,1].\n     * @param {Numeber } start A double representing the minimum value in a range. Min. is 0\n     * @param {Numeber} end A double representing the maximum value in a range. Max. is 1\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setValueRange\",\n    value: function setValueRange(start, end) {\n      // Set the range in value (using automatic generation). Value ranges between [0,1].\n      this.ValueRange[0] = start;\n      this.ValueRange[1] = end;\n    }\n    /**\n     * (Not Used) Sets the range of scalars which will be mapped.\n     * @param {Number} start the minimum scalar value in the range\n     * @param {Number} end the maximum scalar value in the range\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setRange\",\n    value: function setRange(start, end) {\n      this.InputRange[0] = start;\n      this.InputRange[1] = end;\n    }\n    /**\n     * Set the range in alpha (using automatic generation). Alpha ranges from [0,1].\n     * @param {Number} start A double representing the minimum alpha value\n     * @param {Number} end A double representing the maximum alpha value\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setAlphaRange\",\n    value: function setAlphaRange(start, end) {\n      // Set the range in alpha (using automatic generation). Alpha ranges from [0,1].\n      this.AlphaRange[0] = start;\n      this.AlphaRange[1] = end;\n    }\n    /**\n     * Map one value through the lookup table and return the color as an\n     * RGBA array of doubles between 0 and 1.\n     * @param {Number} scalar A double scalar value which will be mapped to a color in the LookupTable\n     * @returns {Number[]} An RGBA array of doubles between 0 and 1\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"getColor\",\n    value: function getColor(scalar) {\n      return this.mapValue(scalar);\n    }\n    /**\n     * Generate lookup table from hue, saturation, value, alpha min/max values. Table is built from linear ramp of each value.\n     * @param {Boolean} force true to force the build of the LookupTable. Otherwie, false. This is useful if a lookup table has been defined manually\n     * (using SetTableValue) and then an application decides to rebuild the lookup table using the implicit process.\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"build\",\n    value: function build(force) {\n      if (this.Table.length > 1 && !force) {\n        return;\n      } // Clear the table\n\n\n      this.Table = [];\n      var maxIndex = this.NumberOfColors - 1;\n      var hinc, sinc, vinc, ainc;\n\n      if (maxIndex) {\n        hinc = (this.HueRange[1] - this.HueRange[0]) / maxIndex;\n        sinc = (this.SaturationRange[1] - this.SaturationRange[0]) / maxIndex;\n        vinc = (this.ValueRange[1] - this.ValueRange[0]) / maxIndex;\n        ainc = (this.AlphaRange[1] - this.AlphaRange[0]) / maxIndex;\n      } else {\n        hinc = sinc = vinc = ainc = 0.0;\n      }\n\n      for (var i = 0; i <= maxIndex; i++) {\n        var hue = this.HueRange[0] + i * hinc;\n        var sat = this.SaturationRange[0] + i * sinc;\n        var val = this.ValueRange[0] + i * vinc;\n        var alpha = this.AlphaRange[0] + i * ainc;\n        var rgb = HSVToRGB(hue, sat, val);\n        var c_rgba = [];\n\n        switch (this.Ramp) {\n          case 'scurve':\n            c_rgba[0] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[0]) * Math.PI)));\n            c_rgba[1] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[1]) * Math.PI)));\n            c_rgba[2] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[2]) * Math.PI)));\n            c_rgba[3] = Math.floor(alpha * 255);\n            break;\n\n          case 'linear':\n            c_rgba[0] = Math.floor(rgb[0] * 255 + 0.5);\n            c_rgba[1] = Math.floor(rgb[1] * 255 + 0.5);\n            c_rgba[2] = Math.floor(rgb[2] * 255 + 0.5);\n            c_rgba[3] = Math.floor(alpha * 255 + 0.5);\n            break;\n\n          case 'sqrt':\n            c_rgba[0] = Math.floor(Math.sqrt(rgb[0]) * 255 + 0.5);\n            c_rgba[1] = Math.floor(Math.sqrt(rgb[1]) * 255 + 0.5);\n            c_rgba[2] = Math.floor(Math.sqrt(rgb[2]) * 255 + 0.5);\n            c_rgba[3] = Math.floor(Math.sqrt(alpha) * 255 + 0.5);\n            break;\n\n          default:\n            throw new Error(\"Invalid Ramp value (\".concat(this.Ramp, \")\"));\n        }\n\n        this.Table.push(c_rgba);\n      }\n\n      this.buildSpecialColors();\n    }\n    /**\n     * Ensures the out-of-range colors (Below range and Above range) are set correctly.\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"buildSpecialColors\",\n    value: function buildSpecialColors() {\n      var numberOfColors = this.NumberOfColors;\n      var belowRangeColorIndex = numberOfColors + BELOW_RANGE_COLOR_INDEX;\n      var aboveRangeColorIndex = numberOfColors + ABOVE_RANGE_COLOR_INDEX;\n      var nanColorIndex = numberOfColors + NAN_COLOR_INDEX; // Below range color\n\n      if (this.UseBelowRangeColor || numberOfColors === 0) {\n        this.Table[belowRangeColorIndex] = this.BelowRangeColor;\n      } else {\n        // Duplicate the first color in the table.\n        this.Table[belowRangeColorIndex] = this.Table[0];\n      } // Above range color\n\n\n      if (this.UseAboveRangeColor || numberOfColors === 0) {\n        this.Table[aboveRangeColorIndex] = this.AboveRangeColor;\n      } else {\n        // Duplicate the last color in the table.\n        this.Table[aboveRangeColorIndex] = this.Table[numberOfColors - 1];\n      } // Always use NanColor\n\n\n      this.Table[nanColorIndex] = this.NaNColor;\n    }\n    /**\n     * Similar to GetColor - Map one value through the lookup table and return the color as an\n     * RGBA array of doubles between 0 and 1.\n     * @param {Numeber} v A double scalar value which will be mapped to a color in the LookupTable\n     * @returns {Number[]} An RGBA array of doubles between 0 and 1\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"mapValue\",\n    value: function mapValue(v) {\n      var index = this.getIndex(v);\n\n      if (index < 0) {\n        return this.NaNColor;\n      } else if (index === 0) {\n        if (this.UseBelowRangeColor && v < this.TableRange[0]) {\n          return this.BelowRangeColor;\n        }\n      } else if (index === this.NumberOfColors - 1) {\n        if (this.UseAboveRangeColor && v > this.TableRange[1]) {\n          return this.AboveRangeColor;\n        }\n      }\n\n      return this.Table[index];\n    }\n    /**\n     * Return the table index associated with a particular value.\n     * @param {Number} v A double value which table index will be returned.\n     * @returns {Number} The index in the LookupTable\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(v) {\n      var p = {};\n      p.Range = [];\n      p.MaxIndex = this.NumberOfColors - 1; // This was LookupShiftAndScale\n\n      p.Shift = -this.TableRange[0];\n\n      if (this.TableRange[1] <= this.TableRange[0]) {\n        p.Scale = Number.MAX_VALUE;\n      } else {\n        p.Scale = p.MaxIndex / (this.TableRange[1] - this.TableRange[0]);\n      }\n\n      p.Range[0] = this.TableRange[0];\n      p.Range[1] = this.TableRange[1]; // First, check whether we have a number...\n\n      if (isNaN(v)) {\n        // For backwards compatibility\n        return -1;\n      } // Map to an index:\n\n\n      var index = linearIndexLookupMain(v, p); // For backwards compatibility, if the index indicates an\n      // Out-of-range value, truncate to index range for in-range colors.\n\n      if (index === this.NumberOfColors + BELOW_RANGE_COLOR_INDEX) {\n        index = 0;\n      } else if (index === this.NumberOfColors + ABOVE_RANGE_COLOR_INDEX) {\n        index = this.NumberOfColors - 1;\n      }\n\n      return index;\n    }\n    /**\n     * Directly load color into lookup table. Use [0,1] double values for color component specification.\n     * Make sure that you've either used the Build() method or used SetNumberOfTableValues() prior to using this method.\n     * @param {Number} index The index in the LookupTable of where to insert the color value\n     * @param {Number[]} rgba An array of [0,1] double values for an RGBA color component\n     * @returns {void}\n     * @memberof Colors\n     */\n\n  }, {\n    key: \"setTableValue\",\n    value: function setTableValue(index, rgba) {\n      // Check if it index, red, green, blue and alpha were passed as parameter\n      if (arguments.length === 5) {\n        rgba = Array.prototype.slice.call(arguments, 1);\n      } // Check the index to make sure it is valid\n\n\n      if (index < 0) {\n        throw new Error(\"Can't set the table value for negative index (\".concat(index, \")\"));\n      }\n\n      if (index >= this.NumberOfColors) {\n        new Error(\"Index \".concat(index, \" is greater than the number of colors \").concat(this.NumberOfColors));\n      }\n\n      this.Table[index] = rgba;\n\n      if (index === 0 || index === this.NumberOfColors - 1) {\n        // This is needed due to the way the special colors are stored in\n        // The internal table. If Above/BelowRangeColors are not used and\n        // The min/max colors are changed in the table with this member\n        // Function, then the colors used for values outside the range may\n        // Be incorrect. Calling this here ensures the out-of-range colors\n        // Are set correctly.\n        this.buildSpecialColors();\n      }\n    }\n  }]);\n\n  return LookupTable;\n}();\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (LookupTable);\n\n/***/ }),\n\n/***/ \"./disable.js\":\n/*!********************!*\\\n  !*** ./disable.js ***!\n  \\********************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_88862__) {\n\n\"use strict\";\n__nested_webpack_require_88862__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_88862__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_88862__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_88862__(/*! ./events.js */ \"./events.js\");\n\n\n\n/**\r\n *  Disable an HTML element for further use in Cornerstone\r\n *\r\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\r\n * @returns {void}\r\n * @memberof Enable\r\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  if (element === undefined) {\n    throw new Error('disable: element must not be undefined');\n  } // Search for this element in this list of enabled elements\n\n\n  var enabledElements = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElements\"])();\n\n  for (var i = 0; i < enabledElements.length; i++) {\n    if (enabledElements[i].element === element) {\n      // We found it!\n      // Fire an event so dependencies can cleanup\n      var eventData = {\n        element: element\n      };\n      Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element, _events_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ELEMENT_DISABLED, eventData);\n      Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_2__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].ELEMENT_DISABLED, eventData); // Remove the child DOM elements that we created (e.g.canvas)\n\n      enabledElements[i].element.removeChild(enabledElements[i].canvas);\n      enabledElements[i].canvas = undefined; // Remove this element from the list of enabled elements\n\n      enabledElements.splice(i, 1);\n      break;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./displayImage.js\":\n/*!*************************!*\\\n  !*** ./displayImage.js ***!\n  \\*************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_91006__) {\n\n\"use strict\";\n__nested_webpack_require_91006__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_91006__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_91006__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_91006__(/*! ./updateImage.js */ \"./updateImage.js\");\n/* harmony import */ var _internal_now_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_91006__(/*! ./internal/now.js */ \"./internal/now.js\");\n/* harmony import */ var _layers_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_91006__(/*! ./layers.js */ \"./layers.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_91006__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_91006__(/*! ./events.js */ \"./events.js\");\n\n\n\n\n\n\n\n/**\n * Sets a new image object for a given element.\n *\n * Will also apply an optional viewport setting.\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {Object} image An Image loaded by a Cornerstone Image Loader\n * @param {Object} [viewport] A set of Cornerstone viewport parameters\n * @returns {void}\n * @memberof Drawing\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, image, viewport) {\n  if (element === undefined) {\n    throw new Error('displayImage: parameter element must not be undefined');\n  }\n\n  if (image === undefined) {\n    throw new Error('displayImage: parameter image must not be undefined');\n  }\n\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var oldImage = enabledElement.image;\n  enabledElement.image = image;\n\n  if (enabledElement.layers && enabledElement.layers.length) {\n    Object(_layers_js__WEBPACK_IMPORTED_MODULE_4__[\"setLayerImage\"])(element, image);\n  }\n\n  if (enabledElement.viewport === undefined) {\n    enabledElement.viewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement.canvas, image);\n  } // Merge viewport\n\n\n  if (viewport) {\n    for (var attrname in viewport) {\n      if (viewport[attrname] !== null) {\n        enabledElement.viewport[attrname] = viewport[attrname];\n      }\n    }\n  }\n\n  var frameRate;\n\n  if (enabledElement.lastImageTimeStamp !== undefined) {\n    var timeSinceLastImage = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])() - enabledElement.lastImageTimeStamp;\n    frameRate = (1000 / timeSinceLastImage).toFixed();\n  }\n\n  enabledElement.lastImageTimeStamp = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n  var newImageEventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    oldImage: oldImage,\n    enabledElement: enabledElement,\n    frameRate: frameRate\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(enabledElement.element, _events_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].NEW_IMAGE, newImageEventData);\n  Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\n});\n\n/***/ }),\n\n/***/ \"./draw.js\":\n/*!*****************!*\\\n  !*** ./draw.js ***!\n  \\*****************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_94540__) {\n\n\"use strict\";\n__nested_webpack_require_94540__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_94540__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_94540__(/*! ./internal/drawImage.js */ \"./internal/drawImage.js\");\n\n\n/**\n * Immediately draws the enabled element\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @returns {void}\n * @memberof Drawing\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  Object(_internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement);\n});\n\n/***/ }),\n\n/***/ \"./drawInvalidated.js\":\n/*!****************************!*\\\n  !*** ./drawInvalidated.js ***!\n  \\****************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_95606__) {\n\n\"use strict\";\n__nested_webpack_require_95606__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_95606__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_95606__(/*! ./internal/drawImage.js */ \"./internal/drawImage.js\");\n/**\n * This module is responsible for drawing invalidated enabled elements\n */\n\n\n/**\n * Draws all invalidated enabled elements and clears the invalid flag after drawing it\n *\n * @returns {void}\n * @memberof Drawing\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function () {\n  var enabledElements = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElements\"])();\n\n  for (var i = 0; i < enabledElements.length; i++) {\n    var ee = enabledElements[i];\n\n    if (ee.invalid === true) {\n      Object(_internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(ee, true);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"./enable.js\":\n/*!*******************!*\\\n  !*** ./enable.js ***!\n  \\*******************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_96804__) {\n\n\"use strict\";\n__nested_webpack_require_96804__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_96804__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _resize_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_96804__(/*! ./resize.js */ \"./resize.js\");\n/* harmony import */ var _internal_drawImageSync_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_96804__(/*! ./internal/drawImageSync.js */ \"./internal/drawImageSync.js\");\n/* harmony import */ var _internal_requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_96804__(/*! ./internal/requestAnimationFrame.js */ \"./internal/requestAnimationFrame.js\");\n/* harmony import */ var _internal_tryEnableWebgl_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_96804__(/*! ./internal/tryEnableWebgl.js */ \"./internal/tryEnableWebgl.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_96804__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _generateUUID_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_96804__(/*! ./generateUUID.js */ \"./generateUUID.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_96804__(/*! ./events.js */ \"./events.js\");\n/* harmony import */ var _internal_getCanvas_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_96804__(/*! ./internal/getCanvas.js */ \"./internal/getCanvas.js\");\n\n\n\n\n\n\n\n\n\n/**\r\n * @module Enable\r\n * This module is responsible for enabling an element to display images with cornerstone\r\n */\n\n/**\r\n * Returns whether or not an Enabled Element has either a currently active image or\r\n * a non-empty Array of Enabled Element Layers.\r\n *\r\n * @param {EnabledElement} enabledElement An Enabled Element\r\n * @return {Boolean} Whether or not the Enabled Element has an active image or valid set of layers\r\n * @memberof Enable\r\n */\n\nfunction hasImageOrLayers(enabledElement) {\n  return enabledElement.image !== undefined || enabledElement.layers.length > 0;\n}\n/**\r\n * Enable an HTML Element for use in Cornerstone\r\n *\r\n * - If there is a Canvas already present within the HTMLElement, and it has the class\r\n * 'cornerstone-canvas', this function will use this existing Canvas instead of creating\r\n * a new one. This may be helpful when using libraries (e.g. React, Vue) which don't\r\n * want third parties to change the DOM.\r\n *\r\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\r\n * @param {Object} options Options for the enabledElement\r\n *\r\n * @return {void}\r\n * @memberof Enable\r\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, options) {\n  if (element === undefined) {\n    throw new Error('enable: parameter element cannot be undefined');\n  } // If this enabled element has the option set for WebGL, we should\n  // Check if this device actually supports it\n\n\n  if (options && options.renderer && options.renderer.toLowerCase() === 'webgl') {\n    Object(_internal_tryEnableWebgl_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(options);\n  }\n\n  var canvas = Object(_internal_getCanvas_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(element);\n  var enabledElement = {\n    element: element,\n    canvas: canvas,\n    image: undefined,\n    // Will be set once image is loaded\n    invalid: false,\n    // True if image needs to be drawn, false if not\n    needsRedraw: true,\n    options: Object.assign({}, options),\n    layers: [],\n    data: {},\n    renderingTools: {},\n    uuid: Object(_generateUUID_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])()\n  };\n  Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"addEnabledElement\"])(enabledElement);\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_7__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ELEMENT_ENABLED, enabledElement);\n  Object(_resize_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element, true);\n  /**\r\n   * Draw the image immediately\r\n   *\r\n   * @param {DOMHighResTimeStamp} timestamp The current time for when requestAnimationFrame starts to fire callbacks\r\n   * @returns {void}\r\n   * @memberof Drawing\r\n   */\n\n  function draw(timestamp) {\n    if (enabledElement.canvas === undefined) {\n      return;\n    }\n\n    var eventDetails = {\n      enabledElement: enabledElement,\n      timestamp: timestamp\n    };\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(enabledElement.element, _events_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].PRE_RENDER, eventDetails);\n\n    if (enabledElement.needsRedraw && hasImageOrLayers(enabledElement)) {\n      Object(_internal_drawImageSync_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement, enabledElement.invalid);\n    }\n\n    Object(_internal_requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(draw);\n  }\n\n  draw();\n});\n\n/***/ }),\n\n/***/ \"./enabledElementData.js\":\n/*!*******************************!*\\\n  !*** ./enabledElementData.js ***!\n  \\*******************************/\n/*! exports provided: getElementData, removeElementData */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_101916__) {\n\n\"use strict\";\n__nested_webpack_require_101916__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_101916__.d(__nested_webpack_exports__, \"getElementData\", function() { return getElementData; });\n/* harmony export (binding) */ __nested_webpack_require_101916__.d(__nested_webpack_exports__, \"removeElementData\", function() { return removeElementData; });\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_101916__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n\n/**\n * Retrieves any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n * @returns {*} Whatever data is stored for this enabled element\n */\n\nfunction getElementData(element, dataType) {\n  var ee = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n\n  if (ee.data.hasOwnProperty(dataType) === false) {\n    ee.data[dataType] = {};\n  }\n\n  return ee.data[dataType];\n}\n/**\n * Clears any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n *\n * @returns {void}\n */\n\nfunction removeElementData(element, dataType) {\n  var ee = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  delete ee.data[dataType];\n}\n\n/***/ }),\n\n/***/ \"./enabledElements.js\":\n/*!****************************!*\\\n  !*** ./enabledElements.js ***!\n  \\****************************/\n/*! exports provided: getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_103726__) {\n\n\"use strict\";\n__nested_webpack_require_103726__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_103726__.d(__nested_webpack_exports__, \"getEnabledElement\", function() { return getEnabledElement; });\n/* harmony export (binding) */ __nested_webpack_require_103726__.d(__nested_webpack_exports__, \"addEnabledElement\", function() { return addEnabledElement; });\n/* harmony export (binding) */ __nested_webpack_require_103726__.d(__nested_webpack_exports__, \"getEnabledElementsByImageId\", function() { return getEnabledElementsByImageId; });\n/* harmony export (binding) */ __nested_webpack_require_103726__.d(__nested_webpack_exports__, \"getEnabledElements\", function() { return getEnabledElements; });\nvar enabledElements = [];\n/**\n * @module EnabledElements\n */\n\n/**\n * @module Objects\n */\n\n/**\n * A two-dimensional vector\n *\n * @typedef {Object} vec2\n * @memberof Objects\n * @param {Number} x - The x distance\n * @param {Number} y - The y distance\n */\n\n/**\n * VOI\n *\n * @typedef {Object} VOI\n * @memberof Objects\n * @param {Number} windowWidth - Window Width for display\n * @param {Number} windowCenter - Window Center for display\n */\n\n/**\n * Lookup Table Array\n *\n * @typedef {Object} LUT\n * @memberof Objects\n * @property {Number} firstValueMapped\n * @property {Number} numBitsPerEntry\n * @property {Array} lut\n */\n\n/**\n * Image Statistics Object\n *\n * @typedef {Object} ImageStats\n * @memberof Objects\n * @property {Number} [lastGetPixelDataTime] The time in ms taken to retrieve stored pixels required to draw the image\n * @property {Number} [lastStoredPixelDataToCanvasImageDataTime] The time in ms taken to map from stored pixel array to canvas pixel array\n * @property {Number} [lastPutImageDataTime] The time in ms taken for putImageData to put the canvas pixel data into the canvas context\n * @property {Number} [lastRenderTime] The total time in ms taken for the entire rendering function to run\n * @property {Number} [lastLutGenerateTime] The time in ms taken to generate the lookup table for the image\n */\n\n/**\n * An Image Object in Cornerstone\n *\n * @typedef {Object} Image\n * @memberof Objects\n * @property {string} imageId - The imageId associated with this image object\n * @property {Number} minPixelValue - the minimum stored pixel value in the image\n * @property {Number} maxPixelValue - the maximum stored pixel value in the image\n * @property {Number} slope - the rescale slope to convert stored pixel values to modality pixel values or 1 if not specified\n * @property {Number} intercept - the rescale intercept used to convert stored pixel values to modality values or 0 if not specified\n * @property {Number} windowCenter - the default windowCenter to apply to the image\n * @property {Number} windowWidth - the default windowWidth to apply to the image\n * @property {function} getPixelData - a function that returns the underlying pixel data. An array of integers for grayscale and an array of RGBA for color\n * @property {function} getImageData - a function that returns a canvas imageData object for the image. This is only needed for color images\n * @property {function} getCanvas - a function that returns a canvas element with the image loaded into it. This is only needed for color images.\n * @property {function} getImage - a function that returns a JavaScript Image object with the image data. This is optional and typically used for images encoded in standard web JPEG and PNG formats\n * @property {Number} rows - number of rows in the image. This is the same as height but duplicated for convenience\n * @property {Number} columns - number of columns in the image. This is the same as width but duplicated for convenience\n * @property {Number} height - the height of the image. This is the same as rows but duplicated for convenience\n * @property {Number} width - the width of the image. This is the same as columns but duplicated for convenience\n * @property {Boolean} color - true if pixel data is RGB, false if grayscale\n * @property {Object} lut - The Lookup Table\n * @property {Boolean} rgba - Is the color pixel data stored in RGBA?\n * @property {Number} columnPixelSpacing - horizontal distance between the middle of each pixel (or width of each pixel) in mm or undefined if not known\n * @property {Number} rowPixelSpacing - vertical distance between the middle of each pixel (or height of each pixel) in mm or undefined if not known\n * @property {Boolean} invert - true if the the image should initially be displayed be inverted, false if not. This is here mainly to support DICOM images with a photometric interpretation of MONOCHROME1\n * @property {Number} sizeInBytes - the number of bytes used to store the pixels for this image.\n * @property {Boolean} [falseColor=false] - Whether or not the image has undergone false color mapping\n * @property {Array} [origPixelData] - Original pixel data for an image after it has undergone false color mapping\n * @property {ImageStats} [stats] - Statistics for the last redraw of the image\n * @property {Object} cachedLut - Cached Lookup Table for this image.\n * @property {String|Colormap} [colormap] - Depreacted. Use viewport.colormap instead. an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * A Viewport Settings Object Cornerstone\n *\n * @typedef {Object} Viewport\n * @memberof Objects\n * @property {Number} [scale=1.0] - The scale applied to the image. A scale of 1.0 will display no zoom (one image pixel takes up one screen pixel). A scale of 2.0 will be double zoom and a scale of .5 will be zoomed out by 2x\n * @property {vec2} [translation] - An object with properties x and y which describe the translation to apply in the pixel coordinate system. Note that the image is initially displayed centered in the enabled element with a x and y translation of 0 and 0 respectively.\n * @property {VOI} [voi] - an object with properties windowWidth and windowCenter.\n * @property {boolean} [invert=false] - Whether or not the image is inverted.\n * @property {boolean} [pixelReplication=false] - true if the image smooth / interpolation should be used when zoomed in on the image or false if pixel replication should be used.\n * @property {boolean} [hflip=false] - true if the image is flipped horizontally. Default is false\n * @property {boolean} [vflip=false] - true if the image is flipped vertically. Default is false\n * @property {Number} [rotation=0] - the rotation of the image (90 degree increments). Default is 0\n * @property {LUT} [modalityLUT] - the modality LUT to apply or undefined if none\n * @property {LUT} [voiLUT] - the modality LUT to apply or undefined if none\n * @property {String|Colormap} [colormap] - an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * An Enabled Element in Cornerstone\n *\n * @typedef {Object} EnabledElement\n * @memberof Objects\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n * @property {EnabledElementLayer[]} [layers] - The layers that have been added to the enabledElement\n * @property {Boolean} [syncViewports] - Whether or not to synchronize the viewport parameters\n * for each of the enabled element's layers\n * @property {Boolean} [lastSyncViewportsState] - The previous state for the sync viewport boolean\n */\n\n/**\n * An Enabled Element Layer in Cornerstone\n *\n * @typedef {Object} EnabledElementLayer\n * @memberof Objects\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Object} [options] - Layer drawing options\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n */\n\n/**\n * An Image Load Object\n *\n * @typedef {Object} ImageLoadObject\n * @memberof Objects\n * @property {Promise} promise - The Promise tracking the loading of this image\n * @property {Function|undefined} cancelFn - A function to cancel the image load request\n */\n\n/**\n * Retrieves a Cornerstone Enabled Element object\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n *\n * @returns {EnabledElement} A Cornerstone Enabled Element\n * @memberof EnabledElements\n */\n\nfunction getEnabledElement(element) {\n  if (element === undefined) {\n    throw new Error('getEnabledElement: parameter element must not be undefined');\n  }\n\n  for (var i = 0; i < enabledElements.length; i++) {\n    if (enabledElements[i].element === element) {\n      return enabledElements[i];\n    }\n  }\n\n  throw new Error('element not enabled');\n}\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {EnabledElement} enabledElement A Cornerstone enabledElement Object\n * @returns {void}\n * @memberof EnabledElements\n */\n\nfunction addEnabledElement(enabledElement) {\n  if (enabledElement === undefined) {\n    throw new Error('getEnabledElement: enabledElement element must not be undefined');\n  }\n\n  enabledElements.push(enabledElement);\n}\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {string} imageId A Cornerstone Image ID\n * @returns {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n * @memberof EnabledElements\n */\n\nfunction getEnabledElementsByImageId(imageId) {\n  var ees = [];\n  enabledElements.forEach(function (enabledElement) {\n    if (enabledElement.image && enabledElement.image.imageId === imageId) {\n      ees.push(enabledElement);\n    }\n  });\n  return ees;\n}\n/**\n * Retrieve all of the currently enabled Cornerstone elements\n *\n * @return {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n * @memberof EnabledElements\n */\n\nfunction getEnabledElements() {\n  return enabledElements;\n}\n\n/***/ }),\n\n/***/ \"./events.js\":\n/*!*******************!*\\\n  !*** ./events.js ***!\n  \\*******************/\n/*! exports provided: default, events */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_115003__) {\n\n\"use strict\";\n__nested_webpack_require_115003__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_115003__.d(__nested_webpack_exports__, \"events\", function() { return events; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar EVENTS = {\n  NEW_IMAGE: 'cornerstonenewimage',\n  INVALIDATED: 'cornerstoneinvalidated',\n  PRE_RENDER: 'cornerstoneprerender',\n  IMAGE_CACHE_MAXIMUM_SIZE_CHANGED: 'cornerstoneimagecachemaximumsizechanged',\n  IMAGE_CACHE_PROMISE_REMOVED: 'cornerstoneimagecachepromiseremoved',\n  IMAGE_CACHE_FULL: 'cornerstoneimagecachefull',\n  IMAGE_CACHE_CHANGED: 'cornerstoneimagecachechanged',\n  WEBGL_TEXTURE_REMOVED: 'cornerstonewebgltextureremoved',\n  WEBGL_TEXTURE_CACHE_FULL: 'cornerstonewebgltexturecachefull',\n  IMAGE_LOADED: 'cornerstoneimageloaded',\n  IMAGE_LOAD_PROGRESS: 'cornerstoneimageloadprogress',\n  IMAGE_LOAD_FAILED: 'cornerstoneimageloadfailed',\n  ELEMENT_RESIZED: 'cornerstoneelementresized',\n  IMAGE_RENDERED: 'cornerstoneimagerendered',\n  LAYER_ADDED: 'cornerstonelayeradded',\n  LAYER_REMOVED: 'cornerstonelayerremoved',\n  ACTIVE_LAYER_CHANGED: 'cornerstoneactivelayerchanged',\n  ELEMENT_DISABLED: 'cornerstoneelementdisabled',\n  ELEMENT_ENABLED: 'cornerstoneelementenabled'\n};\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (EVENTS);\n/**\n * EventTarget - Provides the [EventTarget](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget) interface\n *\n * @class\n * @memberof Polyfills\n */\n\nvar EventTarget = /*#__PURE__*/function () {\n  function EventTarget() {\n    _classCallCheck(this, EventTarget);\n\n    this.listeners = {};\n    this.namespaces = {};\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addEventNamespaceListener\",\n    value: function addEventNamespaceListener(type, callback) {\n      if (type.indexOf('.') <= 0) {\n        return;\n      }\n\n      this.namespaces[type] = callback;\n      this.addEventListener(type.split('.')[0], callback);\n    }\n  }, {\n    key: \"removeEventNamespaceListener\",\n    value: function removeEventNamespaceListener(type) {\n      if (type.indexOf('.') <= 0 || !this.namespaces[type]) {\n        return;\n      }\n\n      this.removeEventListener(type.split('.')[0], this.namespaces[type]);\n      delete this.namespaces[type];\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(type, callback) {\n      // Check if it is an event namespace\n      if (type.indexOf('.') > 0) {\n        this.addEventNamespaceListener(type, callback);\n        return;\n      }\n\n      if (!(type in this.listeners)) {\n        this.listeners[type] = [];\n      }\n\n      this.listeners[type].push(callback);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, callback) {\n      // Check if it is an event namespace\n      if (type.indexOf('.') > 0) {\n        this.removeEventNamespaceListener(type);\n        return;\n      }\n\n      if (!(type in this.listeners)) {\n        return;\n      }\n\n      var stack = this.listeners[type];\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        if (stack[i] === callback) {\n          stack.splice(i, 1);\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (!(event.type in this.listeners)) {\n        return true;\n      }\n\n      var stack = this.listeners[event.type].slice();\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        stack[i].call(this, event);\n      }\n\n      return !event.defaultPrevented;\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar events = new EventTarget();\n\n/***/ }),\n\n/***/ \"./falseColorMapping.js\":\n/*!******************************!*\\\n  !*** ./falseColorMapping.js ***!\n  \\******************************/\n/*! exports provided: convertImageToFalseColorImage, convertToFalseColorImage, restoreImage */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_119498__) {\n\n\"use strict\";\n__nested_webpack_require_119498__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_119498__.d(__nested_webpack_exports__, \"convertImageToFalseColorImage\", function() { return convertImageToFalseColorImage; });\n/* harmony export (binding) */ __nested_webpack_require_119498__.d(__nested_webpack_exports__, \"convertToFalseColorImage\", function() { return convertToFalseColorImage; });\n/* harmony export (binding) */ __nested_webpack_require_119498__.d(__nested_webpack_exports__, \"restoreImage\", function() { return restoreImage; });\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_119498__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _pixelDataToFalseColorData_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_119498__(/*! ./pixelDataToFalseColorData.js */ \"./pixelDataToFalseColorData.js\");\n/* harmony import */ var _colors_colormap_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_119498__(/*! ./colors/colormap.js */ \"./colors/colormap.js\");\n\n\n\n/**\n * Retrieves the minimum and maximum pixel values from an Array of pixel data\n *\n * @param {Array} pixelData The input pixel data array\n *\n * @returns {{minPixelValue: Number, maxPixelValue: Number}} The minimum and maximum pixel values in the input Array\n */\n\nfunction getPixelValues(pixelData) {\n  var minPixelValue = Number.MAX_VALUE;\n  var maxPixelValue = Number.MIN_VALUE;\n  var len = pixelData.length;\n  var pixel;\n\n  for (var i = 0; i < len; i++) {\n    pixel = pixelData[i];\n    minPixelValue = minPixelValue < pixel ? minPixelValue : pixel;\n    maxPixelValue = maxPixelValue > pixel ? maxPixelValue : pixel;\n  }\n\n  return {\n    minPixelValue: minPixelValue,\n    maxPixelValue: maxPixelValue\n  };\n}\n/**\n * Retrieve a function that will allow an image object to be reset to its original form\n * after a false color mapping transformation\n *\n * @param {Image} image A Cornerstone Image Object\n *\n * @return {Function} A function for resetting an Image Object to its original form\n */\n\n\nfunction getRestoreImageMethod(image) {\n  if (image.restore) {\n    return image.restore;\n  }\n\n  var color = image.color;\n  var rgba = image.rgba;\n  var cachedLut = image.cachedLut;\n  var slope = image.slope;\n  var windowWidth = image.windowWidth;\n  var windowCenter = image.windowCenter;\n  var minPixelValue = image.minPixelValue;\n  var maxPixelValue = image.maxPixelValue;\n  return function () {\n    image.color = color;\n    image.rgba = rgba;\n    image.cachedLut = cachedLut;\n    image.slope = slope;\n    image.windowWidth = windowWidth;\n    image.windowCenter = windowCenter;\n    image.minPixelValue = minPixelValue;\n    image.maxPixelValue = maxPixelValue;\n\n    if (image.origPixelData) {\n      var pixelData = image.origPixelData;\n\n      image.getPixelData = function () {\n        return pixelData;\n      };\n    } // Remove some attributes added by false color mapping\n\n\n    image.origPixelData = undefined;\n    image.colormapId = undefined;\n    image.falseColor = undefined;\n  };\n} //\n// Then we need to make sure it will be converted into a colormap object if it's as string.\n\n/**\n * User can pass a colormap or its id as string to some of these public functions.\n * Then we need to make sure it will be converted into a colormap object if it's a string.\n *\n * @param {*} colormap A colormap ID or Object\n * @return {*} The colormap\n */\n\n\nfunction ensuresColormap(colormap) {\n  if (colormap && typeof colormap === 'string') {\n    colormap = Object(_colors_colormap_js__WEBPACK_IMPORTED_MODULE_2__[\"getColormap\"])(colormap);\n  }\n\n  return colormap;\n}\n/**\n * Restores a false color image to its original version\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Boolean} True if the image object had a valid restore function, which was run. Otherwise, false.\n */\n\n\nfunction restoreImage(image) {\n  if (image.restore && typeof image.restore === 'function') {\n    image.restore();\n    return true;\n  }\n\n  return false;\n}\n/**\n * Convert an image to a false color image\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {String|Object} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {Boolean} - Whether or not the image has been converted to a false color image\n */\n\n\nfunction convertImageToFalseColorImage(image, colormap) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  } // User can pass a colormap id or a colormap object\n\n\n  colormap = ensuresColormap(colormap);\n  var colormapId = colormap.getId(); // Doesn't do anything if colormapId hasn't changed\n\n  if (image.colormapId === colormapId) {\n    // It has already being converted into a false color image\n    // Using the colormapId passed as parameter\n    return false;\n  } // Restore the image attributes updated when converting to a false color image\n\n\n  restoreImage(image); // Convert the image to a false color image\n\n  if (colormapId) {\n    var minPixelValue = image.minPixelValue || 0;\n    var maxPixelValue = image.maxPixelValue || 255;\n    image.restore = getRestoreImageMethod(image);\n    var lookupTable = colormap.createLookupTable();\n    lookupTable.setTableRange(minPixelValue, maxPixelValue); // Update the pixel data and render the new image\n\n    Object(_pixelDataToFalseColorData_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image, lookupTable); // Update min and max pixel values\n\n    var pixelValues = getPixelValues(image.getPixelData());\n    image.minPixelValue = pixelValues.minPixelValue;\n    image.maxPixelValue = pixelValues.maxPixelValue;\n    image.windowWidth = 255;\n    image.windowCenter = 128; // Cache the last colormapId used for performance\n    // Then it doesn't need to be re-rendered on next\n    // Time if the user hasn't updated it\n\n    image.colormapId = colormapId;\n  } // Return `true` to tell the caller that the image has got updated\n\n\n  return true;\n}\n/**\n * Convert the image of a element to a false color image\n *\n * @param {HTMLElement} element The Cornerstone element\n * @param {*} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {void}\n */\n\n\nfunction convertToFalseColorImage(element, colormap) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  return convertImageToFalseColorImage(enabledElement.image, colormap);\n}\n\n\n\n/***/ }),\n\n/***/ \"./fitToWindow.js\":\n/*!************************!*\\\n  !*** ./fitToWindow.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_126052__) {\n\n\"use strict\";\n__nested_webpack_require_126052__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_126052__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_126052__(/*! ./updateImage.js */ \"./updateImage.js\");\n/* harmony import */ var _internal_getImageFitScale_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_126052__(/*! ./internal/getImageFitScale.js */ \"./internal/getImageFitScale.js\");\n\n\n\n/**\n * Adjusts an image's scale and translation so the image is centered and all pixels\n * in the image are viewable.\n *\n * @param {HTMLElement} element The Cornerstone element to update\n * @returns {void}\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var image = enabledElement.image; // The new scale is the minimum of the horizontal and vertical scale values\n\n  enabledElement.viewport.scale = Object(_internal_getImageFitScale_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement.canvas, image, enabledElement.viewport.rotation).scaleFactor;\n  enabledElement.viewport.translation.x = 0;\n  enabledElement.viewport.translation.y = 0;\n  Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element);\n});\n\n/***/ }),\n\n/***/ \"./generateUUID.js\":\n/*!*************************!*\\\n  !*** ./generateUUID.js ***!\n  \\*************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_127689__) {\n\n\"use strict\";\n__nested_webpack_require_127689__.r(__nested_webpack_exports__);\n/**\n* Generates a UUID for the enabledElement.\n*\n* @return {String} the UUID.\n*/\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function () {\n  // https://stackoverflow.com/a/8809472/9208320 Public Domain/MIT\n\n  /* eslint no-bitwise: [\"error\", { \"allow\": [\"&\",\"|\"] }] */\n  var d = new Date().getTime();\n\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // Use high-precision timer if available\n  }\n\n  return 'x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);\n  });\n});\n\n/***/ }),\n\n/***/ \"./getDefaultViewportForImage.js\":\n/*!***************************************!*\\\n  !*** ./getDefaultViewportForImage.js ***!\n  \\***************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_128765__) {\n\n\"use strict\";\n__nested_webpack_require_128765__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_128765__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_128765__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n\n\n/**\n * Returns a default viewport for display the specified image on the specified\n * enabled element.  The default viewport is fit to window\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image A Cornerstone Image Object\n *\n * @returns {Viewport} The default viewport for the image\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, image) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  return Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement.canvas, image);\n});\n\n/***/ }),\n\n/***/ \"./getImage.js\":\n/*!*********************!*\\\n  !*** ./getImage.js ***!\n  \\*********************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_130036__) {\n\n\"use strict\";\n__nested_webpack_require_130036__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_130036__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n\n/**\n * Returns the currently displayed image for an element or undefined if no image has\n * been displayed yet\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @returns {Image} The Cornerstone Image Object displayed in this element\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  return enabledElement.image;\n});\n\n/***/ }),\n\n/***/ \"./getPixels.js\":\n/*!**********************!*\\\n  !*** ./getPixels.js ***!\n  \\**********************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_130961__) {\n\n\"use strict\";\n__nested_webpack_require_130961__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_130961__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _getStoredPixels_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_130961__(/*! ./getStoredPixels.js */ \"./getStoredPixels.js\");\n/* harmony import */ var _internal_getModalityLUT_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_130961__(/*! ./internal/getModalityLUT.js */ \"./internal/getModalityLUT.js\");\n\n\n\n/**\n * Retrieves an array of pixels from a rectangular region with modality LUT transformation applied\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Number} x The x coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} y The y coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} width The width of the of the sampling rectangle in image coordinates\n * @param {Number} height The height of the of the sampling rectangle in image coordinates\n * @returns {Array} The modality pixel value of the pixels in the sampling rectangle\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, x, y, width, height) {\n  var storedPixels = Object(_getStoredPixels_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element, x, y, width, height);\n  var ee = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var mlutfn = Object(_internal_getModalityLUT_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(ee.image.slope, ee.image.intercept, ee.viewport.modalityLUT);\n  return storedPixels.map(mlutfn);\n});\n\n/***/ }),\n\n/***/ \"./getStoredPixels.js\":\n/*!****************************!*\\\n  !*** ./getStoredPixels.js ***!\n  \\****************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_132918__) {\n\n\"use strict\";\n__nested_webpack_require_132918__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_132918__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n\n/**\n * Retrieves an array of stored pixel values from a rectangular region of an image\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Number} x The x coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} y The y coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} width The width of the of the sampling rectangle in image coordinates\n * @param {Number} height The height of the of the sampling rectangle in image coordinates\n * @returns {Array} The stored pixel value of the pixels in the sampling rectangle\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, x, y, width, height) {\n  if (element === undefined) {\n    throw new Error('getStoredPixels: parameter element must not be undefined');\n  }\n\n  x = Math.round(x);\n  y = Math.round(y);\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var storedPixels = [];\n  var index = 0;\n  var pixelData = enabledElement.image.getPixelData();\n\n  for (var row = 0; row < height; row++) {\n    for (var column = 0; column < width; column++) {\n      var spIndex = (row + y) * enabledElement.image.columns + (column + x);\n      storedPixels[index++] = pixelData[spIndex];\n    }\n  }\n\n  return storedPixels;\n});\n\n/***/ }),\n\n/***/ \"./getViewport.js\":\n/*!************************!*\\\n  !*** ./getViewport.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_134735__) {\n\n\"use strict\";\n__nested_webpack_require_134735__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_134735__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n\n/**\n * Retrieves the viewport for the specified enabled element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @returns {Viewport|undefined} The Cornerstone Viewport settings for this element, if they exist. Otherwise, undefined\n * @memberof ViewportSettings\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var viewport = enabledElement.viewport;\n\n  if (viewport === undefined) {\n    return;\n  } // Return a copy of the viewport\n\n\n  return Object.assign({}, viewport);\n});\n\n/***/ }),\n\n/***/ \"./imageCache.js\":\n/*!***********************!*\\\n  !*** ./imageCache.js ***!\n  \\***********************/\n/*! exports provided: cachedImages, setMaximumSizeBytes, putImageLoadObject, getImageLoadObject, removeImageLoadObject, getCacheInfo, purgeCache, changeImageIdCacheSize, default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_135974__) {\n\n\"use strict\";\n__nested_webpack_require_135974__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"cachedImages\", function() { return cachedImages; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"setMaximumSizeBytes\", function() { return setMaximumSizeBytes; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"putImageLoadObject\", function() { return putImageLoadObject; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"getImageLoadObject\", function() { return getImageLoadObject; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"removeImageLoadObject\", function() { return removeImageLoadObject; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"getCacheInfo\", function() { return getCacheInfo; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"purgeCache\", function() { return purgeCache; });\n/* harmony export (binding) */ __nested_webpack_require_135974__.d(__nested_webpack_exports__, \"changeImageIdCacheSize\", function() { return changeImageIdCacheSize; });\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_135974__(/*! ./events.js */ \"./events.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_135974__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n\n\n/**\n * This module deals with caching images\n * @module ImageCache\n */\n\nvar maximumSizeInBytes = 1024 * 1024 * 1024; // 1 GB\n\nvar cacheSizeInBytes = 0; // Dictionary of imageId to cachedImage objects\n\nvar imageCacheDict = {}; // Array of cachedImage objects\n\nvar cachedImages = [];\n/** Sets the maximum size of cache and purges cache contents if necessary.\n *\n * @param {number} numBytes The maximun size that the cache should occupy.\n * @returns {void}\n */\n\nfunction setMaximumSizeBytes(numBytes) {\n  if (numBytes === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\n  }\n\n  if (numBytes.toFixed === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\n  }\n\n  maximumSizeInBytes = numBytes;\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_MAXIMUM_SIZE_CHANGED);\n  purgeCacheIfNecessary();\n}\n/**\n * Purges the cache if size exceeds maximum\n * @returns {void}\n */\n\nfunction purgeCacheIfNecessary() {\n  // If max cache size has not been exceeded, do nothing\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\n    return;\n  } // Cache size has been exceeded, create list of images sorted by timeStamp\n  // So we can purge the least recently used image\n\n\n  function compare(a, b) {\n    if (a.timeStamp > b.timeStamp) {\n      return -1;\n    }\n\n    if (a.timeStamp < b.timeStamp) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  cachedImages.sort(compare); // Remove images as necessary)\n\n  while (cacheSizeInBytes > maximumSizeInBytes) {\n    var lastCachedImage = cachedImages[cachedImages.length - 1];\n    var imageId = lastCachedImage.imageId;\n    removeImageLoadObject(imageId);\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_PROMISE_REMOVED, {\n      imageId: imageId\n    });\n  }\n\n  var cacheInfo = getCacheInfo();\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_FULL, cacheInfo);\n}\n/**\n * Puts a new image loader into the cache\n *\n * @param {string} imageId ImageId of the image loader\n * @param {Object} imageLoadObject The object that is loading or loaded the image\n * @returns {void}\n */\n\n\nfunction putImageLoadObject(imageId, imageLoadObject) {\n  if (imageId === undefined) {\n    throw new Error('putImageLoadObject: imageId must not be undefined');\n  }\n\n  if (imageLoadObject.promise === undefined) {\n    throw new Error('putImageLoadObject: imageLoadObject.promise must not be undefined');\n  }\n\n  if (imageCacheDict.hasOwnProperty(imageId) === true) {\n    throw new Error('putImageLoadObject: imageId already in cache');\n  }\n\n  if (imageLoadObject.cancelFn && typeof imageLoadObject.cancelFn !== 'function') {\n    throw new Error('putImageLoadObject: imageLoadObject.cancelFn must be a function');\n  }\n\n  var cachedImage = {\n    loaded: false,\n    imageId: imageId,\n    sharedCacheKey: undefined,\n    // The sharedCacheKey for this imageId.  undefined by default\n    imageLoadObject: imageLoadObject,\n    timeStamp: Date.now(),\n    sizeInBytes: 0\n  };\n  imageCacheDict[imageId] = cachedImage;\n  cachedImages.push(cachedImage);\n  imageLoadObject.promise.then(function (image) {\n    if (cachedImages.indexOf(cachedImage) === -1) {\n      // If the image has been purged before being loaded, we stop here.\n      return;\n    }\n\n    cachedImage.loaded = true;\n    cachedImage.image = image;\n\n    if (image.sizeInBytes === undefined) {\n      throw new Error('putImageLoadObject: image.sizeInBytes must not be undefined');\n    }\n\n    if (image.sizeInBytes.toFixed === undefined) {\n      throw new Error('putImageLoadObject: image.sizeInBytes is not a number');\n    }\n\n    cachedImage.sizeInBytes = image.sizeInBytes;\n    cacheSizeInBytes += cachedImage.sizeInBytes;\n    var eventDetails = {\n      action: 'addImage',\n      image: cachedImage\n    };\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_CHANGED, eventDetails);\n    cachedImage.sharedCacheKey = image.sharedCacheKey;\n    purgeCacheIfNecessary();\n  }, function () {\n    var cachedImage = imageCacheDict[imageId];\n    cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n    delete imageCacheDict[imageId];\n  });\n}\n/**\n * Retuns the object that is loading a given imageId\n *\n * @param {string} imageId Image ID\n * @returns {void}\n */\n\nfunction getImageLoadObject(imageId) {\n  if (imageId === undefined) {\n    throw new Error('getImageLoadObject: imageId must not be undefined');\n  }\n\n  var cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    return;\n  } // Bump time stamp for cached image\n\n\n  cachedImage.timeStamp = Date.now();\n  return cachedImage.imageLoadObject;\n}\n/**\n * Removes the image loader associated with a given Id from the cache\n *\n * @param {string} imageId Image ID\n * @returns {void}\n */\n\nfunction removeImageLoadObject(imageId) {\n  if (imageId === undefined) {\n    throw new Error('removeImageLoadObject: imageId must not be undefined');\n  }\n\n  var cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    throw new Error('removeImageLoadObject: imageId was not present in imageCache');\n  }\n\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\n  var eventDetails = {\n    action: 'deleteImage',\n    image: cachedImage\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_CHANGED, eventDetails);\n  decache(cachedImage.imageLoadObject);\n  delete imageCacheDict[imageId];\n}\n/**\n * @typedef {Object} CacheInformation\n * @property {number} maximumSizeInBytes  The maximum size of the cache in bytes\n * @property {number} cacheSizeInBytes Currently occupied space in the cache in bytes\n * @property {number} numberOfImagesCached Number of ImageLoaders in the cache\n * @returns {void}\n */\n\n/**\n * Gets the current state of the cache\n * @returns {void}\n */\n\nfunction getCacheInfo() {\n  return {\n    maximumSizeInBytes: maximumSizeInBytes,\n    cacheSizeInBytes: cacheSizeInBytes,\n    numberOfImagesCached: cachedImages.length\n  };\n} // This method should only be called by `removeImageLoadObject` because it's\n// The one that knows how to deal with shared cache keys and cache size.\n\n/**\n * INTERNAL: Removes and ImageLoader from the cache\n *\n * @param {Object} imageLoadObject Image Loader Object to remove\n * @returns {void}\n */\n\nfunction decache(imageLoadObject) {\n  imageLoadObject.promise.then(function () {\n    if (imageLoadObject.decache) {\n      imageLoadObject.decache();\n    }\n  }, function () {\n    if (imageLoadObject.decache) {\n      imageLoadObject.decache();\n    }\n  });\n}\n/**\n * Removes all images from cache\n * @returns {void}\n */\n\n\nfunction purgeCache() {\n  while (cachedImages.length > 0) {\n    var removedCachedImage = cachedImages[0];\n    removeImageLoadObject(removedCachedImage.imageId);\n  }\n}\n/**\n * Updates the space than an image is using in the cache\n *\n * @param {string} imageId Image ID\n * @param {number} newCacheSize New image size\n * @returns {void}\n */\n\nfunction changeImageIdCacheSize(imageId, newCacheSize) {\n  var cacheEntry = imageCacheDict[imageId];\n\n  if (cacheEntry) {\n    cacheEntry.imageLoadObject.promise.then(function (image) {\n      var cacheSizeDifference = newCacheSize - image.sizeInBytes;\n      image.sizeInBytes = newCacheSize;\n      cacheEntry.sizeInBytes = newCacheSize;\n      cacheSizeInBytes += cacheSizeDifference;\n      var eventDetails = {\n        action: 'changeImageSize',\n        image: image\n      };\n      Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].IMAGE_CACHE_CHANGED, eventDetails);\n    });\n  }\n}\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  imageCache: imageCacheDict,\n  cachedImages: cachedImages,\n  setMaximumSizeBytes: setMaximumSizeBytes,\n  putImageLoadObject: putImageLoadObject,\n  getImageLoadObject: getImageLoadObject,\n  removeImageLoadObject: removeImageLoadObject,\n  getCacheInfo: getCacheInfo,\n  purgeCache: purgeCache,\n  changeImageIdCacheSize: changeImageIdCacheSize\n});\n\n/***/ }),\n\n/***/ \"./imageLoader.js\":\n/*!************************!*\\\n  !*** ./imageLoader.js ***!\n  \\************************/\n/*! exports provided: loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_146315__) {\n\n\"use strict\";\n__nested_webpack_require_146315__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_146315__.d(__nested_webpack_exports__, \"loadImage\", function() { return loadImage; });\n/* harmony export (binding) */ __nested_webpack_require_146315__.d(__nested_webpack_exports__, \"loadAndCacheImage\", function() { return loadAndCacheImage; });\n/* harmony export (binding) */ __nested_webpack_require_146315__.d(__nested_webpack_exports__, \"registerImageLoader\", function() { return registerImageLoader; });\n/* harmony export (binding) */ __nested_webpack_require_146315__.d(__nested_webpack_exports__, \"registerUnknownImageLoader\", function() { return registerUnknownImageLoader; });\n/* harmony import */ var _imageCache_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_146315__(/*! ./imageCache.js */ \"./imageCache.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_146315__(/*! ./events.js */ \"./events.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_146315__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n\n\n\n/**\r\n * This module deals with ImageLoaders, loading images and caching images\r\n * @module ImageLoader\r\n */\n\nvar imageLoaders = {};\nvar unknownImageLoader;\n/**\r\n * Load an image using a registered Cornerstone Image Loader.\r\n *\r\n * The image loader that is used will be\r\n * determined by the image loader scheme matching against the imageId.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {ImageLoadObject} An Object which can be used to act after an image is loaded or loading fails\r\n * @memberof ImageLoader\r\n */\n\nfunction loadImageFromImageLoader(imageId, options) {\n  var colonIndex = imageId.indexOf(':');\n  var scheme = imageId.substring(0, colonIndex);\n  var loader = imageLoaders[scheme];\n\n  if (loader === undefined || loader === null) {\n    if (unknownImageLoader !== undefined) {\n      return unknownImageLoader(imageId);\n    }\n\n    throw new Error('loadImageFromImageLoader: no image loader for imageId');\n  }\n\n  var imageLoadObject = loader(imageId, options); // Broadcast an image loaded event once the image is loaded\n\n  imageLoadObject.promise.then(function (image) {\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_1__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].IMAGE_LOADED, {\n      image: image\n    });\n  }, function (error) {\n    var errorObject = {\n      imageId: imageId,\n      error: error\n    };\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_1__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].IMAGE_LOAD_FAILED, errorObject);\n  });\n  return imageLoadObject;\n}\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred.  The loaded image is not stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {ImageLoadObject} An Object which can be used to act after an image is loaded or loading fails\r\n * @memberof ImageLoader\r\n */\n\n\nfunction loadImage(imageId, options) {\n  if (imageId === undefined) {\n    throw new Error('loadImage: parameter imageId must not be undefined');\n  }\n\n  var imageLoadObject = Object(_imageCache_js__WEBPACK_IMPORTED_MODULE_0__[\"getImageLoadObject\"])(imageId);\n\n  if (imageLoadObject !== undefined) {\n    return imageLoadObject.promise;\n  }\n\n  return loadImageFromImageLoader(imageId, options).promise;\n} //\n\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred. The image is stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {ImageLoadObject} Image Loader Object\r\n * @memberof ImageLoader\r\n */\n\nfunction loadAndCacheImage(imageId, options) {\n  if (imageId === undefined) {\n    throw new Error('loadAndCacheImage: parameter imageId must not be undefined');\n  }\n\n  var imageLoadObject = Object(_imageCache_js__WEBPACK_IMPORTED_MODULE_0__[\"getImageLoadObject\"])(imageId);\n\n  if (imageLoadObject !== undefined) {\n    return imageLoadObject.promise;\n  }\n\n  imageLoadObject = loadImageFromImageLoader(imageId, options);\n  Object(_imageCache_js__WEBPACK_IMPORTED_MODULE_0__[\"putImageLoadObject\"])(imageId, imageLoadObject);\n  return imageLoadObject.promise;\n}\n/**\r\n * Registers an imageLoader plugin with cornerstone for the specified scheme\r\n *\r\n * @param {String} scheme The scheme to use for this image loader (e.g. 'dicomweb', 'wadouri', 'http')\r\n * @param {Function} imageLoader A Cornerstone Image Loader function\r\n * @returns {void}\r\n * @memberof ImageLoader\r\n */\n\nfunction registerImageLoader(scheme, imageLoader) {\n  imageLoaders[scheme] = imageLoader;\n}\n/**\r\n * Registers a new unknownImageLoader and returns the previous one\r\n *\r\n * @param {Function} imageLoader A Cornerstone Image Loader\r\n *\r\n * @returns {Function|Undefined} The previous Unknown Image Loader\r\n * @memberof ImageLoader\r\n */\n\nfunction registerUnknownImageLoader(imageLoader) {\n  var oldImageLoader = unknownImageLoader;\n  unknownImageLoader = imageLoader;\n  return oldImageLoader;\n}\n\n/***/ }),\n\n/***/ \"./index.js\":\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/*! exports provided: drawImage, generateLut, getDefaultViewport, setDefaultViewport, requestAnimationFrame, storedPixelDataToCanvasImageData, storedColorPixelDataToCanvasImageData, storedPixelDataToCanvasImageDataColorLUT, storedPixelDataToCanvasImageDataPseudocolorLUT, internal, renderLabelMapImage, renderPseudoColorImage, renderColorImage, renderGrayscaleImage, renderWebImage, renderToCanvas, canvasToPixel, disable, displayImage, draw, drawInvalidated, enable, getElementData, removeElementData, getEnabledElement, addEnabledElement, getEnabledElementsByImageId, getEnabledElements, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, getActiveLayer, purgeLayers, setLayerImage, fitToWindow, getDefaultViewportForImage, getDisplayedArea, getImage, getPixels, getStoredPixels, getViewport, loadImage, loadAndCacheImage, registerImageLoader, registerUnknownImageLoader, invalidate, invalidateImageId, pageToPixel, pixelToCanvas, reset, resize, setToPixelCoordinateSystem, setViewport, updateImage, pixelDataToFalseColorData, rendering, imageCache, metaData, webGL, colors, convertImageToFalseColorImage, convertToFalseColorImage, restoreImage, EVENTS, events, triggerEvent, imageLoadPoolManager, imageRetrievalPoolManager, RequestPoolManager, default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_153216__) {\n\n\"use strict\";\n__nested_webpack_require_153216__.r(__nested_webpack_exports__);\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_153216__(/*! ./events.js */ \"./events.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"EVENTS\", function() { return _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"events\", function() { return _events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"]; });\n\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_153216__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getEnabledElement\", function() { return _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"addEnabledElement\", function() { return _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"addEnabledElement\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getEnabledElementsByImageId\", function() { return _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElementsByImageId\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getEnabledElements\", function() { return _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElements\"]; });\n\n/* harmony import */ var _layers_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_153216__(/*! ./layers.js */ \"./layers.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"addLayer\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"addLayer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"removeLayer\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"removeLayer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getLayer\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getLayer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getLayers\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getLayers\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getVisibleLayers\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getVisibleLayers\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"setActiveLayer\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"setActiveLayer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getActiveLayer\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getActiveLayer\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"purgeLayers\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"purgeLayers\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"setLayerImage\", function() { return _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"setLayerImage\"]; });\n\n/* harmony import */ var _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_153216__(/*! ./falseColorMapping.js */ \"./falseColorMapping.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"convertImageToFalseColorImage\", function() { return _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"convertImageToFalseColorImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"convertToFalseColorImage\", function() { return _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"convertToFalseColorImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"restoreImage\", function() { return _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"restoreImage\"]; });\n\n/* harmony import */ var _enabledElementData_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_153216__(/*! ./enabledElementData.js */ \"./enabledElementData.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getElementData\", function() { return _enabledElementData_js__WEBPACK_IMPORTED_MODULE_4__[\"getElementData\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"removeElementData\", function() { return _enabledElementData_js__WEBPACK_IMPORTED_MODULE_4__[\"removeElementData\"]; });\n\n/* harmony import */ var _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_153216__(/*! ./imageLoader.js */ \"./imageLoader.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"loadImage\", function() { return _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"loadImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"loadAndCacheImage\", function() { return _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"loadAndCacheImage\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"registerImageLoader\", function() { return _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"registerImageLoader\"]; });\n\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"registerUnknownImageLoader\", function() { return _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"registerUnknownImageLoader\"]; });\n\n/* harmony import */ var _requestPool_imageLoadPoolManager_ts__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_153216__(/*! ./requestPool/imageLoadPoolManager.ts */ \"./requestPool/imageLoadPoolManager.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"imageLoadPoolManager\", function() { return _requestPool_imageLoadPoolManager_ts__WEBPACK_IMPORTED_MODULE_6__[\"default\"]; });\n\n/* harmony import */ var _requestPool_imageRetrievalPoolManager_ts__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_153216__(/*! ./requestPool/imageRetrievalPoolManager.ts */ \"./requestPool/imageRetrievalPoolManager.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"imageRetrievalPoolManager\", function() { return _requestPool_imageRetrievalPoolManager_ts__WEBPACK_IMPORTED_MODULE_7__[\"default\"]; });\n\n/* harmony import */ var _requestPool_RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_153216__(/*! ./requestPool/RequestPoolManager.ts */ \"./requestPool/RequestPoolManager.ts\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"RequestPoolManager\", function() { return _requestPool_RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_8__[\"RequestPoolManager\"]; });\n\n/* harmony import */ var _canvasToPixel_js__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_153216__(/*! ./canvasToPixel.js */ \"./canvasToPixel.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"canvasToPixel\", function() { return _canvasToPixel_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]; });\n\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_153216__(/*! ./colors/index.js */ \"./colors/index.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"colors\", function() { return _colors_index_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"]; });\n\n/* harmony import */ var _disable_js__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_153216__(/*! ./disable.js */ \"./disable.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"disable\", function() { return _disable_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"]; });\n\n/* harmony import */ var _displayImage_js__WEBPACK_IMPORTED_MODULE_12__ = __nested_webpack_require_153216__(/*! ./displayImage.js */ \"./displayImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"displayImage\", function() { return _displayImage_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"]; });\n\n/* harmony import */ var _draw_js__WEBPACK_IMPORTED_MODULE_13__ = __nested_webpack_require_153216__(/*! ./draw.js */ \"./draw.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"draw\", function() { return _draw_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"]; });\n\n/* harmony import */ var _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_14__ = __nested_webpack_require_153216__(/*! ./internal/drawImage.js */ \"./internal/drawImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"drawImage\", function() { return _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"]; });\n\n/* harmony import */ var _drawInvalidated_js__WEBPACK_IMPORTED_MODULE_15__ = __nested_webpack_require_153216__(/*! ./drawInvalidated.js */ \"./drawInvalidated.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"drawInvalidated\", function() { return _drawInvalidated_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"]; });\n\n/* harmony import */ var _enable_js__WEBPACK_IMPORTED_MODULE_16__ = __nested_webpack_require_153216__(/*! ./enable.js */ \"./enable.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"enable\", function() { return _enable_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"]; });\n\n/* harmony import */ var _fitToWindow_js__WEBPACK_IMPORTED_MODULE_17__ = __nested_webpack_require_153216__(/*! ./fitToWindow.js */ \"./fitToWindow.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"fitToWindow\", function() { return _fitToWindow_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"]; });\n\n/* harmony import */ var _internal_generateLut_js__WEBPACK_IMPORTED_MODULE_18__ = __nested_webpack_require_153216__(/*! ./internal/generateLut.js */ \"./internal/generateLut.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"generateLut\", function() { return _internal_generateLut_js__WEBPACK_IMPORTED_MODULE_18__[\"default\"]; });\n\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_19__ = __nested_webpack_require_153216__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getDefaultViewport\", function() { return _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"]; });\n\n/* harmony import */ var _getDefaultViewportForImage_js__WEBPACK_IMPORTED_MODULE_20__ = __nested_webpack_require_153216__(/*! ./getDefaultViewportForImage.js */ \"./getDefaultViewportForImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getDefaultViewportForImage\", function() { return _getDefaultViewportForImage_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"]; });\n\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_21__ = __nested_webpack_require_153216__(/*! ./internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getDisplayedArea\", function() { return _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"]; });\n\n/* harmony import */ var _getImage_js__WEBPACK_IMPORTED_MODULE_22__ = __nested_webpack_require_153216__(/*! ./getImage.js */ \"./getImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getImage\", function() { return _getImage_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]; });\n\n/* harmony import */ var _getPixels_js__WEBPACK_IMPORTED_MODULE_23__ = __nested_webpack_require_153216__(/*! ./getPixels.js */ \"./getPixels.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getPixels\", function() { return _getPixels_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]; });\n\n/* harmony import */ var _getStoredPixels_js__WEBPACK_IMPORTED_MODULE_24__ = __nested_webpack_require_153216__(/*! ./getStoredPixels.js */ \"./getStoredPixels.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getStoredPixels\", function() { return _getStoredPixels_js__WEBPACK_IMPORTED_MODULE_24__[\"default\"]; });\n\n/* harmony import */ var _getViewport_js__WEBPACK_IMPORTED_MODULE_25__ = __nested_webpack_require_153216__(/*! ./getViewport.js */ \"./getViewport.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"getViewport\", function() { return _getViewport_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"]; });\n\n/* harmony import */ var _imageCache_js__WEBPACK_IMPORTED_MODULE_26__ = __nested_webpack_require_153216__(/*! ./imageCache.js */ \"./imageCache.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"imageCache\", function() { return _imageCache_js__WEBPACK_IMPORTED_MODULE_26__[\"default\"]; });\n\n/* harmony import */ var _internal_index_js__WEBPACK_IMPORTED_MODULE_27__ = __nested_webpack_require_153216__(/*! ./internal/index.js */ \"./internal/index.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"internal\", function() { return _internal_index_js__WEBPACK_IMPORTED_MODULE_27__[\"default\"]; });\n\n/* harmony import */ var _invalidate_js__WEBPACK_IMPORTED_MODULE_28__ = __nested_webpack_require_153216__(/*! ./invalidate.js */ \"./invalidate.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"invalidate\", function() { return _invalidate_js__WEBPACK_IMPORTED_MODULE_28__[\"default\"]; });\n\n/* harmony import */ var _invalidateImageId_js__WEBPACK_IMPORTED_MODULE_29__ = __nested_webpack_require_153216__(/*! ./invalidateImageId.js */ \"./invalidateImageId.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"invalidateImageId\", function() { return _invalidateImageId_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"]; });\n\n/* harmony import */ var _metaData_js__WEBPACK_IMPORTED_MODULE_30__ = __nested_webpack_require_153216__(/*! ./metaData.js */ \"./metaData.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"metaData\", function() { return _metaData_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"]; });\n\n/* harmony import */ var _pageToPixel_js__WEBPACK_IMPORTED_MODULE_31__ = __nested_webpack_require_153216__(/*! ./pageToPixel.js */ \"./pageToPixel.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"pageToPixel\", function() { return _pageToPixel_js__WEBPACK_IMPORTED_MODULE_31__[\"default\"]; });\n\n/* harmony import */ var _pixelDataToFalseColorData_js__WEBPACK_IMPORTED_MODULE_32__ = __nested_webpack_require_153216__(/*! ./pixelDataToFalseColorData.js */ \"./pixelDataToFalseColorData.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"pixelDataToFalseColorData\", function() { return _pixelDataToFalseColorData_js__WEBPACK_IMPORTED_MODULE_32__[\"default\"]; });\n\n/* harmony import */ var _pixelToCanvas_js__WEBPACK_IMPORTED_MODULE_33__ = __nested_webpack_require_153216__(/*! ./pixelToCanvas.js */ \"./pixelToCanvas.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"pixelToCanvas\", function() { return _pixelToCanvas_js__WEBPACK_IMPORTED_MODULE_33__[\"default\"]; });\n\n/* harmony import */ var _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_34__ = __nested_webpack_require_153216__(/*! ./rendering/renderColorImage.js */ \"./rendering/renderColorImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderColorImage\", function() { return _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_34__[\"renderColorImage\"]; });\n\n/* harmony import */ var _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_35__ = __nested_webpack_require_153216__(/*! ./rendering/renderGrayscaleImage.js */ \"./rendering/renderGrayscaleImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderGrayscaleImage\", function() { return _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_35__[\"renderGrayscaleImage\"]; });\n\n/* harmony import */ var _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_36__ = __nested_webpack_require_153216__(/*! ./rendering/renderLabelMapImage.js */ \"./rendering/renderLabelMapImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderLabelMapImage\", function() { return _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_36__[\"renderLabelMapImage\"]; });\n\n/* harmony import */ var _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_37__ = __nested_webpack_require_153216__(/*! ./rendering/renderPseudoColorImage.js */ \"./rendering/renderPseudoColorImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderPseudoColorImage\", function() { return _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_37__[\"renderPseudoColorImage\"]; });\n\n/* harmony import */ var _rendering_renderToCanvas_js__WEBPACK_IMPORTED_MODULE_38__ = __nested_webpack_require_153216__(/*! ./rendering/renderToCanvas.js */ \"./rendering/renderToCanvas.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderToCanvas\", function() { return _rendering_renderToCanvas_js__WEBPACK_IMPORTED_MODULE_38__[\"default\"]; });\n\n/* harmony import */ var _rendering_renderWebImage_js__WEBPACK_IMPORTED_MODULE_39__ = __nested_webpack_require_153216__(/*! ./rendering/renderWebImage.js */ \"./rendering/renderWebImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"renderWebImage\", function() { return _rendering_renderWebImage_js__WEBPACK_IMPORTED_MODULE_39__[\"renderWebImage\"]; });\n\n/* harmony import */ var _rendering_index_js__WEBPACK_IMPORTED_MODULE_40__ = __nested_webpack_require_153216__(/*! ./rendering/index.js */ \"./rendering/index.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"rendering\", function() { return _rendering_index_js__WEBPACK_IMPORTED_MODULE_40__[\"default\"]; });\n\n/* harmony import */ var _internal_requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_41__ = __nested_webpack_require_153216__(/*! ./internal/requestAnimationFrame.js */ \"./internal/requestAnimationFrame.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"requestAnimationFrame\", function() { return _internal_requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_41__[\"default\"]; });\n\n/* harmony import */ var _reset_js__WEBPACK_IMPORTED_MODULE_42__ = __nested_webpack_require_153216__(/*! ./reset.js */ \"./reset.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"reset\", function() { return _reset_js__WEBPACK_IMPORTED_MODULE_42__[\"default\"]; });\n\n/* harmony import */ var _resize_js__WEBPACK_IMPORTED_MODULE_43__ = __nested_webpack_require_153216__(/*! ./resize.js */ \"./resize.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"resize\", function() { return _resize_js__WEBPACK_IMPORTED_MODULE_43__[\"default\"]; });\n\n/* harmony import */ var _internal_setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_44__ = __nested_webpack_require_153216__(/*! ./internal/setDefaultViewport.js */ \"./internal/setDefaultViewport.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"setDefaultViewport\", function() { return _internal_setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_44__[\"default\"]; });\n\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_45__ = __nested_webpack_require_153216__(/*! ./setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"setToPixelCoordinateSystem\", function() { return _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_45__[\"default\"]; });\n\n/* harmony import */ var _setViewport_js__WEBPACK_IMPORTED_MODULE_46__ = __nested_webpack_require_153216__(/*! ./setViewport.js */ \"./setViewport.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"setViewport\", function() { return _setViewport_js__WEBPACK_IMPORTED_MODULE_46__[\"default\"]; });\n\n/* harmony import */ var _internal_storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_47__ = __nested_webpack_require_153216__(/*! ./internal/storedColorPixelDataToCanvasImageData.js */ \"./internal/storedColorPixelDataToCanvasImageData.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"storedColorPixelDataToCanvasImageData\", function() { return _internal_storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_47__[\"default\"]; });\n\n/* harmony import */ var _internal_storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_48__ = __nested_webpack_require_153216__(/*! ./internal/storedPixelDataToCanvasImageData.js */ \"./internal/storedPixelDataToCanvasImageData.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"storedPixelDataToCanvasImageData\", function() { return _internal_storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_48__[\"default\"]; });\n\n/* harmony import */ var _internal_storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_49__ = __nested_webpack_require_153216__(/*! ./internal/storedPixelDataToCanvasImageDataColorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataColorLUT.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"storedPixelDataToCanvasImageDataColorLUT\", function() { return _internal_storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_49__[\"default\"]; });\n\n/* harmony import */ var _internal_storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_50__ = __nested_webpack_require_153216__(/*! ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"storedPixelDataToCanvasImageDataPseudocolorLUT\", function() { return _internal_storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_50__[\"default\"]; });\n\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_51__ = __nested_webpack_require_153216__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"triggerEvent\", function() { return _triggerEvent_js__WEBPACK_IMPORTED_MODULE_51__[\"default\"]; });\n\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_52__ = __nested_webpack_require_153216__(/*! ./updateImage.js */ \"./updateImage.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"updateImage\", function() { return _updateImage_js__WEBPACK_IMPORTED_MODULE_52__[\"default\"]; });\n\n/* harmony import */ var _webgl_index_js__WEBPACK_IMPORTED_MODULE_53__ = __nested_webpack_require_153216__(/*! ./webgl/index.js */ \"./webgl/index.js\");\n/* harmony reexport (safe) */ __nested_webpack_require_153216__.d(__nested_webpack_exports__, \"webGL\", function() { return _webgl_index_js__WEBPACK_IMPORTED_MODULE_53__[\"default\"]; });\n\n// Internal (some of these are from old internal/legacy expose)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Rendering\n\n/**\n * @module PixelCoordinateSystem\n */\n\n/**\n * @module ViewportSettings\n */\n\nvar cornerstone = {\n  drawImage: _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"],\n  generateLut: _internal_generateLut_js__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n  getDefaultViewport: _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n  requestAnimationFrame: _internal_requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_41__[\"default\"],\n  storedPixelDataToCanvasImageData: _internal_storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_48__[\"default\"],\n  storedColorPixelDataToCanvasImageData: _internal_storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_47__[\"default\"],\n  storedPixelDataToCanvasImageDataColorLUT: _internal_storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_49__[\"default\"],\n  storedPixelDataToCanvasImageDataPseudocolorLUT: _internal_storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_50__[\"default\"],\n  internal: _internal_index_js__WEBPACK_IMPORTED_MODULE_27__[\"default\"],\n  renderLabelMapImage: _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_36__[\"renderLabelMapImage\"],\n  renderPseudoColorImage: _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_37__[\"renderPseudoColorImage\"],\n  renderColorImage: _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_34__[\"renderColorImage\"],\n  renderGrayscaleImage: _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_35__[\"renderGrayscaleImage\"],\n  renderWebImage: _rendering_renderWebImage_js__WEBPACK_IMPORTED_MODULE_39__[\"renderWebImage\"],\n  renderToCanvas: _rendering_renderToCanvas_js__WEBPACK_IMPORTED_MODULE_38__[\"default\"],\n  canvasToPixel: _canvasToPixel_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n  disable: _disable_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n  displayImage: _displayImage_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n  draw: _draw_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n  drawInvalidated: _drawInvalidated_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n  enable: _enable_js__WEBPACK_IMPORTED_MODULE_16__[\"default\"],\n  getElementData: _enabledElementData_js__WEBPACK_IMPORTED_MODULE_4__[\"getElementData\"],\n  removeElementData: _enabledElementData_js__WEBPACK_IMPORTED_MODULE_4__[\"removeElementData\"],\n  getEnabledElement: _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"],\n  addEnabledElement: _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"addEnabledElement\"],\n  getEnabledElementsByImageId: _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElementsByImageId\"],\n  getEnabledElements: _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElements\"],\n  addLayer: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"addLayer\"],\n  removeLayer: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"removeLayer\"],\n  getLayer: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getLayer\"],\n  getLayers: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getLayers\"],\n  getVisibleLayers: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getVisibleLayers\"],\n  setActiveLayer: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"setActiveLayer\"],\n  getActiveLayer: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"getActiveLayer\"],\n  purgeLayers: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"purgeLayers\"],\n  setLayerImage: _layers_js__WEBPACK_IMPORTED_MODULE_2__[\"setLayerImage\"],\n  fitToWindow: _fitToWindow_js__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n  getDefaultViewportForImage: _getDefaultViewportForImage_js__WEBPACK_IMPORTED_MODULE_20__[\"default\"],\n  getDisplayedArea: _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n  setDefaultViewport: _internal_setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_44__[\"default\"],\n  getImage: _getImage_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n  getPixels: _getPixels_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"],\n  getStoredPixels: _getStoredPixels_js__WEBPACK_IMPORTED_MODULE_24__[\"default\"],\n  getViewport: _getViewport_js__WEBPACK_IMPORTED_MODULE_25__[\"default\"],\n  loadImage: _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"loadImage\"],\n  loadAndCacheImage: _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"loadAndCacheImage\"],\n  registerImageLoader: _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"registerImageLoader\"],\n  registerUnknownImageLoader: _imageLoader_js__WEBPACK_IMPORTED_MODULE_5__[\"registerUnknownImageLoader\"],\n  invalidate: _invalidate_js__WEBPACK_IMPORTED_MODULE_28__[\"default\"],\n  invalidateImageId: _invalidateImageId_js__WEBPACK_IMPORTED_MODULE_29__[\"default\"],\n  pageToPixel: _pageToPixel_js__WEBPACK_IMPORTED_MODULE_31__[\"default\"],\n  pixelToCanvas: _pixelToCanvas_js__WEBPACK_IMPORTED_MODULE_33__[\"default\"],\n  reset: _reset_js__WEBPACK_IMPORTED_MODULE_42__[\"default\"],\n  resize: _resize_js__WEBPACK_IMPORTED_MODULE_43__[\"default\"],\n  setToPixelCoordinateSystem: _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_45__[\"default\"],\n  setViewport: _setViewport_js__WEBPACK_IMPORTED_MODULE_46__[\"default\"],\n  updateImage: _updateImage_js__WEBPACK_IMPORTED_MODULE_52__[\"default\"],\n  pixelDataToFalseColorData: _pixelDataToFalseColorData_js__WEBPACK_IMPORTED_MODULE_32__[\"default\"],\n  rendering: _rendering_index_js__WEBPACK_IMPORTED_MODULE_40__[\"default\"],\n  imageCache: _imageCache_js__WEBPACK_IMPORTED_MODULE_26__[\"default\"],\n  metaData: _metaData_js__WEBPACK_IMPORTED_MODULE_30__[\"default\"],\n  webGL: _webgl_index_js__WEBPACK_IMPORTED_MODULE_53__[\"default\"],\n  colors: _colors_index_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n  convertImageToFalseColorImage: _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"convertImageToFalseColorImage\"],\n  convertToFalseColorImage: _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"convertToFalseColorImage\"],\n  restoreImage: _falseColorMapping_js__WEBPACK_IMPORTED_MODULE_3__[\"restoreImage\"],\n  EVENTS: _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n  events: _events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"],\n  triggerEvent: _triggerEvent_js__WEBPACK_IMPORTED_MODULE_51__[\"default\"],\n  imageLoadPoolManager: _requestPool_imageLoadPoolManager_ts__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n  imageRetrievalPoolManager: _requestPool_imageRetrievalPoolManager_ts__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n  RequestPoolManager: _requestPool_RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_8__[\"RequestPoolManager\"]\n};\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (cornerstone);\n\n/***/ }),\n\n/***/ \"./internal/calculateTransform.js\":\n/*!****************************************!*\\\n  !*** ./internal/calculateTransform.js ***!\n  \\****************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_182135__) {\n\n\"use strict\";\n__nested_webpack_require_182135__.r(__nested_webpack_exports__);\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_182135__(/*! ./transform.js */ \"./internal/transform.js\");\n/* harmony import */ var _getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_182135__(/*! ./getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n/**\n * Calculate the transform for a Cornerstone enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\n * @param {Number} [scale] The viewport scale\n * @return {Transform} The current transform\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, scale) {\n  var transform = new _transform_js__WEBPACK_IMPORTED_MODULE_0__[\"Transform\"](); // Move to center of canvas\n\n  transform.translate(enabledElement.canvas.width / 2, enabledElement.canvas.height / 2); // Apply the rotation before scaling for non square pixels\n\n  var angle = enabledElement.viewport.rotation;\n\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  } // Apply the scale\n\n\n  var widthScale = enabledElement.viewport.scale;\n  var heightScale = enabledElement.viewport.scale;\n  var imageDisplayedArea = Object(_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement.image, enabledElement.viewport);\n  var offsetX = imageDisplayedArea.tlhc.x - 1;\n  var offsetY = imageDisplayedArea.tlhc.y - 1;\n  var width = imageDisplayedArea.brhc.x - offsetX;\n  var height = imageDisplayedArea.brhc.y - offsetY;\n\n  if (imageDisplayedArea.presentationSizeMode === 'NONE') {\n    if (enabledElement.image.rowPixelSpacing < enabledElement.image.columnPixelSpacing) {\n      widthScale *= enabledElement.image.columnPixelSpacing / enabledElement.image.rowPixelSpacing;\n    } else if (enabledElement.image.columnPixelSpacing < enabledElement.image.rowPixelSpacing) {\n      heightScale *= enabledElement.image.rowPixelSpacing / enabledElement.image.columnPixelSpacing;\n    }\n  } else {\n    // These should be good for \"TRUE SIZE\" and \"MAGNIFY\"\n    widthScale = imageDisplayedArea.columnPixelSpacing;\n    heightScale = imageDisplayedArea.rowPixelSpacing;\n\n    if (imageDisplayedArea.presentationSizeMode === 'SCALE TO FIT') {\n      // Fit TRUE IMAGE image (width/height) to window\n      var verticalScale = enabledElement.canvas.height / (height * heightScale);\n      var horizontalScale = enabledElement.canvas.width / (width * widthScale); // Apply new scale\n\n      widthScale = heightScale = Math.min(horizontalScale, verticalScale);\n\n      if (imageDisplayedArea.rowPixelSpacing < imageDisplayedArea.columnPixelSpacing) {\n        widthScale *= imageDisplayedArea.columnPixelSpacing / imageDisplayedArea.rowPixelSpacing;\n      } else if (imageDisplayedArea.columnPixelSpacing < imageDisplayedArea.rowPixelSpacing) {\n        heightScale *= imageDisplayedArea.rowPixelSpacing / imageDisplayedArea.columnPixelSpacing;\n      }\n    }\n  }\n\n  transform.scale(widthScale, heightScale); // Unrotate to so we can translate unrotated\n\n  if (angle !== 0) {\n    transform.rotate(-angle * Math.PI / 180);\n  } // Apply the pan offset\n\n\n  transform.translate(enabledElement.viewport.translation.x, enabledElement.viewport.translation.y); // Rotate again so we can apply general scale\n\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  }\n\n  if (scale !== undefined) {\n    // Apply the font scale\n    transform.scale(scale, scale);\n  } // Apply Flip if required\n\n\n  if (enabledElement.viewport.hflip) {\n    transform.scale(-1, 1);\n  }\n\n  if (enabledElement.viewport.vflip) {\n    transform.scale(1, -1);\n  } // Move back from center of image\n\n\n  transform.translate(-width / 2, -height / 2); // Move to displayedArea\n\n  transform.translate(-offsetX, -offsetY);\n  return transform;\n});\n\n/***/ }),\n\n/***/ \"./internal/computeAutoVoi.js\":\n/*!************************************!*\\\n  !*** ./internal/computeAutoVoi.js ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_186239__) {\n\n\"use strict\";\n__nested_webpack_require_186239__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_186239__.d(__nested_webpack_exports__, \"default\", function() { return computeAutoVoi; });\n/**\n * Computes the VOI to display all the pixels if no VOI LUT data (Window Width/Window Center or voiLUT) exists on the viewport object.\n *\n * @param {Viewport} viewport - Object containing the viewport properties\n * @param {Object} image An Image loaded by a Cornerstone Image Loader\n * @returns {void}\n * @memberof Internal\n */\nfunction computeAutoVoi(viewport, image) {\n  if (hasVoi(viewport)) {\n    return;\n  }\n\n  var maxVoi = image.maxPixelValue * image.slope + image.intercept;\n  var minVoi = image.minPixelValue * image.slope + image.intercept;\n  var ww = maxVoi - minVoi;\n  var wc = (maxVoi + minVoi) / 2;\n\n  if (viewport.voi === undefined) {\n    viewport.voi = {\n      windowWidth: ww,\n      windowCenter: wc\n    };\n  } else {\n    viewport.voi.windowWidth = ww;\n    viewport.voi.windowCenter = wc;\n  }\n}\n/**\n * Check if viewport has voi LUT data\n * @param {any} viewport The viewport to check for voi LUT data\n * @returns {Boolean} true viewport has LUT data (Window Width/Window Center or voiLUT). Otherwise, false.\n * @memberof Internal\n */\n\nfunction hasVoi(viewport) {\n  var hasLut = viewport.voiLUT && viewport.voiLUT.lut && viewport.voiLUT.lut.length > 0;\n  return hasLut || viewport.voi.windowWidth !== undefined && viewport.voi.windowCenter !== undefined;\n}\n\n/***/ }),\n\n/***/ \"./internal/createViewport.js\":\n/*!************************************!*\\\n  !*** ./internal/createViewport.js ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_187975__) {\n\n\"use strict\";\n__nested_webpack_require_187975__.r(__nested_webpack_exports__);\n/* harmony import */ var _setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_187975__(/*! ./setDefaultViewport.js */ \"./internal/setDefaultViewport.js\");\n\n/**\n * Creates a new viewport object containing default values\n *\n * @returns {Viewport} viewport object\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function () {\n  var initialDefaultViewport = {\n    scale: 1,\n    translation: {\n      x: 0,\n      y: 0\n    },\n    voi: {\n      windowWidth: undefined,\n      windowCenter: undefined\n    },\n    invert: false,\n    pixelReplication: false,\n    rotation: 0,\n    hflip: false,\n    vflip: false,\n    modalityLUT: undefined,\n    voiLUT: undefined,\n    colormap: undefined,\n    labelmap: false,\n    displayedArea: undefined\n  };\n  return Object.assign({}, initialDefaultViewport, _setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__[\"state\"].viewport);\n});\n\n/***/ }),\n\n/***/ \"./internal/drawCompositeImage.js\":\n/*!****************************************!*\\\n  !*** ./internal/drawCompositeImage.js ***!\n  \\****************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_189236__) {\n\n\"use strict\";\n__nested_webpack_require_189236__.r(__nested_webpack_exports__);\n/* harmony import */ var _layers_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_189236__(/*! ../layers.js */ \"./layers.js\");\n/* harmony import */ var _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_189236__(/*! ../rendering/renderGrayscaleImage.js */ \"./rendering/renderGrayscaleImage.js\");\n/* harmony import */ var _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_189236__(/*! ../rendering/renderColorImage.js */ \"./rendering/renderColorImage.js\");\n/* harmony import */ var _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_189236__(/*! ../rendering/renderPseudoColorImage.js */ \"./rendering/renderPseudoColorImage.js\");\n/* harmony import */ var _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_189236__(/*! ../rendering/renderLabelMapImage.js */ \"./rendering/renderLabelMapImage.js\");\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_189236__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_189236__(/*! ./getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n\n\n\n\n\nfunction getViewportRatio(baseLayer, targetLayer) {\n  if (!baseLayer.syncProps) {\n    updateLayerSyncProps(baseLayer);\n  }\n\n  if (!targetLayer.syncProps) {\n    updateLayerSyncProps(targetLayer);\n  }\n\n  return targetLayer.syncProps.originalScale / baseLayer.syncProps.originalScale;\n}\n\nfunction updateLayerSyncProps(layer) {\n  var syncProps = layer.syncProps || {}; // This is used to keep each of the layers' viewports in sync with the active layer\n\n  syncProps.originalScale = layer.viewport.scale;\n  layer.syncProps = syncProps;\n} // Sync all viewports based on active layer's viewport\n\n\nfunction syncViewports(layers, activeLayer) {\n  // If we intend to keep the viewport's scale, translation and rotation in sync,\n  // loop through the layers\n  layers.forEach(function (layer) {\n    // Don't do anything to the active layer\n    // Don't do anything if this layer has no viewport\n    if (layer === activeLayer || !layer.viewport || !activeLayer.viewport) {\n      return;\n    }\n\n    if (!layer.syncProps) {\n      updateLayerSyncProps(layer);\n    }\n\n    var viewportRatio = getViewportRatio(activeLayer, layer); // Update the layer's translation and scale to keep them in sync with the first image\n    // based on the ratios between the images\n\n    layer.viewport.scale = activeLayer.viewport.scale * viewportRatio;\n    layer.viewport.rotation = activeLayer.viewport.rotation;\n    layer.viewport.translation = {\n      x: activeLayer.viewport.translation.x / viewportRatio,\n      y: activeLayer.viewport.translation.y / viewportRatio\n    };\n    layer.viewport.hflip = activeLayer.viewport.hflip;\n    layer.viewport.vflip = activeLayer.viewport.vflip;\n  });\n}\n/**\n * Internal function to render all layers for a Cornerstone enabled element\n *\n * @param {CanvasRenderingContext2D} context Canvas context to draw upon\n * @param {EnabledElementLayer[]} layers The array of all layers for this enabled element\n * @param {Boolean} invalidated A boolean whether or not this image has been invalidated and must be redrawn\n * @returns {void}\n * @memberof Internal\n */\n\n\nfunction renderLayers(context, layers, invalidated) {\n  // Loop through each layer and draw it to the canvas\n  layers.forEach(function (layer, index) {\n    if (!layer.image) {\n      return;\n    }\n\n    context.save(); // Set the layer's canvas to the pixel coordinate system\n\n    layer.canvas = context.canvas;\n    Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(layer, context); // Render into the layer's canvas\n\n    var colormap = layer.viewport.colormap || layer.options.colormap;\n    var labelmap = layer.viewport.labelmap;\n    var isInvalid = layer.invalid || invalidated;\n\n    if (colormap && colormap !== '' && labelmap === true) {\n      Object(_rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_4__[\"addLabelMapLayer\"])(layer, isInvalid);\n    } else if (colormap && colormap !== '') {\n      Object(_rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_3__[\"addPseudoColorLayer\"])(layer, isInvalid);\n    } else if (layer.image.color === true) {\n      Object(_rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_2__[\"addColorLayer\"])(layer, isInvalid);\n    } else {\n      // If this is the base layer, use the alpha channel for rendering of the grayscale image\n      var useAlphaChannel = index === 0;\n      Object(_rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_1__[\"addGrayscaleLayer\"])(layer, isInvalid, useAlphaChannel);\n    } // Apply any global opacity settings that have been defined for this layer\n\n\n    if (layer.options && layer.options.opacity) {\n      context.globalAlpha = layer.options.opacity;\n    } else {\n      context.globalAlpha = 1;\n    }\n\n    if (layer.options && layer.options.fillStyle) {\n      context.fillStyle = layer.options.fillStyle;\n    } // Set the pixelReplication property before drawing from the layer into the\n    // composite canvas\n\n\n    context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Draw from the current layer's canvas onto the enabled element's canvas\n\n    var layerDisplayedArea = Object(_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(layer.image, layer.viewport);\n    var sx = layerDisplayedArea.tlhc.x - 1;\n    var sy = layerDisplayedArea.tlhc.y - 1;\n    var width = layerDisplayedArea.brhc.x - sx;\n    var height = layerDisplayedArea.brhc.y - sy;\n    context.drawImage(layer.canvas, sx, sy, width, height, sx, sy, width, height);\n    context.restore();\n    layer.invalid = false;\n  });\n}\n/**\n * Internal API function to draw a composite image to a given enabled element\n *\n * @param {EnabledElement} enabledElement An enabled element to draw into\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, invalidated) {\n  var element = enabledElement.element;\n  var allLayers = Object(_layers_js__WEBPACK_IMPORTED_MODULE_0__[\"getLayers\"])(element);\n  var activeLayer = Object(_layers_js__WEBPACK_IMPORTED_MODULE_0__[\"getActiveLayer\"])(element);\n  var visibleLayers = Object(_layers_js__WEBPACK_IMPORTED_MODULE_0__[\"getVisibleLayers\"])(element);\n  var resynced = !enabledElement.lastSyncViewportsState && enabledElement.syncViewports; // This state will help us to determine if the user has re-synced the\n  // layers allowing us to make a new copy of the viewports\n\n  enabledElement.lastSyncViewportsState = enabledElement.syncViewports; // Stores a copy of all viewports if the user has just synced them then we can use the\n  // copies to calculate anything later (ratio, translation offset, rotation offset, etc)\n\n  if (resynced) {\n    allLayers.forEach(function (layer) {\n      if (layer.viewport) {\n        updateLayerSyncProps(layer);\n      }\n    });\n  } // Sync all viewports in case it's activated\n\n\n  if (enabledElement.syncViewports === true) {\n    syncViewports(visibleLayers, activeLayer);\n  } // Get the enabled element's canvas so we can draw to it\n\n\n  var context = enabledElement.canvas.getContext('2d', {\n    desynchronized: true\n  });\n  context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Render all visible layers\n\n  renderLayers(context, visibleLayers, invalidated);\n});\n\n/***/ }),\n\n/***/ \"./internal/drawImage.js\":\n/*!*******************************!*\\\n  !*** ./internal/drawImage.js ***!\n  \\*******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_197265__) {\n\n\"use strict\";\n__nested_webpack_require_197265__.r(__nested_webpack_exports__);\n/**\n * Internal API function to draw an image to a given enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} [invalidated = false] - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof Internal\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement) {\n  var invalidated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  enabledElement.needsRedraw = true;\n\n  if (invalidated) {\n    enabledElement.invalid = true;\n  }\n});\n\n/***/ }),\n\n/***/ \"./internal/drawImageSync.js\":\n/*!***********************************!*\\\n  !*** ./internal/drawImageSync.js ***!\n  \\***********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_198213__) {\n\n\"use strict\";\n__nested_webpack_require_198213__.r(__nested_webpack_exports__);\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_198213__(/*! ./now.js */ \"./internal/now.js\");\n/* harmony import */ var _drawCompositeImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_198213__(/*! ./drawCompositeImage.js */ \"./internal/drawCompositeImage.js\");\n/* harmony import */ var _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_198213__(/*! ../rendering/renderColorImage.js */ \"./rendering/renderColorImage.js\");\n/* harmony import */ var _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_198213__(/*! ../rendering/renderGrayscaleImage.js */ \"./rendering/renderGrayscaleImage.js\");\n/* harmony import */ var _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_198213__(/*! ../rendering/renderPseudoColorImage.js */ \"./rendering/renderPseudoColorImage.js\");\n/* harmony import */ var _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_198213__(/*! ../rendering/renderLabelMapImage.js */ \"./rendering/renderLabelMapImage.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_198213__(/*! ../triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_198213__(/*! ../events.js */ \"./events.js\");\n\n\n\n\n\n\n\n\n/**\r\n * Draw an image to a given enabled element synchronously\r\n *\r\n * @param {EnabledElement} enabledElement An enabled element to draw into\r\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\r\n * @returns {void}\r\n * @memberof Internal\r\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, invalidated) {\n  var image = enabledElement.image;\n  var element = enabledElement.element;\n  var layers = enabledElement.layers || []; // Check if enabledElement can be redrawn\n\n  if (!enabledElement.canvas || !enabledElement.image) {\n    return;\n  } // Start measuring the time needed to draw the image/layers\n\n\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  image.stats = {\n    lastGetPixelDataTime: -1.0,\n    lastStoredPixelDataToCanvasImageDataTime: -1.0,\n    lastPutImageDataTime: -1.0,\n    lastRenderTime: -1.0,\n    lastLutGenerateTime: -1.0\n  };\n\n  if (layers && layers.length) {\n    Object(_drawCompositeImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement, invalidated);\n  } else if (image) {\n    var render = image.render;\n\n    if (!render) {\n      if (enabledElement.viewport.colormap && enabledElement.viewport.colormap !== '' && enabledElement.image.labelmap === true) {\n        render = _rendering_renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_5__[\"renderLabelMapImage\"];\n      } else if (enabledElement.viewport.colormap && enabledElement.viewport.colormap !== '') {\n        render = _rendering_renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_4__[\"renderPseudoColorImage\"];\n      } else if (image.color) {\n        render = _rendering_renderColorImage_js__WEBPACK_IMPORTED_MODULE_2__[\"renderColorImage\"];\n      } else {\n        render = _rendering_renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_3__[\"renderGrayscaleImage\"];\n      }\n    }\n\n    render(enabledElement, invalidated);\n  } // Calculate how long it took to draw the image/layers\n\n\n  var renderTimeInMs = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var eventData = {\n    viewport: enabledElement.viewport,\n    element: element,\n    image: image,\n    enabledElement: enabledElement,\n    canvasContext: enabledElement.canvas.getContext('2d', {\n      desynchronized: true\n    }),\n    renderTimeInMs: renderTimeInMs\n  };\n  image.stats.lastRenderTime = renderTimeInMs;\n  enabledElement.invalid = false;\n  enabledElement.needsRedraw = false;\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(element, _events_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].IMAGE_RENDERED, eventData);\n});\n\n/***/ }),\n\n/***/ \"./internal/generateColorLut.js\":\n/*!**************************************!*\\\n  !*** ./internal/generateColorLut.js ***!\n  \\**************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_202523__) {\n\n\"use strict\";\n__nested_webpack_require_202523__.r(__nested_webpack_exports__);\n/* harmony import */ var _getVOILut_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_202523__(/*! ./getVOILut.js */ \"./internal/getVOILut.js\");\n\n/**\n * Creates a LUT used while rendering to convert stored pixel values to\n * display pixels\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Number} windowWidth The Window Width\n * @param {Number} windowCenter The Window Center\n * @param {Boolean} invert A boolean describing whether or not the image has been inverted\n * @param {Array} [voiLUT] A Volume of Interest Lookup Table\n *\n * @returns {Uint8ClampedArray} A lookup table to apply to the image\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, windowWidth, windowCenter, invert, voiLUT) {\n  var maxPixelValue = image.maxPixelValue;\n  var minPixelValue = image.minPixelValue;\n  var offset = Math.min(minPixelValue, 0);\n\n  if (image.cachedLut === undefined) {\n    var length = maxPixelValue - offset + 1;\n    image.cachedLut = {};\n    image.cachedLut.lutArray = new Uint8ClampedArray(length);\n  }\n\n  var lut = image.cachedLut.lutArray;\n  var vlutfn = Object(_getVOILut_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(windowWidth, windowCenter, voiLUT);\n\n  if (invert === true) {\n    for (var storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\n      lut[storedValue + -offset] = 255 - vlutfn(storedValue);\n    }\n  } else {\n    for (var _storedValue = minPixelValue; _storedValue <= maxPixelValue; _storedValue++) {\n      lut[_storedValue + -offset] = vlutfn(_storedValue);\n    }\n  }\n\n  return lut;\n});\n\n/***/ }),\n\n/***/ \"./internal/generateLut.js\":\n/*!*********************************!*\\\n  !*** ./internal/generateLut.js ***!\n  \\*********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_204440__) {\n\n\"use strict\";\n__nested_webpack_require_204440__.r(__nested_webpack_exports__);\n/* harmony import */ var _getModalityLUT_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_204440__(/*! ./getModalityLUT.js */ \"./internal/getModalityLUT.js\");\n/* harmony import */ var _getVOILut_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_204440__(/*! ./getVOILut.js */ \"./internal/getVOILut.js\");\n\n\n/**\r\n * Creates a LUT used while rendering to convert stored pixel values to\r\n * display pixels\r\n *\r\n * @param {Image} image A Cornerstone Image Object\r\n * @param {Number} windowWidth The Window Width\r\n * @param {Number} windowCenter The Window Center\r\n * @param {Boolean} invert A boolean describing whether or not the image has been inverted\r\n * @param {Array} [modalityLUT] A modality Lookup Table\r\n * @param {Array} [voiLUT] A Volume of Interest Lookup Table\r\n *\r\n * @returns {Uint8ClampedArray} A lookup table to apply to the image\r\n * @memberof Internal\r\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, windowWidth, windowCenter, invert, modalityLUT, voiLUT) {\n  var maxPixelValue = image.maxPixelValue;\n  var minPixelValue = image.minPixelValue;\n  var offset = Math.min(minPixelValue, 0);\n\n  if (image.cachedLut === undefined) {\n    var length = maxPixelValue - offset + 1;\n    image.cachedLut = {};\n    image.cachedLut.lutArray = new Uint8ClampedArray(length);\n  }\n\n  var lut = image.cachedLut.lutArray;\n  var slopeOrInterceptAreFloat = Boolean(image.slope % 1) || Boolean(image.intercept % 1);\n  var mlutfn = Object(_getModalityLUT_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(image.slope, image.intercept, modalityLUT);\n  var vlutfn = Object(_getVOILut_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(windowWidth, windowCenter, voiLUT, slopeOrInterceptAreFloat);\n\n  if (invert === true) {\n    for (var storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\n      lut[storedValue + -offset] = 255 - vlutfn(mlutfn(storedValue));\n    }\n  } else {\n    for (var _storedValue = minPixelValue; _storedValue <= maxPixelValue; _storedValue++) {\n      lut[_storedValue + -offset] = vlutfn(mlutfn(_storedValue));\n    }\n  }\n\n  return lut;\n});\n\n/***/ }),\n\n/***/ \"./internal/getCanvas.js\":\n/*!*******************************!*\\\n  !*** ./internal/getCanvas.js ***!\n  \\*******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_206846__) {\n\n\"use strict\";\n__nested_webpack_require_206846__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_206846__.d(__nested_webpack_exports__, \"default\", function() { return getCanvas; });\nvar CANVAS_CSS_CLASS = 'cornerstone-canvas';\n/**\n * Create a canvas and append it to the element\n *\n * @param {HTMLElement} element An HTML Element\n * @return {HTMLElement} canvas A Canvas DOM element\n */\n\nfunction createCanvas(element) {\n  var canvas = document.createElement('canvas');\n  canvas.style.display = 'block';\n  canvas.classList.add(CANVAS_CSS_CLASS);\n  element.appendChild(canvas);\n  return canvas;\n}\n/**\n * Create a canvas or returns the one that already exists for a given element\n *\n * @param {HTMLElement} element An HTML Element\n * @return {HTMLElement} canvas A Canvas DOM element\n */\n\n\nfunction getCanvas(element) {\n  var selector = \"canvas.\".concat(CANVAS_CSS_CLASS);\n  return element.querySelector(selector) || createCanvas(element);\n}\n\n/***/ }),\n\n/***/ \"./internal/getDefaultViewport.js\":\n/*!****************************************!*\\\n  !*** ./internal/getDefaultViewport.js ***!\n  \\****************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_208075__) {\n\n\"use strict\";\n__nested_webpack_require_208075__.r(__nested_webpack_exports__);\n/* harmony import */ var _createViewport_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_208075__(/*! ./createViewport.js */ \"./internal/createViewport.js\");\n/* harmony import */ var _getImageFitScale_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_208075__(/*! ./getImageFitScale.js */ \"./internal/getImageFitScale.js\");\n\n\n/**\n * Creates a new viewport object containing default values for the image and canvas\n *\n * @param {HTMLElement} canvas A Canvas DOM element\n * @param {Image} image A Cornerstone Image Object\n * @returns {Viewport} viewport object\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (canvas, image) {\n  if (canvas === undefined) {\n    throw new Error('getDefaultViewport: parameter canvas must not be undefined');\n  }\n\n  if (image === undefined) {\n    return Object(_createViewport_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  } // Fit image to window\n\n\n  var scale = Object(_getImageFitScale_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(canvas, image, 0).scaleFactor;\n  return {\n    scale: scale,\n    translation: {\n      x: 0,\n      y: 0\n    },\n    voi: {\n      windowWidth: image.windowWidth,\n      windowCenter: image.windowCenter\n    },\n    invert: image.invert,\n    pixelReplication: false,\n    rotation: 0,\n    hflip: false,\n    vflip: false,\n    modalityLUT: image.modalityLUT,\n    voiLUT: image.voiLUT,\n    colormap: image.colormap,\n    labelmap: Boolean(image.labelmap),\n    displayedArea: undefined\n  };\n});\n\n/***/ }),\n\n/***/ \"./internal/getDisplayedArea.js\":\n/*!**************************************!*\\\n  !*** ./internal/getDisplayedArea.js ***!\n  \\**************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_209907__) {\n\n\"use strict\";\n__nested_webpack_require_209907__.r(__nested_webpack_exports__);\n/**\n * Returns the displayedArea from the viewport if exists or\n * creates a new displayedArea object containing default values for the image\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Viewport} viewport An optional viewport Object\n * @returns {DisplayedArea} displayedArea object\n * @memberof Internal\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image) {\n  var viewport = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (viewport && viewport.displayedArea) {\n    return viewport.displayedArea;\n  }\n\n  if (image === undefined) {\n    throw new Error('getDisplayedArea: parameter image must not be undefined');\n  }\n\n  return {\n    tlhc: {\n      x: 1,\n      y: 1\n    },\n    brhc: {\n      x: image.columns,\n      y: image.rows\n    },\n    rowPixelSpacing: image.rowPixelSpacing === undefined ? 1 : image.rowPixelSpacing,\n    columnPixelSpacing: image.columnPixelSpacing === undefined ? 1 : image.columnPixelSpacing,\n    presentationSizeMode: 'NONE'\n  };\n});\n\n/***/ }),\n\n/***/ \"./internal/getFillStyle.js\":\n/*!**********************************!*\\\n  !*** ./internal/getFillStyle.js ***!\n  \\**********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_211274__) {\n\n\"use strict\";\n__nested_webpack_require_211274__.r(__nested_webpack_exports__);\n/**\n * Get current fillStyle for enabled element\n *\n * @param {Object} enabledElement Enabled element\n * @returns {String} Current fillStyle of enabled element\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement) {\n  var _ref = enabledElement.viewport || {},\n      invert = _ref.invert;\n\n  var _ref2 = enabledElement.options || {},\n      fillStyle = _ref2.fillStyle;\n\n  if (['black', 'white'].indexOf(fillStyle) !== -1) {\n    return invert ? 'white' : 'black';\n  }\n\n  return 'black';\n});\n\n/***/ }),\n\n/***/ \"./internal/getImageFitScale.js\":\n/*!**************************************!*\\\n  !*** ./internal/getImageFitScale.js ***!\n  \\**************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_212145__) {\n\n\"use strict\";\n__nested_webpack_require_212145__.r(__nested_webpack_exports__);\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_212145__(/*! ./validator.js */ \"./internal/validator.js\");\n/* harmony import */ var _getImageSize_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_212145__(/*! ./getImageSize.js */ \"./internal/getImageSize.js\");\n\n\n/**\n * Calculates the horizontal, vertical and minimum scale factor for an image\n   @param {{width, height}} windowSize The window size where the image is displayed. This can be any HTML element or structure with a width, height fields (e.g. canvas).\n * @param {any} image The cornerstone image object\n * @param {Number} rotation Optional. The rotation angle of the image.\n * @return {{horizontalScale, verticalScale, scaleFactor}} The calculated horizontal, vertical and minimum scale factor\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (windowSize, image) {\n  var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  Object(_validator_js__WEBPACK_IMPORTED_MODULE_0__[\"validateParameterUndefinedOrNull\"])(windowSize, 'getImageScale: parameter windowSize must not be undefined');\n  Object(_validator_js__WEBPACK_IMPORTED_MODULE_0__[\"validateParameterUndefinedOrNull\"])(image, 'getImageScale: parameter image must not be undefined');\n  var imageSize = Object(_getImageSize_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image, rotation);\n  var rowPixelSpacing = image.rowPixelSpacing || 1;\n  var columnPixelSpacing = image.columnPixelSpacing || 1;\n  var verticalRatio = 1;\n  var horizontalRatio = 1;\n\n  if (rowPixelSpacing < columnPixelSpacing) {\n    horizontalRatio = columnPixelSpacing / rowPixelSpacing;\n  } else {\n    // even if they are equal we want to calculate this ratio (the ration might be 0.5)\n    verticalRatio = rowPixelSpacing / columnPixelSpacing;\n  }\n\n  var verticalScale = windowSize.height / imageSize.height / verticalRatio;\n  var horizontalScale = windowSize.width / imageSize.width / horizontalRatio; // Fit image to window\n\n  return {\n    verticalScale: verticalScale,\n    horizontalScale: horizontalScale,\n    scaleFactor: Math.min(horizontalScale, verticalScale)\n  };\n});\n\n/***/ }),\n\n/***/ \"./internal/getImageSize.js\":\n/*!**********************************!*\\\n  !*** ./internal/getImageSize.js ***!\n  \\**********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_214644__) {\n\n\"use strict\";\n__nested_webpack_require_214644__.r(__nested_webpack_exports__);\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_214644__(/*! ./validator.js */ \"./internal/validator.js\");\n\n/**\n * Check if the angle is rotated\n * @param {Number} rotation the rotation angle\n * @returns {Boolean} true if the angle is rotated; Otherwise, false.\n * @memberof Internal\n */\n\nfunction isRotated(rotation) {\n  return !(rotation === null || rotation === undefined || rotation === 0 || rotation === 180);\n}\n/**\n * Retrieves the current image dimensions given an enabled element\n *\n * @param {any} image The Cornerstone image.\n * @param {Number} rotation Optional. The rotation angle of the image.\n * @return {{width:Number, height:Number}} The Image dimensions\n * @memberof Internal\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image) {\n  var rotation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  Object(_validator_js__WEBPACK_IMPORTED_MODULE_0__[\"validateParameterUndefinedOrNull\"])(image, 'getImageSize: parameter image must not be undefined');\n  Object(_validator_js__WEBPACK_IMPORTED_MODULE_0__[\"validateParameterUndefinedOrNull\"])(image.width, 'getImageSize: parameter image must have width');\n  Object(_validator_js__WEBPACK_IMPORTED_MODULE_0__[\"validateParameterUndefinedOrNull\"])(image.height, 'getImageSize: parameter image must have height');\n\n  if (isRotated(rotation)) {\n    return {\n      height: image.width,\n      width: image.height\n    };\n  }\n\n  return {\n    width: image.width,\n    height: image.height\n  };\n});\n\n/***/ }),\n\n/***/ \"./internal/getModalityLUT.js\":\n/*!************************************!*\\\n  !*** ./internal/getModalityLUT.js ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_216519__) {\n\n\"use strict\";\n__nested_webpack_require_216519__.r(__nested_webpack_exports__);\n/**\n * Generates a linear modality transformation function\n *\n * See DICOM PS3.3 C.11.1 Modality LUT Module\n *\n * http://dicom.nema.org/medical/Dicom/current/output/chtml/part03/sect_C.11.html\n *\n * @param {Number} slope m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} intercept The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n\n Output units = m*SV + b.\n * @return {function(*): *} A linear modality LUT function. Given a stored pixel it returns the modality pixel value\n * @memberof Internal\n */\nfunction generateLinearModalityLUT(slope, intercept) {\n  return function (storedPixelValue) {\n    return storedPixelValue * slope + intercept;\n  };\n}\n\nfunction generateNonLinearModalityLUT(modalityLUT) {\n  var minValue = modalityLUT.lut[0];\n  var maxValue = modalityLUT.lut[modalityLUT.lut.length - 1];\n  var maxValueMapped = modalityLUT.firstValueMapped + modalityLUT.lut.length;\n  return function (storedPixelValue) {\n    if (storedPixelValue < modalityLUT.firstValueMapped) {\n      return minValue;\n    } else if (storedPixelValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    return modalityLUT.lut[storedPixelValue];\n  };\n}\n/**\n * Get the appropriate Modality LUT for the current situation.\n *\n * @param {Number} [slope] m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} [intercept] The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n * @param {Function} [modalityLUT] A modality LUT function. Given a stored pixel it returns the modality pixel value.\n *\n * @return {function(*): *} A modality LUT function. Given a stored pixel it returns the modality pixel value.\n * @memberof Internal\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (slope, intercept, modalityLUT) {\n  if (modalityLUT) {\n    return generateNonLinearModalityLUT(modalityLUT);\n  }\n\n  return generateLinearModalityLUT(slope, intercept);\n});\n\n/***/ }),\n\n/***/ \"./internal/getTransform.js\":\n/*!**********************************!*\\\n  !*** ./internal/getTransform.js ***!\n  \\**********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_218890__) {\n\n\"use strict\";\n__nested_webpack_require_218890__.r(__nested_webpack_exports__);\n/* harmony import */ var _calculateTransform_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_218890__(/*! ./calculateTransform.js */ \"./internal/calculateTransform.js\");\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement) {\n  // For now we will calculate it every time it is requested.\n  // In the future, we may want to cache it in the enabled element to speed things up.\n  return Object(_calculateTransform_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement);\n});\n\n/***/ }),\n\n/***/ \"./internal/getVOILut.js\":\n/*!*******************************!*\\\n  !*** ./internal/getVOILut.js ***!\n  \\*******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_219714__) {\n\n\"use strict\";\n__nested_webpack_require_219714__.r(__nested_webpack_exports__);\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/* eslint no-bitwise: 0 */\n\n/**\n * Volume of Interest Lookup Table Function\n *\n * @typedef {Function} VOILUTFunction\n *\n * @param {Number} modalityLutValue\n * @returns {Number} transformed value\n * @memberof Objects\n */\n\n/**\n * @module: VOILUT\n */\n\n/**\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @returns {VOILUTFunction} VOI LUT mapping function\n * @memberof VOILUT\n */\nfunction generateLinearVOILUT(windowWidth, windowCenter) {\n  return function (modalityLutValue) {\n    return ((modalityLutValue - windowCenter) / windowWidth + 0.5) * 255.0;\n  };\n}\n/**\n * Generate a non-linear volume of interest lookup table\n *\n * @param {LUT} voiLUT Volume of Interest Lookup Table Object\n * @param {Boolean} roundModalityLUTValues Do a Math.round of modality lut to compute non linear voilut\n\n *\n * @returns {VOILUTFunction} VOI LUT mapping function\n * @memberof VOILUT\n */\n\n\nfunction generateNonLinearVOILUT(voiLUT, roundModalityLUTValues) {\n  // We don't trust the voiLUT.numBitsPerEntry, mainly thanks to Agfa!\n  var bitsPerEntry = Math.max.apply(Math, _toConsumableArray(voiLUT.lut)).toString(2).length;\n  var shift = bitsPerEntry - 8;\n  var minValue = voiLUT.lut[0] >> shift;\n  var maxValue = voiLUT.lut[voiLUT.lut.length - 1] >> shift;\n  var maxValueMapped = voiLUT.firstValueMapped + voiLUT.lut.length - 1;\n  return function (modalityLutValue) {\n    if (modalityLutValue < voiLUT.firstValueMapped) {\n      return minValue;\n    } else if (modalityLutValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    if (roundModalityLUTValues) {\n      return voiLUT.lut[Math.round(modalityLutValue) - voiLUT.firstValueMapped] >> shift;\n    }\n\n    return voiLUT.lut[modalityLutValue - voiLUT.firstValueMapped] >> shift;\n  };\n}\n/**\n * Retrieve a VOI LUT mapping function given the current windowing settings\n * and the VOI LUT for the image\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @param {LUT} [voiLUT] Volume of Interest Lookup Table Object\n * @param {Boolean} roundModalityLUTValues Do a Math.round of modality lut to compute non linear voilut\n *\n * @return {VOILUTFunction} VOI LUT mapping function\n * @memberof VOILUT\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (windowWidth, windowCenter, voiLUT, roundModalityLUTValues) {\n  if (voiLUT) {\n    return generateNonLinearVOILUT(voiLUT, roundModalityLUTValues);\n  }\n\n  return generateLinearVOILUT(windowWidth, windowCenter);\n});\n\n/***/ }),\n\n/***/ \"./internal/guid.js\":\n/*!**************************!*\\\n  !*** ./internal/guid.js ***!\n  \\**************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_223723__) {\n\n\"use strict\";\n__nested_webpack_require_223723__.r(__nested_webpack_exports__);\nfunction s4() {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n/**\n * Generate a unique identifier\n *\n * @return {string} A unique identifier\n * @memberof Internal\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function () {\n  return \"\".concat(s4() + s4(), \"-\").concat(s4(), \"-\").concat(s4(), \"-\").concat(s4(), \"-\").concat(s4()).concat(s4()).concat(s4());\n});\n\n/***/ }),\n\n/***/ \"./internal/index.js\":\n/*!***************************!*\\\n  !*** ./internal/index.js ***!\n  \\***************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_224437__) {\n\n\"use strict\";\n__nested_webpack_require_224437__.r(__nested_webpack_exports__);\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_224437__(/*! ./transform.js */ \"./internal/transform.js\");\n/* harmony import */ var _calculateTransform_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_224437__(/*! ./calculateTransform.js */ \"./internal/calculateTransform.js\");\n/* harmony import */ var _drawImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_224437__(/*! ./drawImage.js */ \"./internal/drawImage.js\");\n/* harmony import */ var _generateLut_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_224437__(/*! ./generateLut.js */ \"./internal/generateLut.js\");\n/* harmony import */ var _getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_224437__(/*! ./getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _getTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_224437__(/*! ./getTransform.js */ \"./internal/getTransform.js\");\n/* harmony import */ var _requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_224437__(/*! ./requestAnimationFrame.js */ \"./internal/requestAnimationFrame.js\");\n/* harmony import */ var _setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_224437__(/*! ./setDefaultViewport.js */ \"./internal/setDefaultViewport.js\");\n/* harmony import */ var _storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_224437__(/*! ./storedColorPixelDataToCanvasImageData.js */ \"./internal/storedColorPixelDataToCanvasImageData.js\");\n/* harmony import */ var _storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_224437__(/*! ./storedPixelDataToCanvasImageData.js */ \"./internal/storedPixelDataToCanvasImageData.js\");\n/* harmony import */ var _storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_224437__(/*! ./storedPixelDataToCanvasImageDataColorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataColorLUT.js\");\n/* harmony import */ var _storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_11__ = __nested_webpack_require_224437__(/*! ./storedPixelDataToCanvasImageDataPseudocolorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js\");\n/* harmony import */ var _storedPixelDataToCanvasImageDataRGBA_js__WEBPACK_IMPORTED_MODULE_12__ = __nested_webpack_require_224437__(/*! ./storedPixelDataToCanvasImageDataRGBA.js */ \"./internal/storedPixelDataToCanvasImageDataRGBA.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\r\n * @module Internal\r\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  drawImage: _drawImage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n  generateLut: _generateLut_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n  getDefaultViewport: _getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n  requestAnimationFrame: _requestAnimationFrame_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n  setDefaultViewport: _setDefaultViewport_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n  storedPixelDataToCanvasImageData: _storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n  storedPixelDataToCanvasImageDataRGBA: _storedPixelDataToCanvasImageDataRGBA_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n  storedPixelDataToCanvasImageDataColorLUT: _storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n  storedPixelDataToCanvasImageDataPseudocolorLUT: _storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n  storedColorPixelDataToCanvasImageData: _storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\n  getTransform: _getTransform_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n  calculateTransform: _calculateTransform_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  Transform: _transform_js__WEBPACK_IMPORTED_MODULE_0__[\"Transform\"]\n});\n\n/***/ }),\n\n/***/ \"./internal/now.js\":\n/*!*************************!*\\\n  !*** ./internal/now.js ***!\n  \\*************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_228502__) {\n\n\"use strict\";\n__nested_webpack_require_228502__.r(__nested_webpack_exports__);\n/**\n * @module Polyfills\n */\n\n/**\n * Use the performance.now() method if possible, and if not, use Date.now()\n *\n * @return {number} Time elapsed since the time origin\n * @memberof Polyfills\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function () {\n  if (window.performance) {\n    return performance.now();\n  }\n\n  return Date.now();\n});\n\n/***/ }),\n\n/***/ \"./internal/requestAnimationFrame.js\":\n/*!*******************************************!*\\\n  !*** ./internal/requestAnimationFrame.js ***!\n  \\*******************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_229225__) {\n\n\"use strict\";\n__nested_webpack_require_229225__.r(__nested_webpack_exports__);\nfunction requestFrame(callback) {\n  window.setTimeout(callback, 1000 / 60);\n}\n/**\n * Polyfills requestAnimationFrame for older browsers.\n *\n * @param {Function} callback A parameter specifying a function to call when it's time to update your animation for the next repaint. The callback has one single argument, a DOMHighResTimeStamp, which indicates the current time (the time returned from performance.now() ) for when requestAnimationFrame starts to fire callbacks.\n *\n * @return {Number} A long integer value, the request id, that uniquely identifies the entry in the callback list. This is a non-zero value, but you may not make any other assumptions about its value. You can pass this value to window.cancelAnimationFrame() to cancel the refresh callback request.\n * @memberof Polyfills\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (callback) {\n  return window.requestAnimationFrame(callback) || window.webkitRequestAnimationFrame(callback) || window.mozRequestAnimationFrame(callback) || window.oRequestAnimationFrame(callback) || window.msRequestAnimationFrame(callback) || requestFrame(callback);\n});\n\n/***/ }),\n\n/***/ \"./internal/setDefaultViewport.js\":\n/*!****************************************!*\\\n  !*** ./internal/setDefaultViewport.js ***!\n  \\****************************************/\n/*! exports provided: default, state */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_230726__) {\n\n\"use strict\";\n__nested_webpack_require_230726__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_230726__.d(__nested_webpack_exports__, \"state\", function() { return state; });\nvar state = {\n  viewport: {}\n};\n/**\n * Sets new default values for `getDefaultViewport`\n *\n * @param {Object} viewport - Object that sets new default values for getDefaultViewport\n * @returns {undefined}\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (viewport) {\n  state.viewport = viewport || {};\n});\n\n\n/***/ }),\n\n/***/ \"./internal/storedColorPixelDataToCanvasImageData.js\":\n/*!***********************************************************!*\\\n  !*** ./internal/storedColorPixelDataToCanvasImageData.js ***!\n  \\***********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_231601__) {\n\n\"use strict\";\n__nested_webpack_require_231601__.r(__nested_webpack_exports__);\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_231601__(/*! ./now.js */ \"./internal/now.js\");\n\n/**\n * Converts stored color pixel values to display pixel values using a LUT.\n *\n * Note: Skips alpha value for any input image pixel data.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, lut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = pixelData.length; // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Red\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Green\n\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex] + -minPixelValue]; // Blue\n\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex]]; // Blue\n\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n});\n\n/***/ }),\n\n/***/ \"./internal/storedPixelDataToCanvasImageData.js\":\n/*!******************************************************!*\\\n  !*** ./internal/storedPixelDataToCanvasImageData.js ***!\n  \\******************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_234336__) {\n\n\"use strict\";\n__nested_webpack_require_234336__.r(__nested_webpack_exports__);\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_234336__(/*! ./now.js */ \"./internal/now.js\");\n\n/**\n * This function transforms stored pixel values into a canvas image data buffer\n * by using a LUT.  This is the most performance sensitive code in cornerstone and\n * we use a special trick to make this go as fast as possible.  Specifically we\n * use the alpha channel only to control the luminance rather than the red, green and\n * blue channels which makes it over 3x faster. The canvasImageDataData buffer needs\n * to be previously filled with white pixels.\n *\n * NOTE: Attribution would be appreciated if you use this technique!\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, lut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 3;\n  var storedPixelDataIndex = 0; // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Alpha\n\n        canvasImageDataIndex += 4;\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n\n        canvasImageDataIndex += 4;\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n\n      canvasImageDataIndex += 4;\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Alpha\n\n      canvasImageDataIndex += 4;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n\n      canvasImageDataIndex += 4;\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n});\n\n/***/ }),\n\n/***/ \"./internal/storedPixelDataToCanvasImageDataColorLUT.js\":\n/*!**************************************************************!*\\\n  !*** ./internal/storedPixelDataToCanvasImageDataColorLUT.js ***!\n  \\**************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_237830__) {\n\n\"use strict\";\n__nested_webpack_require_237830__.r(__nested_webpack_exports__);\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_237830__(/*! ../colors/index.js */ \"./colors/index.js\");\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_237830__(/*! ./now.js */ \"./internal/now.js\");\n\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\nfunction storedPixelDataToCanvasImageDataColorLUT(image, colorLut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var rgba;\n  var clut;\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  if (colorLut instanceof _colors_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n}\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (storedPixelDataToCanvasImageDataColorLUT);\n\n/***/ }),\n\n/***/ \"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js\":\n/*!********************************************************************!*\\\n  !*** ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js ***!\n  \\********************************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_240527__) {\n\n\"use strict\";\n__nested_webpack_require_240527__.r(__nested_webpack_exports__);\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_240527__(/*! ../colors/index.js */ \"./colors/index.js\");\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_240527__(/*! ./now.js */ \"./internal/now.js\");\n\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} grayscaleLut Lookup table array\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\nfunction storedPixelDataToCanvasImageDataPseudocolorLUT(image, grayscaleLut, colorLut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var grayscale;\n  var rgba;\n  var clut;\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  if (colorLut instanceof _colors_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++]];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n}\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (storedPixelDataToCanvasImageDataPseudocolorLUT);\n\n/***/ }),\n\n/***/ \"./internal/storedPixelDataToCanvasImageDataRGBA.js\":\n/*!**********************************************************!*\\\n  !*** ./internal/storedPixelDataToCanvasImageDataRGBA.js ***!\n  \\**********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_243363__) {\n\n\"use strict\";\n__nested_webpack_require_243363__.r(__nested_webpack_exports__);\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_243363__(/*! ./now.js */ \"./internal/now.js\");\n\n/**\n * This function transforms stored pixel values into a canvas image data buffer\n * by using a LUT.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, lut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var pixelValue; // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++]];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n});\n\n/***/ }),\n\n/***/ \"./internal/storedRGBAPixelDataToCanvasImageData.js\":\n/*!**********************************************************!*\\\n  !*** ./internal/storedRGBAPixelDataToCanvasImageData.js ***!\n  \\**********************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_247358__) {\n\n\"use strict\";\n__nested_webpack_require_247358__.r(__nested_webpack_exports__);\n/* harmony import */ var _now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_247358__(/*! ./now.js */ \"./internal/now.js\");\n\n/**\n * Converts stored RGBA color pixel values to display pixel values using a LUT.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n * @memberof Internal\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, lut, canvasImageDataData) {\n  var start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var pixelData = image.getPixelData();\n  image.stats.lastGetPixelDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = pixelData.length; // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  start = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Red\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Green\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Blue\n\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Blue\n\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = Object(_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n});\n\n/***/ }),\n\n/***/ \"./internal/transform.js\":\n/*!*******************************!*\\\n  !*** ./internal/transform.js ***!\n  \\*******************************/\n/*! exports provided: Transform */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_249996__) {\n\n\"use strict\";\n__nested_webpack_require_249996__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_249996__.d(__nested_webpack_exports__, \"Transform\", function() { return Transform; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// By Simon Sarris\n// Www.simonsarris.com\n// Sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n// Simple class for keeping track of the current transformation matrix\n// For instance:\n//    Var t = new Transform();\n//    T.rotate(5);\n//    Var m = t.m;\n//    Ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n// Is equivalent to:\n//    Ctx.rotate(5);\n// But now you can retrieve it :)\n// Remember that this does not account for any CSS transforms applied to the canvas\nvar Transform = /*#__PURE__*/function () {\n  function Transform() {\n    _classCallCheck(this, Transform);\n\n    this.reset();\n  }\n\n  _createClass(Transform, [{\n    key: \"reset\",\n    value: function reset() {\n      this.m = [1, 0, 0, 1, 0, 0];\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var transform = new Transform();\n      transform.m[0] = this.m[0];\n      transform.m[1] = this.m[1];\n      transform.m[2] = this.m[2];\n      transform.m[3] = this.m[3];\n      transform.m[4] = this.m[4];\n      transform.m[5] = this.m[5];\n      return transform;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(matrix) {\n      var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n      var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n      var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n      var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n      var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n      var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n      this.m[0] = m11;\n      this.m[1] = m12;\n      this.m[2] = m21;\n      this.m[3] = m22;\n      this.m[4] = dx;\n      this.m[5] = dy;\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n      var m0 = this.m[3] * d;\n      var m1 = -this.m[1] * d;\n      var m2 = -this.m[2] * d;\n      var m3 = this.m[0] * d;\n      var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n      var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n      this.m[0] = m0;\n      this.m[1] = m1;\n      this.m[2] = m2;\n      this.m[3] = m3;\n      this.m[4] = m4;\n      this.m[5] = m5;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(rad) {\n      var c = Math.cos(rad);\n      var s = Math.sin(rad);\n      var m11 = this.m[0] * c + this.m[2] * s;\n      var m12 = this.m[1] * c + this.m[3] * s;\n      var m21 = this.m[0] * -s + this.m[2] * c;\n      var m22 = this.m[1] * -s + this.m[3] * c;\n      this.m[0] = m11;\n      this.m[1] = m12;\n      this.m[2] = m21;\n      this.m[3] = m22;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.m[4] += this.m[0] * x + this.m[2] * y;\n      this.m[5] += this.m[1] * x + this.m[3] * y;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(sx, sy) {\n      this.m[0] *= sx;\n      this.m[1] *= sx;\n      this.m[2] *= sy;\n      this.m[3] *= sy;\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(px, py) {\n      var x = px;\n      var y = py;\n      px = x * this.m[0] + y * this.m[2] + this.m[4];\n      py = x * this.m[1] + y * this.m[3] + this.m[5];\n      return {\n        x: px,\n        y: py\n      };\n    }\n  }]);\n\n  return Transform;\n}();\n\n/***/ }),\n\n/***/ \"./internal/tryEnableWebgl.js\":\n/*!************************************!*\\\n  !*** ./internal/tryEnableWebgl.js ***!\n  \\************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_254446__) {\n\n\"use strict\";\n__nested_webpack_require_254446__.r(__nested_webpack_exports__);\n/* harmony import */ var _webgl_index_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_254446__(/*! ../webgl/index.js */ \"./webgl/index.js\");\n\n/**\n * Checks if webGL is supported and initializes the rendering engine.\n * @param {any} options Options to check if webgl rendering is requested (e.g. enable webgl by passing {renderer: 'webgl'})\n * @returns {Boolean} true if webgl rendering has been successfully initialized. Otherwise, false.\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (options) {\n  if (_webgl_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].renderer.isWebGLAvailable()) {\n    // If WebGL is available on the device, initialize the renderer\n    // And return the renderCanvas from the WebGL rendering path\n    _webgl_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].renderer.initRenderer();\n    options.renderer = 'webgl';\n    options.desynchronized = true;\n    options.preserveDrawingBuffer = true;\n    return true;\n  } // If WebGL is not available on this device, we will fall back\n  // To using the Canvas renderer\n\n\n  console.error('WebGL not available, falling back to Canvas renderer');\n  delete options.renderer;\n  delete options.preserveDrawingBuffer;\n  return false;\n});\n\n/***/ }),\n\n/***/ \"./internal/validator.js\":\n/*!*******************************!*\\\n  !*** ./internal/validator.js ***!\n  \\*******************************/\n/*! exports provided: validateParameterUndefined, validateParameterUndefinedOrNull */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_256039__) {\n\n\"use strict\";\n__nested_webpack_require_256039__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_256039__.d(__nested_webpack_exports__, \"validateParameterUndefined\", function() { return validateParameterUndefined; });\n/* harmony export (binding) */ __nested_webpack_require_256039__.d(__nested_webpack_exports__, \"validateParameterUndefinedOrNull\", function() { return validateParameterUndefinedOrNull; });\n/**\n * Check if the supplied parameter is undefined and throws and error\n * @param {any} checkParam the parameter to validate for undefined\n * @param {any} errorMsg the error message to be thrown\n * @returns {void}\n * @memberof internal\n */\nfunction validateParameterUndefined(checkParam, errorMsg) {\n  if (checkParam === undefined) {\n    throw new Error(errorMsg);\n  }\n}\n/**\n * Check if the supplied parameter is undefined or null and throws and error\n * @param {any} checkParam the parameter to validate for undefined\n * @param {any} errorMsg the error message to be thrown\n * @returns {void}\n * @memberof internal\n */\n\nfunction validateParameterUndefinedOrNull(checkParam, errorMsg) {\n  if (checkParam === undefined || checkParam === null) {\n    throw new Error(errorMsg);\n  }\n}\n\n/***/ }),\n\n/***/ \"./invalidate.js\":\n/*!***********************!*\\\n  !*** ./invalidate.js ***!\n  \\***********************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_257428__) {\n\n\"use strict\";\n__nested_webpack_require_257428__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_257428__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_257428__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_257428__(/*! ./events.js */ \"./events.js\");\n\n\n\n/**\r\n * Sets the invalid flag on the enabled element and fires an event\r\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\r\n * @returns {void}\r\n * @memberof Drawing\r\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  enabledElement.invalid = true;\n  enabledElement.needsRedraw = true;\n  var eventData = {\n    element: element\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element, _events_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].INVALIDATED, eventData);\n});\n\n/***/ }),\n\n/***/ \"./invalidateImageId.js\":\n/*!******************************!*\\\n  !*** ./invalidateImageId.js ***!\n  \\******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_258813__) {\n\n\"use strict\";\n__nested_webpack_require_258813__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_258813__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_258813__(/*! ./internal/drawImage.js */ \"./internal/drawImage.js\");\n\n\n/**\n * Forces the image to be updated/redrawn for all enabled elements\n * displaying the specified imageId\n *\n * @param {string} imageId The imageId of the Cornerstone Image Object to redraw\n * @returns {void}\n * @memberof Drawing\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (imageId) {\n  var enabledElements = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElementsByImageId\"])(imageId);\n  enabledElements.forEach(function (enabledElement) {\n    Object(_internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement, true);\n  });\n});\n\n/***/ }),\n\n/***/ \"./layers.js\":\n/*!*******************!*\\\n  !*** ./layers.js ***!\n  \\*******************/\n/*! exports provided: rescaleImage, addLayer, removeLayer, getLayer, getLayers, getVisibleLayers, setActiveLayer, setLayerImage, getActiveLayer, purgeLayers */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_260120__) {\n\n\"use strict\";\n__nested_webpack_require_260120__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"rescaleImage\", function() { return rescaleImage; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"addLayer\", function() { return addLayer; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"removeLayer\", function() { return removeLayer; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"getLayer\", function() { return getLayer; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"getLayers\", function() { return getLayers; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"getVisibleLayers\", function() { return getVisibleLayers; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"setActiveLayer\", function() { return setActiveLayer; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"setLayerImage\", function() { return setLayerImage; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"getActiveLayer\", function() { return getActiveLayer; });\n/* harmony export (binding) */ __nested_webpack_require_260120__.d(__nested_webpack_exports__, \"purgeLayers\", function() { return purgeLayers; });\n/* harmony import */ var _internal_guid_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_260120__(/*! ./internal/guid.js */ \"./internal/guid.js\");\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_260120__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_260120__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_260120__(/*! ./internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_260120__(/*! ./updateImage.js */ \"./updateImage.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_260120__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_260120__(/*! ./events.js */ \"./events.js\");\n\n\n\n\n\n\n\n/**\n * @module EnabledElementLayers\n */\n\n/**\n * Helper function to trigger an event on a Cornerstone element with\n * a specific layerId\n *\n * @param {String} eventName The event name (e.g. CornerstoneLayerAdded)\n * @param {EnabledElement} enabledElement The Cornerstone enabled element\n * @param {String} layerId The layer's unique identifier\n * @returns {void}\n * @memberof EnabledElementLayers\n */\n\nfunction triggerEventForLayer(eventName, enabledElement, layerId) {\n  var element = enabledElement.element;\n  var eventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    enabledElement: enabledElement,\n    layerId: layerId\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(element, eventName, eventData);\n}\n/**\n * Rescale the target layer to the base layer based on the\n * relative size of each image and their pixel dimensions.\n *\n * This function will update the Viewport parameters of the\n * target layer to a new scale.\n *\n * @param {EnabledElementLayer} baseLayer The base layer\n * @param {EnabledElementLayer} targetLayer The target layer to rescale\n * @returns {void}\n * @memberof EnabledElementLayers\n */\n\n\nfunction rescaleImage(baseLayer, targetLayer) {\n  if (baseLayer.layerId === targetLayer.layerId) {\n    throw new Error('rescaleImage: both arguments represent the same layer');\n  }\n\n  var baseImage = baseLayer.image;\n  var targetImage = targetLayer.image; // Return if these images don't have an imageId (e.g. for dynamic images)\n\n  if (!baseImage.imageId || !targetImage.imageId) {\n    return;\n  } // Column pixel spacing need to be considered when calculating the\n  // ratio between the layer added and base layer images\n\n\n  var targetDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(targetImage, targetLayer.viewport);\n  var baseDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(baseImage, baseLayer.viewport);\n  var colRelative = targetDisplayedArea.columnPixelSpacing * targetImage.width / (baseDisplayedArea.columnPixelSpacing * baseImage.width);\n  var viewportRatio = targetLayer.viewport.scale / baseLayer.viewport.scale * colRelative;\n  targetLayer.viewport.scale = baseLayer.viewport.scale * viewportRatio;\n}\n/**\n * Add a layer to a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image A Cornerstone Image object to add as a new layer\n * @param {Object} options Options for the layer\n *\n * @returns {String} layerId The new layer's unique identifier\n * @memberof EnabledElementLayers\n */\n\nfunction addLayer(element, image, options) {\n  var layerId = Object(_internal_guid_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  var layers = enabledElement.layers;\n  var viewport;\n\n  if (image) {\n    viewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement.canvas, image); // Override the defaults if any optional viewport settings\n    // have been specified\n\n    if (options && options.viewport) {\n      viewport = Object.assign(viewport, options.viewport);\n    }\n  } // Set syncViewports to true by default when a new layer is added\n\n\n  if (enabledElement.syncViewports !== false) {\n    enabledElement.syncViewports = true;\n  }\n\n  var newLayer = {\n    image: image,\n    layerId: layerId,\n    viewport: viewport,\n    options: options || {},\n    renderingTools: {}\n  }; // Rescale the new layer based on the base layer to make sure\n  // they will have a proportional size (pixel spacing)\n\n  if (layers.length && image) {\n    rescaleImage(layers[0], newLayer);\n  }\n\n  layers.push(newLayer);\n  triggerEventForLayer(_events_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].LAYER_ADDED, enabledElement, layerId); // Set the layer as active if it's the first layer added\n\n  if (layers.length === 1 && image) {\n    setActiveLayer(element, layerId);\n  }\n\n  return layerId;\n}\n/**\n * Remove a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n * @memberof EnabledElementLayers\n */\n\nfunction removeLayer(element, layerId) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  var layers = enabledElement.layers;\n  var index = enabledElement.layers.findIndex(function (layer) {\n    return layer.layerId === layerId;\n  });\n\n  if (index !== -1) {\n    layers.splice(index, 1); // If the current layer is active, and we have other layers,\n    // switch to the first layer that remains in the array\n\n    if (layerId === enabledElement.activeLayerId && layers.length) {\n      setActiveLayer(element, layers[0].layerId);\n    }\n\n    triggerEventForLayer(_events_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].LAYER_REMOVED, enabledElement, layerId);\n  }\n}\n/**\n * Retrieve a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @return {EnabledElementLayer} The layer\n * @memberof EnabledElementLayers\n */\n\nfunction getLayer(element, layerId) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  return enabledElement.layers.find(function (layer) {\n    return layer.layerId === layerId;\n  });\n}\n/**\n * Retrieve all layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n * @memberof EnabledElementLayers\n */\n\nfunction getLayers(element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  return enabledElement.layers;\n}\n/**\n * Retrieve all visible layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n * @memberof EnabledElementLayers\n */\n\nfunction getVisibleLayers(element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  return enabledElement.layers.filter(function (layer) {\n    return layer.options && layer.options.visible !== false && layer.options.opacity !== 0;\n  });\n}\n/**\n * Set the active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n * @memberof EnabledElementLayers\n */\n\nfunction setActiveLayer(element, layerId) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element); // Stop here if this layer is already active\n\n  if (enabledElement.activeLayerId === layerId) {\n    return;\n  }\n\n  var index = enabledElement.layers.findIndex(function (layer) {\n    return layer.layerId === layerId;\n  });\n\n  if (index === -1) {\n    throw new Error('setActiveLayer: layer not found in layers array');\n  }\n\n  var layer = enabledElement.layers[index];\n\n  if (!layer.image) {\n    throw new Error('setActiveLayer: layer with undefined image cannot be set as active.');\n  }\n\n  enabledElement.activeLayerId = layerId;\n  enabledElement.image = layer.image;\n  enabledElement.viewport = layer.viewport;\n  Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(element);\n  triggerEventForLayer(_events_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].ACTIVE_LAYER_CHANGED, enabledElement, layerId);\n}\n/**\n * Set a new image for a specific layerId\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image The image to be displayed in this layer\n * @param {String} [layerId] The unique identifier for the layer\n * @returns {void}\n * @memberof EnabledElementLayers\n */\n\nfunction setLayerImage(element, image, layerId) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  var baseLayer = enabledElement.layers[0];\n  var layer;\n\n  if (layerId) {\n    layer = getLayer(element, layerId);\n  } else {\n    layer = getActiveLayer(element);\n  }\n\n  if (!layer) {\n    throw new Error('setLayerImage: Layer not found');\n  }\n\n  layer.image = image;\n\n  if (!image) {\n    layer.viewport = undefined;\n    return;\n  }\n\n  if (!layer.viewport) {\n    var defaultViewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement.canvas, image); // Override the defaults if any optional viewport settings\n    // have been specified\n\n    if (layer.options && layer.options.viewport) {\n      layer.viewport = Object.assign(defaultViewport, layer.options.viewport);\n    }\n\n    if (baseLayer.layerId !== layerId) {\n      rescaleImage(baseLayer, layer);\n    }\n  }\n}\n/**\n * Retrieve the currently active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @return {EnabledElementLayer} The currently active layer\n * @memberof EnabledElementLayers\n */\n\nfunction getActiveLayer(element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  return enabledElement.layers.find(function (layer) {\n    return layer.layerId === enabledElement.activeLayerId;\n  });\n}\n/**\n * Purge the layers\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @returns {void}\n */\n\nfunction purgeLayers(element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  enabledElement.layers = [];\n  delete enabledElement.activeLayerId;\n  delete enabledElement.lastSyncViewportsState;\n}\n\n/***/ }),\n\n/***/ \"./metaData.js\":\n/*!*********************!*\\\n  !*** ./metaData.js ***!\n  \\*********************/\n/*! exports provided: addProvider, removeProvider, default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_272697__) {\n\n\"use strict\";\n__nested_webpack_require_272697__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_272697__.d(__nested_webpack_exports__, \"addProvider\", function() { return addProvider; });\n/* harmony export (binding) */ __nested_webpack_require_272697__.d(__nested_webpack_exports__, \"removeProvider\", function() { return removeProvider; });\n// This module defines a way to access various metadata about an imageId.  This layer of abstraction exists\n// So metadata can be provided in different ways (e.g. by parsing DICOM P10 or by a WADO-RS document)\nvar providers = [];\n/**\n * @module Metadata\n */\n\n/**\n * Adds a metadata provider with the specified priority\n * @param {Function} provider Metadata provider function\n * @param {Number} [priority=0] - 0 is default/normal, > 0 is high, < 0 is low\n *\n * @returns {void}\n * @memberof Metadata\n */\n\nfunction addProvider(provider) {\n  var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var i; // Find the right spot to insert this provider based on priority\n\n  for (i = 0; i < providers.length; i++) {\n    if (providers[i].priority <= priority) {\n      break;\n    }\n  } // Insert the decode task at position i\n\n\n  providers.splice(i, 0, {\n    priority: priority,\n    provider: provider\n  });\n}\n/**\n * Removes the specified provider\n *\n * @param {Function} provider Metadata provider function\n *\n * @returns {void}\n * @memberof Metadata\n */\n\nfunction removeProvider(provider) {\n  for (var i = 0; i < providers.length; i++) {\n    if (providers[i].provider === provider) {\n      providers.splice(i, 1);\n      break;\n    }\n  }\n}\n/**\n * Gets metadata from the registered metadata providers.  Will call each one from highest priority to lowest\n * until one responds\n *\n * @param {String} type The type of metadata requested from the metadata store\n * @param {String} imageId The Cornerstone Image Object's imageId\n *\n * @returns {*} The metadata retrieved from the metadata store\n * @memberof Metadata\n */\n\nfunction getMetaData(type, imageId) {\n  // Invoke each provider in priority order until one returns something\n  for (var i = 0; i < providers.length; i++) {\n    var result = providers[i].provider(type, imageId);\n\n    if (result !== undefined) {\n      return result;\n    }\n  }\n}\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  addProvider: addProvider,\n  removeProvider: removeProvider,\n  get: getMetaData\n});\n\n/***/ }),\n\n/***/ \"./pageToPixel.js\":\n/*!************************!*\\\n  !*** ./pageToPixel.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_275313__) {\n\n\"use strict\";\n__nested_webpack_require_275313__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_275313__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_275313__(/*! ./internal/getTransform.js */ \"./internal/getTransform.js\");\n\n\n/**\n * Converts a point in the page coordinate system to the pixel coordinate\n * system\n *\n * @param {HTMLElement} element The Cornerstone element within which the input point lies\n * @param {Number} pageX The x value in the page coordinate system\n * @param {Number} pageY The y value in the page coordinate system\n *\n * @returns {{x: Number, y: Number}} The transformed point in the pixel coordinate system\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, pageX, pageY) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n\n  if (enabledElement.image === undefined) {\n    throw new Error('image has not been loaded yet');\n  } // Convert the pageX and pageY to the canvas client coordinates\n\n\n  var rect = element.getBoundingClientRect();\n  var clientX = pageX - rect.left - window.pageXOffset;\n  var clientY = pageY - rect.top - window.pageYOffset;\n  var pt = {\n    x: clientX,\n    y: clientY\n  };\n  var transform = Object(_internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement);\n  transform.invert();\n  return transform.transformPoint(pt.x, pt.y);\n});\n\n/***/ }),\n\n/***/ \"./pixelDataToFalseColorData.js\":\n/*!**************************************!*\\\n  !*** ./pixelDataToFalseColorData.js ***!\n  \\**************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_277153__) {\n\n\"use strict\";\n__nested_webpack_require_277153__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_277153__.d(__nested_webpack_exports__, \"default\", function() { return pixelDataToFalseColorData; });\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_277153__(/*! ./colors/index.js */ \"./colors/index.js\");\n\n/**\n * Converts the image pixel data into a false color data\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Object} lookupTable A lookup table Object\n *\n * @returns {void}\n * @deprecated This function is superseded by the ability to set the Viewport parameters\n * to include colormaps.\n */\n\nfunction pixelDataToFalseColorData(image, lookupTable) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  }\n\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = image.width * image.height;\n  var origPixelData = image.origPixelData || image.getPixelData();\n  var storedColorPixelData = new Uint8Array(numPixels * 4);\n  var sp;\n  var mapped;\n  image.color = true;\n  image.falseColor = true;\n  image.origPixelData = origPixelData;\n\n  if (lookupTable instanceof _colors_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].LookupTable) {\n    lookupTable.build();\n\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      mapped = lookupTable.mapValue(sp);\n      storedColorPixelData[canvasImageDataIndex++] = mapped[0];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[1];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[2];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[3];\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][0]; // Red\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][1]; // Green\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][2]; // Blue\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][3]; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][0]; // Red\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][1]; // Green\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][2]; // Blue\n\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][3]; // Alpha\n    }\n  }\n\n  image.rgba = true;\n  image.cachedLut = undefined;\n  image.render = undefined;\n  image.slope = 1;\n  image.intercept = 0;\n  image.minPixelValue = 0;\n  image.maxPixelValue = 255;\n  image.windowWidth = 255;\n  image.windowCenter = 128;\n\n  image.getPixelData = function () {\n    return storedColorPixelData;\n  };\n}\n\n/***/ }),\n\n/***/ \"./pixelToCanvas.js\":\n/*!**************************!*\\\n  !*** ./pixelToCanvas.js ***!\n  \\**************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_280414__) {\n\n\"use strict\";\n__nested_webpack_require_280414__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_280414__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_280414__(/*! ./internal/getTransform.js */ \"./internal/getTransform.js\");\n\n\n/**\n * Converts a point in the pixel coordinate system to the canvas coordinate system\n * system.  This can be used to render using canvas context without having the weird\n * side effects that come from scaling and non square pixels\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {{x: Number, y: Number}} pt The transformed point in the pixel coordinate system\n *\n * @returns {{x: Number, y: Number}} The input point in the canvas coordinate system\n * @memberof PixelCoordinateSystem\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, pt) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var transform = Object(_internal_getTransform_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement);\n  return transform.transformPoint(pt.x, pt.y);\n});\n\n/***/ }),\n\n/***/ \"./rendering/doesImageNeedToBeRendered.js\":\n/*!************************************************!*\\\n  !*** ./rendering/doesImageNeedToBeRendered.js ***!\n  \\************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_282001__) {\n\n\"use strict\";\n__nested_webpack_require_282001__.r(__nested_webpack_exports__);\n/**\n * Determine whether or not an Enabled Element needs to be re-rendered.\n *\n * If the imageId has changed, or if any of the last rendered viewport\n * parameters have changed, this function will return true.\n *\n * @param {EnabledElement} enabledElement An Enabled Element\n * @param {Image} image An Image\n * @return {boolean} Whether or not the Enabled Element needs to re-render its image\n * @memberof rendering\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, image) {\n  var lastRenderedImageId = enabledElement.renderingTools.lastRenderedImageId;\n  var lastRenderedViewport = enabledElement.renderingTools.lastRenderedViewport;\n  return image.imageId !== lastRenderedImageId || !lastRenderedViewport || lastRenderedViewport.windowCenter !== enabledElement.viewport.voi.windowCenter || lastRenderedViewport.windowWidth !== enabledElement.viewport.voi.windowWidth || lastRenderedViewport.invert !== enabledElement.viewport.invert || lastRenderedViewport.rotation !== enabledElement.viewport.rotation || lastRenderedViewport.hflip !== enabledElement.viewport.hflip || lastRenderedViewport.vflip !== enabledElement.viewport.vflip || lastRenderedViewport.modalityLUT !== enabledElement.viewport.modalityLUT || lastRenderedViewport.voiLUT !== enabledElement.viewport.voiLUT || lastRenderedViewport.colormap !== enabledElement.viewport.colormap;\n});\n\n/***/ }),\n\n/***/ \"./rendering/getLut.js\":\n/*!*****************************!*\\\n  !*** ./rendering/getLut.js ***!\n  \\*****************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_283700__) {\n\n\"use strict\";\n__nested_webpack_require_283700__.r(__nested_webpack_exports__);\n/* harmony import */ var _internal_computeAutoVoi_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_283700__(/*! ../internal/computeAutoVoi.js */ \"./internal/computeAutoVoi.js\");\n/* harmony import */ var _lutMatches_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_283700__(/*! ./lutMatches.js */ \"./rendering/lutMatches.js\");\n/* harmony import */ var _internal_generateLut_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_283700__(/*! ../internal/generateLut.js */ \"./internal/generateLut.js\");\n\n\n\n/**\n * Retrieve or generate a LUT Array for an Image and Viewport\n *\n * @param {Image} image An Image Object\n * @param {Viewport} viewport An Viewport Object\n * @param {Boolean} invalidated Whether or not the LUT data has been invalidated\n * (e.g. by a change to the windowWidth, windowCenter, or invert viewport parameters).\n * @return {Uint8ClampedArray} LUT Array\n * @memberof rendering\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (image, viewport, invalidated) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined && image.cachedLut.windowCenter === viewport.voi.windowCenter && image.cachedLut.windowWidth === viewport.voi.windowWidth && Object(_lutMatches_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image.cachedLut.modalityLUT, viewport.modalityLUT) && Object(_lutMatches_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image.cachedLut.voiLUT, viewport.voiLUT) && image.cachedLut.invert === viewport.invert && invalidated !== true) {\n    return image.cachedLut.lutArray;\n  }\n\n  Object(_internal_computeAutoVoi_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(viewport, image); // Lut is invalid or not present, regenerate it and cache it\n\n  Object(_internal_generateLut_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert, viewport.modalityLUT, viewport.voiLUT);\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n  image.cachedLut.voiLUT = viewport.voiLUT;\n  image.cachedLut.modalityLUT = viewport.modalityLUT;\n  return image.cachedLut.lutArray;\n});\n\n/***/ }),\n\n/***/ \"./rendering/index.js\":\n/*!****************************!*\\\n  !*** ./rendering/index.js ***!\n  \\****************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_286215__) {\n\n\"use strict\";\n__nested_webpack_require_286215__.r(__nested_webpack_exports__);\n/* harmony import */ var _renderColorImage_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_286215__(/*! ./renderColorImage.js */ \"./rendering/renderColorImage.js\");\n/* harmony import */ var _renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_286215__(/*! ./renderGrayscaleImage.js */ \"./rendering/renderGrayscaleImage.js\");\n/* harmony import */ var _renderWebImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_286215__(/*! ./renderWebImage.js */ \"./rendering/renderWebImage.js\");\n/* harmony import */ var _renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_286215__(/*! ./renderPseudoColorImage.js */ \"./rendering/renderPseudoColorImage.js\");\n/* harmony import */ var _renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_286215__(/*! ./renderLabelMapImage.js */ \"./rendering/renderLabelMapImage.js\");\n/* harmony import */ var _renderToCanvas_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_286215__(/*! ./renderToCanvas.js */ \"./rendering/renderToCanvas.js\");\n\n\n\n\n\n\n/**\n * @module rendering\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  colorImage: _renderColorImage_js__WEBPACK_IMPORTED_MODULE_0__[\"renderColorImage\"],\n  grayscaleImage: _renderGrayscaleImage_js__WEBPACK_IMPORTED_MODULE_1__[\"renderGrayscaleImage\"],\n  webImage: _renderWebImage_js__WEBPACK_IMPORTED_MODULE_2__[\"renderWebImage\"],\n  pseudoColorImage: _renderPseudoColorImage_js__WEBPACK_IMPORTED_MODULE_3__[\"renderPseudoColorImage\"],\n  labelMapImage: _renderLabelMapImage_js__WEBPACK_IMPORTED_MODULE_4__[\"renderLabelMapImage\"],\n  toCanvas: _renderToCanvas_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"]\n});\n\n/***/ }),\n\n/***/ \"./rendering/initializeRenderCanvas.js\":\n/*!*********************************************!*\\\n  !*** ./rendering/initializeRenderCanvas.js ***!\n  \\*********************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_288219__) {\n\n\"use strict\";\n__nested_webpack_require_288219__.r(__nested_webpack_exports__);\n/**\n * Sets size and clears canvas\n *\n * @param {Object} enabledElement Cornerstone Enabled Element\n * @param {Object} image Image to be rendered\n * @returns {void}\n * @memberof rendering\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, image) {\n  var renderCanvas = enabledElement.renderingTools.renderCanvas; // Resize the canvas\n\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n  var canvasContext = renderCanvas.getContext('2d', {\n    desynchronized: true\n  }); // NOTE - we need to fill the render canvas with white pixels since we\n  // control the luminance using the alpha channel to improve rendering performance.\n\n  canvasContext.fillStyle = 'white';\n  canvasContext.fillRect(0, 0, renderCanvas.width, renderCanvas.height);\n  var renderCanvasData = canvasContext.getImageData(0, 0, image.width, image.height);\n  enabledElement.renderingTools.renderCanvasContext = canvasContext;\n  enabledElement.renderingTools.renderCanvasData = renderCanvasData;\n});\n\n/***/ }),\n\n/***/ \"./rendering/lutMatches.js\":\n/*!*********************************!*\\\n  !*** ./rendering/lutMatches.js ***!\n  \\*********************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_289573__) {\n\n\"use strict\";\n__nested_webpack_require_289573__.r(__nested_webpack_exports__);\n/**\n * Check if two lookup tables match\n *\n * @param {LUT} a A lookup table function\n * @param {LUT} b Another lookup table function\n * @return {boolean} Whether or not they match\n * @memberof rendering\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (a, b) {\n  // If undefined, they are equal\n  if (!a && !b) {\n    return true;\n  } // If one is undefined, not equal\n\n\n  if (!a || !b) {\n    return false;\n  } // Check the unique ids\n\n\n  return a.id === b.id;\n});\n\n/***/ }),\n\n/***/ \"./rendering/renderColorImage.js\":\n/*!***************************************!*\\\n  !*** ./rendering/renderColorImage.js ***!\n  \\***************************************/\n/*! exports provided: renderColorImage, addColorLayer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_290435__) {\n\n\"use strict\";\n__nested_webpack_require_290435__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_290435__.d(__nested_webpack_exports__, \"renderColorImage\", function() { return renderColorImage; });\n/* harmony export (binding) */ __nested_webpack_require_290435__.d(__nested_webpack_exports__, \"addColorLayer\", function() { return addColorLayer; });\n/* harmony import */ var _internal_now_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_290435__(/*! ../internal/now.js */ \"./internal/now.js\");\n/* harmony import */ var _internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_290435__(/*! ../internal/getFillStyle.js */ \"./internal/getFillStyle.js\");\n/* harmony import */ var _internal_generateColorLut_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_290435__(/*! ../internal/generateColorLut.js */ \"./internal/generateColorLut.js\");\n/* harmony import */ var _internal_storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_290435__(/*! ../internal/storedColorPixelDataToCanvasImageData.js */ \"./internal/storedColorPixelDataToCanvasImageData.js\");\n/* harmony import */ var _internal_storedRGBAPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_290435__(/*! ../internal/storedRGBAPixelDataToCanvasImageData.js */ \"./internal/storedRGBAPixelDataToCanvasImageData.js\");\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_290435__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _webgl_index_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_290435__(/*! ../webgl/index.js */ \"./webgl/index.js\");\n/* harmony import */ var _doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_290435__(/*! ./doesImageNeedToBeRendered.js */ \"./rendering/doesImageNeedToBeRendered.js\");\n/* harmony import */ var _initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_290435__(/*! ./initializeRenderCanvas.js */ \"./rendering/initializeRenderCanvas.js\");\n/* harmony import */ var _saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_290435__(/*! ./saveLastRendered.js */ \"./rendering/saveLastRendered.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_290435__(/*! ../internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Generates an appropriate Look Up Table to render the given image with the given window width and level (specified in the viewport)\n * Uses an internal cache for performance\n *\n * @param {Object} image  The image to be rendered\n * @param {Object} viewport The viewport values used for rendering\n * @returns {Uint8ClampedArray} Look Up Table array.\n * @memberof rendering\n */\n\nfunction getLut(image, viewport) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined && image.cachedLut.windowCenter === viewport.voi.windowCenter && image.cachedLut.windowWidth === viewport.voi.windowWidth && image.cachedLut.invert === viewport.invert) {\n    return image.cachedLut.lutArray;\n  } // Lut is invalid or not present, regenerate it and cache it\n\n\n  Object(_internal_generateColorLut_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert);\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n  return image.cachedLut.lutArray;\n}\n/**\n * Returns an appropriate canvas to render the Image. If the canvas available in the cache is appropriate\n * it is returned, otherwise adjustments are made. It also sets the color transfer functions.\n *\n * @param {Object} enabledElement The cornerstone enabled element\n * @param {Object} image The image to be rendered\n * @param {Boolean} invalidated Is pixel data valid\n * @returns {HTMLCanvasElement} An appropriate canvas for rendering the image\n * @memberof rendering\n */\n\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  var canvasWasColor = enabledElement.renderingTools.lastRenderedIsColor === true;\n\n  if (!enabledElement.renderingTools.renderCanvas || !canvasWasColor) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas; // The ww/wc is identity and not inverted - get a canvas with the image rendered into it for\n  // Fast drawing\n\n  if (enabledElement.viewport.voi.windowWidth === 255 && enabledElement.viewport.voi.windowCenter === 128 && enabledElement.viewport.invert === false && image.getCanvas && image.getCanvas()) {\n    return image.getCanvas();\n  } // Apply the lut to the stored pixel data onto the render canvas\n\n\n  if (Object(_doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(enabledElement, image) === false && invalidated !== true) {\n    return renderCanvas;\n  } // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n\n\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    Object(_initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(enabledElement, image);\n  } // Get the lut to use\n\n\n  var start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  var colorLut = getLut(image, enabledElement.viewport);\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext; // The color image voi/invert has been modified - apply the lut to the underlying\n  // Pixel data and put it into the renderCanvas\n\n  if (image.rgba) {\n    Object(_internal_storedRGBAPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(image, colorLut, renderCanvasData.data);\n  } else {\n    Object(_internal_storedColorPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(image, colorLut, renderCanvasData.data);\n  }\n\n  start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])() - start;\n  return renderCanvas;\n}\n/**\n * API function to render a color image to an enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof rendering\n */\n\n\nfunction renderColorImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderColorImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderColorImage: image must be loaded before it can be drawn');\n  } // Get the canvas context and reset the transform\n\n\n  var context = enabledElement.canvas.getContext('2d', {\n    desynchronized: true\n  });\n  context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n  context.fillStyle = Object(_internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement);\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Save the canvas context state and apply the viewport properties\n\n  Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(enabledElement, context);\n  var renderCanvas;\n\n  if (enabledElement.options && enabledElement.options.renderer && enabledElement.options.renderer.toLowerCase() === 'webgl') {\n    // If this enabled element has the option set for WebGL, we should\n    // User it as our renderer.\n    renderCanvas = _webgl_index_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].renderer.render(enabledElement);\n  } else {\n    // If no options are set we will retrieve the renderCanvas through the\n    // Normal Canvas rendering path\n    renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  }\n\n  var imageDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(enabledElement.image, enabledElement.viewport);\n  var sx = imageDisplayedArea.tlhc.x - 1;\n  var sy = imageDisplayedArea.tlhc.y - 1;\n  var width = imageDisplayedArea.brhc.x - sx;\n  var height = imageDisplayedArea.brhc.y - sy;\n  context.drawImage(renderCanvas, sx, sy, width, height, sx, sy, width, height);\n  enabledElement.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(enabledElement);\n}\nfunction addColorLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addColorLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addColorLayer: image must be loaded before it can be drawn');\n  } // All multi-layer images should include the alpha value\n\n\n  image.rgba = true;\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n  var context = layer.canvas.getContext('2d', {\n    desynchronized: true\n  }); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n  layer.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(layer);\n}\n\n/***/ }),\n\n/***/ \"./rendering/renderGrayscaleImage.js\":\n/*!*******************************************!*\\\n  !*** ./rendering/renderGrayscaleImage.js ***!\n  \\*******************************************/\n/*! exports provided: renderGrayscaleImage, addGrayscaleLayer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_300675__) {\n\n\"use strict\";\n__nested_webpack_require_300675__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_300675__.d(__nested_webpack_exports__, \"renderGrayscaleImage\", function() { return renderGrayscaleImage; });\n/* harmony export (binding) */ __nested_webpack_require_300675__.d(__nested_webpack_exports__, \"addGrayscaleLayer\", function() { return addGrayscaleLayer; });\n/* harmony import */ var _internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_300675__(/*! ../internal/getFillStyle.js */ \"./internal/getFillStyle.js\");\n/* harmony import */ var _internal_storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_300675__(/*! ../internal/storedPixelDataToCanvasImageData.js */ \"./internal/storedPixelDataToCanvasImageData.js\");\n/* harmony import */ var _internal_storedPixelDataToCanvasImageDataRGBA_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_300675__(/*! ../internal/storedPixelDataToCanvasImageDataRGBA.js */ \"./internal/storedPixelDataToCanvasImageDataRGBA.js\");\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_300675__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _internal_now_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_300675__(/*! ../internal/now.js */ \"./internal/now.js\");\n/* harmony import */ var _webgl_index_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_300675__(/*! ../webgl/index.js */ \"./webgl/index.js\");\n/* harmony import */ var _getLut_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_300675__(/*! ./getLut.js */ \"./rendering/getLut.js\");\n/* harmony import */ var _doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_300675__(/*! ./doesImageNeedToBeRendered.js */ \"./rendering/doesImageNeedToBeRendered.js\");\n/* harmony import */ var _initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_300675__(/*! ./initializeRenderCanvas.js */ \"./rendering/initializeRenderCanvas.js\");\n/* harmony import */ var _saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_300675__(/*! ./saveLastRendered.js */ \"./rendering/saveLastRendered.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_10__ = __nested_webpack_require_300675__(/*! ../internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Returns an appropriate canvas to render the Image. If the canvas available in the cache is appropriate\n * it is returned, otherwise adjustments are made. It also sets the color transfer functions.\n *\n * @param {Object} enabledElement The cornerstone enabled element\n * @param {Object} image The image to be rendered\n * @param {Boolean} invalidated Is pixel data valid\n * @param {Boolean} [useAlphaChannel = true] Will an alpha channel be used\n * @returns {HTMLCanvasElement} An appropriate canvas for rendering the image\n * @memberof rendering\n */\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  var useAlphaChannel = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  var canvasWasColor = enabledElement.renderingTools.lastRenderedIsColor === true;\n\n  if (!enabledElement.renderingTools.renderCanvas || canvasWasColor) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n    Object(_initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(enabledElement, image);\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  if (Object(_doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(enabledElement, image) === false && invalidated !== true) {\n    return renderCanvas;\n  } // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n\n\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    Object(_initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(enabledElement, image);\n  } // Get the lut to use\n\n\n  var start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n  var lut = Object(_getLut_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(image, enabledElement.viewport, invalidated);\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])() - start;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext; // Gray scale image - apply the lut and put the resulting image onto the render canvas\n\n  if (useAlphaChannel) {\n    Object(_internal_storedPixelDataToCanvasImageData_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(image, lut, renderCanvasData.data);\n  } else {\n    Object(_internal_storedPixelDataToCanvasImageDataRGBA_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(image, lut, renderCanvasData.data);\n  }\n\n  start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])() - start;\n  return renderCanvas;\n}\n/**\n * API function to draw a grayscale image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof rendering\n */\n\n\nfunction renderGrayscaleImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  } // Get the canvas context and reset the transform\n\n\n  var context = enabledElement.canvas.getContext('2d', {\n    desynchronized: true\n  });\n  context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n  context.fillStyle = Object(_internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement);\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Save the canvas context state and apply the viewport properties\n\n  Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(enabledElement, context);\n  var renderCanvas;\n\n  if (enabledElement.options && enabledElement.options.renderer && enabledElement.options.renderer.toLowerCase() === 'webgl') {\n    // If this enabled element has the option set for WebGL, we should\n    // User it as our renderer.\n    renderCanvas = _webgl_index_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].renderer.render(enabledElement);\n  } else {\n    // If no options are set we will retrieve the renderCanvas through the\n    // Normal Canvas rendering path\n    renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  }\n\n  var imageDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(enabledElement.image, enabledElement.viewport);\n  var sx = imageDisplayedArea.tlhc.x - 1;\n  var sy = imageDisplayedArea.tlhc.y - 1;\n  var width = imageDisplayedArea.brhc.x - sx;\n  var height = imageDisplayedArea.brhc.y - sy;\n  context.drawImage(renderCanvas, sx, sy, width, height, sx, sy, width, height);\n  enabledElement.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(enabledElement);\n}\n/**\n * API function to draw a grayscale image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @param {Boolean} [useAlphaChannel] - Whether or not to render the grayscale image using only the alpha channel.\n                                        This does not work if this layer is not the first layer in the enabledElement.\n * @returns {void}\n */\n\nfunction addGrayscaleLayer(layer, invalidated) {\n  var useAlphaChannel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (layer === undefined) {\n    throw new Error('addGrayscaleLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addGrayscaleLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated, useAlphaChannel);\n  var context = layer.canvas.getContext('2d', {\n    desynchronized: true\n  }); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n  layer.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(layer);\n}\n\n/***/ }),\n\n/***/ \"./rendering/renderLabelMapImage.js\":\n/*!******************************************!*\\\n  !*** ./rendering/renderLabelMapImage.js ***!\n  \\******************************************/\n/*! exports provided: renderLabelMapImage, addLabelMapLayer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_310136__) {\n\n\"use strict\";\n__nested_webpack_require_310136__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_310136__.d(__nested_webpack_exports__, \"renderLabelMapImage\", function() { return renderLabelMapImage; });\n/* harmony export (binding) */ __nested_webpack_require_310136__.d(__nested_webpack_exports__, \"addLabelMapLayer\", function() { return addLabelMapLayer; });\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_310136__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _internal_now_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_310136__(/*! ../internal/now.js */ \"./internal/now.js\");\n/* harmony import */ var _internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_310136__(/*! ../internal/getFillStyle.js */ \"./internal/getFillStyle.js\");\n/* harmony import */ var _initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_310136__(/*! ./initializeRenderCanvas.js */ \"./rendering/initializeRenderCanvas.js\");\n/* harmony import */ var _saveLastRendered_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_310136__(/*! ./saveLastRendered.js */ \"./rendering/saveLastRendered.js\");\n/* harmony import */ var _doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_310136__(/*! ./doesImageNeedToBeRendered.js */ \"./rendering/doesImageNeedToBeRendered.js\");\n/* harmony import */ var _internal_storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_310136__(/*! ../internal/storedPixelDataToCanvasImageDataColorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataColorLUT.js\");\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_310136__(/*! ../colors/index.js */ \"./colors/index.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_310136__(/*! ../internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n\n\n\n\n\n\n/**\n * Returns an appropriate canvas to render the Image. If the canvas available in the cache is appropriate\n * it is returned, otherwise adjustments are made. It also sets the color transfer functions.\n *\n * @param {Object} enabledElement The cornerstone enabled element\n * @param {Object} image The image to be rendered\n * @param {Boolean} invalidated Is pixel data valid\n * @returns {HTMLCanvasElement} An appropriate canvas for rendering the image\n * @memberof rendering\n */\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n  var colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (enabledElement.options.colormap) {\n    console.warn('enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead');\n  }\n\n  if (colormap && typeof colormap === 'string') {\n    colormap = _colors_index_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderLabelMapImage: colormap not found.');\n  }\n\n  var colormapId = colormap.getId();\n\n  if (Object(_doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(enabledElement, image) === false && invalidated !== true && enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  } // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n\n\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    Object(_initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(enabledElement, image);\n  } // Get the lut to use\n\n\n  var start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated || enabledElement.renderingTools.colormapId !== colormapId) {\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  var colorLut = enabledElement.renderingTools.colorLut;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n  Object(_internal_storedPixelDataToCanvasImageDataColorLUT_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(image, colorLut, renderCanvasData.data);\n  start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  return renderCanvas;\n}\n/**\n * API function to draw a label map image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof rendering\n */\n\n\nfunction renderLabelMapImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderLabelMapImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderLabelMapImage: image must be loaded before it can be drawn');\n  } // Get the canvas context and reset the transform\n\n\n  var context = enabledElement.canvas.getContext('2d', {\n    desynchronized: true\n  });\n  context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n  context.fillStyle = Object(_internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement);\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Save the canvas context state and apply the viewport properties\n\n  Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement, context); // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for label map pipeline\n\n  var renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  var imageDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(enabledElement.image, enabledElement.viewport);\n  var sx = imageDisplayedArea.tlhc.x - 1;\n  var sy = imageDisplayedArea.tlhc.y - 1;\n  var width = imageDisplayedArea.brhc.x - sx;\n  var height = imageDisplayedArea.brhc.y - sy;\n  context.drawImage(renderCanvas, sx, sy, width, height, sx, sy, width, height);\n  enabledElement.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(enabledElement);\n}\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\n\nfunction addLabelMapLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addLabelMapLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addLabelMapLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n  var context = layer.canvas.getContext('2d', {\n    desynchronized: true\n  }); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n  layer.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(layer);\n}\n\n/***/ }),\n\n/***/ \"./rendering/renderPseudoColorImage.js\":\n/*!*********************************************!*\\\n  !*** ./rendering/renderPseudoColorImage.js ***!\n  \\*********************************************/\n/*! exports provided: renderPseudoColorImage, addPseudoColorLayer */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_318753__) {\n\n\"use strict\";\n__nested_webpack_require_318753__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_318753__.d(__nested_webpack_exports__, \"renderPseudoColorImage\", function() { return renderPseudoColorImage; });\n/* harmony export (binding) */ __nested_webpack_require_318753__.d(__nested_webpack_exports__, \"addPseudoColorLayer\", function() { return addPseudoColorLayer; });\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_318753__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _internal_now_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_318753__(/*! ../internal/now.js */ \"./internal/now.js\");\n/* harmony import */ var _internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_318753__(/*! ../internal/getFillStyle.js */ \"./internal/getFillStyle.js\");\n/* harmony import */ var _initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_318753__(/*! ./initializeRenderCanvas.js */ \"./rendering/initializeRenderCanvas.js\");\n/* harmony import */ var _getLut_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_318753__(/*! ./getLut.js */ \"./rendering/getLut.js\");\n/* harmony import */ var _saveLastRendered_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_318753__(/*! ./saveLastRendered.js */ \"./rendering/saveLastRendered.js\");\n/* harmony import */ var _doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_6__ = __nested_webpack_require_318753__(/*! ./doesImageNeedToBeRendered.js */ \"./rendering/doesImageNeedToBeRendered.js\");\n/* harmony import */ var _internal_storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_7__ = __nested_webpack_require_318753__(/*! ../internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js */ \"./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js\");\n/* harmony import */ var _colors_index_js__WEBPACK_IMPORTED_MODULE_8__ = __nested_webpack_require_318753__(/*! ../colors/index.js */ \"./colors/index.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_9__ = __nested_webpack_require_318753__(/*! ../internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Returns an appropriate canvas to render the Image. If the canvas available in the cache is appropriate\n * it is returned, otherwise adjustments are made. It also sets the color transfer functions.\n *\n * @param {Object} enabledElement The cornerstone enabled element\n * @param {Object} image The image to be rendered\n * @param {Boolean} invalidated Is pixel data valid\n * @returns {HTMLCanvasElement} An appropriate canvas for rendering the image\n * @memberof rendering\n */\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n  var colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (enabledElement.options && enabledElement.options.colormap) {\n    console.warn('enabledElement.options.colormap is deprecated. Use enabledElement.viewport.colormap instead');\n  }\n\n  if (colormap && typeof colormap === 'string') {\n    colormap = _colors_index_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderPseudoColorImage: colormap not found.');\n  }\n\n  var colormapId = colormap.getId();\n\n  if (Object(_doesImageNeedToBeRendered_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(enabledElement, image) === false && invalidated !== true && enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  } // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n\n\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    Object(_initializeRenderCanvas_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(enabledElement, image);\n  } // Get the lut to use\n\n\n  var start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated || enabledElement.renderingTools.colormapId !== colormapId) {\n    colormap.setNumberOfColors(256);\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  var lut = Object(_getLut_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(image, enabledElement.viewport, invalidated);\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  var colorLut = enabledElement.renderingTools.colorLut;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n  Object(_internal_storedPixelDataToCanvasImageDataPseudocolorLUT_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(image, lut, colorLut, renderCanvasData.data);\n  start = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = Object(_internal_now_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])() - start;\n  return renderCanvas;\n}\n/**\n * API function to draw a pseudo-color image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof rendering\n */\n\n\nfunction renderPseudoColorImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  } // Get the canvas context and reset the transform\n\n\n  var context = enabledElement.canvas.getContext('2d', {\n    desynchronized: true\n  });\n  context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n  context.fillStyle = Object(_internal_getFillStyle_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement);\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Save the canvas context state and apply the viewport properties\n\n  Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement, context); // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for pseudocolor pipeline\n\n  var renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  var imageDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(enabledElement.image, enabledElement.viewport);\n  var sx = imageDisplayedArea.tlhc.x - 1;\n  var sy = imageDisplayedArea.tlhc.y - 1;\n  var width = imageDisplayedArea.brhc.x - sx;\n  var height = imageDisplayedArea.brhc.y - sy;\n  context.drawImage(renderCanvas, sx, sy, width, height, sx, sy, width, height);\n  enabledElement.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(enabledElement);\n}\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\n\nfunction addPseudoColorLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addPseudoColorLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addPseudoColorLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n  var context = layer.canvas.getContext('2d', {\n    desynchronized: true\n  }); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n  layer.renderingTools = Object(_saveLastRendered_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(layer);\n}\n\n/***/ }),\n\n/***/ \"./rendering/renderToCanvas.js\":\n/*!*************************************!*\\\n  !*** ./rendering/renderToCanvas.js ***!\n  \\*************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_327656__) {\n\n\"use strict\";\n__nested_webpack_require_327656__.r(__nested_webpack_exports__);\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_327656__(/*! ../triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_327656__(/*! ../events.js */ \"./events.js\");\n/* harmony import */ var _internal_drawImageSync_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_327656__(/*! ../internal/drawImageSync.js */ \"./internal/drawImageSync.js\");\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_327656__(/*! ../internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _internal_tryEnableWebgl_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_327656__(/*! ../internal/tryEnableWebgl.js */ \"./internal/tryEnableWebgl.js\");\n\n\n\n\n\n/**\r\n * @typedef {Object} EnabledElementStub\r\n * @property {HTMLElement} element  The enabled element\r\n * @property {HTMLCanvasElement} canvas The current canvas\r\n * @property {Object} image Currently displayed image\r\n * @property {Boolean} invalid Whether or not the image pixel data has been changed\r\n * @property {Boolean} needsRedraw  A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\r\n * @property {Object} options Layer drawing options\r\n * @property {Object[]} layers Layers added to the EnabledElement\r\n * @property {Object} data\r\n * @property {Object} renderingTools\r\n * @property {Object} viewport The current viewport\r\n * @memberof rendering\r\n */\n\n/**\r\n * creates a dummy enabled element\r\n *\r\n * @param {HTMLCanvasElement} canvas the canvas that will be assigned to the enabled element.\r\n * @param {any} image An Image loaded by a Cornerstone Image Loader\r\n * @param { any } options Options for rendering the image (e.g.enable webgl by {renderer: 'webgl' })\r\n * @param { any } viewport A set of Cornerstone viewport parameters\r\n * @returns {EnabledElementStub} a dummy enabled element\r\n * @memberof rendering\r\n */\n\nfunction createEnabledElementStub(canvas, image, options, viewport) {\n  return {\n    element: canvas,\n    canvas: canvas,\n    image: image,\n    invalid: true,\n    // True if image needs to be drawn, false if not\n    needsRedraw: true,\n    options: options,\n    layers: [],\n    data: {},\n    renderingTools: {},\n    viewport: viewport\n  };\n}\n/**\r\n * Render the image to the provided canvas immediately.\r\n * @param {any} canvas The HTML canvas where the image will be rendered.\r\n * @param {any} image An Image loaded by a Cornerstone Image Loader\r\n * @param {any} [viewport = null] A set of Cornerstone viewport parameters\r\n * @param {any} [options = null] Options for rendering the image (e.g. enable webgl by {renderer: 'webgl'})\r\n * @returns {void}\r\n * @memberof rendering\r\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (canvas, image) {\n  var viewport = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  if (canvas === undefined) {\n    throw new Error('renderToCanvas: parameter canvas cannot be undefined');\n  } // If this enabled element has the option set for WebGL, we should\n  // Check if this device actually supports it\n\n\n  if (options && options.renderer && options.renderer.toLowerCase() === 'webgl') {\n    Object(_internal_tryEnableWebgl_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(options);\n  }\n\n  var defaultViewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(canvas, image);\n\n  if (viewport) {\n    Object.assign(defaultViewport, viewport);\n  }\n\n  var enabledElementStub = createEnabledElementStub(canvas, image, options, defaultViewport);\n  var eventDetails = {\n    enabledElement: enabledElementStub,\n    timestamp: Date.now()\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElementStub.element, _events_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].PRE_RENDER, eventDetails);\n  Object(_internal_drawImageSync_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElementStub, enabledElementStub.invalid);\n});\n\n/***/ }),\n\n/***/ \"./rendering/renderWebImage.js\":\n/*!*************************************!*\\\n  !*** ./rendering/renderWebImage.js ***!\n  \\*************************************/\n/*! exports provided: renderWebImage */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_332122__) {\n\n\"use strict\";\n__nested_webpack_require_332122__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_332122__.d(__nested_webpack_exports__, \"renderWebImage\", function() { return renderWebImage; });\n/* harmony import */ var _setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_332122__(/*! ../setToPixelCoordinateSystem.js */ \"./setToPixelCoordinateSystem.js\");\n/* harmony import */ var _renderColorImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_332122__(/*! ./renderColorImage.js */ \"./rendering/renderColorImage.js\");\n/* harmony import */ var _internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_332122__(/*! ../internal/getDisplayedArea.js */ \"./internal/getDisplayedArea.js\");\n\n\n\n/**\n * API function to draw a standard web image (PNG, JPG) to an enabledImage\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n * @memberof rendering\n */\n\nfunction renderWebImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderWebImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderWebImage: image must be loaded before it can be drawn');\n  } // If the viewport ww/wc and invert all match the initial state of the image, we can draw the image\n  // Directly. If any of those are changed, we call renderColorImage() to apply the lut\n\n\n  if (enabledElement.viewport.voi.windowWidth === enabledElement.image.windowWidth && enabledElement.viewport.voi.windowCenter === enabledElement.image.windowCenter && enabledElement.viewport.invert === false) {\n    // Get the canvas context and reset the transform\n    var context = enabledElement.canvas.getContext('2d', {\n      desynchronized: true\n    });\n    context.setTransform(1, 0, 0, 1, 0, 0); // Clear the canvas\n\n    context.fillStyle = 'black';\n    context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height); // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n\n    context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled; // Save the canvas context state and apply the viewport properties\n\n    Object(_setToPixelCoordinateSystem_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement, context);\n    var imageDisplayedArea = Object(_internal_getDisplayedArea_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(enabledElement.image, enabledElement.viewport);\n    var sx = imageDisplayedArea.tlhc.x - 1;\n    var sy = imageDisplayedArea.tlhc.y - 1;\n    var width = imageDisplayedArea.brhc.x - sx;\n    var height = imageDisplayedArea.brhc.y - sy;\n    context.drawImage(image.getImage(), sx, sy, width, height, sx, sy, width, height);\n  } else {\n    Object(_renderColorImage_js__WEBPACK_IMPORTED_MODULE_1__[\"renderColorImage\"])(enabledElement, invalidated);\n  }\n}\n\n/***/ }),\n\n/***/ \"./rendering/saveLastRendered.js\":\n/*!***************************************!*\\\n  !*** ./rendering/saveLastRendered.js ***!\n  \\***************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_335495__) {\n\n\"use strict\";\n__nested_webpack_require_335495__.r(__nested_webpack_exports__);\n/**\n * Saves the parameters of the last render into renderingTools, used later to decide if data can be reused.\n *\n * @param {Object} enabledElement Cornerstone EnabledElement\n * @returns {Object} enabledElement.renderingTools\n * @memberof rendering\n */\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement) {\n  var imageId = enabledElement.image.imageId;\n  var viewport = enabledElement.viewport;\n  var isColor = enabledElement.image.color;\n  enabledElement.renderingTools.lastRenderedImageId = imageId;\n  enabledElement.renderingTools.lastRenderedIsColor = isColor;\n  enabledElement.renderingTools.lastRenderedViewport = {\n    windowCenter: viewport.voi.windowCenter,\n    windowWidth: viewport.voi.windowWidth,\n    invert: viewport.invert,\n    rotation: viewport.rotation,\n    hflip: viewport.hflip,\n    vflip: viewport.vflip,\n    modalityLUT: viewport.modalityLUT,\n    voiLUT: viewport.voiLUT,\n    colormap: viewport.colormap\n  };\n  return enabledElement.renderingTools;\n});\n\n/***/ }),\n\n/***/ \"./requestPool/RequestPoolManager.ts\":\n/*!*******************************************!*\\\n  !*** ./requestPool/RequestPoolManager.ts ***!\n  \\*******************************************/\n/*! exports provided: RequestPoolManager */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_336882__) {\n\n\"use strict\";\n__nested_webpack_require_336882__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_336882__.d(__nested_webpack_exports__, \"RequestPoolManager\", function() { return RequestPoolManager; });\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar RequestPoolManager = /*#__PURE__*/function () {\n  // priority is fixed for interaction and thumbnail to be 0, however,\n  // the priority of prefetch can be configured and it can have priorities other\n  // than 0 (highest priority)\n  // TODO: Some of this stuff shouldn't be public but it's easier right now\n  function RequestPoolManager() {\n    _classCallCheck(this, RequestPoolManager);\n\n    _defineProperty(this, \"requestPool\", void 0);\n\n    _defineProperty(this, \"awake\", void 0);\n\n    _defineProperty(this, \"numRequests\", void 0);\n\n    _defineProperty(this, \"maxNumRequests\", void 0);\n\n    _defineProperty(this, \"grabDelay\", void 0);\n\n    _defineProperty(this, \"timeoutHandle\", void 0);\n\n    this.requestPool = {\n      interaction: {\n        0: []\n      },\n      thumbnail: {\n        0: []\n      },\n      prefetch: {\n        0: []\n      }\n    };\n    this.awake = false;\n    this.grabDelay = 5;\n    this.numRequests = {\n      interaction: 0,\n      thumbnail: 0,\n      prefetch: 0\n    };\n    this.maxNumRequests = {\n      interaction: 6,\n      thumbnail: 6,\n      prefetch: 5\n    };\n  }\n\n  _createClass(RequestPoolManager, [{\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.timeoutHandle) {\n        window.clearTimeout(this.timeoutHandle);\n      }\n    }\n    /**\n     * Adds the requests to the pool of requests.\n     *\n     * @param requestFn - A function that returns a promise which resolves in the image\n     * @param type - Priority category, it can be either of interaction, prefetch,\n     * or thumbnail.\n     * @param additionalDetails - Additional details that requests can contain.\n     * For instance the volumeUID for the volume requests\n     * @param priority - Priority number for each category of requests. Its default\n     * value is priority 0. The lower the priority number, the higher the priority number\n     *\n     * @returns void\n     *\n     */\n\n  }, {\n    key: \"addRequest\",\n    value: function addRequest(requestFn, type, additionalDetails) {\n      var priority = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var addToBeginning = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      // Describe the request\n      var requestDetails = {\n        requestFn: requestFn,\n        type: type,\n        additionalDetails: additionalDetails\n      }; // Check if the priority group exists on the request type\n\n      if (this.requestPool[type][priority] === undefined) {\n        this.requestPool[type][priority] = [];\n      } // Adding the request to the correct priority group of the request type\n\n\n      if (addToBeginning) {\n        // Add it to the beginning of the stack\n        this.requestPool[type][priority].unshift(requestDetails);\n      } else {\n        // Add it to the end of the stack\n        this.requestPool[type][priority].push(requestDetails);\n      } // Wake up\n\n\n      if (!this.awake) {\n        this.awake = true;\n        this.startGrabbing();\n      }\n    }\n    /**\n     * Filter the requestPoolManager's pool of request based on the result of\n     * provided filter function. The provided filter function needs to return false or true\n     *\n     * @param filterFunction The filter function for filtering of the requests to keep\n     * @category requestPool\n     */\n\n  }, {\n    key: \"filterRequests\",\n    value: function filterRequests(filterFunction) {\n      var _this = this;\n\n      Object.keys(this.requestPool).forEach(function (type) {\n        var requestType = _this.requestPool[type];\n        Object.keys(requestType).forEach(function (priority) {\n          requestType[priority] = requestType[priority].filter(function (requestDetails) {\n            return filterFunction(requestDetails);\n          });\n        });\n      });\n    }\n    /**\n     * Clears the requests specific to the provided type. For instance, the\n     * pool of requests of type 'interaction' can be cleared via this function.\n     *\n     *\n     * @param type category of the request (either interaction, prefetch or thumbnail)\n     * @category requestPool\n     */\n\n  }, {\n    key: \"clearRequestStack\",\n    value: function clearRequestStack(type) {\n      if (!this.requestPool[type]) {\n        throw new Error(\"No category for the type \".concat(type, \" found\"));\n      }\n\n      this.requestPool[type] = {\n        0: []\n      };\n    }\n  }, {\n    key: \"sendRequest\",\n    value: function sendRequest(_ref) {\n      var _this2 = this;\n\n      var requestFn = _ref.requestFn,\n          type = _ref.type;\n      // Increment the number of current requests of this type\n      this.numRequests[type]++;\n      this.awake = true;\n      requestFn()[\"finally\"](function () {\n        _this2.numRequests[type]--;\n\n        _this2.startAgain();\n      });\n    }\n  }, {\n    key: \"startGrabbing\",\n    value: function startGrabbing() {\n      // Begin by grabbing X images\n      // TODO: This is the reason things aren't going as fast as expected\n      // const maxSimultaneousRequests = getMaxSimultaneousRequests()\n      // this.maxNumRequests = {\n      //   interaction: Math.max(maxSimultaneousRequests, 1),\n      //   thumbnail: Math.max(maxSimultaneousRequests - 2, 1),\n      //   prefetch: Math.max(maxSimultaneousRequests - 1, 1),\n      // }\n      var maxRequests = this.maxNumRequests.interaction + this.maxNumRequests.thumbnail + this.maxNumRequests.prefetch;\n      var currentRequests = this.numRequests.interaction + this.numRequests.thumbnail + this.numRequests.prefetch;\n      var requestsToSend = maxRequests - currentRequests;\n\n      for (var i = 0; i < requestsToSend; i++) {\n        var _requestDetails = this.getNextRequest();\n\n        if (_requestDetails === false) {\n          break;\n        } else if (_requestDetails) {\n          this.sendRequest(_requestDetails);\n        }\n      }\n    }\n  }, {\n    key: \"startAgain\",\n    value: function startAgain() {\n      var _this3 = this;\n\n      if (!this.awake) {\n        return;\n      }\n\n      if (this.grabDelay) {\n        this.timeoutHandle = window.setTimeout(function () {\n          _this3.startGrabbing();\n        }, this.grabDelay);\n      } else {\n        this.startGrabbing();\n      }\n    }\n  }, {\n    key: \"getSortedPriorityGroups\",\n    value: function getSortedPriorityGroups(type) {\n      var _this4 = this;\n\n      var priorities = Object.keys(this.requestPool[type]).map(Number).filter(function (priority) {\n        return _this4.requestPool[type][priority].length;\n      }).sort();\n      return priorities;\n    }\n  }, {\n    key: \"getNextRequest\",\n    value: function getNextRequest() {\n      var interactionPriorities = this.getSortedPriorityGroups('interaction');\n\n      var _iterator = _createForOfIteratorHelper(interactionPriorities),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var priority = _step.value;\n\n          if (this.requestPool.interaction[priority].length && this.numRequests.interaction < this.maxNumRequests.interaction) {\n            return this.requestPool.interaction[priority].shift();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var thumbnailPriorities = this.getSortedPriorityGroups('thumbnail');\n\n      var _iterator2 = _createForOfIteratorHelper(thumbnailPriorities),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _priority = _step2.value;\n\n          if (this.requestPool.thumbnail[_priority].length && this.numRequests.thumbnail < this.maxNumRequests.thumbnail) {\n            return this.requestPool.thumbnail[_priority].shift();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var prefetchPriorities = this.getSortedPriorityGroups('prefetch');\n\n      var _iterator3 = _createForOfIteratorHelper(prefetchPriorities),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _priority2 = _step3.value;\n\n          if (this.requestPool.prefetch[_priority2].length && this.numRequests.prefetch < this.maxNumRequests.prefetch) {\n            return this.requestPool.prefetch[_priority2].shift();\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      if (!interactionPriorities.length && !thumbnailPriorities.length && !prefetchPriorities.length) {\n        this.awake = false;\n      }\n\n      return false;\n    }\n    /**\n     * Returns the request pool containing different categories, their priority and\n     * the added request details.\n     *\n     * @returns\n     * @category requestPool\n     */\n\n  }, {\n    key: \"getRequestPool\",\n    value: function getRequestPool() {\n      return this.requestPool;\n    }\n  }]);\n\n  return RequestPoolManager;\n}();\n\n\n\n/***/ }),\n\n/***/ \"./requestPool/imageLoadPoolManager.ts\":\n/*!*********************************************!*\\\n  !*** ./requestPool/imageLoadPoolManager.ts ***!\n  \\*********************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_348735__) {\n\n\"use strict\";\n__nested_webpack_require_348735__.r(__nested_webpack_exports__);\n/* harmony import */ var _RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_348735__(/*! ./RequestPoolManager.ts */ \"./requestPool/RequestPoolManager.ts\");\n // Loading = Retrieval + Decoding\n\nvar imageLoadPoolManager = new _RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_0__[\"RequestPoolManager\"]();\nimageLoadPoolManager.maxNumRequests = {\n  interaction: 1000,\n  thumbnail: 1000,\n  prefetch: 1000\n};\nimageLoadPoolManager.grabDelay = 0;\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (imageLoadPoolManager);\n\n/***/ }),\n\n/***/ \"./requestPool/imageRetrievalPoolManager.ts\":\n/*!**************************************************!*\\\n  !*** ./requestPool/imageRetrievalPoolManager.ts ***!\n  \\**************************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_349662__) {\n\n\"use strict\";\n__nested_webpack_require_349662__.r(__nested_webpack_exports__);\n/* harmony import */ var _RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_349662__(/*! ./RequestPoolManager.ts */ \"./requestPool/RequestPoolManager.ts\");\n // Retrieval (usually) === XHR requests\n\nvar imageRetrievalPoolManager = new _RequestPoolManager_ts__WEBPACK_IMPORTED_MODULE_0__[\"RequestPoolManager\"]();\nimageRetrievalPoolManager.maxNumRequests = {\n  interaction: 20,\n  thumbnail: 20,\n  prefetch: 20\n};\nimageRetrievalPoolManager.grabDelay = 0;\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (imageRetrievalPoolManager);\n\n/***/ }),\n\n/***/ \"./reset.js\":\n/*!******************!*\\\n  !*** ./reset.js ***!\n  \\******************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_350481__) {\n\n\"use strict\";\n__nested_webpack_require_350481__.r(__nested_webpack_exports__);\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_350481__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_350481__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_350481__(/*! ./updateImage.js */ \"./updateImage.js\");\n\n\n\n/**\n * Resets the viewport to the default settings\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @returns {void}\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element);\n  enabledElement.viewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement.canvas, enabledElement.image);\n  Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\n});\n\n/***/ }),\n\n/***/ \"./resize.js\":\n/*!*******************!*\\\n  !*** ./resize.js ***!\n  \\*******************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_351801__) {\n\n\"use strict\";\n__nested_webpack_require_351801__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_351801__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _fitToWindow_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_351801__(/*! ./fitToWindow.js */ \"./fitToWindow.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_351801__(/*! ./updateImage.js */ \"./updateImage.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_351801__(/*! ./triggerEvent.js */ \"./triggerEvent.js\");\n/* harmony import */ var _internal_getImageSize_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_351801__(/*! ./internal/getImageSize.js */ \"./internal/getImageSize.js\");\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_5__ = __nested_webpack_require_351801__(/*! ./events.js */ \"./events.js\");\n\n\n\n\n\n\n/**\r\n * This module is responsible for enabling an element to display images with cornerstone\r\n *\r\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\r\n * @param {HTMLElement} canvas The Canvas DOM element within the DOM element enabled for Cornerstone\r\n * @returns {void}\r\n */\n\nfunction setCanvasSize(element, canvas) {\n  // The device pixel ratio is 1.0 for normal displays and > 1.0\n  // For high DPI displays like Retina\n\n  /*\r\n      This functionality is disabled due to buggy behavior on systems with mixed DPI's.  If the canvas\r\n    is created on a display with high DPI (e.g. 2.0) and then the browser window is dragged to\r\n    a different display with a different DPI (e.g. 1.0), the canvas is not recreated so the pageToPixel\r\n    produces incorrect results.  I couldn't find any way to determine when the DPI changed other than\r\n    by polling which is not very clean.  If anyone has any ideas here, please let me know, but for now\r\n    we will disable this functionality.  We may want\r\n    to add a mechanism to optionally enable this functionality if we can determine it is safe to do\r\n    so (e.g. iPad or iPhone or perhaps enumerate the displays on the system.  I am choosing\r\n    to be cautious here since I would rather not have bug reports or safety issues related to this\r\n    scenario.\r\n      var devicePixelRatio = window.devicePixelRatio;\r\n    if(devicePixelRatio === undefined) {\r\n        devicePixelRatio = 1.0;\r\n    }\r\n    */\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.width !== element.clientWidth) {\n    canvas.width = element.clientWidth;\n    canvas.style.width = \"\".concat(element.clientWidth, \"px\");\n  } // Avoid setting the same value because it flashes the canvas with IE and Edge\n\n\n  if (canvas.height !== element.clientHeight) {\n    canvas.height = element.clientHeight;\n    canvas.style.height = \"\".concat(element.clientHeight, \"px\");\n  }\n}\n/**\r\n * Checks if the image of a given enabled element fitted the window\r\n * before the resize\r\n *\r\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\r\n * @param {number} oldCanvasWidth The width of the canvas before the resize\r\n * @param {number} oldCanvasHeight The height of the canvas before the resize\r\n * @return {Boolean} true if it fitted the windows, false otherwise\r\n */\n\n\nfunction wasFitToWindow(enabledElement, oldCanvasWidth, oldCanvasHeight) {\n  var scale = enabledElement.viewport.scale;\n  var imageSize = Object(_internal_getImageSize_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(enabledElement.image, enabledElement.viewport.rotation);\n  var imageWidth = Math.round(imageSize.width * scale);\n  var imageHeight = Math.round(imageSize.height * scale);\n  var x = enabledElement.viewport.translation.x;\n  var y = enabledElement.viewport.translation.y;\n  return imageWidth === oldCanvasWidth && imageHeight <= oldCanvasHeight || imageWidth <= oldCanvasWidth && imageHeight === oldCanvasHeight && x === 0 && y === 0;\n}\n/**\r\n * Rescale the image relative to the changed size of the canvas\r\n *\r\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\r\n * @param {number} oldCanvasWidth The width of the canvas before the resize\r\n * @param {number} oldCanvasHeight The height of the canvas before the resize\r\n * @return {void}\r\n */\n\n\nfunction relativeRescale(enabledElement, oldCanvasWidth, oldCanvasHeight) {\n  var scale = enabledElement.viewport.scale;\n  var canvasWidth = enabledElement.canvas.width;\n  var canvasHeight = enabledElement.canvas.height;\n  var relWidthChange = canvasWidth / oldCanvasWidth;\n  var relHeightChange = canvasHeight / oldCanvasHeight;\n  var relChange = Math.sqrt(relWidthChange * relHeightChange);\n  enabledElement.viewport.scale = relChange * scale;\n}\n/**\r\n * Resizes an enabled element and optionally fits the image to window\r\n *\r\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\r\n * @param {Boolean} forceFitToWindow true to to force a refit, false to rescale accordingly\r\n * @returns {void}\r\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, forceFitToWindow) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  var oldCanvasWidth = enabledElement.canvas.width;\n  var oldCanvasHeight = enabledElement.canvas.height;\n  setCanvasSize(element, enabledElement.canvas);\n  var eventData = {\n    element: element\n  };\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(element, _events_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].ELEMENT_RESIZED, eventData);\n\n  if (enabledElement.image === undefined) {\n    return;\n  }\n\n  if (forceFitToWindow || wasFitToWindow(enabledElement, oldCanvasWidth, oldCanvasHeight)) {\n    // Fit the image to the window again if it fitted before the resize\n    Object(_fitToWindow_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(element);\n  } else {\n    // Adapt the scale of a zoomed or panned image relative to the size change\n    relativeRescale(enabledElement, oldCanvasWidth, oldCanvasHeight);\n    Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\n  }\n});\n\n/***/ }),\n\n/***/ \"./setToPixelCoordinateSystem.js\":\n/*!***************************************!*\\\n  !*** ./setToPixelCoordinateSystem.js ***!\n  \\***************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_358176__) {\n\n\"use strict\";\n__nested_webpack_require_358176__.r(__nested_webpack_exports__);\n/* harmony import */ var _internal_calculateTransform_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_358176__(/*! ./internal/calculateTransform.js */ \"./internal/calculateTransform.js\");\n\n/**\n * Sets the canvas context transformation matrix to the pixel coordinate system.  This allows\n * geometry to be driven using the canvas context using coordinates in the pixel coordinate system\n * @param {EnabledElement} enabledElement The\n * @param {CanvasRenderingContext2D} context The CanvasRenderingContext2D for the enabledElement's Canvas\n * @param {Number} [scale] Optional scale to apply\n * @returns {void}\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (enabledElement, context, scale) {\n  if (enabledElement === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter enabledElement must not be undefined');\n  }\n\n  if (context === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter context must not be undefined');\n  }\n\n  var transform = Object(_internal_calculateTransform_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement, scale);\n  context.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);\n});\n\n/***/ }),\n\n/***/ \"./setViewport.js\":\n/*!************************!*\\\n  !*** ./setViewport.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_359696__) {\n\n\"use strict\";\n__nested_webpack_require_359696__.r(__nested_webpack_exports__);\n/* harmony import */ var _internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_359696__(/*! ./internal/getDefaultViewport.js */ \"./internal/getDefaultViewport.js\");\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_359696__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _updateImage_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_359696__(/*! ./updateImage.js */ \"./updateImage.js\");\n\n\n\nvar MIN_WINDOW_WIDTH = 0.000001;\nvar MIN_VIEWPORT_SCALE = 0.0001;\n/**\n * Sets/updates viewport of a given enabled element\n *\n * @param {HTMLElement} element - DOM element of the enabled element\n * @param {Viewport} [viewport] - Object containing the viewport properties\n * @returns {void}\n * @memberof ViewportSettings\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element, viewport) {\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_1__[\"getEnabledElement\"])(element); // If viewport is not already set, start with default and merge new\n  // viewport options later\n\n  if (enabledElement.viewport === undefined) {\n    enabledElement.viewport = Object(_internal_getDefaultViewport_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(enabledElement.canvas);\n  } // Merge viewport\n\n\n  if (viewport) {\n    for (var attrname in viewport) {\n      if (viewport[attrname] !== null) {\n        enabledElement.viewport[attrname] = viewport[attrname];\n      }\n    }\n  } // Prevent window width from being too small (note that values close to zero are valid and can occur with\n  // PET images in particular)\n\n\n  if (enabledElement.viewport.voi.windowWidth) {\n    enabledElement.viewport.voi.windowWidth = Math.max(enabledElement.viewport.voi.windowWidth, MIN_WINDOW_WIDTH);\n  } // Prevent scale from getting too small\n\n\n  if (enabledElement.viewport.scale) {\n    enabledElement.viewport.scale = Math.max(enabledElement.viewport.scale, MIN_VIEWPORT_SCALE);\n  } // Normalize the rotation value to a positive rotation in degrees\n\n\n  enabledElement.viewport.rotation %= 360;\n\n  if (enabledElement.viewport.rotation < 0) {\n    enabledElement.viewport.rotation += 360;\n  }\n\n  if (enabledElement.image) {\n    // Force the image to be updated since the viewport has been modified\n    Object(_updateImage_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(element);\n  }\n});\n\n/***/ }),\n\n/***/ \"./triggerEvent.js\":\n/*!*************************!*\\\n  !*** ./triggerEvent.js ***!\n  \\*************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_362357__) {\n\n\"use strict\";\n__nested_webpack_require_362357__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_362357__.d(__nested_webpack_exports__, \"default\", function() { return triggerEvent; });\n/**\n * Trigger a CustomEvent\n *\n * @param {EventTarget} el The element or EventTarget to trigger the event upon\n * @param {String} type The event type name\n * @param {Object|null} detail=null The event data to be sent\n * @returns {Boolean} The return value is false if at least one event listener called preventDefault(). Otherwise it returns true.\n */\nfunction triggerEvent(el, type) {\n  var detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var event; // This check is needed to polyfill CustomEvent on IE11-\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new CustomEvent(type, {\n      detail: detail,\n      cancelable: true\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, detail);\n  }\n\n  return el.dispatchEvent(event);\n}\n\n/***/ }),\n\n/***/ \"./updateImage.js\":\n/*!************************!*\\\n  !*** ./updateImage.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_363607__) {\n\n\"use strict\";\n__nested_webpack_require_363607__.r(__nested_webpack_exports__);\n/* harmony import */ var _enabledElements_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_363607__(/*! ./enabledElements.js */ \"./enabledElements.js\");\n/* harmony import */ var _internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_363607__(/*! ./internal/drawImage.js */ \"./internal/drawImage.js\");\n\n\n/**\n * Forces the image to be updated/redrawn for the specified enabled element\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {Boolean} [invalidated=false] Whether or not the image pixel data has been changed, necessitating a redraw\n *\n * @returns {void}\n * @memberof Drawing\n */\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (element) {\n  var invalidated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var enabledElement = Object(_enabledElements_js__WEBPACK_IMPORTED_MODULE_0__[\"getEnabledElement\"])(element);\n  Object(_internal_drawImage_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(enabledElement, invalidated);\n});\n\n/***/ }),\n\n/***/ \"./webgl/createProgramFromString.js\":\n/*!******************************************!*\\\n  !*** ./webgl/createProgramFromString.js ***!\n  \\******************************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_364989__) {\n\n\"use strict\";\n__nested_webpack_require_364989__.r(__nested_webpack_exports__);\n/**\n * Creates and compiles a shader.\n *\n * @param {!WebGLRenderingContext} gl The WebGL Context.\n * @param {string} shaderSource The GLSL source code for the shader.\n * @param {number} shaderType The type of shader, VERTEX_SHADER or FRAGMENT_SHADER.\n *\n * @return {!WebGLShader} The shader.\n * @memberof WebGLRendering\n */\nfunction compileShader(gl, shaderSource, shaderType) {\n  // Create the shader object\n  var shader = gl.createShader(shaderType); // Set the shader source code.\n\n  gl.shaderSource(shader, shaderSource); // Compile the shader\n\n  gl.compileShader(shader); // Check if it compiled\n\n  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong during compilation; get the error\n    var infoLog = gl.getShaderInfoLog(shader);\n    console.error(\"Could not compile shader:\\n\".concat(infoLog));\n  }\n\n  return shader;\n}\n/**\n * Creates a program from 2 shaders.\n *\n * @param {!WebGLRenderingContext} gl The WebGL context.\n * @param {!WebGLShader} vertexShader A vertex shader.\n * @param {!WebGLShader} fragmentShader A fragment shader.\n * @return {!WebGLProgram} A program.\n * @memberof WebGLRendering\n */\n\n\nfunction createProgram(gl, vertexShader, fragmentShader) {\n  // Create a program.\n  var program = gl.createProgram(); // Attach the shaders.\n\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader); // Link the program.\n\n  gl.linkProgram(program); // Check if it linked.\n\n  var success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong with the link\n    var infoLog = gl.getProgramInfoLog(program);\n    console.error(\"WebGL program filed to link:\\n\".concat(infoLog));\n  }\n\n  return program;\n}\n/**\n * Creates a program from 2 shaders source (Strings)\n * @param  {!WebGLRenderingContext} gl              The WebGL context.\n * @param  {!WebGLShader} vertexShaderSrc   Vertex shader string\n * @param  {!WebGLShader} fragShaderSrc Fragment shader string\n * @return {!WebGLProgram}                 A program\n * @memberof WebGLRendering\n */\n\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (function (gl, vertexShaderSrc, fragShaderSrc) {\n  var vertexShader = compileShader(gl, vertexShaderSrc, gl.VERTEX_SHADER);\n  var fragShader = compileShader(gl, fragShaderSrc, gl.FRAGMENT_SHADER);\n  return createProgram(gl, vertexShader, fragShader);\n});\n\n/***/ }),\n\n/***/ \"./webgl/index.js\":\n/*!************************!*\\\n  !*** ./webgl/index.js ***!\n  \\************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_367725__) {\n\n\"use strict\";\n__nested_webpack_require_367725__.r(__nested_webpack_exports__);\n/* harmony import */ var _renderer_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_367725__(/*! ./renderer.js */ \"./webgl/renderer.js\");\n/* harmony import */ var _createProgramFromString_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_367725__(/*! ./createProgramFromString.js */ \"./webgl/createProgramFromString.js\");\n/* harmony import */ var _textureCache_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_367725__(/*! ./textureCache.js */ \"./webgl/textureCache.js\");\n\n\n\n/**\n * @module WebGLRendering\n */\n\nvar mod = {\n  createProgramFromString: _createProgramFromString_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  renderer: {\n    render: _renderer_js__WEBPACK_IMPORTED_MODULE_0__[\"render\"],\n    initRenderer: _renderer_js__WEBPACK_IMPORTED_MODULE_0__[\"initRenderer\"],\n    getRenderCanvas: _renderer_js__WEBPACK_IMPORTED_MODULE_0__[\"getRenderCanvas\"],\n    isWebGLAvailable: _renderer_js__WEBPACK_IMPORTED_MODULE_0__[\"isWebGLAvailable\"]\n  },\n  textureCache: _textureCache_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n};\nObject.defineProperty(mod, 'isWebGLInitialized', {\n  enumerable: true,\n  configurable: false,\n  get: function get() {\n    return _renderer_js__WEBPACK_IMPORTED_MODULE_0__[\"isWebGLInitialized\"];\n  }\n});\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = (mod);\n\n/***/ }),\n\n/***/ \"./webgl/renderer.js\":\n/*!***************************!*\\\n  !*** ./webgl/renderer.js ***!\n  \\***************************/\n/*! exports provided: isWebGLInitialized, getRenderCanvas, initRenderer, render, isWebGLAvailable */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_369372__) {\n\n\"use strict\";\n__nested_webpack_require_369372__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_369372__.d(__nested_webpack_exports__, \"isWebGLInitialized\", function() { return isWebGLInitialized; });\n/* harmony export (binding) */ __nested_webpack_require_369372__.d(__nested_webpack_exports__, \"getRenderCanvas\", function() { return getRenderCanvas; });\n/* harmony export (binding) */ __nested_webpack_require_369372__.d(__nested_webpack_exports__, \"initRenderer\", function() { return initRenderer; });\n/* harmony export (binding) */ __nested_webpack_require_369372__.d(__nested_webpack_exports__, \"render\", function() { return render; });\n/* harmony export (binding) */ __nested_webpack_require_369372__.d(__nested_webpack_exports__, \"isWebGLAvailable\", function() { return isWebGLAvailable; });\n/* harmony import */ var _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_369372__(/*! ./shaders/index.js */ \"./webgl/shaders/index.js\");\n/* harmony import */ var _vertexShader_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_369372__(/*! ./vertexShader.js */ \"./webgl/vertexShader.js\");\n/* harmony import */ var _textureCache_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_369372__(/*! ./textureCache.js */ \"./webgl/textureCache.js\");\n/* harmony import */ var _createProgramFromString_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_369372__(/*! ./createProgramFromString.js */ \"./webgl/createProgramFromString.js\");\n/* eslint no-bitwise: 0 */\n\n\n\n\nvar renderCanvas = document.createElement('canvas');\nvar gl;\nvar texCoordBuffer;\nvar positionBuffer;\nvar isWebGLInitialized = false;\n\nfunction getRenderCanvas() {\n  return renderCanvas;\n}\n\nfunction initShaders() {\n  for (var id in _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"shaders\"]) {\n    // Console.log(\"WEBGL: Loading shader\", id);\n    var shader = _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"shaders\"][id];\n    shader.attributes = {};\n    shader.uniforms = {};\n    shader.vert = _vertexShader_js__WEBPACK_IMPORTED_MODULE_1__[\"vertexShader\"];\n    shader.program = Object(_createProgramFromString_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(gl, shader.vert, shader.frag);\n    shader.attributes.texCoordLocation = gl.getAttribLocation(shader.program, 'a_texCoord');\n    gl.enableVertexAttribArray(shader.attributes.texCoordLocation);\n    shader.attributes.positionLocation = gl.getAttribLocation(shader.program, 'a_position');\n    gl.enableVertexAttribArray(shader.attributes.positionLocation);\n    shader.uniforms.resolutionLocation = gl.getUniformLocation(shader.program, 'u_resolution');\n  }\n}\n\nfunction initRenderer() {\n  if (isWebGLInitialized === true) {\n    // Console.log(\"WEBGL Renderer already initialized\");\n    return;\n  }\n\n  if (initWebGL(renderCanvas)) {\n    initBuffers();\n    initShaders(); // Console.log(\"WEBGL Renderer initialized!\");\n\n    isWebGLInitialized = true;\n  }\n}\n\nfunction updateRectangle(gl, width, height) {\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([width, height, 0, height, width, 0, 0, 0]), gl.STATIC_DRAW);\n}\n\nfunction handleLostContext(event) {\n  event.preventDefault();\n  console.warn('WebGL Context Lost!');\n}\n\nfunction handleRestoredContext(event) {\n  event.preventDefault();\n  isWebGLInitialized = false;\n  _textureCache_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].purgeCache();\n  initRenderer(); // Console.log('WebGL Context Restored.');\n}\n\nfunction initWebGL(canvas) {\n  gl = null;\n\n  try {\n    // Try to grab the standard context. If it fails, fallback to experimental.\n    var options = {\n      desynchronized: true,\n      preserveDrawingBuffer: true // Preserve buffer so we can copy to display canvas element\n\n    }; // ---------------- Testing purposes -------------\n    // If (debug === true && WebGLDebugUtils) {\n    //    RenderCanvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(renderCanvas);\n    // }\n    // ---------------- Testing purposes -------------\n\n    gl = canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options); // Set up event listeners for context lost / context restored\n\n    canvas.removeEventListener('webglcontextlost', handleLostContext, false);\n    canvas.addEventListener('webglcontextlost', handleLostContext, false);\n    canvas.removeEventListener('webglcontextrestored', handleRestoredContext, false);\n    canvas.addEventListener('webglcontextrestored', handleRestoredContext, false);\n  } catch (error) {\n    throw new Error('Error creating WebGL context');\n  } // If we don't have a GL context, give up now\n\n\n  if (!gl) {\n    console.error('Unable to initialize WebGL. Your browser may not support it.');\n    gl = null;\n  }\n\n  return gl;\n}\n/**\n * Returns the image data type as a string representation.\n * @param {any} image The cornerstone image object\n * @returns {string} image data type (rgb, iint16, uint16, int8 and uint8)\n * @memberof WebGLRendering\n */\n\n\nfunction getImageDataType(image) {\n  if (image.color) {\n    return 'rgb';\n  }\n\n  var pixelData = image.getPixelData();\n\n  if (pixelData instanceof Int16Array) {\n    return 'int16';\n  }\n\n  if (pixelData instanceof Uint16Array) {\n    return 'uint16';\n  }\n\n  if (pixelData instanceof Int8Array) {\n    return 'int8';\n  }\n\n  return 'uint8';\n}\n\nfunction getShaderProgram(image) {\n  var datatype = getImageDataType(image); // We need a mechanism for\n  // Choosing the shader based on the image datatype\n  // Console.log(\"Datatype: \" + datatype);\n\n  if (_shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"shaders\"].hasOwnProperty(datatype)) {\n    return _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"shaders\"][datatype];\n  }\n\n  return _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"shaders\"].rgb;\n}\n\nfunction generateTexture(image) {\n  var TEXTURE_FORMAT = {\n    uint8: gl.LUMINANCE,\n    int8: gl.LUMINANCE_ALPHA,\n    uint16: gl.LUMINANCE_ALPHA,\n    int16: gl.RGB,\n    rgb: gl.RGB\n  };\n  var TEXTURE_BYTES = {\n    int8: 1,\n    // Luminance\n    uint16: 2,\n    // Luminance + Alpha\n    int16: 3,\n    // RGB\n    rgb: 3 // RGB\n\n  };\n  var imageDataType = getImageDataType(image);\n  var format = TEXTURE_FORMAT[imageDataType]; // GL texture configuration\n\n  var texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n  var imageData = _shaders_index_js__WEBPACK_IMPORTED_MODULE_0__[\"dataUtilities\"][imageDataType].storedPixelDataToImageData(image, image.width, image.height);\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, image.width, image.height, 0, format, gl.UNSIGNED_BYTE, imageData); // Calculate the size in bytes of this image in memory\n\n  var sizeInBytes = image.width * image.height * TEXTURE_BYTES[imageDataType];\n  return {\n    texture: texture,\n    sizeInBytes: sizeInBytes\n  };\n}\n\nfunction getImageTexture(image) {\n  var imageTexture = _textureCache_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getImageTexture(image.imageId);\n\n  if (!imageTexture) {\n    // Console.log(\"Generating texture for imageid: \", image.imageId);\n    imageTexture = generateTexture(image);\n    _textureCache_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].putImageTexture(image, imageTexture);\n  }\n\n  return imageTexture.texture;\n}\n\nfunction initBuffers() {\n  positionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, 0, 1, 1, 0, 0, 0]), gl.STATIC_DRAW);\n  texCoordBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0]), gl.STATIC_DRAW);\n}\n\nfunction renderQuad(shader, parameters, texture, width, height) {\n  gl.clearColor(1.0, 0.0, 0.0, 1.0);\n  gl.viewport(0, 0, width, height);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.useProgram(shader.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.vertexAttribPointer(shader.attributes.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.vertexAttribPointer(shader.attributes.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n  for (var key in parameters) {\n    var uniformLocation = gl.getUniformLocation(shader.program, key);\n\n    if (!uniformLocation) {\n      continue; // Disabling this error for now since RGB requires minPixelValue\n      // but the other shaders do not.\n      // throw `Could not access location for uniform: ${key}`;\n    }\n\n    var uniform = parameters[key];\n    var type = uniform.type;\n    var value = uniform.value;\n\n    if (type === 'i') {\n      gl.uniform1i(uniformLocation, value);\n    } else if (type === 'f') {\n      gl.uniform1f(uniformLocation, value);\n    } else if (type === '2f') {\n      gl.uniform2f(uniformLocation, value[0], value[1]);\n    }\n  }\n\n  updateRectangle(gl, width, height);\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n}\n\nfunction render(enabledElement) {\n  // Resize the canvas\n  var image = enabledElement.image;\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n  var viewport = enabledElement.viewport; // Render the current image\n\n  var shader = getShaderProgram(image);\n  var texture = getImageTexture(image);\n  var parameters = {\n    u_resolution: {\n      type: '2f',\n      value: [image.width, image.height]\n    },\n    wc: {\n      type: 'f',\n      value: viewport.voi.windowCenter\n    },\n    ww: {\n      type: 'f',\n      value: viewport.voi.windowWidth\n    },\n    slope: {\n      type: 'f',\n      value: image.slope\n    },\n    intercept: {\n      type: 'f',\n      value: image.intercept\n    },\n    minPixelValue: {\n      type: 'f',\n      value: image.minPixelValue\n    },\n    invert: {\n      type: 'i',\n      value: viewport.invert ? 1 : 0\n    }\n  };\n  renderQuad(shader, parameters, texture, image.width, image.height);\n  return renderCanvas;\n}\nfunction isWebGLAvailable() {\n  // Adapted from\n  // http://stackoverflow.com/questions/9899807/three-js-detect-webgl-support-and-fallback-to-regular-canvas\n  var options = {\n    failIfMajorPerformanceCaveat: true\n  };\n\n  try {\n    var canvas = document.createElement('canvas');\n    return Boolean(window.WebGLRenderingContext) && (canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options));\n  } catch (e) {\n    return false;\n  }\n}\n\n/***/ }),\n\n/***/ \"./webgl/shaders/index.js\":\n/*!********************************!*\\\n  !*** ./webgl/shaders/index.js ***!\n  \\********************************/\n/*! exports provided: shaders, dataUtilities */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_380096__) {\n\n\"use strict\";\n__nested_webpack_require_380096__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_380096__.d(__nested_webpack_exports__, \"shaders\", function() { return shaders; });\n/* harmony export (binding) */ __nested_webpack_require_380096__.d(__nested_webpack_exports__, \"dataUtilities\", function() { return dataUtilities; });\n/* harmony import */ var _int16_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_380096__(/*! ./int16.js */ \"./webgl/shaders/int16.js\");\n/* harmony import */ var _int8_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_380096__(/*! ./int8.js */ \"./webgl/shaders/int8.js\");\n/* harmony import */ var _rgb_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_380096__(/*! ./rgb.js */ \"./webgl/shaders/rgb.js\");\n/* harmony import */ var _uint16_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_380096__(/*! ./uint16.js */ \"./webgl/shaders/uint16.js\");\n/* harmony import */ var _uint8_js__WEBPACK_IMPORTED_MODULE_4__ = __nested_webpack_require_380096__(/*! ./uint8.js */ \"./webgl/shaders/uint8.js\");\n\n\n\n\n\nvar shaders = {\n  int16: _int16_js__WEBPACK_IMPORTED_MODULE_0__[\"int16Shader\"],\n  int8: _int8_js__WEBPACK_IMPORTED_MODULE_1__[\"int8Shader\"],\n  rgb: _rgb_js__WEBPACK_IMPORTED_MODULE_2__[\"rgbShader\"],\n  uint16: _uint16_js__WEBPACK_IMPORTED_MODULE_3__[\"uint16Shader\"],\n  uint8: _uint8_js__WEBPACK_IMPORTED_MODULE_4__[\"uint8Shader\"]\n};\nvar dataUtilities = {\n  int16: _int16_js__WEBPACK_IMPORTED_MODULE_0__[\"int16DataUtilities\"],\n  int8: _int8_js__WEBPACK_IMPORTED_MODULE_1__[\"int8DataUtilities\"],\n  rgb: _rgb_js__WEBPACK_IMPORTED_MODULE_2__[\"rgbDataUtilities\"],\n  uint16: _uint16_js__WEBPACK_IMPORTED_MODULE_3__[\"uint16DataUtilities\"],\n  uint8: _uint8_js__WEBPACK_IMPORTED_MODULE_4__[\"uint8DataUtilities\"]\n};\n\n\n/***/ }),\n\n/***/ \"./webgl/shaders/int16.js\":\n/*!********************************!*\\\n  !*** ./webgl/shaders/int16.js ***!\n  \\********************************/\n/*! exports provided: int16DataUtilities, int16Shader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_382057__) {\n\n\"use strict\";\n__nested_webpack_require_382057__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_382057__.d(__nested_webpack_exports__, \"int16DataUtilities\", function() { return int16DataUtilities; });\n/* harmony export (binding) */ __nested_webpack_require_382057__.d(__nested_webpack_exports__, \"int16Shader\", function() { return int16Shader; });\n/* eslint no-bitwise: 0 */\nvar int16Shader = {};\n/**\n * Convert stored pixel data to image data.\n *\n * Pack int16 into three uint8 channels (r, g, b)\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n * @memberof WebGLRendering\n */\n\nfunction storedPixelDataToImageData(image) {\n  // Transfer image data to alpha and luminance channels of WebGL texture\n  // Credit to @jpambrun and @fernandojsg\n  // Pack int16 into three uint8 channels (r, g, b)\n  var pixelData = image.getPixelData();\n  var numberOfChannels = 3;\n  var data = new Uint8Array(image.width * image.height * numberOfChannels);\n  var offset = 0;\n\n  for (var i = 0; i < pixelData.length; i++) {\n    var val = Math.abs(pixelData[i]);\n    data[offset++] = val & 0xFF;\n    data[offset++] = val >> 8;\n    data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n  }\n\n  return data;\n}\n\nvar int16DataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\nint16Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' + // Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' + // Calculate luminance from packed texture\n'float intensity = color.r*256.0 + color.g*65536.0;' + 'if (color.b == 0.0)' + 'intensity = -intensity;' + // Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' + // Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' + // RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' + // Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\n\n/***/ }),\n\n/***/ \"./webgl/shaders/int8.js\":\n/*!*******************************!*\\\n  !*** ./webgl/shaders/int8.js ***!\n  \\*******************************/\n/*! exports provided: int8DataUtilities, int8Shader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_384601__) {\n\n\"use strict\";\n__nested_webpack_require_384601__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_384601__.d(__nested_webpack_exports__, \"int8DataUtilities\", function() { return int8DataUtilities; });\n/* harmony export (binding) */ __nested_webpack_require_384601__.d(__nested_webpack_exports__, \"int8Shader\", function() { return int8Shader; });\nvar int8Shader = {};\n/**\n * Convert stored pixel data to image data.\n *\n * Store data in Uint8Array\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n * @memberof WebGLRendering\n */\n\nfunction storedPixelDataToImageData(image) {\n  // Transfer image data to alpha channel of WebGL texture\n  // Store data in Uint8Array\n  var pixelData = image.getPixelData();\n  var numberOfChannels = 2;\n  var data = new Uint8Array(image.width * image.height * numberOfChannels);\n  var offset = 0;\n\n  for (var i = 0; i < pixelData.length; i++) {\n    data[offset++] = pixelData[i];\n    data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n  }\n\n  return data;\n}\n\nvar int8DataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\nint8Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' + // Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' + // Calculate luminance from packed texture\n'float intensity = color.r*256.;' + 'if (color.a == 0.0)' + 'intensity = -intensity;' + // Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' + // Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' + // RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' + // Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\n\n/***/ }),\n\n/***/ \"./webgl/shaders/rgb.js\":\n/*!******************************!*\\\n  !*** ./webgl/shaders/rgb.js ***!\n  \\******************************/\n/*! exports provided: rgbDataUtilities, rgbShader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_386918__) {\n\n\"use strict\";\n__nested_webpack_require_386918__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_386918__.d(__nested_webpack_exports__, \"rgbDataUtilities\", function() { return rgbDataUtilities; });\n/* harmony export (binding) */ __nested_webpack_require_386918__.d(__nested_webpack_exports__, \"rgbShader\", function() { return rgbShader; });\nvar rgbShader = {};\n/**\n * Convert stored pixel data to image data.\n *\n * Pack RGB images into a 3-channel RGB texture\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n * @memberof WebGLRendering\n */\n\nfunction storedPixelDataToImageData(image) {\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0; // Only 3 channels, since we use WebGL's RGB texture format\n\n  var numStoredPixels = image.width * image.height * 4;\n  var numOutputPixels = image.width * image.height * 3;\n  var storedPixelData = image.getPixelData();\n  var data = new Uint8Array(numOutputPixels); // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Red\n\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Green\n\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Blue\n\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  } else {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Red\n\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Green\n\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Blue\n\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  }\n\n  return data;\n}\n\nvar rgbDataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\nrgbShader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform float minPixelValue;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' + // Get texture\n'vec3 color = texture2D(u_image, v_texCoord).xyz;' + // Rescale based on slope and intercept\n'color = color * 256.0 * slope + intercept;' + // Apply window settings\n'float center0 = wc - 0.5 - minPixelValue;' + 'float width0 = max(ww, 1.0);' + 'color = (color - center0) / width0 + 0.5;' + // RGBA output\n'gl_FragColor = vec4(color, 1);' + // Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1. - gl_FragColor.rgb;' + '}';\n\n\n/***/ }),\n\n/***/ \"./webgl/shaders/uint16.js\":\n/*!*********************************!*\\\n  !*** ./webgl/shaders/uint16.js ***!\n  \\*********************************/\n/*! exports provided: uint16DataUtilities, uint16Shader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_390160__) {\n\n\"use strict\";\n__nested_webpack_require_390160__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_390160__.d(__nested_webpack_exports__, \"uint16DataUtilities\", function() { return uint16DataUtilities; });\n/* harmony export (binding) */ __nested_webpack_require_390160__.d(__nested_webpack_exports__, \"uint16Shader\", function() { return uint16Shader; });\n/* eslint no-bitwise: 0 */\nvar uint16Shader = {};\n/**\n * Convert stored pixel data to image data.\n *\n * For uint16 pack uint16 into two uint8 channels (r and a).\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n * @memberof WebGLRendering\n */\n\nfunction storedPixelDataToImageData(image) {\n  // Transfer image data to alpha and luminance channels of WebGL texture\n  // Credit to @jpambrun and @fernandojsg\n  // Pack uint16 into two uint8 channels (r and a)\n  var pixelData = image.getPixelData();\n  var numberOfChannels = 2;\n  var data = new Uint8Array(image.width * image.height * numberOfChannels);\n  var offset = 0;\n\n  for (var i = 0; i < pixelData.length; i++) {\n    var val = pixelData[i];\n    data[offset++] = val & 0xFF;\n    data[offset++] = val >> 8;\n  }\n\n  return data;\n}\n\nvar uint16DataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\nuint16Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' + // Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' + // Calculate luminance from packed texture\n'float intensity = color.r*256.0 + color.a*65536.0;' + // Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' + // Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' + // RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' + // Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\n\n/***/ }),\n\n/***/ \"./webgl/shaders/uint8.js\":\n/*!********************************!*\\\n  !*** ./webgl/shaders/uint8.js ***!\n  \\********************************/\n/*! exports provided: uint8DataUtilities, uint8Shader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_392584__) {\n\n\"use strict\";\n__nested_webpack_require_392584__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_392584__.d(__nested_webpack_exports__, \"uint8DataUtilities\", function() { return uint8DataUtilities; });\n/* harmony export (binding) */ __nested_webpack_require_392584__.d(__nested_webpack_exports__, \"uint8Shader\", function() { return uint8Shader; });\nvar uint8Shader = {};\n/**\n * Convert stored pixel data to image data. Here we will store\n * all data in the alpha channel.\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n * @memberof WebGLRendering\n */\n\nfunction storedPixelDataToImageData(image) {\n  // Transfer image data to alpha channel of WebGL texture\n  return image.getPixelData();\n}\n\nvar uint8DataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\nuint8Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' + // Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' + // Calculate luminance from packed texture\n'float intensity = color.r*256.0;' + // Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' + // Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' + // RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' + // Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\n\n/***/ }),\n\n/***/ \"./webgl/textureCache.js\":\n/*!*******************************!*\\\n  !*** ./webgl/textureCache.js ***!\n  \\*******************************/\n/*! exports provided: default */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_394518__) {\n\n\"use strict\";\n__nested_webpack_require_394518__.r(__nested_webpack_exports__);\n/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_394518__(/*! ../events.js */ \"./events.js\");\n/* harmony import */ var _triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_394518__(/*! ../triggerEvent.js */ \"./triggerEvent.js\");\n\n\n/**\r\n * This module deals with caching image textures in VRAM for WebGL\r\n * @module WebGLTextureCache\r\n */\n\nvar imageCache = {};\nvar cachedImages = [];\nvar maximumSizeInBytes = 1024 * 1024 * 256; // 256 MB\n\nvar cacheSizeInBytes = 0;\n\nfunction getCacheInfo() {\n  return {\n    maximumSizeInBytes: maximumSizeInBytes,\n    cacheSizeInBytes: cacheSizeInBytes,\n    numberOfImagesCached: cachedImages.length\n  };\n}\n\nfunction purgeCacheIfNecessary() {\n  // If max cache size has not been exceeded, do nothing\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\n    return;\n  } // Cache size has been exceeded, create list of images sorted by timeStamp\n  // So we can purge the least recently used image\n\n\n  function compare(a, b) {\n    if (a.timeStamp > b.timeStamp) {\n      return -1;\n    }\n\n    if (a.timeStamp < b.timeStamp) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  cachedImages.sort(compare); // Remove images as necessary\n\n  while (cacheSizeInBytes > maximumSizeInBytes) {\n    var lastCachedImage = cachedImages[cachedImages.length - 1];\n    cacheSizeInBytes -= lastCachedImage.sizeInBytes;\n    delete imageCache[lastCachedImage.imageId];\n    cachedImages.pop();\n    Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].WEBGL_TEXTURE_REMOVED, {\n      imageId: lastCachedImage.imageId\n    });\n  }\n\n  var cacheInfo = getCacheInfo();\n  Object(_triggerEvent_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_events_js__WEBPACK_IMPORTED_MODULE_0__[\"events\"], _events_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].WEBGL_TEXTURE_CACHE_FULL, cacheInfo);\n}\n\nfunction setMaximumSizeBytes(numBytes) {\n  if (numBytes === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\n  }\n\n  if (numBytes.toFixed === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\n  }\n\n  maximumSizeInBytes = numBytes;\n  purgeCacheIfNecessary();\n}\n\nfunction putImageTexture(image, imageTexture) {\n  var imageId = image.imageId;\n\n  if (image === undefined) {\n    throw new Error('putImageTexture: image must not be undefined');\n  }\n\n  if (imageId === undefined) {\n    throw new Error('putImageTexture: imageId must not be undefined');\n  }\n\n  if (imageTexture === undefined) {\n    throw new Error('putImageTexture: imageTexture must not be undefined');\n  }\n\n  if (Object.prototype.hasOwnProperty.call(imageCache, imageId) === true) {\n    throw new Error('putImageTexture: imageId already in cache');\n  }\n\n  var cachedImage = {\n    imageId: imageId,\n    imageTexture: imageTexture,\n    timeStamp: new Date(),\n    sizeInBytes: imageTexture.sizeInBytes\n  };\n  imageCache[imageId] = cachedImage;\n  cachedImages.push(cachedImage);\n\n  if (imageTexture.sizeInBytes === undefined) {\n    throw new Error('putImageTexture: imageTexture.sizeInBytes must not be undefined');\n  }\n\n  if (imageTexture.sizeInBytes.toFixed === undefined) {\n    throw new Error('putImageTexture: imageTexture.sizeInBytes is not a number');\n  }\n\n  cacheSizeInBytes += cachedImage.sizeInBytes;\n  purgeCacheIfNecessary();\n}\n\nfunction getImageTexture(imageId) {\n  if (imageId === undefined) {\n    throw new Error('getImageTexture: imageId must not be undefined');\n  }\n\n  var cachedImage = imageCache[imageId];\n\n  if (cachedImage === undefined) {\n    return;\n  } // Bump time stamp for cached image\n\n\n  cachedImage.timeStamp = new Date();\n  return cachedImage.imageTexture;\n}\n\nfunction removeImageTexture(imageId) {\n  if (imageId === undefined) {\n    throw new Error('removeImageTexture: imageId must not be undefined');\n  }\n\n  var cachedImage = imageCache[imageId];\n\n  if (cachedImage === undefined) {\n    throw new Error('removeImageTexture: imageId must not be undefined');\n  }\n\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\n  delete imageCache[imageId];\n  return cachedImage.imageTexture;\n}\n\nfunction purgeCache() {\n  while (cachedImages.length > 0) {\n    var removedCachedImage = cachedImages.pop();\n    delete imageCache[removedCachedImage.imageId];\n  }\n\n  cacheSizeInBytes = 0;\n}\n\n/* harmony default export */ __nested_webpack_exports__[\"default\"] = ({\n  purgeCache: purgeCache,\n  getImageTexture: getImageTexture,\n  putImageTexture: putImageTexture,\n  removeImageTexture: removeImageTexture,\n  setMaximumSizeBytes: setMaximumSizeBytes\n});\n\n/***/ }),\n\n/***/ \"./webgl/vertexShader.js\":\n/*!*******************************!*\\\n  !*** ./webgl/vertexShader.js ***!\n  \\*******************************/\n/*! exports provided: vertexShader */\n/***/ (function(module, __nested_webpack_exports__, __nested_webpack_require_399522__) {\n\n\"use strict\";\n__nested_webpack_require_399522__.r(__nested_webpack_exports__);\n/* harmony export (binding) */ __nested_webpack_require_399522__.d(__nested_webpack_exports__, \"vertexShader\", function() { return vertexShader; });\nvar vertexShader = 'attribute vec2 a_position;' + 'attribute vec2 a_texCoord;' + 'uniform vec2 u_resolution;' + 'varying vec2 v_texCoord;' + 'void main() {' + 'vec2 zeroToOne = a_position / u_resolution;' + 'vec2 zeroToTwo = zeroToOne * 2.0;' + 'vec2 clipSpace = zeroToTwo - 1.0;' + 'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' + 'v_texCoord = a_texCoord;' + '}';\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=cornerstone.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29ybmVyc3RvbmUtY29yZS9kaXN0L2Nvcm5lcnN0b25lLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSxJQUFJLElBQXlEO0FBQzdEO0FBQ0EsTUFBTSxFQUs0QjtBQUNsQyxDQUFDO0FBQ0QscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQ0FBbUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0NBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0NBQW1CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnQ0FBbUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGdDQUFtQjtBQUN4QyxjQUFjO0FBQ2Q7QUFDQSxjQUFjLGdDQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0NBQW1CO0FBQy9DO0FBQ0Esa0RBQWtELGdDQUFtQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0NBQW1CO0FBQ3RDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdDQUFtQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnQkFBZ0I7QUFDOUM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDhCQUE4QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMkJBQTJCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QWdELHNDQUFzQyxzQ0FBc0MsdURBQXVELDZCQUE2QixNQUFNOztBQUVqWCxPQUFPOztBQUVQLFVBQVU7QUFDVixDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZWFjdC1iYXNpYy1jcnVkLy4vbm9kZV9tb2R1bGVzL2Nvcm5lcnN0b25lLWNvcmUvZGlzdC9jb3JuZXJzdG9uZS5qcz9kMDI5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qISBjb3JuZXJzdG9uZS1jb3JlIC0gMi42LjEgLSAyMDIxLTExLTE5IHwgKGMpIDIwMTYgQ2hyaXMgSGFmZXkgfCBodHRwczovL2dpdGh1Yi5jb20vY29ybmVyc3RvbmVqcy9jb3JuZXJzdG9uZSAqL1xuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJjb3JuZXJzdG9uZS1jb3JlXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImNvcm5lcnN0b25lLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiY29ybmVyc3RvbmVcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RGlzcG9zZUNodW5rKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHRkZWxldGUgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuLyoqKioqKi8gXHR9XG4vKioqKioqLyBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4vKioqKioqLyBcdHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl0gPSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbi8qKioqKiovIFx0ZnVuY3Rpb24gd2VicGFja0hvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7XG4vKioqKioqLyBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xuLyoqKioqKi8gXHRcdGlmIChwYXJlbnRIb3RVcGRhdGVDYWxsYmFjaykgcGFyZW50SG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xuLyoqKioqKi8gXHR9IDtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuLyoqKioqKi8gXHRmdW5jdGlvbiBob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcbi8qKioqKiovIFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbi8qKioqKiovIFx0XHRzY3JpcHQuY2hhcnNldCA9IFwidXRmLThcIjtcbi8qKioqKiovIFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xuLyoqKioqKi8gXHRcdDtcbi8qKioqKiovIFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuLyoqKioqKi8gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KHJlcXVlc3RUaW1lb3V0KSB7XG4vKioqKioqLyBcdFx0cmVxdWVzdFRpbWVvdXQgPSByZXF1ZXN0VGltZW91dCB8fCAxMDAwMDtcbi8qKioqKiovIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4vKioqKioqLyBcdFx0XHRpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4vKioqKioqLyBcdFx0XHRcdHJldHVybiByZWplY3QobmV3IEVycm9yKFwiTm8gYnJvd3NlciBzdXBwb3J0XCIpKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdHRyeSB7XG4vKioqKioqLyBcdFx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4vKioqKioqLyBcdFx0XHRcdHZhciByZXF1ZXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNvblwiO1xuLyoqKioqKi8gXHRcdFx0XHRyZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVxdWVzdFBhdGgsIHRydWUpO1xuLyoqKioqKi8gXHRcdFx0XHRyZXF1ZXN0LnRpbWVvdXQgPSByZXF1ZXN0VGltZW91dDtcbi8qKioqKiovIFx0XHRcdFx0cmVxdWVzdC5zZW5kKG51bGwpO1xuLyoqKioqKi8gXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4vKioqKioqLyBcdFx0XHRcdHJldHVybiByZWplY3QoZXJyKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4vKioqKioqLyBcdFx0XHRcdGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcbi8qKioqKiovIFx0XHRcdFx0aWYgKHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0Ly8gdGltZW91dFxuLyoqKioqKi8gXHRcdFx0XHRcdHJlamVjdChcbi8qKioqKiovIFx0XHRcdFx0XHRcdG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIilcbi8qKioqKiovIFx0XHRcdFx0XHQpO1xuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaWYgKHJlcXVlc3Quc3RhdHVzID09PSA0MDQpIHtcbi8qKioqKiovIFx0XHRcdFx0XHQvLyBubyB1cGRhdGUgYXZhaWxhYmxlXG4vKioqKioqLyBcdFx0XHRcdFx0cmVzb2x2ZSgpO1xuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaWYgKHJlcXVlc3Quc3RhdHVzICE9PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgIT09IDMwNCkge1xuLyoqKioqKi8gXHRcdFx0XHRcdC8vIG90aGVyIGZhaWx1cmVcbi8qKioqKiovIFx0XHRcdFx0XHRyZWplY3QobmV3IEVycm9yKFwiTWFuaWZlc3QgcmVxdWVzdCB0byBcIiArIHJlcXVlc3RQYXRoICsgXCIgZmFpbGVkLlwiKSk7XG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHRcdFx0Ly8gc3VjY2Vzc1xuLyoqKioqKi8gXHRcdFx0XHRcdHRyeSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHR2YXIgdXBkYXRlID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4vKioqKioqLyBcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuO1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRyZXNvbHZlKHVwZGF0ZSk7XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH07XG4vKioqKioqLyBcdFx0fSk7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcbi8qKioqKiovIFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiNGQ4ZDg4YmE1MzYyMWY1OWI5YTlcIjtcbi8qKioqKiovIFx0dmFyIGhvdFJlcXVlc3RUaW1lb3V0ID0gMTAwMDA7XG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudENoaWxkTW9kdWxlO1xuLyoqKioqKi8gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbi8qKioqKiovIFx0dmFyIGhvdEN1cnJlbnRQYXJlbnRzID0gW107XG4vKioqKioqLyBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkge1xuLyoqKioqKi8gXHRcdHZhciBtZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdGlmICghbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xuLyoqKioqKi8gXHRcdHZhciBmbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbi8qKioqKiovIFx0XHRcdGlmIChtZS5ob3QuYWN0aXZlKSB7XG4vKioqKioqLyBcdFx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0aWYgKGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5wdXNoKG1vZHVsZUlkKTtcbi8qKioqKiovIFx0XHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdFx0XHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHJlcXVlc3Q7XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0aWYgKG1lLmNoaWxkcmVuLmluZGV4T2YocmVxdWVzdCkgPT09IC0xKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0fSBlbHNlIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uc29sZS53YXJuKFxuLyoqKioqKi8gXHRcdFx0XHRcdFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICtcbi8qKioqKiovIFx0XHRcdFx0XHRcdHJlcXVlc3QgK1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICtcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1vZHVsZUlkXG4vKioqKioqLyBcdFx0XHRcdCk7XG4vKioqKioqLyBcdFx0XHRcdGhvdEN1cnJlbnRQYXJlbnRzID0gW107XG4vKioqKioqLyBcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhyZXF1ZXN0KTtcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi8gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4ge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX19bbmFtZV07XG4vKioqKioqLyBcdFx0XHRcdH0sXG4vKioqKioqLyBcdFx0XHRcdHNldDogZnVuY3Rpb24odmFsdWUpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdID0gdmFsdWU7XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH07XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0XHRmb3IgKHZhciBuYW1lIGluIF9fd2VicGFja19yZXF1aXJlX18pIHtcbi8qKioqKiovIFx0XHRcdGlmIChcbi8qKioqKiovIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9fd2VicGFja19yZXF1aXJlX18sIG5hbWUpICYmXG4vKioqKioqLyBcdFx0XHRcdG5hbWUgIT09IFwiZVwiICYmXG4vKioqKioqLyBcdFx0XHRcdG5hbWUgIT09IFwidFwiXG4vKioqKioqLyBcdFx0XHQpIHtcbi8qKioqKiovIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHRcdGlmIChob3RTdGF0dXMgPT09IFwicmVhZHlcIikgaG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcbi8qKioqKiovIFx0XHRcdGhvdENodW5rc0xvYWRpbmcrKztcbi8qKioqKiovIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xuLyoqKioqKi8gXHRcdFx0XHRmaW5pc2hDaHVua0xvYWRpbmcoKTtcbi8qKioqKiovIFx0XHRcdFx0dGhyb3cgZXJyO1xuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZmluaXNoQ2h1bmtMb2FkaW5nKCkge1xuLyoqKioqKi8gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XG4vKioqKioqLyBcdFx0XHRcdGlmIChob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0aWYgKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRpZiAoaG90Q2h1bmtzTG9hZGluZyA9PT0gMCAmJiBob3RXYWl0aW5nRmlsZXMgPT09IDApIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbi8qKioqKiovIFx0XHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi8gXHRcdGZuLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuLyoqKioqKi8gXHRcdFx0aWYgKG1vZGUgJiAxKSB2YWx1ZSA9IGZuKHZhbHVlKTtcbi8qKioqKiovIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLnQodmFsdWUsIG1vZGUgJiB+MSk7XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZm47XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpIHtcbi8qKioqKiovIFx0XHR2YXIgaG90ID0ge1xuLyoqKioqKi8gXHRcdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuLyoqKioqKi8gXHRcdFx0X2FjY2VwdGVkRGVwZW5kZW5jaWVzOiB7fSxcbi8qKioqKiovIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXG4vKioqKioqLyBcdFx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdF9zZWxmRGVjbGluZWQ6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXG4vKioqKioqLyBcdFx0XHRfbWFpbjogaG90Q3VycmVudENoaWxkTW9kdWxlICE9PSBtb2R1bGVJZCxcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHQvLyBNb2R1bGUgQVBJXG4vKioqKioqLyBcdFx0XHRhY3RpdmU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRhY2NlcHQ6IGZ1bmN0aW9uKGRlcCwgY2FsbGJhY2spIHtcbi8qKioqKiovIFx0XHRcdFx0aWYgKGRlcCA9PT0gdW5kZWZpbmVkKSBob3QuX3NlbGZBY2NlcHRlZCA9IHRydWU7XG4vKioqKioqLyBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIikgaG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XG4vKioqKioqLyBcdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXG4vKioqKioqLyBcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9O1xuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XG4vKioqKioqLyBcdFx0XHR9LFxuLyoqKioqKi8gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XG4vKioqKioqLyBcdFx0XHRcdGlmIChkZXAgPT09IHVuZGVmaW5lZCkgaG90Ll9zZWxmRGVjbGluZWQgPSB0cnVlO1xuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKVxuLyoqKioqKi8gXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1tkZXBbaV1dID0gdHJ1ZTtcbi8qKioqKiovIFx0XHRcdFx0ZWxzZSBob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xuLyoqKioqKi8gXHRcdFx0fSxcbi8qKioqKiovIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdFx0fSxcbi8qKioqKiovIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xuLyoqKioqKi8gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcbi8qKioqKiovIFx0XHRcdH0sXG4vKioqKioqLyBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcbi8qKioqKiovIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdFx0XHRpZiAoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuLyoqKioqKi8gXHRcdFx0fSxcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxuLyoqKioqKi8gXHRcdFx0Y2hlY2s6IGhvdENoZWNrLFxuLyoqKioqKi8gXHRcdFx0YXBwbHk6IGhvdEFwcGx5LFxuLyoqKioqKi8gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XG4vKioqKioqLyBcdFx0XHRcdGlmICghbCkgcmV0dXJuIGhvdFN0YXR1cztcbi8qKioqKiovIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcbi8qKioqKiovIFx0XHRcdH0sXG4vKioqKioqLyBcdFx0XHRhZGRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbihsKSB7XG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XG4vKioqKioqLyBcdFx0XHR9LFxuLyoqKioqKi8gXHRcdFx0cmVtb3ZlU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcbi8qKioqKiovIFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBob3RTdGF0dXNIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcbi8qKioqKiovIFx0XHRcdH0sXG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0Ly9pbmhlcml0IGZyb20gcHJldmlvdXMgZGlzcG9zZSBjYWxsXG4vKioqKioqLyBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi8gXHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHVuZGVmaW5lZDtcbi8qKioqKiovIFx0XHRyZXR1cm4gaG90O1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcbi8qKioqKiovIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xuLyoqKioqKi8gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcbi8qKioqKiovIFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxuLyoqKioqKi8gXHRcdFx0aG90U3RhdHVzSGFuZGxlcnNbaV0uY2FsbChudWxsLCBuZXdTdGF0dXMpO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyB3aGlsZSBkb3dubG9hZGluZ1xuLyoqKioqKi8gXHR2YXIgaG90V2FpdGluZ0ZpbGVzID0gMDtcbi8qKioqKiovIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xuLyoqKioqKi8gXHR2YXIgaG90V2FpdGluZ0ZpbGVzTWFwID0ge307XG4vKioqKioqLyBcdHZhciBob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xuLyoqKioqKi8gXHR2YXIgaG90QXZhaWxhYmxlRmlsZXNNYXAgPSB7fTtcbi8qKioqKiovIFx0dmFyIGhvdERlZmVycmVkO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXG4vKioqKioqLyBcdHZhciBob3RVcGRhdGUsIGhvdFVwZGF0ZU5ld0hhc2g7XG4vKioqKioqL1xuLyoqKioqKi8gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XG4vKioqKioqLyBcdFx0dmFyIGlzTnVtYmVyID0gK2lkICsgXCJcIiA9PT0gaWQ7XG4vKioqKioqLyBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5KSB7XG4vKioqKioqLyBcdFx0aWYgKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHtcbi8qKioqKiovIFx0XHRcdHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRob3RBcHBseU9uVXBkYXRlID0gYXBwbHk7XG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiY2hlY2tcIik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGhvdERvd25sb2FkTWFuaWZlc3QoaG90UmVxdWVzdFRpbWVvdXQpLnRoZW4oZnVuY3Rpb24odXBkYXRlKSB7XG4vKioqKioqLyBcdFx0XHRpZiAoIXVwZGF0ZSkge1xuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xuLyoqKioqKi8gXHRcdFx0XHRyZXR1cm4gbnVsbDtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcbi8qKioqKiovIFx0XHRcdGhvdEF2YWlsYWJsZUZpbGVzTWFwID0gdXBkYXRlLmM7XG4vKioqKioqLyBcdFx0XHRob3RVcGRhdGVOZXdIYXNoID0gdXBkYXRlLmg7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0aG90U2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcbi8qKioqKiovIFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4vKioqKioqLyBcdFx0XHRcdGhvdERlZmVycmVkID0ge1xuLyoqKioqKi8gXHRcdFx0XHRcdHJlc29sdmU6IHJlc29sdmUsXG4vKioqKioqLyBcdFx0XHRcdFx0cmVqZWN0OiByZWplY3Rcbi8qKioqKiovIFx0XHRcdFx0fTtcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlID0ge307XG4vKioqKioqLyBcdFx0XHR2YXIgY2h1bmtJZCA9IFwiY29ybmVyc3RvbmVcIjtcbi8qKioqKiovIFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb25lLWJsb2Nrc1xuLyoqKioqKi8gXHRcdFx0e1xuLyoqKioqKi8gXHRcdFx0XHQvKmdsb2JhbHMgY2h1bmtJZCAqL1xuLyoqKioqKi8gXHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdGlmIChcbi8qKioqKiovIFx0XHRcdFx0aG90U3RhdHVzID09PSBcInByZXBhcmVcIiAmJlxuLyoqKioqKi8gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nID09PSAwICYmXG4vKioqKioqLyBcdFx0XHRcdGhvdFdhaXRpbmdGaWxlcyA9PT0gMFxuLyoqKioqKi8gXHRcdFx0KSB7XG4vKioqKioqLyBcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdHJldHVybiBwcm9taXNlO1xuLyoqKioqKi8gXHRcdH0pO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRpZiAoIWhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdIHx8ICFob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybjtcbi8qKioqKiovIFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IGZhbHNlO1xuLyoqKioqKi8gXHRcdGZvciAodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4vKioqKioqLyBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbi8qKioqKiovIFx0XHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0aWYgKC0taG90V2FpdGluZ0ZpbGVzID09PSAwICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDApIHtcbi8qKioqKiovIFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHRpZiAoIWhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xuLyoqKioqKi8gXHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXMrKztcbi8qKioqKiovIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcInJlYWR5XCIpO1xuLyoqKioqKi8gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xuLyoqKioqKi8gXHRcdGhvdERlZmVycmVkID0gbnVsbDtcbi8qKioqKiovIFx0XHRpZiAoIWRlZmVycmVkKSByZXR1cm47XG4vKioqKioqLyBcdFx0aWYgKGhvdEFwcGx5T25VcGRhdGUpIHtcbi8qKioqKiovIFx0XHRcdC8vIFdyYXAgZGVmZXJyZWQgb2JqZWN0IGluIFByb21pc2UgdG8gbWFyayBpdCBhcyBhIHdlbGwtaGFuZGxlZCBQcm9taXNlIHRvXG4vKioqKioqLyBcdFx0XHQvLyBhdm9pZCB0cmlnZ2VyaW5nIHVuY2F1Z2h0IGV4Y2VwdGlvbiB3YXJuaW5nIGluIENocm9tZS5cbi8qKioqKiovIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcbi8qKioqKiovIFx0XHRcdFByb21pc2UucmVzb2x2ZSgpXG4vKioqKioqLyBcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCkge1xuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBob3RBcHBseShob3RBcHBseU9uVXBkYXRlKTtcbi8qKioqKiovIFx0XHRcdFx0fSlcbi8qKioqKiovIFx0XHRcdFx0LnRoZW4oXG4vKioqKioqLyBcdFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4vKioqKioqLyBcdFx0XHRcdFx0fSxcbi8qKioqKiovIFx0XHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0KTtcbi8qKioqKiovIFx0XHR9IGVsc2Uge1xuLyoqKioqKi8gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xuLyoqKioqKi8gXHRcdFx0Zm9yICh2YXIgaWQgaW4gaG90VXBkYXRlKSB7XG4vKioqKioqLyBcdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaCh0b01vZHVsZUlkKGlkKSk7XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdGRlZmVycmVkLnJlc29sdmUob3V0ZGF0ZWRNb2R1bGVzKTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcbi8qKioqKiovIFx0XHRpZiAoaG90U3RhdHVzICE9PSBcInJlYWR5XCIpXG4vKioqKioqLyBcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJhcHBseSgpIGlzIG9ubHkgYWxsb3dlZCBpbiByZWFkeSBzdGF0dXNcIik7XG4vKioqKioqLyBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdHZhciBjYjtcbi8qKioqKiovIFx0XHR2YXIgaTtcbi8qKioqKiovIFx0XHR2YXIgajtcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlO1xuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVJZDtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0ZnVuY3Rpb24gZ2V0QWZmZWN0ZWRTdHVmZih1cGRhdGVNb2R1bGVJZCkge1xuLyoqKioqKi8gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XG4vKioqKioqLyBcdFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKS5tYXAoZnVuY3Rpb24oaWQpIHtcbi8qKioqKiovIFx0XHRcdFx0cmV0dXJuIHtcbi8qKioqKiovIFx0XHRcdFx0XHRjaGFpbjogW2lkXSxcbi8qKioqKiovIFx0XHRcdFx0XHRpZDogaWRcbi8qKioqKiovIFx0XHRcdFx0fTtcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdFx0d2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbi8qKioqKiovIFx0XHRcdFx0dmFyIHF1ZXVlSXRlbSA9IHF1ZXVlLnBvcCgpO1xuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZUl0ZW0uaWQ7XG4vKioqKioqLyBcdFx0XHRcdHZhciBjaGFpbiA9IHF1ZXVlSXRlbS5jaGFpbjtcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0XHRcdGlmICghbW9kdWxlIHx8IG1vZHVsZS5ob3QuX3NlbGZBY2NlcHRlZCkgY29udGludWU7XG4vKioqKioqLyBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm4ge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWRlY2xpbmVkXCIsXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXG4vKioqKioqLyBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcbi8qKioqKiovIFx0XHRcdFx0XHR9O1xuLyoqKioqKi8gXHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRcdGlmIChtb2R1bGUuaG90Ll9tYWluKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkXG4vKioqKioqLyBcdFx0XHRcdFx0fTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1vZHVsZS5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudElkID0gbW9kdWxlLnBhcmVudHNbaV07XG4vKioqKioqLyBcdFx0XHRcdFx0dmFyIHBhcmVudCA9IGluc3RhbGxlZE1vZHVsZXNbcGFyZW50SWRdO1xuLyoqKioqKi8gXHRcdFx0XHRcdGlmICghcGFyZW50KSBjb250aW51ZTtcbi8qKioqKiovIFx0XHRcdFx0XHRpZiAocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRyZXR1cm4ge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR0eXBlOiBcImRlY2xpbmVkXCIsXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0cGFyZW50SWQ6IHBhcmVudElkXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9O1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRpZiAob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpICE9PSAtMSkgY29udGludWU7XG4vKioqKioqLyBcdFx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYgKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcbi8qKioqKiovIFx0XHRcdFx0XHRxdWV1ZS5wdXNoKHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZDogcGFyZW50SWRcbi8qKioqKiovIFx0XHRcdFx0XHR9KTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0XHRcdHJldHVybiB7XG4vKioqKioqLyBcdFx0XHRcdHR5cGU6IFwiYWNjZXB0ZWRcIixcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlSWQ6IHVwZGF0ZU1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXM6IG91dGRhdGVkTW9kdWxlcyxcbi8qKioqKiovIFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXM6IG91dGRhdGVkRGVwZW5kZW5jaWVzXG4vKioqKioqLyBcdFx0XHR9O1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xuLyoqKioqKi8gXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XG4vKioqKioqLyBcdFx0XHRcdHZhciBpdGVtID0gYltpXTtcbi8qKioqKiovIFx0XHRcdFx0aWYgKGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIGEucHVzaChpdGVtKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXG4vKioqKioqLyBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcbi8qKioqKiovIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xuLyoqKioqKi8gXHRcdFx0Y29uc29sZS53YXJuKFxuLyoqKioqKi8gXHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIHJlc3VsdC5tb2R1bGVJZCArIFwiKSB0byBkaXNwb3NlZCBtb2R1bGVcIlxuLyoqKioqKi8gXHRcdFx0KTtcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHRmb3IgKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcbi8qKioqKiovIFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlSWQgPSB0b01vZHVsZUlkKGlkKTtcbi8qKioqKiovIFx0XHRcdFx0LyoqIEB0eXBlIHtUT0RPfSAqL1xuLyoqKioqKi8gXHRcdFx0XHR2YXIgcmVzdWx0O1xuLyoqKioqKi8gXHRcdFx0XHRpZiAoaG90VXBkYXRlW2lkXSkge1xuLyoqKioqKi8gXHRcdFx0XHRcdHJlc3VsdCA9IGdldEFmZmVjdGVkU3R1ZmYobW9kdWxlSWQpO1xuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2Uge1xuLyoqKioqKi8gXHRcdFx0XHRcdHJlc3VsdCA9IHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdHR5cGU6IFwiZGlzcG9zZWRcIixcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBpZFxuLyoqKioqKi8gXHRcdFx0XHRcdH07XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0LyoqIEB0eXBlIHtFcnJvcnxmYWxzZX0gKi9cbi8qKioqKiovIFx0XHRcdFx0dmFyIGFib3J0RXJyb3IgPSBmYWxzZTtcbi8qKioqKiovIFx0XHRcdFx0dmFyIGRvQXBwbHkgPSBmYWxzZTtcbi8qKioqKiovIFx0XHRcdFx0dmFyIGRvRGlzcG9zZSA9IGZhbHNlO1xuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2hhaW5JbmZvID0gXCJcIjtcbi8qKioqKiovIFx0XHRcdFx0aWYgKHJlc3VsdC5jaGFpbikge1xuLyoqKioqKi8gXHRcdFx0XHRcdGNoYWluSW5mbyA9IFwiXFxuVXBkYXRlIHByb3BhZ2F0aW9uOiBcIiArIHJlc3VsdC5jaGFpbi5qb2luKFwiIC0+IFwiKTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRzd2l0Y2ggKHJlc3VsdC50eXBlKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcInNlbGYtZGVjbGluZWRcIjpcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGVjbGluZWQpIG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgK1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm1vZHVsZUlkICtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcImRlY2xpbmVkXCI6XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRlY2xpbmVkKSBvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVEZWNsaW5lZClcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0XCIgaW4gXCIgK1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0cmVzdWx0LnBhcmVudElkICtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcInVuYWNjZXB0ZWRcIjpcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uVW5hY2NlcHRlZCkgb3B0aW9ucy5vblVuYWNjZXB0ZWQocmVzdWx0KTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIFwiICsgbW9kdWxlSWQgKyBcIiBpcyBub3QgYWNjZXB0ZWRcIiArIGNoYWluSW5mb1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcImFjY2VwdGVkXCI6XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkFjY2VwdGVkKSBvcHRpb25zLm9uQWNjZXB0ZWQocmVzdWx0KTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGRvQXBwbHkgPSB0cnVlO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcImRpc3Bvc2VkXCI6XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRpc3Bvc2VkKSBvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGRvRGlzcG9zZSA9IHRydWU7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRicmVhaztcbi8qKioqKiovIFx0XHRcdFx0XHRkZWZhdWx0OlxuLyoqKioqKi8gXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leGNlcHRpb24gdHlwZSBcIiArIHJlc3VsdC50eXBlKTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRpZiAoYWJvcnRFcnJvcikge1xuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChhYm9ydEVycm9yKTtcbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRpZiAoZG9BcHBseSkge1xuLyoqKioqKi8gXHRcdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gaG90VXBkYXRlW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdC5vdXRkYXRlZE1vZHVsZXMpO1xuLyoqKioqKi8gXHRcdFx0XHRcdGZvciAobW9kdWxlSWQgaW4gcmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAoXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRyZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMsXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWRcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0KVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0KSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGlmICghb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSA9IFtdO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRhZGRBbGxUb1NldChcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0sXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0cmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHQpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRpZiAoZG9EaXNwb3NlKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XG4vKioqKioqLyBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSB3YXJuVW5leHBlY3RlZFJlcXVpcmU7XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XG4vKioqKioqLyBcdFx0Zm9yIChpID0gMDsgaSA8IG91dGRhdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0bW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XG4vKioqKioqLyBcdFx0XHRpZiAoXG4vKioqKioqLyBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmXG4vKioqKioqLyBcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXG4vKioqKioqLyBcdFx0XHQpXG4vKioqKioqLyBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcbi8qKioqKiovIFx0XHRcdFx0XHRtb2R1bGU6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0XHRcdGVycm9ySGFuZGxlcjogaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uaG90Ll9zZWxmQWNjZXB0ZWRcbi8qKioqKiovIFx0XHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2Vcbi8qKioqKiovIFx0XHRob3RTZXRTdGF0dXMoXCJkaXNwb3NlXCIpO1xuLyoqKioqKi8gXHRcdE9iamVjdC5rZXlzKGhvdEF2YWlsYWJsZUZpbGVzTWFwKS5mb3JFYWNoKGZ1bmN0aW9uKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHRcdGlmIChob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSA9PT0gZmFsc2UpIHtcbi8qKioqKiovIFx0XHRcdFx0aG90RGlzcG9zZUNodW5rKGNodW5rSWQpO1xuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdH0pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHR2YXIgaWR4O1xuLyoqKioqKi8gXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xuLyoqKioqKi8gXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4vKioqKioqLyBcdFx0XHRtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xuLyoqKioqKi8gXHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0XHRpZiAoIW1vZHVsZSkgY29udGludWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0dmFyIGRhdGEgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHQvLyBDYWxsIGRpc3Bvc2UgaGFuZGxlcnNcbi8qKioqKiovIFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XG4vKioqKioqLyBcdFx0XHRmb3IgKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XG4vKioqKioqLyBcdFx0XHRcdGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xuLyoqKioqKi8gXHRcdFx0XHRjYihkYXRhKTtcbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcbi8qKioqKiovIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXG4vKioqKioqLyBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxuLyoqKioqKi8gXHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxuLyoqKioqKi8gXHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2hpbGQgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZS5jaGlsZHJlbltqXV07XG4vKioqKioqLyBcdFx0XHRcdGlmICghY2hpbGQpIGNvbnRpbnVlO1xuLyoqKioqKi8gXHRcdFx0XHRpZHggPSBjaGlsZC5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpO1xuLyoqKioqKi8gXHRcdFx0XHRpZiAoaWR4ID49IDApIHtcbi8qKioqKiovIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xuLyoqKioqKi8gXHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHR9XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxuLyoqKioqKi8gXHRcdHZhciBkZXBlbmRlbmN5O1xuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcbi8qKioqKiovIFx0XHRmb3IgKG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG4vKioqKioqLyBcdFx0XHRpZiAoXG4vKioqKioqLyBcdFx0XHRcdE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpXG4vKioqKioqLyBcdFx0XHQpIHtcbi8qKioqKiovIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0XHRcdGlmIChtb2R1bGUpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG4vKioqKioqLyBcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHR9XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBOb3QgaW4gXCJhcHBseVwiIHBoYXNlXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdGhvdEN1cnJlbnRIYXNoID0gaG90VXBkYXRlTmV3SGFzaDtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gaW5zZXJ0IG5ldyBjb2RlXG4vKioqKioqLyBcdFx0Zm9yIChtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XG4vKioqKioqLyBcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFwcGxpZWRVcGRhdGUsIG1vZHVsZUlkKSkge1xuLyoqKioqKi8gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gY2FsbCBhY2NlcHQgaGFuZGxlcnNcbi8qKioqKiovIFx0XHR2YXIgZXJyb3IgPSBudWxsO1xuLyoqKioqKi8gXHRcdGZvciAobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcbi8qKioqKiovIFx0XHRcdGlmIChcbi8qKioqKiovIFx0XHRcdFx0T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZClcbi8qKioqKiovIFx0XHRcdCkge1xuLyoqKioqKi8gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcbi8qKioqKiovIFx0XHRcdFx0aWYgKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID0gb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBpKyspIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAoY2IpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrcy5pbmRleE9mKGNiKSAhPT0gLTEpIGNvbnRpbnVlO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XG4vKioqKioqLyBcdFx0XHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiID0gY2FsbGJhY2tzW2ldO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0dHJ5IHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0Y2IobW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMpO1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYWNjZXB0LWVycm9yZWRcIixcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV0sXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0fSk7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0fVxuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gTG9hZCBzZWxmIGFjY2VwdGVkIG1vZHVsZXNcbi8qKioqKiovIFx0XHRmb3IgKGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4vKioqKioqLyBcdFx0XHR2YXIgaXRlbSA9IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlc1tpXTtcbi8qKioqKiovIFx0XHRcdG1vZHVsZUlkID0gaXRlbS5tb2R1bGU7XG4vKioqKioqLyBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XG4vKioqKioqLyBcdFx0XHR0cnkge1xuLyoqKioqKi8gXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcbi8qKioqKiovIFx0XHRcdH0gY2F0Y2ggKGVycikge1xuLyoqKioqKi8gXHRcdFx0XHRpZiAodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbi8qKioqKiovIFx0XHRcdFx0XHR0cnkge1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyKTtcbi8qKioqKiovIFx0XHRcdFx0XHR9IGNhdGNoIChlcnIyKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3ItaGFuZGxlci1lcnJvcmVkXCIsXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdG9yaWdpbmFsRXJyb3I6IGVyclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9KTtcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyMjtcbi8qKioqKiovIFx0XHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmICghZXJyb3IpIGVycm9yID0gZXJyO1xuLyoqKioqKi8gXHRcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdFx0fSBlbHNlIHtcbi8qKioqKiovIFx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkVycm9yZWQpIHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvcmVkXCIsXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fSk7XG4vKioqKioqLyBcdFx0XHRcdFx0fVxuLyoqKioqKi8gXHRcdFx0XHRcdGlmICghb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZiAoIWVycm9yKSBlcnJvciA9IGVycjtcbi8qKioqKiovIFx0XHRcdFx0XHR9XG4vKioqKioqLyBcdFx0XHRcdH1cbi8qKioqKiovIFx0XHRcdH1cbi8qKioqKiovIFx0XHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXG4vKioqKioqLyBcdFx0aWYgKGVycm9yKSB7XG4vKioqKioqLyBcdFx0XHRob3RTZXRTdGF0dXMoXCJmYWlsXCIpO1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XG4vKioqKioqLyBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbi8qKioqKiovIFx0XHRcdHJlc29sdmUob3V0ZGF0ZWRNb2R1bGVzKTtcbi8qKioqKiovIFx0XHR9KTtcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuLyoqKioqKi8gXHRcdFx0cGFyZW50czogKGhvdEN1cnJlbnRQYXJlbnRzVGVtcCA9IGhvdEN1cnJlbnRQYXJlbnRzLCBob3RDdXJyZW50UGFyZW50cyA9IFtdLCBob3RDdXJyZW50UGFyZW50c1RlbXApLFxuLyoqKioqKi8gXHRcdFx0Y2hpbGRyZW46IFtdXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkpO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuLyoqKioqKi8gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vKioqKioqLyBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLyoqKioqKi8gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4vKioqKioqLyBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gbnM7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfaGFzaF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uaCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gaG90Q3VycmVudEhhc2g7IH07XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKFwiLi9pbmRleC5qc1wiKShfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vaW5kZXguanNcIik7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovICh7XG5cbi8qKiovIFwiLi9jYW52YXNUb1BpeGVsLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2NhbnZhc1RvUGl4ZWwuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0VHJhbnNmb3JtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldFRyYW5zZm9ybS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0VHJhbnNmb3JtLmpzXCIpO1xuXG5cbi8qKlxuICogQ29udmVydHMgYSBwb2ludCBpbiB0aGUgY2FudmFzIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHRoZSBwaXhlbCBjb29yZGluYXRlIHN5c3RlbVxuICogc3lzdGVtLiAgVGhpcyBjYW4gYmUgdXNlZCB0byByZXNldCB0b29scycgaW1hZ2UgY29vcmRpbmF0ZXMgYWZ0ZXIgbW9kaWZpY2F0aW9uc1xuICogaGF2ZSBiZWVuIG1hZGUgaW4gY2FudmFzIHNwYWNlIChlLmcuIG1vdmluZyBhIHRvb2wgYnkgYSBmZXcgY20sIGluZGVwZW5kZW50IG9mXG4gKiBpbWFnZSByZXNvbHV0aW9uKS5cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBDb3JuZXJzdG9uZSBlbGVtZW50IHdpdGhpbiB3aGljaCB0aGUgaW5wdXQgcG9pbnQgbGllc1xuICogQHBhcmFtIHt7eDogTnVtYmVyLCB5OiBOdW1iZXJ9fSBwdCBUaGUgaW5wdXQgcG9pbnQgaW4gdGhlIGNhbnZhcyBjb29yZGluYXRlIHN5c3RlbVxuICpcbiAqIEByZXR1cm5zIHt7eDogTnVtYmVyLCB5OiBOdW1iZXJ9fSBUaGUgdHJhbnNmb3JtZWQgcG9pbnQgaW4gdGhlIHBpeGVsIGNvb3JkaW5hdGUgc3lzdGVtXG4gKiBAbWVtYmVyb2YgUGl4ZWxDb29yZGluYXRlU3lzdGVtXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgcHQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgdmFyIHRyYW5zZm9ybSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0VHJhbnNmb3JtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG4gIHRyYW5zZm9ybS5pbnZlcnQoKTtcbiAgcmV0dXJuIHRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludChwdC54LCBwdC55KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2NvbG9ycy9jb2xvcm1hcC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2NvbG9ycy9jb2xvcm1hcC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBnZXRDb2xvcm1hcHNMaXN0LCBnZXRDb2xvcm1hcCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRDb2xvcm1hcHNMaXN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Q29sb3JtYXBzTGlzdDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0Q29sb3JtYXBcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRDb2xvcm1hcDsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvb2t1cFRhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvb2t1cFRhYmxlLmpzICovIFwiLi9jb2xvcnMvbG9va3VwVGFibGUuanNcIik7XG5cbnZhciBDT0xPUl9UUkFOU1BBUkVOVCA9IFswLCAwLCAwLCAwXTsgLy8gQ29sb3JtYXBzXG4vL1xuLy8gSG90IElyb24sIFBFVCwgSG90IE1ldGFsIEJsdWUgYW5kIFBFVCAyMCBTdGVwIGFyZSBjb2xvciBwYWxldHRlc1xuLy8gRGVmaW5lZCBieSB0aGUgRElDT00gc3RhbmRhcmRcbi8vIGh0dHA6Ly9kaWNvbS5uZW1hLm9yZy9kaWNvbS8yMDEzL291dHB1dC9jaHRtbC9wYXJ0MDYvY2hhcHRlcl9CLmh0bWxcbi8vXG4vLyBBbGwgTGluZWFyIFNlZ21lbnRlZCBDb2xvcm1hcHMgd2VyZSBjb3BpZWQgZnJvbSBtYXRwbG90bGliXG4vLyBodHRwczovL2dpdGh1Yi5jb20vc3RlZmFudi9tYXRwbG90bGliL2Jsb2IvbWFzdGVyL2xpYi9tYXRwbG90bGliL19jbS5weVxuXG52YXIgY29sb3JtYXBzRGF0YSA9IHtcbiAgaG90SXJvbjoge1xuICAgIG5hbWU6ICdIb3QgSXJvbicsXG4gICAgbnVtT2ZDb2xvcnM6IDI1NixcbiAgICBjb2xvcnM6IFtbMCwgMCwgMCwgMjU1XSwgWzIsIDAsIDAsIDI1NV0sIFs0LCAwLCAwLCAyNTVdLCBbNiwgMCwgMCwgMjU1XSwgWzgsIDAsIDAsIDI1NV0sIFsxMCwgMCwgMCwgMjU1XSwgWzEyLCAwLCAwLCAyNTVdLCBbMTQsIDAsIDAsIDI1NV0sIFsxNiwgMCwgMCwgMjU1XSwgWzE4LCAwLCAwLCAyNTVdLCBbMjAsIDAsIDAsIDI1NV0sIFsyMiwgMCwgMCwgMjU1XSwgWzI0LCAwLCAwLCAyNTVdLCBbMjYsIDAsIDAsIDI1NV0sIFsyOCwgMCwgMCwgMjU1XSwgWzMwLCAwLCAwLCAyNTVdLCBbMzIsIDAsIDAsIDI1NV0sIFszNCwgMCwgMCwgMjU1XSwgWzM2LCAwLCAwLCAyNTVdLCBbMzgsIDAsIDAsIDI1NV0sIFs0MCwgMCwgMCwgMjU1XSwgWzQyLCAwLCAwLCAyNTVdLCBbNDQsIDAsIDAsIDI1NV0sIFs0NiwgMCwgMCwgMjU1XSwgWzQ4LCAwLCAwLCAyNTVdLCBbNTAsIDAsIDAsIDI1NV0sIFs1MiwgMCwgMCwgMjU1XSwgWzU0LCAwLCAwLCAyNTVdLCBbNTYsIDAsIDAsIDI1NV0sIFs1OCwgMCwgMCwgMjU1XSwgWzYwLCAwLCAwLCAyNTVdLCBbNjIsIDAsIDAsIDI1NV0sIFs2NCwgMCwgMCwgMjU1XSwgWzY2LCAwLCAwLCAyNTVdLCBbNjgsIDAsIDAsIDI1NV0sIFs3MCwgMCwgMCwgMjU1XSwgWzcyLCAwLCAwLCAyNTVdLCBbNzQsIDAsIDAsIDI1NV0sIFs3NiwgMCwgMCwgMjU1XSwgWzc4LCAwLCAwLCAyNTVdLCBbODAsIDAsIDAsIDI1NV0sIFs4MiwgMCwgMCwgMjU1XSwgWzg0LCAwLCAwLCAyNTVdLCBbODYsIDAsIDAsIDI1NV0sIFs4OCwgMCwgMCwgMjU1XSwgWzkwLCAwLCAwLCAyNTVdLCBbOTIsIDAsIDAsIDI1NV0sIFs5NCwgMCwgMCwgMjU1XSwgWzk2LCAwLCAwLCAyNTVdLCBbOTgsIDAsIDAsIDI1NV0sIFsxMDAsIDAsIDAsIDI1NV0sIFsxMDIsIDAsIDAsIDI1NV0sIFsxMDQsIDAsIDAsIDI1NV0sIFsxMDYsIDAsIDAsIDI1NV0sIFsxMDgsIDAsIDAsIDI1NV0sIFsxMTAsIDAsIDAsIDI1NV0sIFsxMTIsIDAsIDAsIDI1NV0sIFsxMTQsIDAsIDAsIDI1NV0sIFsxMTYsIDAsIDAsIDI1NV0sIFsxMTgsIDAsIDAsIDI1NV0sIFsxMjAsIDAsIDAsIDI1NV0sIFsxMjIsIDAsIDAsIDI1NV0sIFsxMjQsIDAsIDAsIDI1NV0sIFsxMjYsIDAsIDAsIDI1NV0sIFsxMjgsIDAsIDAsIDI1NV0sIFsxMzAsIDAsIDAsIDI1NV0sIFsxMzIsIDAsIDAsIDI1NV0sIFsxMzQsIDAsIDAsIDI1NV0sIFsxMzYsIDAsIDAsIDI1NV0sIFsxMzgsIDAsIDAsIDI1NV0sIFsxNDAsIDAsIDAsIDI1NV0sIFsxNDIsIDAsIDAsIDI1NV0sIFsxNDQsIDAsIDAsIDI1NV0sIFsxNDYsIDAsIDAsIDI1NV0sIFsxNDgsIDAsIDAsIDI1NV0sIFsxNTAsIDAsIDAsIDI1NV0sIFsxNTIsIDAsIDAsIDI1NV0sIFsxNTQsIDAsIDAsIDI1NV0sIFsxNTYsIDAsIDAsIDI1NV0sIFsxNTgsIDAsIDAsIDI1NV0sIFsxNjAsIDAsIDAsIDI1NV0sIFsxNjIsIDAsIDAsIDI1NV0sIFsxNjQsIDAsIDAsIDI1NV0sIFsxNjYsIDAsIDAsIDI1NV0sIFsxNjgsIDAsIDAsIDI1NV0sIFsxNzAsIDAsIDAsIDI1NV0sIFsxNzIsIDAsIDAsIDI1NV0sIFsxNzQsIDAsIDAsIDI1NV0sIFsxNzYsIDAsIDAsIDI1NV0sIFsxNzgsIDAsIDAsIDI1NV0sIFsxODAsIDAsIDAsIDI1NV0sIFsxODIsIDAsIDAsIDI1NV0sIFsxODQsIDAsIDAsIDI1NV0sIFsxODYsIDAsIDAsIDI1NV0sIFsxODgsIDAsIDAsIDI1NV0sIFsxOTAsIDAsIDAsIDI1NV0sIFsxOTIsIDAsIDAsIDI1NV0sIFsxOTQsIDAsIDAsIDI1NV0sIFsxOTYsIDAsIDAsIDI1NV0sIFsxOTgsIDAsIDAsIDI1NV0sIFsyMDAsIDAsIDAsIDI1NV0sIFsyMDIsIDAsIDAsIDI1NV0sIFsyMDQsIDAsIDAsIDI1NV0sIFsyMDYsIDAsIDAsIDI1NV0sIFsyMDgsIDAsIDAsIDI1NV0sIFsyMTAsIDAsIDAsIDI1NV0sIFsyMTIsIDAsIDAsIDI1NV0sIFsyMTQsIDAsIDAsIDI1NV0sIFsyMTYsIDAsIDAsIDI1NV0sIFsyMTgsIDAsIDAsIDI1NV0sIFsyMjAsIDAsIDAsIDI1NV0sIFsyMjIsIDAsIDAsIDI1NV0sIFsyMjQsIDAsIDAsIDI1NV0sIFsyMjYsIDAsIDAsIDI1NV0sIFsyMjgsIDAsIDAsIDI1NV0sIFsyMzAsIDAsIDAsIDI1NV0sIFsyMzIsIDAsIDAsIDI1NV0sIFsyMzQsIDAsIDAsIDI1NV0sIFsyMzYsIDAsIDAsIDI1NV0sIFsyMzgsIDAsIDAsIDI1NV0sIFsyNDAsIDAsIDAsIDI1NV0sIFsyNDIsIDAsIDAsIDI1NV0sIFsyNDQsIDAsIDAsIDI1NV0sIFsyNDYsIDAsIDAsIDI1NV0sIFsyNDgsIDAsIDAsIDI1NV0sIFsyNTAsIDAsIDAsIDI1NV0sIFsyNTIsIDAsIDAsIDI1NV0sIFsyNTQsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDIsIDAsIDI1NV0sIFsyNTUsIDQsIDAsIDI1NV0sIFsyNTUsIDYsIDAsIDI1NV0sIFsyNTUsIDgsIDAsIDI1NV0sIFsyNTUsIDEwLCAwLCAyNTVdLCBbMjU1LCAxMiwgMCwgMjU1XSwgWzI1NSwgMTQsIDAsIDI1NV0sIFsyNTUsIDE2LCAwLCAyNTVdLCBbMjU1LCAxOCwgMCwgMjU1XSwgWzI1NSwgMjAsIDAsIDI1NV0sIFsyNTUsIDIyLCAwLCAyNTVdLCBbMjU1LCAyNCwgMCwgMjU1XSwgWzI1NSwgMjYsIDAsIDI1NV0sIFsyNTUsIDI4LCAwLCAyNTVdLCBbMjU1LCAzMCwgMCwgMjU1XSwgWzI1NSwgMzIsIDAsIDI1NV0sIFsyNTUsIDM0LCAwLCAyNTVdLCBbMjU1LCAzNiwgMCwgMjU1XSwgWzI1NSwgMzgsIDAsIDI1NV0sIFsyNTUsIDQwLCAwLCAyNTVdLCBbMjU1LCA0MiwgMCwgMjU1XSwgWzI1NSwgNDQsIDAsIDI1NV0sIFsyNTUsIDQ2LCAwLCAyNTVdLCBbMjU1LCA0OCwgMCwgMjU1XSwgWzI1NSwgNTAsIDAsIDI1NV0sIFsyNTUsIDUyLCAwLCAyNTVdLCBbMjU1LCA1NCwgMCwgMjU1XSwgWzI1NSwgNTYsIDAsIDI1NV0sIFsyNTUsIDU4LCAwLCAyNTVdLCBbMjU1LCA2MCwgMCwgMjU1XSwgWzI1NSwgNjIsIDAsIDI1NV0sIFsyNTUsIDY0LCAwLCAyNTVdLCBbMjU1LCA2NiwgMCwgMjU1XSwgWzI1NSwgNjgsIDAsIDI1NV0sIFsyNTUsIDcwLCAwLCAyNTVdLCBbMjU1LCA3MiwgMCwgMjU1XSwgWzI1NSwgNzQsIDAsIDI1NV0sIFsyNTUsIDc2LCAwLCAyNTVdLCBbMjU1LCA3OCwgMCwgMjU1XSwgWzI1NSwgODAsIDAsIDI1NV0sIFsyNTUsIDgyLCAwLCAyNTVdLCBbMjU1LCA4NCwgMCwgMjU1XSwgWzI1NSwgODYsIDAsIDI1NV0sIFsyNTUsIDg4LCAwLCAyNTVdLCBbMjU1LCA5MCwgMCwgMjU1XSwgWzI1NSwgOTIsIDAsIDI1NV0sIFsyNTUsIDk0LCAwLCAyNTVdLCBbMjU1LCA5NiwgMCwgMjU1XSwgWzI1NSwgOTgsIDAsIDI1NV0sIFsyNTUsIDEwMCwgMCwgMjU1XSwgWzI1NSwgMTAyLCAwLCAyNTVdLCBbMjU1LCAxMDQsIDAsIDI1NV0sIFsyNTUsIDEwNiwgMCwgMjU1XSwgWzI1NSwgMTA4LCAwLCAyNTVdLCBbMjU1LCAxMTAsIDAsIDI1NV0sIFsyNTUsIDExMiwgMCwgMjU1XSwgWzI1NSwgMTE0LCAwLCAyNTVdLCBbMjU1LCAxMTYsIDAsIDI1NV0sIFsyNTUsIDExOCwgMCwgMjU1XSwgWzI1NSwgMTIwLCAwLCAyNTVdLCBbMjU1LCAxMjIsIDAsIDI1NV0sIFsyNTUsIDEyNCwgMCwgMjU1XSwgWzI1NSwgMTI2LCAwLCAyNTVdLCBbMjU1LCAxMjgsIDQsIDI1NV0sIFsyNTUsIDEzMCwgOCwgMjU1XSwgWzI1NSwgMTMyLCAxMiwgMjU1XSwgWzI1NSwgMTM0LCAxNiwgMjU1XSwgWzI1NSwgMTM2LCAyMCwgMjU1XSwgWzI1NSwgMTM4LCAyNCwgMjU1XSwgWzI1NSwgMTQwLCAyOCwgMjU1XSwgWzI1NSwgMTQyLCAzMiwgMjU1XSwgWzI1NSwgMTQ0LCAzNiwgMjU1XSwgWzI1NSwgMTQ2LCA0MCwgMjU1XSwgWzI1NSwgMTQ4LCA0NCwgMjU1XSwgWzI1NSwgMTUwLCA0OCwgMjU1XSwgWzI1NSwgMTUyLCA1MiwgMjU1XSwgWzI1NSwgMTU0LCA1NiwgMjU1XSwgWzI1NSwgMTU2LCA2MCwgMjU1XSwgWzI1NSwgMTU4LCA2NCwgMjU1XSwgWzI1NSwgMTYwLCA2OCwgMjU1XSwgWzI1NSwgMTYyLCA3MiwgMjU1XSwgWzI1NSwgMTY0LCA3NiwgMjU1XSwgWzI1NSwgMTY2LCA4MCwgMjU1XSwgWzI1NSwgMTY4LCA4NCwgMjU1XSwgWzI1NSwgMTcwLCA4OCwgMjU1XSwgWzI1NSwgMTcyLCA5MiwgMjU1XSwgWzI1NSwgMTc0LCA5NiwgMjU1XSwgWzI1NSwgMTc2LCAxMDAsIDI1NV0sIFsyNTUsIDE3OCwgMTA0LCAyNTVdLCBbMjU1LCAxODAsIDEwOCwgMjU1XSwgWzI1NSwgMTgyLCAxMTIsIDI1NV0sIFsyNTUsIDE4NCwgMTE2LCAyNTVdLCBbMjU1LCAxODYsIDEyMCwgMjU1XSwgWzI1NSwgMTg4LCAxMjQsIDI1NV0sIFsyNTUsIDE5MCwgMTI4LCAyNTVdLCBbMjU1LCAxOTIsIDEzMiwgMjU1XSwgWzI1NSwgMTk0LCAxMzYsIDI1NV0sIFsyNTUsIDE5NiwgMTQwLCAyNTVdLCBbMjU1LCAxOTgsIDE0NCwgMjU1XSwgWzI1NSwgMjAwLCAxNDgsIDI1NV0sIFsyNTUsIDIwMiwgMTUyLCAyNTVdLCBbMjU1LCAyMDQsIDE1NiwgMjU1XSwgWzI1NSwgMjA2LCAxNjAsIDI1NV0sIFsyNTUsIDIwOCwgMTY0LCAyNTVdLCBbMjU1LCAyMTAsIDE2OCwgMjU1XSwgWzI1NSwgMjEyLCAxNzIsIDI1NV0sIFsyNTUsIDIxNCwgMTc2LCAyNTVdLCBbMjU1LCAyMTYsIDE4MCwgMjU1XSwgWzI1NSwgMjE4LCAxODQsIDI1NV0sIFsyNTUsIDIyMCwgMTg4LCAyNTVdLCBbMjU1LCAyMjIsIDE5MiwgMjU1XSwgWzI1NSwgMjI0LCAxOTYsIDI1NV0sIFsyNTUsIDIyNiwgMjAwLCAyNTVdLCBbMjU1LCAyMjgsIDIwNCwgMjU1XSwgWzI1NSwgMjMwLCAyMDgsIDI1NV0sIFsyNTUsIDIzMiwgMjEyLCAyNTVdLCBbMjU1LCAyMzQsIDIxNiwgMjU1XSwgWzI1NSwgMjM2LCAyMjAsIDI1NV0sIFsyNTUsIDIzOCwgMjI0LCAyNTVdLCBbMjU1LCAyNDAsIDIyOCwgMjU1XSwgWzI1NSwgMjQyLCAyMzIsIDI1NV0sIFsyNTUsIDI0NCwgMjM2LCAyNTVdLCBbMjU1LCAyNDYsIDI0MCwgMjU1XSwgWzI1NSwgMjQ4LCAyNDQsIDI1NV0sIFsyNTUsIDI1MCwgMjQ4LCAyNTVdLCBbMjU1LCAyNTIsIDI1MiwgMjU1XSwgWzI1NSwgMjU1LCAyNTUsIDI1NV1dXG4gIH0sXG4gIHBldDoge1xuICAgIG5hbWU6ICdQRVQnLFxuICAgIG51bUNvbG9yczogMjU2LFxuICAgIGNvbG9yczogW1swLCAwLCAwLCAyNTVdLCBbMCwgMiwgMSwgMjU1XSwgWzAsIDQsIDMsIDI1NV0sIFswLCA2LCA1LCAyNTVdLCBbMCwgOCwgNywgMjU1XSwgWzAsIDEwLCA5LCAyNTVdLCBbMCwgMTIsIDExLCAyNTVdLCBbMCwgMTQsIDEzLCAyNTVdLCBbMCwgMTYsIDE1LCAyNTVdLCBbMCwgMTgsIDE3LCAyNTVdLCBbMCwgMjAsIDE5LCAyNTVdLCBbMCwgMjIsIDIxLCAyNTVdLCBbMCwgMjQsIDIzLCAyNTVdLCBbMCwgMjYsIDI1LCAyNTVdLCBbMCwgMjgsIDI3LCAyNTVdLCBbMCwgMzAsIDI5LCAyNTVdLCBbMCwgMzIsIDMxLCAyNTVdLCBbMCwgMzQsIDMzLCAyNTVdLCBbMCwgMzYsIDM1LCAyNTVdLCBbMCwgMzgsIDM3LCAyNTVdLCBbMCwgNDAsIDM5LCAyNTVdLCBbMCwgNDIsIDQxLCAyNTVdLCBbMCwgNDQsIDQzLCAyNTVdLCBbMCwgNDYsIDQ1LCAyNTVdLCBbMCwgNDgsIDQ3LCAyNTVdLCBbMCwgNTAsIDQ5LCAyNTVdLCBbMCwgNTIsIDUxLCAyNTVdLCBbMCwgNTQsIDUzLCAyNTVdLCBbMCwgNTYsIDU1LCAyNTVdLCBbMCwgNTgsIDU3LCAyNTVdLCBbMCwgNjAsIDU5LCAyNTVdLCBbMCwgNjIsIDYxLCAyNTVdLCBbMCwgNjUsIDYzLCAyNTVdLCBbMCwgNjcsIDY1LCAyNTVdLCBbMCwgNjksIDY3LCAyNTVdLCBbMCwgNzEsIDY5LCAyNTVdLCBbMCwgNzMsIDcxLCAyNTVdLCBbMCwgNzUsIDczLCAyNTVdLCBbMCwgNzcsIDc1LCAyNTVdLCBbMCwgNzksIDc3LCAyNTVdLCBbMCwgODEsIDc5LCAyNTVdLCBbMCwgODMsIDgxLCAyNTVdLCBbMCwgODUsIDgzLCAyNTVdLCBbMCwgODcsIDg1LCAyNTVdLCBbMCwgODksIDg3LCAyNTVdLCBbMCwgOTEsIDg5LCAyNTVdLCBbMCwgOTMsIDkxLCAyNTVdLCBbMCwgOTUsIDkzLCAyNTVdLCBbMCwgOTcsIDk1LCAyNTVdLCBbMCwgOTksIDk3LCAyNTVdLCBbMCwgMTAxLCA5OSwgMjU1XSwgWzAsIDEwMywgMTAxLCAyNTVdLCBbMCwgMTA1LCAxMDMsIDI1NV0sIFswLCAxMDcsIDEwNSwgMjU1XSwgWzAsIDEwOSwgMTA3LCAyNTVdLCBbMCwgMTExLCAxMDksIDI1NV0sIFswLCAxMTMsIDExMSwgMjU1XSwgWzAsIDExNSwgMTEzLCAyNTVdLCBbMCwgMTE3LCAxMTUsIDI1NV0sIFswLCAxMTksIDExNywgMjU1XSwgWzAsIDEyMSwgMTE5LCAyNTVdLCBbMCwgMTIzLCAxMjEsIDI1NV0sIFswLCAxMjUsIDEyMywgMjU1XSwgWzAsIDEyOCwgMTI1LCAyNTVdLCBbMSwgMTI2LCAxMjcsIDI1NV0sIFszLCAxMjQsIDEyOSwgMjU1XSwgWzUsIDEyMiwgMTMxLCAyNTVdLCBbNywgMTIwLCAxMzMsIDI1NV0sIFs5LCAxMTgsIDEzNSwgMjU1XSwgWzExLCAxMTYsIDEzNywgMjU1XSwgWzEzLCAxMTQsIDEzOSwgMjU1XSwgWzE1LCAxMTIsIDE0MSwgMjU1XSwgWzE3LCAxMTAsIDE0MywgMjU1XSwgWzE5LCAxMDgsIDE0NSwgMjU1XSwgWzIxLCAxMDYsIDE0NywgMjU1XSwgWzIzLCAxMDQsIDE0OSwgMjU1XSwgWzI1LCAxMDIsIDE1MSwgMjU1XSwgWzI3LCAxMDAsIDE1MywgMjU1XSwgWzI5LCA5OCwgMTU1LCAyNTVdLCBbMzEsIDk2LCAxNTcsIDI1NV0sIFszMywgOTQsIDE1OSwgMjU1XSwgWzM1LCA5MiwgMTYxLCAyNTVdLCBbMzcsIDkwLCAxNjMsIDI1NV0sIFszOSwgODgsIDE2NSwgMjU1XSwgWzQxLCA4NiwgMTY3LCAyNTVdLCBbNDMsIDg0LCAxNjksIDI1NV0sIFs0NSwgODIsIDE3MSwgMjU1XSwgWzQ3LCA4MCwgMTczLCAyNTVdLCBbNDksIDc4LCAxNzUsIDI1NV0sIFs1MSwgNzYsIDE3NywgMjU1XSwgWzUzLCA3NCwgMTc5LCAyNTVdLCBbNTUsIDcyLCAxODEsIDI1NV0sIFs1NywgNzAsIDE4MywgMjU1XSwgWzU5LCA2OCwgMTg1LCAyNTVdLCBbNjEsIDY2LCAxODcsIDI1NV0sIFs2MywgNjQsIDE4OSwgMjU1XSwgWzY1LCA2MywgMTkxLCAyNTVdLCBbNjcsIDYxLCAxOTMsIDI1NV0sIFs2OSwgNTksIDE5NSwgMjU1XSwgWzcxLCA1NywgMTk3LCAyNTVdLCBbNzMsIDU1LCAxOTksIDI1NV0sIFs3NSwgNTMsIDIwMSwgMjU1XSwgWzc3LCA1MSwgMjAzLCAyNTVdLCBbNzksIDQ5LCAyMDUsIDI1NV0sIFs4MSwgNDcsIDIwNywgMjU1XSwgWzgzLCA0NSwgMjA5LCAyNTVdLCBbODUsIDQzLCAyMTEsIDI1NV0sIFs4NiwgNDEsIDIxMywgMjU1XSwgWzg4LCAzOSwgMjE1LCAyNTVdLCBbOTAsIDM3LCAyMTcsIDI1NV0sIFs5MiwgMzUsIDIxOSwgMjU1XSwgWzk0LCAzMywgMjIxLCAyNTVdLCBbOTYsIDMxLCAyMjMsIDI1NV0sIFs5OCwgMjksIDIyNSwgMjU1XSwgWzEwMCwgMjcsIDIyNywgMjU1XSwgWzEwMiwgMjUsIDIyOSwgMjU1XSwgWzEwNCwgMjMsIDIzMSwgMjU1XSwgWzEwNiwgMjEsIDIzMywgMjU1XSwgWzEwOCwgMTksIDIzNSwgMjU1XSwgWzExMCwgMTcsIDIzNywgMjU1XSwgWzExMiwgMTUsIDIzOSwgMjU1XSwgWzExNCwgMTMsIDI0MSwgMjU1XSwgWzExNiwgMTEsIDI0MywgMjU1XSwgWzExOCwgOSwgMjQ1LCAyNTVdLCBbMTIwLCA3LCAyNDcsIDI1NV0sIFsxMjIsIDUsIDI0OSwgMjU1XSwgWzEyNCwgMywgMjUxLCAyNTVdLCBbMTI2LCAxLCAyNTMsIDI1NV0sIFsxMjgsIDAsIDI1NSwgMjU1XSwgWzEzMCwgMiwgMjUyLCAyNTVdLCBbMTMyLCA0LCAyNDgsIDI1NV0sIFsxMzQsIDYsIDI0NCwgMjU1XSwgWzEzNiwgOCwgMjQwLCAyNTVdLCBbMTM4LCAxMCwgMjM2LCAyNTVdLCBbMTQwLCAxMiwgMjMyLCAyNTVdLCBbMTQyLCAxNCwgMjI4LCAyNTVdLCBbMTQ0LCAxNiwgMjI0LCAyNTVdLCBbMTQ2LCAxOCwgMjIwLCAyNTVdLCBbMTQ4LCAyMCwgMjE2LCAyNTVdLCBbMTUwLCAyMiwgMjEyLCAyNTVdLCBbMTUyLCAyNCwgMjA4LCAyNTVdLCBbMTU0LCAyNiwgMjA0LCAyNTVdLCBbMTU2LCAyOCwgMjAwLCAyNTVdLCBbMTU4LCAzMCwgMTk2LCAyNTVdLCBbMTYwLCAzMiwgMTkyLCAyNTVdLCBbMTYyLCAzNCwgMTg4LCAyNTVdLCBbMTY0LCAzNiwgMTg0LCAyNTVdLCBbMTY2LCAzOCwgMTgwLCAyNTVdLCBbMTY4LCA0MCwgMTc2LCAyNTVdLCBbMTcwLCA0MiwgMTcyLCAyNTVdLCBbMTcxLCA0NCwgMTY4LCAyNTVdLCBbMTczLCA0NiwgMTY0LCAyNTVdLCBbMTc1LCA0OCwgMTYwLCAyNTVdLCBbMTc3LCA1MCwgMTU2LCAyNTVdLCBbMTc5LCA1MiwgMTUyLCAyNTVdLCBbMTgxLCA1NCwgMTQ4LCAyNTVdLCBbMTgzLCA1NiwgMTQ0LCAyNTVdLCBbMTg1LCA1OCwgMTQwLCAyNTVdLCBbMTg3LCA2MCwgMTM2LCAyNTVdLCBbMTg5LCA2MiwgMTMyLCAyNTVdLCBbMTkxLCA2NCwgMTI4LCAyNTVdLCBbMTkzLCA2NiwgMTI0LCAyNTVdLCBbMTk1LCA2OCwgMTIwLCAyNTVdLCBbMTk3LCA3MCwgMTE2LCAyNTVdLCBbMTk5LCA3MiwgMTEyLCAyNTVdLCBbMjAxLCA3NCwgMTA4LCAyNTVdLCBbMjAzLCA3NiwgMTA0LCAyNTVdLCBbMjA1LCA3OCwgMTAwLCAyNTVdLCBbMjA3LCA4MCwgOTYsIDI1NV0sIFsyMDksIDgyLCA5MiwgMjU1XSwgWzIxMSwgODQsIDg4LCAyNTVdLCBbMjEzLCA4NiwgODQsIDI1NV0sIFsyMTUsIDg4LCA4MCwgMjU1XSwgWzIxNywgOTAsIDc2LCAyNTVdLCBbMjE5LCA5MiwgNzIsIDI1NV0sIFsyMjEsIDk0LCA2OCwgMjU1XSwgWzIyMywgOTYsIDY0LCAyNTVdLCBbMjI1LCA5OCwgNjAsIDI1NV0sIFsyMjcsIDEwMCwgNTYsIDI1NV0sIFsyMjksIDEwMiwgNTIsIDI1NV0sIFsyMzEsIDEwNCwgNDgsIDI1NV0sIFsyMzMsIDEwNiwgNDQsIDI1NV0sIFsyMzUsIDEwOCwgNDAsIDI1NV0sIFsyMzcsIDExMCwgMzYsIDI1NV0sIFsyMzksIDExMiwgMzIsIDI1NV0sIFsyNDEsIDExNCwgMjgsIDI1NV0sIFsyNDMsIDExNiwgMjQsIDI1NV0sIFsyNDUsIDExOCwgMjAsIDI1NV0sIFsyNDcsIDEyMCwgMTYsIDI1NV0sIFsyNDksIDEyMiwgMTIsIDI1NV0sIFsyNTEsIDEyNCwgOCwgMjU1XSwgWzI1MywgMTI2LCA0LCAyNTVdLCBbMjU1LCAxMjgsIDAsIDI1NV0sIFsyNTUsIDEzMCwgNCwgMjU1XSwgWzI1NSwgMTMyLCA4LCAyNTVdLCBbMjU1LCAxMzQsIDEyLCAyNTVdLCBbMjU1LCAxMzYsIDE2LCAyNTVdLCBbMjU1LCAxMzgsIDIwLCAyNTVdLCBbMjU1LCAxNDAsIDI0LCAyNTVdLCBbMjU1LCAxNDIsIDI4LCAyNTVdLCBbMjU1LCAxNDQsIDMyLCAyNTVdLCBbMjU1LCAxNDYsIDM2LCAyNTVdLCBbMjU1LCAxNDgsIDQwLCAyNTVdLCBbMjU1LCAxNTAsIDQ0LCAyNTVdLCBbMjU1LCAxNTIsIDQ4LCAyNTVdLCBbMjU1LCAxNTQsIDUyLCAyNTVdLCBbMjU1LCAxNTYsIDU2LCAyNTVdLCBbMjU1LCAxNTgsIDYwLCAyNTVdLCBbMjU1LCAxNjAsIDY0LCAyNTVdLCBbMjU1LCAxNjIsIDY4LCAyNTVdLCBbMjU1LCAxNjQsIDcyLCAyNTVdLCBbMjU1LCAxNjYsIDc2LCAyNTVdLCBbMjU1LCAxNjgsIDgwLCAyNTVdLCBbMjU1LCAxNzAsIDg1LCAyNTVdLCBbMjU1LCAxNzIsIDg5LCAyNTVdLCBbMjU1LCAxNzQsIDkzLCAyNTVdLCBbMjU1LCAxNzYsIDk3LCAyNTVdLCBbMjU1LCAxNzgsIDEwMSwgMjU1XSwgWzI1NSwgMTgwLCAxMDUsIDI1NV0sIFsyNTUsIDE4MiwgMTA5LCAyNTVdLCBbMjU1LCAxODQsIDExMywgMjU1XSwgWzI1NSwgMTg2LCAxMTcsIDI1NV0sIFsyNTUsIDE4OCwgMTIxLCAyNTVdLCBbMjU1LCAxOTAsIDEyNSwgMjU1XSwgWzI1NSwgMTkyLCAxMjksIDI1NV0sIFsyNTUsIDE5NCwgMTMzLCAyNTVdLCBbMjU1LCAxOTYsIDEzNywgMjU1XSwgWzI1NSwgMTk4LCAxNDEsIDI1NV0sIFsyNTUsIDIwMCwgMTQ1LCAyNTVdLCBbMjU1LCAyMDIsIDE0OSwgMjU1XSwgWzI1NSwgMjA0LCAxNTMsIDI1NV0sIFsyNTUsIDIwNiwgMTU3LCAyNTVdLCBbMjU1LCAyMDgsIDE2MSwgMjU1XSwgWzI1NSwgMjEwLCAxNjUsIDI1NV0sIFsyNTUsIDIxMiwgMTcwLCAyNTVdLCBbMjU1LCAyMTQsIDE3NCwgMjU1XSwgWzI1NSwgMjE2LCAxNzgsIDI1NV0sIFsyNTUsIDIxOCwgMTgyLCAyNTVdLCBbMjU1LCAyMjAsIDE4NiwgMjU1XSwgWzI1NSwgMjIyLCAxOTAsIDI1NV0sIFsyNTUsIDIyNCwgMTk0LCAyNTVdLCBbMjU1LCAyMjYsIDE5OCwgMjU1XSwgWzI1NSwgMjI4LCAyMDIsIDI1NV0sIFsyNTUsIDIzMCwgMjA2LCAyNTVdLCBbMjU1LCAyMzIsIDIxMCwgMjU1XSwgWzI1NSwgMjM0LCAyMTQsIDI1NV0sIFsyNTUsIDIzNiwgMjE4LCAyNTVdLCBbMjU1LCAyMzgsIDIyMiwgMjU1XSwgWzI1NSwgMjQwLCAyMjYsIDI1NV0sIFsyNTUsIDI0MiwgMjMwLCAyNTVdLCBbMjU1LCAyNDQsIDIzNCwgMjU1XSwgWzI1NSwgMjQ2LCAyMzgsIDI1NV0sIFsyNTUsIDI0OCwgMjQyLCAyNTVdLCBbMjU1LCAyNTAsIDI0NiwgMjU1XSwgWzI1NSwgMjUyLCAyNTAsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdXVxuICB9LFxuICBob3RNZXRhbEJsdWU6IHtcbiAgICBuYW1lOiAnSG90IE1ldGFsIEJsdWUnLFxuICAgIG51bUNvbG9yczogMjU2LFxuICAgIGNvbG9yczogW1swLCAwLCAwLCAyNTVdLCBbMCwgMCwgMiwgMjU1XSwgWzAsIDAsIDQsIDI1NV0sIFswLCAwLCA2LCAyNTVdLCBbMCwgMCwgOCwgMjU1XSwgWzAsIDAsIDEwLCAyNTVdLCBbMCwgMCwgMTIsIDI1NV0sIFswLCAwLCAxNCwgMjU1XSwgWzAsIDAsIDE2LCAyNTVdLCBbMCwgMCwgMTcsIDI1NV0sIFswLCAwLCAxOSwgMjU1XSwgWzAsIDAsIDIxLCAyNTVdLCBbMCwgMCwgMjMsIDI1NV0sIFswLCAwLCAyNSwgMjU1XSwgWzAsIDAsIDI3LCAyNTVdLCBbMCwgMCwgMjksIDI1NV0sIFswLCAwLCAzMSwgMjU1XSwgWzAsIDAsIDMzLCAyNTVdLCBbMCwgMCwgMzUsIDI1NV0sIFswLCAwLCAzNywgMjU1XSwgWzAsIDAsIDM5LCAyNTVdLCBbMCwgMCwgNDEsIDI1NV0sIFswLCAwLCA0MywgMjU1XSwgWzAsIDAsIDQ1LCAyNTVdLCBbMCwgMCwgNDcsIDI1NV0sIFswLCAwLCA0OSwgMjU1XSwgWzAsIDAsIDUxLCAyNTVdLCBbMCwgMCwgNTMsIDI1NV0sIFswLCAwLCA1NSwgMjU1XSwgWzAsIDAsIDU3LCAyNTVdLCBbMCwgMCwgNTksIDI1NV0sIFswLCAwLCA2MSwgMjU1XSwgWzAsIDAsIDYzLCAyNTVdLCBbMCwgMCwgNjUsIDI1NV0sIFswLCAwLCA2NywgMjU1XSwgWzAsIDAsIDY5LCAyNTVdLCBbMCwgMCwgNzEsIDI1NV0sIFswLCAwLCA3MywgMjU1XSwgWzAsIDAsIDc1LCAyNTVdLCBbMCwgMCwgNzcsIDI1NV0sIFswLCAwLCA3OSwgMjU1XSwgWzAsIDAsIDgxLCAyNTVdLCBbMCwgMCwgODMsIDI1NV0sIFswLCAwLCA4NCwgMjU1XSwgWzAsIDAsIDg2LCAyNTVdLCBbMCwgMCwgODgsIDI1NV0sIFswLCAwLCA5MCwgMjU1XSwgWzAsIDAsIDkyLCAyNTVdLCBbMCwgMCwgOTQsIDI1NV0sIFswLCAwLCA5NiwgMjU1XSwgWzAsIDAsIDk4LCAyNTVdLCBbMCwgMCwgMTAwLCAyNTVdLCBbMCwgMCwgMTAyLCAyNTVdLCBbMCwgMCwgMTA0LCAyNTVdLCBbMCwgMCwgMTA2LCAyNTVdLCBbMCwgMCwgMTA4LCAyNTVdLCBbMCwgMCwgMTEwLCAyNTVdLCBbMCwgMCwgMTEyLCAyNTVdLCBbMCwgMCwgMTE0LCAyNTVdLCBbMCwgMCwgMTE2LCAyNTVdLCBbMCwgMCwgMTE3LCAyNTVdLCBbMCwgMCwgMTE5LCAyNTVdLCBbMCwgMCwgMTIxLCAyNTVdLCBbMCwgMCwgMTIzLCAyNTVdLCBbMCwgMCwgMTI1LCAyNTVdLCBbMCwgMCwgMTI3LCAyNTVdLCBbMCwgMCwgMTI5LCAyNTVdLCBbMCwgMCwgMTMxLCAyNTVdLCBbMCwgMCwgMTMzLCAyNTVdLCBbMCwgMCwgMTM1LCAyNTVdLCBbMCwgMCwgMTM3LCAyNTVdLCBbMCwgMCwgMTM5LCAyNTVdLCBbMCwgMCwgMTQxLCAyNTVdLCBbMCwgMCwgMTQzLCAyNTVdLCBbMCwgMCwgMTQ1LCAyNTVdLCBbMCwgMCwgMTQ3LCAyNTVdLCBbMCwgMCwgMTQ5LCAyNTVdLCBbMCwgMCwgMTUxLCAyNTVdLCBbMCwgMCwgMTUzLCAyNTVdLCBbMCwgMCwgMTU1LCAyNTVdLCBbMCwgMCwgMTU3LCAyNTVdLCBbMCwgMCwgMTU5LCAyNTVdLCBbMCwgMCwgMTYxLCAyNTVdLCBbMCwgMCwgMTYzLCAyNTVdLCBbMCwgMCwgMTY1LCAyNTVdLCBbMCwgMCwgMTY3LCAyNTVdLCBbMywgMCwgMTY5LCAyNTVdLCBbNiwgMCwgMTcxLCAyNTVdLCBbOSwgMCwgMTczLCAyNTVdLCBbMTIsIDAsIDE3NSwgMjU1XSwgWzE1LCAwLCAxNzcsIDI1NV0sIFsxOCwgMCwgMTc5LCAyNTVdLCBbMjEsIDAsIDE4MSwgMjU1XSwgWzI0LCAwLCAxODMsIDI1NV0sIFsyNiwgMCwgMTg0LCAyNTVdLCBbMjksIDAsIDE4NiwgMjU1XSwgWzMyLCAwLCAxODgsIDI1NV0sIFszNSwgMCwgMTkwLCAyNTVdLCBbMzgsIDAsIDE5MiwgMjU1XSwgWzQxLCAwLCAxOTQsIDI1NV0sIFs0NCwgMCwgMTk2LCAyNTVdLCBbNDcsIDAsIDE5OCwgMjU1XSwgWzUwLCAwLCAyMDAsIDI1NV0sIFs1MiwgMCwgMTk3LCAyNTVdLCBbNTUsIDAsIDE5NCwgMjU1XSwgWzU3LCAwLCAxOTEsIDI1NV0sIFs1OSwgMCwgMTg4LCAyNTVdLCBbNjIsIDAsIDE4NSwgMjU1XSwgWzY0LCAwLCAxODIsIDI1NV0sIFs2NiwgMCwgMTc5LCAyNTVdLCBbNjksIDAsIDE3NiwgMjU1XSwgWzcxLCAwLCAxNzQsIDI1NV0sIFs3NCwgMCwgMTcxLCAyNTVdLCBbNzYsIDAsIDE2OCwgMjU1XSwgWzc4LCAwLCAxNjUsIDI1NV0sIFs4MSwgMCwgMTYyLCAyNTVdLCBbODMsIDAsIDE1OSwgMjU1XSwgWzg1LCAwLCAxNTYsIDI1NV0sIFs4OCwgMCwgMTUzLCAyNTVdLCBbOTAsIDAsIDE1MCwgMjU1XSwgWzkzLCAyLCAxNDQsIDI1NV0sIFs5NiwgNCwgMTM4LCAyNTVdLCBbOTksIDYsIDEzMiwgMjU1XSwgWzEwMiwgOCwgMTI2LCAyNTVdLCBbMTA1LCA5LCAxMjEsIDI1NV0sIFsxMDgsIDExLCAxMTUsIDI1NV0sIFsxMTEsIDEzLCAxMDksIDI1NV0sIFsxMTQsIDE1LCAxMDMsIDI1NV0sIFsxMTYsIDE3LCA5NywgMjU1XSwgWzExOSwgMTksIDkxLCAyNTVdLCBbMTIyLCAyMSwgODUsIDI1NV0sIFsxMjUsIDIzLCA3OSwgMjU1XSwgWzEyOCwgMjQsIDc0LCAyNTVdLCBbMTMxLCAyNiwgNjgsIDI1NV0sIFsxMzQsIDI4LCA2MiwgMjU1XSwgWzEzNywgMzAsIDU2LCAyNTVdLCBbMTQwLCAzMiwgNTAsIDI1NV0sIFsxNDMsIDM0LCA0NywgMjU1XSwgWzE0NiwgMzYsIDQ0LCAyNTVdLCBbMTQ5LCAzOCwgNDEsIDI1NV0sIFsxNTIsIDQwLCAzOCwgMjU1XSwgWzE1NSwgNDEsIDM1LCAyNTVdLCBbMTU4LCA0MywgMzIsIDI1NV0sIFsxNjEsIDQ1LCAyOSwgMjU1XSwgWzE2NCwgNDcsIDI2LCAyNTVdLCBbMTY2LCA0OSwgMjQsIDI1NV0sIFsxNjksIDUxLCAyMSwgMjU1XSwgWzE3MiwgNTMsIDE4LCAyNTVdLCBbMTc1LCA1NSwgMTUsIDI1NV0sIFsxNzgsIDU2LCAxMiwgMjU1XSwgWzE4MSwgNTgsIDksIDI1NV0sIFsxODQsIDYwLCA2LCAyNTVdLCBbMTg3LCA2MiwgMywgMjU1XSwgWzE5MCwgNjQsIDAsIDI1NV0sIFsxOTQsIDY2LCAwLCAyNTVdLCBbMTk4LCA2OCwgMCwgMjU1XSwgWzIwMSwgNzAsIDAsIDI1NV0sIFsyMDUsIDcyLCAwLCAyNTVdLCBbMjA5LCA3MywgMCwgMjU1XSwgWzIxMywgNzUsIDAsIDI1NV0sIFsyMTcsIDc3LCAwLCAyNTVdLCBbMjIxLCA3OSwgMCwgMjU1XSwgWzIyNCwgODEsIDAsIDI1NV0sIFsyMjgsIDgzLCAwLCAyNTVdLCBbMjMyLCA4NSwgMCwgMjU1XSwgWzIzNiwgODcsIDAsIDI1NV0sIFsyNDAsIDg4LCAwLCAyNTVdLCBbMjQ0LCA5MCwgMCwgMjU1XSwgWzI0NywgOTIsIDAsIDI1NV0sIFsyNTEsIDk0LCAwLCAyNTVdLCBbMjU1LCA5NiwgMCwgMjU1XSwgWzI1NSwgOTgsIDMsIDI1NV0sIFsyNTUsIDEwMCwgNiwgMjU1XSwgWzI1NSwgMTAyLCA5LCAyNTVdLCBbMjU1LCAxMDQsIDEyLCAyNTVdLCBbMjU1LCAxMDUsIDE1LCAyNTVdLCBbMjU1LCAxMDcsIDE4LCAyNTVdLCBbMjU1LCAxMDksIDIxLCAyNTVdLCBbMjU1LCAxMTEsIDI0LCAyNTVdLCBbMjU1LCAxMTMsIDI2LCAyNTVdLCBbMjU1LCAxMTUsIDI5LCAyNTVdLCBbMjU1LCAxMTcsIDMyLCAyNTVdLCBbMjU1LCAxMTksIDM1LCAyNTVdLCBbMjU1LCAxMjAsIDM4LCAyNTVdLCBbMjU1LCAxMjIsIDQxLCAyNTVdLCBbMjU1LCAxMjQsIDQ0LCAyNTVdLCBbMjU1LCAxMjYsIDQ3LCAyNTVdLCBbMjU1LCAxMjgsIDUwLCAyNTVdLCBbMjU1LCAxMzAsIDUzLCAyNTVdLCBbMjU1LCAxMzIsIDU2LCAyNTVdLCBbMjU1LCAxMzQsIDU5LCAyNTVdLCBbMjU1LCAxMzYsIDYyLCAyNTVdLCBbMjU1LCAxMzcsIDY1LCAyNTVdLCBbMjU1LCAxMzksIDY4LCAyNTVdLCBbMjU1LCAxNDEsIDcxLCAyNTVdLCBbMjU1LCAxNDMsIDc0LCAyNTVdLCBbMjU1LCAxNDUsIDc2LCAyNTVdLCBbMjU1LCAxNDcsIDc5LCAyNTVdLCBbMjU1LCAxNDksIDgyLCAyNTVdLCBbMjU1LCAxNTEsIDg1LCAyNTVdLCBbMjU1LCAxNTIsIDg4LCAyNTVdLCBbMjU1LCAxNTQsIDkxLCAyNTVdLCBbMjU1LCAxNTYsIDk0LCAyNTVdLCBbMjU1LCAxNTgsIDk3LCAyNTVdLCBbMjU1LCAxNjAsIDEwMCwgMjU1XSwgWzI1NSwgMTYyLCAxMDMsIDI1NV0sIFsyNTUsIDE2NCwgMTA2LCAyNTVdLCBbMjU1LCAxNjYsIDEwOSwgMjU1XSwgWzI1NSwgMTY4LCAxMTIsIDI1NV0sIFsyNTUsIDE2OSwgMTE1LCAyNTVdLCBbMjU1LCAxNzEsIDExOCwgMjU1XSwgWzI1NSwgMTczLCAxMjEsIDI1NV0sIFsyNTUsIDE3NSwgMTI0LCAyNTVdLCBbMjU1LCAxNzcsIDEyNiwgMjU1XSwgWzI1NSwgMTc5LCAxMjksIDI1NV0sIFsyNTUsIDE4MSwgMTMyLCAyNTVdLCBbMjU1LCAxODMsIDEzNSwgMjU1XSwgWzI1NSwgMTg0LCAxMzgsIDI1NV0sIFsyNTUsIDE4NiwgMTQxLCAyNTVdLCBbMjU1LCAxODgsIDE0NCwgMjU1XSwgWzI1NSwgMTkwLCAxNDcsIDI1NV0sIFsyNTUsIDE5MiwgMTUwLCAyNTVdLCBbMjU1LCAxOTQsIDE1MywgMjU1XSwgWzI1NSwgMTk2LCAxNTYsIDI1NV0sIFsyNTUsIDE5OCwgMTU5LCAyNTVdLCBbMjU1LCAyMDAsIDE2MiwgMjU1XSwgWzI1NSwgMjAxLCAxNjUsIDI1NV0sIFsyNTUsIDIwMywgMTY4LCAyNTVdLCBbMjU1LCAyMDUsIDE3MSwgMjU1XSwgWzI1NSwgMjA3LCAxNzQsIDI1NV0sIFsyNTUsIDIwOSwgMTc2LCAyNTVdLCBbMjU1LCAyMTEsIDE3OSwgMjU1XSwgWzI1NSwgMjEzLCAxODIsIDI1NV0sIFsyNTUsIDIxNSwgMTg1LCAyNTVdLCBbMjU1LCAyMTYsIDE4OCwgMjU1XSwgWzI1NSwgMjE4LCAxOTEsIDI1NV0sIFsyNTUsIDIyMCwgMTk0LCAyNTVdLCBbMjU1LCAyMjIsIDE5NywgMjU1XSwgWzI1NSwgMjI0LCAyMDAsIDI1NV0sIFsyNTUsIDIyNiwgMjAzLCAyNTVdLCBbMjU1LCAyMjgsIDIwNiwgMjU1XSwgWzI1NSwgMjI5LCAyMTAsIDI1NV0sIFsyNTUsIDIzMSwgMjEzLCAyNTVdLCBbMjU1LCAyMzMsIDIxNiwgMjU1XSwgWzI1NSwgMjM1LCAyMTksIDI1NV0sIFsyNTUsIDIzNywgMjIzLCAyNTVdLCBbMjU1LCAyMzksIDIyNiwgMjU1XSwgWzI1NSwgMjQwLCAyMjksIDI1NV0sIFsyNTUsIDI0MiwgMjMyLCAyNTVdLCBbMjU1LCAyNDQsIDIzNiwgMjU1XSwgWzI1NSwgMjQ2LCAyMzksIDI1NV0sIFsyNTUsIDI0OCwgMjQyLCAyNTVdLCBbMjU1LCAyNTAsIDI0NSwgMjU1XSwgWzI1NSwgMjUxLCAyNDksIDI1NV0sIFsyNTUsIDI1MywgMjUyLCAyNTVdLCBbMjU1LCAyNTUsIDI1NSwgMjU1XV1cbiAgfSxcbiAgcGV0MjBTdGVwOiB7XG4gICAgbmFtZTogJ1BFVCAyMCBTdGVwJyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBjb2xvcnM6IFtbMCwgMCwgMCwgMjU1XSwgWzAsIDAsIDAsIDI1NV0sIFswLCAwLCAwLCAyNTVdLCBbMCwgMCwgMCwgMjU1XSwgWzAsIDAsIDAsIDI1NV0sIFswLCAwLCAwLCAyNTVdLCBbMCwgMCwgMCwgMjU1XSwgWzAsIDAsIDAsIDI1NV0sIFswLCAwLCAwLCAyNTVdLCBbMCwgMCwgMCwgMjU1XSwgWzAsIDAsIDAsIDI1NV0sIFswLCAwLCAwLCAyNTVdLCBbMCwgMCwgMCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzk2LCAwLCA4MCwgMjU1XSwgWzQ4LCA0OCwgODAsIDI1NV0sIFs0OCwgNDgsIDgwLCAyNTVdLCBbNDgsIDQ4LCA4MCwgMjU1XSwgWzQ4LCA0OCwgODAsIDI1NV0sIFs0OCwgNDgsIDgwLCAyNTVdLCBbNDgsIDQ4LCA4MCwgMjU1XSwgWzQ4LCA0OCwgODAsIDI1NV0sIFs0OCwgNDgsIDgwLCAyNTVdLCBbNDgsIDQ4LCA4MCwgMjU1XSwgWzQ4LCA0OCwgODAsIDI1NV0sIFs0OCwgNDgsIDgwLCAyNTVdLCBbNDgsIDQ4LCA4MCwgMjU1XSwgWzQ4LCA0OCwgODAsIDI1NV0sIFs0OCwgNDgsIDExMiwgMjU1XSwgWzQ4LCA0OCwgMTEyLCAyNTVdLCBbNDgsIDQ4LCAxMTIsIDI1NV0sIFs0OCwgNDgsIDExMiwgMjU1XSwgWzQ4LCA0OCwgMTEyLCAyNTVdLCBbNDgsIDQ4LCAxMTIsIDI1NV0sIFs0OCwgNDgsIDExMiwgMjU1XSwgWzQ4LCA0OCwgMTEyLCAyNTVdLCBbNDgsIDQ4LCAxMTIsIDI1NV0sIFs0OCwgNDgsIDExMiwgMjU1XSwgWzQ4LCA0OCwgMTEyLCAyNTVdLCBbNDgsIDQ4LCAxMTIsIDI1NV0sIFs4MCwgODAsIDEyOCwgMjU1XSwgWzgwLCA4MCwgMTI4LCAyNTVdLCBbODAsIDgwLCAxMjgsIDI1NV0sIFs4MCwgODAsIDEyOCwgMjU1XSwgWzgwLCA4MCwgMTI4LCAyNTVdLCBbODAsIDgwLCAxMjgsIDI1NV0sIFs4MCwgODAsIDEyOCwgMjU1XSwgWzgwLCA4MCwgMTI4LCAyNTVdLCBbODAsIDgwLCAxMjgsIDI1NV0sIFs4MCwgODAsIDEyOCwgMjU1XSwgWzgwLCA4MCwgMTI4LCAyNTVdLCBbODAsIDgwLCAxMjgsIDI1NV0sIFs4MCwgODAsIDEyOCwgMjU1XSwgWzk2LCA5NiwgMTc2LCAyNTVdLCBbOTYsIDk2LCAxNzYsIDI1NV0sIFs5NiwgOTYsIDE3NiwgMjU1XSwgWzk2LCA5NiwgMTc2LCAyNTVdLCBbOTYsIDk2LCAxNzYsIDI1NV0sIFs5NiwgOTYsIDE3NiwgMjU1XSwgWzk2LCA5NiwgMTc2LCAyNTVdLCBbOTYsIDk2LCAxNzYsIDI1NV0sIFs5NiwgOTYsIDE3NiwgMjU1XSwgWzk2LCA5NiwgMTc2LCAyNTVdLCBbOTYsIDk2LCAxNzYsIDI1NV0sIFs5NiwgOTYsIDE3NiwgMjU1XSwgWzk2LCA5NiwgMTc2LCAyNTVdLCBbMTEyLCAxMTIsIDE5MiwgMjU1XSwgWzExMiwgMTEyLCAxOTIsIDI1NV0sIFsxMTIsIDExMiwgMTkyLCAyNTVdLCBbMTEyLCAxMTIsIDE5MiwgMjU1XSwgWzExMiwgMTEyLCAxOTIsIDI1NV0sIFsxMTIsIDExMiwgMTkyLCAyNTVdLCBbMTEyLCAxMTIsIDE5MiwgMjU1XSwgWzExMiwgMTEyLCAxOTIsIDI1NV0sIFsxMTIsIDExMiwgMTkyLCAyNTVdLCBbMTEyLCAxMTIsIDE5MiwgMjU1XSwgWzExMiwgMTEyLCAxOTIsIDI1NV0sIFsxMTIsIDExMiwgMTkyLCAyNTVdLCBbMTEyLCAxMTIsIDE5MiwgMjU1XSwgWzEyOCwgMTI4LCAyMjQsIDI1NV0sIFsxMjgsIDEyOCwgMjI0LCAyNTVdLCBbMTI4LCAxMjgsIDIyNCwgMjU1XSwgWzEyOCwgMTI4LCAyMjQsIDI1NV0sIFsxMjgsIDEyOCwgMjI0LCAyNTVdLCBbMTI4LCAxMjgsIDIyNCwgMjU1XSwgWzEyOCwgMTI4LCAyMjQsIDI1NV0sIFsxMjgsIDEyOCwgMjI0LCAyNTVdLCBbMTI4LCAxMjgsIDIyNCwgMjU1XSwgWzEyOCwgMTI4LCAyMjQsIDI1NV0sIFsxMjgsIDEyOCwgMjI0LCAyNTVdLCBbMTI4LCAxMjgsIDIyNCwgMjU1XSwgWzQ4LCA5NiwgNDgsIDI1NV0sIFs0OCwgOTYsIDQ4LCAyNTVdLCBbNDgsIDk2LCA0OCwgMjU1XSwgWzQ4LCA5NiwgNDgsIDI1NV0sIFs0OCwgOTYsIDQ4LCAyNTVdLCBbNDgsIDk2LCA0OCwgMjU1XSwgWzQ4LCA5NiwgNDgsIDI1NV0sIFs0OCwgOTYsIDQ4LCAyNTVdLCBbNDgsIDk2LCA0OCwgMjU1XSwgWzQ4LCA5NiwgNDgsIDI1NV0sIFs0OCwgOTYsIDQ4LCAyNTVdLCBbNDgsIDk2LCA0OCwgMjU1XSwgWzQ4LCA5NiwgNDgsIDI1NV0sIFs0OCwgMTQ0LCA0OCwgMjU1XSwgWzQ4LCAxNDQsIDQ4LCAyNTVdLCBbNDgsIDE0NCwgNDgsIDI1NV0sIFs0OCwgMTQ0LCA0OCwgMjU1XSwgWzQ4LCAxNDQsIDQ4LCAyNTVdLCBbNDgsIDE0NCwgNDgsIDI1NV0sIFs0OCwgMTQ0LCA0OCwgMjU1XSwgWzQ4LCAxNDQsIDQ4LCAyNTVdLCBbNDgsIDE0NCwgNDgsIDI1NV0sIFs0OCwgMTQ0LCA0OCwgMjU1XSwgWzQ4LCAxNDQsIDQ4LCAyNTVdLCBbNDgsIDE0NCwgNDgsIDI1NV0sIFs0OCwgMTQ0LCA0OCwgMjU1XSwgWzgwLCAxOTIsIDgwLCAyNTVdLCBbODAsIDE5MiwgODAsIDI1NV0sIFs4MCwgMTkyLCA4MCwgMjU1XSwgWzgwLCAxOTIsIDgwLCAyNTVdLCBbODAsIDE5MiwgODAsIDI1NV0sIFs4MCwgMTkyLCA4MCwgMjU1XSwgWzgwLCAxOTIsIDgwLCAyNTVdLCBbODAsIDE5MiwgODAsIDI1NV0sIFs4MCwgMTkyLCA4MCwgMjU1XSwgWzgwLCAxOTIsIDgwLCAyNTVdLCBbODAsIDE5MiwgODAsIDI1NV0sIFs4MCwgMTkyLCA4MCwgMjU1XSwgWzgwLCAxOTIsIDgwLCAyNTVdLCBbNjQsIDIyNCwgNjQsIDI1NV0sIFs2NCwgMjI0LCA2NCwgMjU1XSwgWzY0LCAyMjQsIDY0LCAyNTVdLCBbNjQsIDIyNCwgNjQsIDI1NV0sIFs2NCwgMjI0LCA2NCwgMjU1XSwgWzY0LCAyMjQsIDY0LCAyNTVdLCBbNjQsIDIyNCwgNjQsIDI1NV0sIFs2NCwgMjI0LCA2NCwgMjU1XSwgWzY0LCAyMjQsIDY0LCAyNTVdLCBbNjQsIDIyNCwgNjQsIDI1NV0sIFs2NCwgMjI0LCA2NCwgMjU1XSwgWzY0LCAyMjQsIDY0LCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjI0LCAyMjQsIDgwLCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAyMDgsIDk2LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNzYsIDY0LCAyNTVdLCBbMjA4LCAxNDQsIDAsIDI1NV0sIFsyMDgsIDE0NCwgMCwgMjU1XSwgWzIwOCwgMTQ0LCAwLCAyNTVdLCBbMjA4LCAxNDQsIDAsIDI1NV0sIFsyMDgsIDE0NCwgMCwgMjU1XSwgWzIwOCwgMTQ0LCAwLCAyNTVdLCBbMjA4LCAxNDQsIDAsIDI1NV0sIFsyMDgsIDE0NCwgMCwgMjU1XSwgWzIwOCwgMTQ0LCAwLCAyNTVdLCBbMjA4LCAxNDQsIDAsIDI1NV0sIFsyMDgsIDE0NCwgMCwgMjU1XSwgWzIwOCwgMTQ0LCAwLCAyNTVdLCBbMTkyLCA5NiwgMCwgMjU1XSwgWzE5MiwgOTYsIDAsIDI1NV0sIFsxOTIsIDk2LCAwLCAyNTVdLCBbMTkyLCA5NiwgMCwgMjU1XSwgWzE5MiwgOTYsIDAsIDI1NV0sIFsxOTIsIDk2LCAwLCAyNTVdLCBbMTkyLCA5NiwgMCwgMjU1XSwgWzE5MiwgOTYsIDAsIDI1NV0sIFsxOTIsIDk2LCAwLCAyNTVdLCBbMTkyLCA5NiwgMCwgMjU1XSwgWzE5MiwgOTYsIDAsIDI1NV0sIFsxOTIsIDk2LCAwLCAyNTVdLCBbMTkyLCA5NiwgMCwgMjU1XSwgWzE3NiwgNDgsIDAsIDI1NV0sIFsxNzYsIDQ4LCAwLCAyNTVdLCBbMTc2LCA0OCwgMCwgMjU1XSwgWzE3NiwgNDgsIDAsIDI1NV0sIFsxNzYsIDQ4LCAwLCAyNTVdLCBbMTc2LCA0OCwgMCwgMjU1XSwgWzE3NiwgNDgsIDAsIDI1NV0sIFsxNzYsIDQ4LCAwLCAyNTVdLCBbMTc2LCA0OCwgMCwgMjU1XSwgWzE3NiwgNDgsIDAsIDI1NV0sIFsxNzYsIDQ4LCAwLCAyNTVdLCBbMTc2LCA0OCwgMCwgMjU1XSwgWzE3NiwgNDgsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDAsIDAsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdLCBbMjU1LCAyNTUsIDI1NSwgMjU1XSwgWzI1NSwgMjU1LCAyNTUsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdLCBbMjU1LCAyNTUsIDI1NSwgMjU1XSwgWzI1NSwgMjU1LCAyNTUsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdLCBbMjU1LCAyNTUsIDI1NSwgMjU1XSwgWzI1NSwgMjU1LCAyNTUsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdLCBbMjU1LCAyNTUsIDI1NSwgMjU1XSwgWzI1NSwgMjU1LCAyNTUsIDI1NV0sIFsyNTUsIDI1NSwgMjU1LCAyNTVdXVxuICB9LFxuICBncmF5OiB7XG4gICAgbmFtZTogJ0dyYXknLFxuICAgIG51bUNvbG9yczogMjU2LFxuICAgIGdhbW1hOiAxLFxuICAgIHNlZ21lbnRlZERhdGE6IHtcbiAgICAgIHJlZDogW1swLCAwLCAwXSwgWzEsIDEsIDFdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDAsIDBdLCBbMSwgMSwgMV1dLFxuICAgICAgYmx1ZTogW1swLCAwLCAwXSwgWzEsIDEsIDFdXVxuICAgIH1cbiAgfSxcbiAgamV0OiB7XG4gICAgbmFtZTogJ0pldCcsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDAsIDBdLCBbMC4zNSwgMCwgMF0sIFswLjY2LCAxLCAxXSwgWzAuODksIDEsIDFdLCBbMSwgMC41LCAwLjVdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDAsIDBdLCBbMC4xMjUsIDAsIDBdLCBbMC4zNzUsIDEsIDFdLCBbMC42NCwgMSwgMV0sIFswLjkxLCAwLCAwXSwgWzEsIDAsIDBdXSxcbiAgICAgIGJsdWU6IFtbMCwgMC41LCAwLjVdLCBbMC4xMSwgMSwgMV0sIFswLjM0LCAxLCAxXSwgWzAuNjUsIDAsIDBdLCBbMSwgMCwgMF1dXG4gICAgfVxuICB9LFxuICBoc3Y6IHtcbiAgICBuYW1lOiAnSFNWJyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBnYW1tYTogMSxcbiAgICBzZWdtZW50ZWREYXRhOiB7XG4gICAgICByZWQ6IFtbMCwgMSwgMV0sIFswLjE1ODczMCwgMSwgMV0sIFswLjE3NDYwMywgMC45Njg3NTAsIDAuOTY4NzUwXSwgWzAuMzMzMzMzLCAwLjAzMTI1MCwgMC4wMzEyNTBdLCBbMC4zNDkyMDYsIDAsIDBdLCBbMC42NjY2NjcsIDAsIDBdLCBbMC42ODI1NDAsIDAuMDMxMjUwLCAwLjAzMTI1MF0sIFswLjg0MTI3MCwgMC45Njg3NTAsIDAuOTY4NzUwXSwgWzAuODU3MTQzLCAxLCAxXSwgWzEsIDEsIDFdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDAsIDBdLCBbMC4xNTg3MzAsIDAuOTM3NTAwLCAwLjkzNzUwMF0sIFswLjE3NDYwMywgMSwgMV0sIFswLjUwNzkzNywgMSwgMV0sIFswLjY2NjY2NywgMC4wNjI1MDAsIDAuMDYyNTAwXSwgWzAuNjgyNTQwLCAwLCAwXSwgWzEsIDAsIDBdXSxcbiAgICAgIGJsdWU6IFtbMCwgMCwgMF0sIFswLjMzMzMzMywgMCwgMF0sIFswLjM0OTIwNiwgMC4wNjI1MDAsIDAuMDYyNTAwXSwgWzAuNTA3OTM3LCAxLCAxXSwgWzAuODQxMjcwLCAxLCAxXSwgWzAuODU3MTQzLCAwLjkzNzUwMCwgMC45Mzc1MDBdLCBbMSwgMC4wOTM3NSwgMC4wOTM3NV1dXG4gICAgfVxuICB9LFxuICBob3Q6IHtcbiAgICBuYW1lOiAnSG90JyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBnYW1tYTogMSxcbiAgICBzZWdtZW50ZWREYXRhOiB7XG4gICAgICByZWQ6IFtbMCwgMC4wNDE2LCAwLjA0MTZdLCBbMC4zNjUwNzksIDEsIDFdLCBbMSwgMSwgMV1dLFxuICAgICAgZ3JlZW46IFtbMCwgMCwgMF0sIFswLjM2NTA3OSwgMCwgMF0sIFswLjc0NjAzMiwgMSwgMV0sIFsxLCAxLCAxXV0sXG4gICAgICBibHVlOiBbWzAsIDAsIDBdLCBbMC43NDYwMzIsIDAsIDBdLCBbMSwgMSwgMV1dXG4gICAgfVxuICB9LFxuICBjb29sOiB7XG4gICAgbmFtZTogJ0Nvb2wnLFxuICAgIG51bUNvbG9yczogMjU2LFxuICAgIGdhbW1hOiAxLFxuICAgIHNlZ21lbnRlZERhdGE6IHtcbiAgICAgIHJlZDogW1swLCAwLCAwXSwgWzEsIDEsIDFdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDEsIDFdLCBbMSwgMCwgMF1dLFxuICAgICAgYmx1ZTogW1swLCAxLCAxXSwgWzEsIDEsIDFdXVxuICAgIH1cbiAgfSxcbiAgc3ByaW5nOiB7XG4gICAgbmFtZTogJ1NwcmluZycsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDEsIDFdLCBbMSwgMSwgMV1dLFxuICAgICAgZ3JlZW46IFtbMCwgMCwgMF0sIFsxLCAxLCAxXV0sXG4gICAgICBibHVlOiBbWzAsIDEsIDFdLCBbMSwgMCwgMF1dXG4gICAgfVxuICB9LFxuICBzdW1tZXI6IHtcbiAgICBuYW1lOiAnU3VtbWVyJyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBnYW1tYTogMSxcbiAgICBzZWdtZW50ZWREYXRhOiB7XG4gICAgICByZWQ6IFtbMCwgMCwgMF0sIFsxLCAxLCAxXV0sXG4gICAgICBncmVlbjogW1swLCAwLjUsIDAuNV0sIFsxLCAxLCAxXV0sXG4gICAgICBibHVlOiBbWzAsIDAuNCwgMC40XSwgWzEsIDAuNCwgMC40XV1cbiAgICB9XG4gIH0sXG4gIGF1dHVtbjoge1xuICAgIG5hbWU6ICdBdXR1bW4nLFxuICAgIG51bUNvbG9yczogMjU2LFxuICAgIGdhbW1hOiAxLFxuICAgIHNlZ21lbnRlZERhdGE6IHtcbiAgICAgIHJlZDogW1swLCAxLCAxXSwgWzEsIDEsIDFdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDAsIDBdLCBbMSwgMSwgMV1dLFxuICAgICAgYmx1ZTogW1swLCAwLCAwXSwgWzEsIDAsIDBdXVxuICAgIH1cbiAgfSxcbiAgd2ludGVyOiB7XG4gICAgbmFtZTogJ1dpbnRlcicsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDAsIDBdLCBbMSwgMCwgMF1dLFxuICAgICAgZ3JlZW46IFtbMCwgMCwgMF0sIFsxLCAxLCAxXV0sXG4gICAgICBibHVlOiBbWzAsIDEsIDFdLCBbMSwgMC41LCAwLjVdXVxuICAgIH1cbiAgfSxcbiAgYm9uZToge1xuICAgIG5hbWU6ICdCb25lJyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBnYW1tYTogMSxcbiAgICBzZWdtZW50ZWREYXRhOiB7XG4gICAgICByZWQ6IFtbMCwgMCwgMF0sIFswLjc0NjAzMiwgMC42NTI3NzgsIDAuNjUyNzc4XSwgWzEsIDEsIDFdXSxcbiAgICAgIGdyZWVuOiBbWzAsIDAsIDBdLCBbMC4zNjUwNzksIDAuMzE5NDQ0LCAwLjMxOTQ0NF0sIFswLjc0NjAzMiwgMC43Nzc3NzgsIDAuNzc3Nzc4XSwgWzEsIDEsIDFdXSxcbiAgICAgIGJsdWU6IFtbMCwgMCwgMF0sIFswLjM2NTA3OSwgMC40NDQ0NDQsIDAuNDQ0NDQ0XSwgWzEsIDEsIDFdXVxuICAgIH1cbiAgfSxcbiAgY29wcGVyOiB7XG4gICAgbmFtZTogJ0NvcHBlcicsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDAsIDBdLCBbMC44MDk1MjQsIDEsIDFdLCBbMSwgMSwgMV1dLFxuICAgICAgZ3JlZW46IFtbMCwgMCwgMF0sIFsxLCAwLjc4MTIsIDAuNzgxMl1dLFxuICAgICAgYmx1ZTogW1swLCAwLCAwXSwgWzEsIDAuNDk3NSwgMC40OTc1XV1cbiAgICB9XG4gIH0sXG4gIHNwZWN0cmFsOiB7XG4gICAgbmFtZTogJ1NwZWN0cmFsJyxcbiAgICBudW1Db2xvcnM6IDI1NixcbiAgICBnYW1tYTogMSxcbiAgICBzZWdtZW50ZWREYXRhOiB7XG4gICAgICByZWQ6IFtbMCwgMCwgMF0sIFswLjA1LCAwLjQ2NjcsIDAuNDY2N10sIFswLjEwLCAwLjUzMzMsIDAuNTMzM10sIFswLjE1LCAwLCAwXSwgWzAuMjAsIDAsIDBdLCBbMC4yNSwgMCwgMF0sIFswLjMwLCAwLCAwXSwgWzAuMzUsIDAsIDBdLCBbMC40MCwgMCwgMF0sIFswLjQ1LCAwLCAwXSwgWzAuNTAsIDAsIDBdLCBbMC41NSwgMCwgMF0sIFswLjYwLCAwLCAwXSwgWzAuNjUsIDAuNzMzMywgMC43MzMzXSwgWzAuNzAsIDAuOTMzMywgMC45MzMzXSwgWzAuNzUsIDEsIDFdLCBbMC44MCwgMSwgMV0sIFswLjg1LCAxLCAxXSwgWzAuOTAsIDAuODY2NywgMC44NjY3XSwgWzAuOTUsIDAuODAsIDAuODBdLCBbMSwgMC44MCwgMC44MF1dLFxuICAgICAgZ3JlZW46IFtbMCwgMCwgMF0sIFswLjA1LCAwLCAwXSwgWzAuMTAsIDAsIDBdLCBbMC4xNSwgMCwgMF0sIFswLjIwLCAwLCAwXSwgWzAuMjUsIDAuNDY2NywgMC40NjY3XSwgWzAuMzAsIDAuNjAwMCwgMC42MDAwXSwgWzAuMzUsIDAuNjY2NywgMC42NjY3XSwgWzAuNDAsIDAuNjY2NywgMC42NjY3XSwgWzAuNDUsIDAuNjAwMCwgMC42MDAwXSwgWzAuNTAsIDAuNzMzMywgMC43MzMzXSwgWzAuNTUsIDAuODY2NywgMC44NjY3XSwgWzAuNjAsIDEsIDFdLCBbMC42NSwgMSwgMV0sIFswLjcwLCAwLjkzMzMsIDAuOTMzM10sIFswLjc1LCAwLjgwMDAsIDAuODAwMF0sIFswLjgwLCAwLjYwMDAsIDAuNjAwMF0sIFswLjg1LCAwLCAwXSwgWzAuOTAsIDAsIDBdLCBbMC45NSwgMCwgMF0sIFsxLCAwLjgwLCAwLjgwXV0sXG4gICAgICBibHVlOiBbWzAsIDAsIDBdLCBbMC4wNSwgMC41MzMzLCAwLjUzMzNdLCBbMC4xMCwgMC42MDAwLCAwLjYwMDBdLCBbMC4xNSwgMC42NjY3LCAwLjY2NjddLCBbMC4yMCwgMC44NjY3LCAwLjg2NjddLCBbMC4yNSwgMC44NjY3LCAwLjg2NjddLCBbMC4zMCwgMC44NjY3LCAwLjg2NjddLCBbMC4zNSwgMC42NjY3LCAwLjY2NjddLCBbMC40MCwgMC41MzMzLCAwLjUzMzNdLCBbMC40NSwgMCwgMF0sIFswLjUsIDAsIDBdLCBbMC41NSwgMCwgMF0sIFswLjYwLCAwLCAwXSwgWzAuNjUsIDAsIDBdLCBbMC43MCwgMCwgMF0sIFswLjc1LCAwLCAwXSwgWzAuODAsIDAsIDBdLCBbMC44NSwgMCwgMF0sIFswLjkwLCAwLCAwXSwgWzAuOTUsIDAsIDBdLCBbMSwgMC44MCwgMC44MF1dXG4gICAgfVxuICB9LFxuICBjb29sd2FybToge1xuICAgIG5hbWU6ICdDb29sV2FybScsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDAuMjI5ODA1NywgMC4yMjk4MDU3XSwgWzAuMDMxMjUsIDAuMjY2MjMzODgsIDAuMjY2MjMzODhdLCBbMC4wNjI1LCAwLjMwMzg2ODkxLCAwLjMwMzg2ODkxXSwgWzAuMDkzNzUsIDAuMzQyODA0NDc4LCAwLjM0MjgwNDQ3OF0sIFswLjEyNSwgMC4zODMwMTMzNCwgMC4zODMwMTMzNF0sIFswLjE1NjI1LCAwLjQyNDM2OTYwOCwgMC40MjQzNjk2MDhdLCBbMC4xODc1LCAwLjQ2NjY2NzA4LCAwLjQ2NjY2NzA4XSwgWzAuMjE4NzUsIDAuNTA5NjM1MjA0LCAwLjUwOTYzNTIwNF0sIFswLjI1LCAwLjU1Mjk1MzE1NiwgMC41NTI5NTMxNTZdLCBbMC4yODEyNSwgMC41OTYyNjIxNjIsIDAuNTk2MjYyMTYyXSwgWzAuMzEyNSwgMC42MzkxNzYyMTEsIDAuNjM5MTc2MjExXSwgWzAuMzQzNzUsIDAuNjgxMjkxMjgxLCAwLjY4MTI5MTI4MV0sIFswLjM3NSwgMC43MjIxOTMyOTQsIDAuNzIyMTkzMjk0XSwgWzAuNDA2MjUsIDAuNzYxNDY0OTQ5LCAwLjc2MTQ2NDk0OV0sIFswLjQzNzUsIDAuNzk4NjkxNjM2LCAwLjc5ODY5MTYzNl0sIFswLjQ2ODc1LCAwLjgzMzQ2NjU1NiwgMC44MzM0NjY1NTZdLCBbMC41LCAwLjg2NTM5NTE5NywgMC44NjUzOTUxOTddLCBbMC41MzEyNSwgMC44OTc3ODcxNzksIDAuODk3Nzg3MTc5XSwgWzAuNTYyNSwgMC45MjQxMjc1OTMsIDAuOTI0MTI3NTkzXSwgWzAuNTkzNzUsIDAuOTQ0NDY4NTE4LCAwLjk0NDQ2ODUxOF0sIFswLjYyNSwgMC45NTg4NTI5NDYsIDAuOTU4ODUyOTQ2XSwgWzAuNjU2MjUsIDAuOTY3MzI4MDMsIDAuOTY3MzI4MDNdLCBbMC42ODc1LCAwLjk2OTk1NDEzNywgMC45Njk5NTQxMzddLCBbMC43MTg3NSwgMC45NjY4MTExNzcsIDAuOTY2ODExMTc3XSwgWzAuNzUsIDAuOTU4MDAzMDY1LCAwLjk1ODAwMzA2NV0sIFswLjc4MTI1LCAwLjk0MzY2MDg2NiwgMC45NDM2NjA4NjZdLCBbMC44MTI1LCAwLjkyMzk0NDkxNywgMC45MjM5NDQ5MTddLCBbMC44NDM3NSwgMC44OTkwNDYxNywgMC44OTkwNDYxN10sIFswLjg3NSwgMC44NjkxODY4NDksIDAuODY5MTg2ODQ5XSwgWzAuOTA2MjUsIDAuODM0NjIwNTQyLCAwLjgzNDYyMDU0Ml0sIFswLjkzNzUsIDAuNzk1NjMxNzQ1LCAwLjc5NTYzMTc0NV0sIFswLjk2ODc1LCAwLjc1MjUzNDkzNCwgMC43NTI1MzQ5MzRdLCBbMSwgMC43MDU2NzMxNTgsIDAuNzA1NjczMTU4XV0sXG4gICAgICBncmVlbjogW1swLCAwLjI5ODcxNzk2NiwgMC4yOTg3MTc5NjZdLCBbMC4wMzEyNSwgMC4zNTMwOTQ4MzgsIDAuMzUzMDk0ODM4XSwgWzAuMDYyNSwgMC40MDY1MzUyOTYsIDAuNDA2NTM1Mjk2XSwgWzAuMDkzNzUsIDAuNDU4NzU3NjE4LCAwLjQ1ODc1NzYxOF0sIFswLjEyNSwgMC41MDk0MTkwNCwgMC41MDk0MTkwNF0sIFswLjE1NjI1LCAwLjU1ODE0ODA5MiwgMC41NTgxNDgwOTJdLCBbMC4xODc1LCAwLjYwNDU2MjU2OCwgMC42MDQ1NjI1NjhdLCBbMC4yMTg3NSwgMC42NDgyODA3NzIsIDAuNjQ4MjgwNzcyXSwgWzAuMjUsIDAuNjg4OTI5MzMyLCAwLjY4ODkyOTMzMl0sIFswLjI4MTI1LCAwLjcyNjE0OTEwNywgMC43MjYxNDkxMDddLCBbMC4zMTI1LCAwLjc1OTU5OTk0NywgMC43NTk1OTk5NDddLCBbMC4zNDM3NSwgMC43ODg5NjQ3MTIsIDAuNzg4OTY0NzEyXSwgWzAuMzc1LCAwLjgxMzk1MjczOSwgMC44MTM5NTI3MzldLCBbMC40MDYyNSwgMC44MzQzMDI4NzksIDAuODM0MzAyODc5XSwgWzAuNDM3NSwgMC44NDk3ODYxNDIsIDAuODQ5Nzg2MTQyXSwgWzAuNDY4NzUsIDAuODYwMjA3OTg0LCAwLjg2MDIwNzk4NF0sIFswLjUsIDAuODY1NDEwMjEsIDAuODY1NDEwMjFdLCBbMC41MzEyNSwgMC44NDg5MzcwNDcsIDAuODQ4OTM3MDQ3XSwgWzAuNTYyNSwgMC44MjczODQ4ODIsIDAuODI3Mzg0ODgyXSwgWzAuNTkzNzUsIDAuODAwOTI3NDQzLCAwLjgwMDkyNzQ0M10sIFswLjYyNSwgMC43Njk3Njc3NTIsIDAuNzY5NzY3NzUyXSwgWzAuNjU2MjUsIDAuNzM0MTMyODA5LCAwLjczNDEzMjgwOV0sIFswLjY4NzUsIDAuNjk0MjY2NjgyLCAwLjY5NDI2NjY4Ml0sIFswLjcxODc1LCAwLjY1MDQyMTE1NiwgMC42NTA0MjExNTZdLCBbMC43NSwgMC42MDI4NDI0MzEsIDAuNjAyODQyNDMxXSwgWzAuNzgxMjUsIDAuNTUxNzUwOTY4LCAwLjU1MTc1MDk2OF0sIFswLjgxMjUsIDAuNDk3MzA4NTYsIDAuNDk3MzA4NTZdLCBbMC44NDM3NSwgMC40Mzk1NTk0NjcsIDAuNDM5NTU5NDY3XSwgWzAuODc1LCAwLjM3ODMxMzA5MiwgMC4zNzgzMTMwOTJdLCBbMC45MDYyNSwgMC4zMTI4NzQ0NDYsIDAuMzEyODc0NDQ2XSwgWzAuOTM3NSwgMC4yNDEyODM3OSwgMC4yNDEyODM3OV0sIFswLjk2ODc1LCAwLjE1NzI0NjA2NywgMC4xNTcyNDYwNjddLCBbMSwgMC4wMTU1NTYxNiwgMC4wMTU1NTYxNl1dLFxuICAgICAgYmx1ZTogW1swLCAwLjc1MzY4MzE1MywgMC43NTM2ODMxNTNdLCBbMC4wMzEyNSwgMC44MDE0NjY3NjMsIDAuODAxNDY2NzYzXSwgWzAuMDYyNSwgMC44NDQ5NTg2NywgMC44NDQ5NTg2N10sIFswLjA5Mzc1LCAwLjg4MzcyNTg5OSwgMC44ODM3MjU4OTldLCBbMC4xMjUsIDAuOTE3Mzg3ODIyLCAwLjkxNzM4NzgyMl0sIFswLjE1NjI1LCAwLjk0NTYxOTU4OCwgMC45NDU2MTk1ODhdLCBbMC4xODc1LCAwLjk2ODE1NDkxMSwgMC45NjgxNTQ5MTFdLCBbMC4yMTg3NSwgMC45ODQ3ODgxNCwgMC45ODQ3ODgxNF0sIFswLjI1LCAwLjk5NTM3NTYwOCwgMC45OTUzNzU2MDhdLCBbMC4yODEyNSwgMC45OTk4MzYyMDMsIDAuOTk5ODM2MjAzXSwgWzAuMzEyNSwgMC45OTgxNTExODUsIDAuOTk4MTUxMTg1XSwgWzAuMzQzNzUsIDAuOTkwMzYzMjI3LCAwLjk5MDM2MzIyN10sIFswLjM3NSwgMC45NzY1NzQ3MDksIDAuOTc2NTc0NzA5XSwgWzAuNDA2MjUsIDAuOTU2OTQ1MjY5LCAwLjk1Njk0NTI2OV0sIFswLjQzNzUsIDAuOTMxNjg4NjQ4LCAwLjkzMTY4ODY0OF0sIFswLjQ2ODc1LCAwLjkwMTA2ODgzOCwgMC45MDEwNjg4MzhdLCBbMC41LCAwLjg2NTM5NTU2MSwgMC44NjUzOTU1NjFdLCBbMC41MzEyNSwgMC44MjA4ODA1NDYsIDAuODIwODgwNTQ2XSwgWzAuNTYyNSwgMC43NzQ1MDg0NzIsIDAuNzc0NTA4NDcyXSwgWzAuNTkzNzUsIDAuNzI2NzM2MTQ2LCAwLjcyNjczNjE0Nl0sIFswLjYyNSwgMC42NzgwMDc5NDUsIDAuNjc4MDA3OTQ1XSwgWzAuNjU2MjUsIDAuNjI4NzUxNzYzLCAwLjYyODc1MTc2M10sIFswLjY4NzUsIDAuNTc5Mzc1NDQ4LCAwLjU3OTM3NTQ0OF0sIFswLjcxODc1LCAwLjUzMDI2Mzc2MiwgMC41MzAyNjM3NjJdLCBbMC43NSwgMC40ODE3NzU5MTQsIDAuNDgxNzc1OTE0XSwgWzAuNzgxMjUsIDAuNDM0MjQzNjg0LCAwLjQzNDI0MzY4NF0sIFswLjgxMjUsIDAuMzg3OTcwMjI1LCAwLjM4Nzk3MDIyNV0sIFswLjg0Mzc1LCAwLjM0MzIyOTU5NiwgMC4zNDMyMjk1OTZdLCBbMC44NzUsIDAuMzAwMjY3MTgyLCAwLjMwMDI2NzE4Ml0sIFswLjkwNjI1LCAwLjI1OTMwMTE5OSwgMC4yNTkzMDExOTldLCBbMC45Mzc1LCAwLjIyMDUyNTYyNywgMC4yMjA1MjU2MjddLCBbMC45Njg3NSwgMC4xODQxMTUxMjMsIDAuMTg0MTE1MTIzXSwgWzEsIDAuMTUwMjMyODEyLCAwLjE1MDIzMjgxMl1dXG4gICAgfVxuICB9LFxuICBibHVlczoge1xuICAgIG5hbWU6ICdCbHVlcycsXG4gICAgbnVtQ29sb3JzOiAyNTYsXG4gICAgZ2FtbWE6IDEsXG4gICAgc2VnbWVudGVkRGF0YToge1xuICAgICAgcmVkOiBbWzAsIDAuOTY4NjI3NDUyODUwMzQxOCwgMC45Njg2Mjc0NTI4NTAzNDE4XSwgWzAuMTI1LCAwLjg3MDU4ODI0MzAwNzY1OTkxLCAwLjg3MDU4ODI0MzAwNzY1OTkxXSwgWzAuMjUsIDAuNzc2NDcwNjAxNTU4Njg1MywgMC43NzY0NzA2MDE1NTg2ODUzXSwgWzAuMzc1LCAwLjYxOTYwNzg2NTgxMDM5NDI5LCAwLjYxOTYwNzg2NTgxMDM5NDI5XSwgWzAuNSwgMC40MTk2MDc4NDc5MjkwMDA4NSwgMC40MTk2MDc4NDc5MjkwMDA4NV0sIFswLjYyNSwgMC4yNTg4MjM1NDM3ODcwMDI1NiwgMC4yNTg4MjM1NDM3ODcwMDI1Nl0sIFswLjc1LCAwLjEyOTQxMTc3MTg5MzUwMTI4LCAwLjEyOTQxMTc3MTg5MzUwMTI4XSwgWzAuODc1LCAwLjAzMTM3MjU1MDg3NDk0ODUwMiwgMC4wMzEzNzI1NTA4NzQ5NDg1MDJdLCBbMSwgMC4wMzEzNzI1NTA4NzQ5NDg1MDIsIDAuMDMxMzcyNTUwODc0OTQ4NTAyXV0sXG4gICAgICBncmVlbjogW1swLCAwLjk4NDMxMzcyNjQyNTE3MDksIDAuOTg0MzEzNzI2NDI1MTcwOV0sIFswLjEyNSwgMC45MjE1Njg2MzIxMjU4NTQ0OSwgMC45MjE1Njg2MzIxMjU4NTQ0OV0sIFswLjI1LCAwLjg1ODgyMzUzNzgyNjUzODA5LCAwLjg1ODgyMzUzNzgyNjUzODA5XSwgWzAuMzc1LCAwLjc5MjE1Njg3NTEzMzUxNDQsIDAuNzkyMTU2ODc1MTMzNTE0NF0sIFswLjUsIDAuNjgyMzUyOTYwMTA5NzEwNjksIDAuNjgyMzUyOTYwMTA5NzEwNjldLCBbMC42MjUsIDAuNTcyNTQ5MDQ1MDg1OTA2OTgsIDAuNTcyNTQ5MDQ1MDg1OTA2OThdLCBbMC43NSwgMC40NDMxMzcyNTgyOTEyNDQ1MSwgMC40NDMxMzcyNTgyOTEyNDQ1MV0sIFswLjg3NSwgMC4zMTc2NDcwNjk2OTI2MTE2OSwgMC4zMTc2NDcwNjk2OTI2MTE2OV0sIFsxLCAwLjE4ODIzNTI5Nzc5OTExMDQxLCAwLjE4ODIzNTI5Nzc5OTExMDQxXV0sXG4gICAgICBibHVlOiBbWzAsIDEsIDFdLCBbMC4xMjUsIDAuOTY4NjI3NDUyODUwMzQxOCwgMC45Njg2Mjc0NTI4NTAzNDE4XSwgWzAuMjUsIDAuOTM3MjU0OTA1NzAwNjgzNTksIDAuOTM3MjU0OTA1NzAwNjgzNTldLCBbMC4zNzUsIDAuODgyMzUyOTQ4MTg4NzgxNzQsIDAuODgyMzUyOTQ4MTg4NzgxNzRdLCBbMC41LCAwLjgzOTIxNTY5NTg1ODAwMTcxLCAwLjgzOTIxNTY5NTg1ODAwMTcxXSwgWzAuNjI1LCAwLjc3NjQ3MDYwMTU1ODY4NTMsIDAuNzc2NDcwNjAxNTU4Njg1M10sIFswLjc1LCAwLjcwOTgwMzkzODg2NTY2MTYyLCAwLjcwOTgwMzkzODg2NTY2MTYyXSwgWzAuODc1LCAwLjYxMTc2NDcyOTAyMjk3OTc0LCAwLjYxMTc2NDcyOTAyMjk3OTc0XSwgWzEsIDAuNDE5NjA3ODQ3OTI5MDAwODUsIDAuNDE5NjA3ODQ3OTI5MDAwODVdXVxuICAgIH1cbiAgfVxufTtcbi8qKlxuICogIEdlbmVyYXRlIGxpbmVhcmx5IHNwYWNlZCB2ZWN0b3JzXG4qICBodHRwOi8vY2Vucy5pb2MuZWUvbG9jYWwvbWFuL21hdGxhYi90ZWNoZG9jL3JlZi9saW5zcGFjZS5odG1sXG4gKiBAcGFyYW0ge051bWJlcn0gYSBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGZpcnN0IHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IGIgQSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBzZWNvbmQgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGxpbmVhciBzcGFjZWQgdmVjdG9ycyB0byBnZW5lcmF0ZVxuICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBvZiBwb2ludHMgcmVwcmVzZW50aW5nIGxpbmVhciBzcGFjZWQgdmVjdG9ycy5cbiAqIEBtZW1iZXJvZiBDb2xvcnNcbiAqL1xuXG5mdW5jdGlvbiBsaW5zcGFjZShhLCBiLCBuKSB7XG4gIG4gPSBuID09PSBudWxsID8gMTAwIDogbjtcbiAgdmFyIGluY3JlbWVudCA9IChiIC0gYSkgLyAobiAtIDEpO1xuICB2YXIgdmVjdG9yID0gW107XG5cbiAgd2hpbGUgKG4tLSA+IDApIHtcbiAgICB2ZWN0b3IucHVzaChhKTtcbiAgICBhICs9IGluY3JlbWVudDtcbiAgfSAvLyBNYWtlIHN1cmUgdGhlIGxhc3QgaXRlbSB3aWxsIGFsd2F5cyBiZSBcImJcIiBiZWNhdXNlIG1vc3Qgb2YgdGhlXG4gIC8vIFRpbWUgd2UnbGwgZ2V0IG51bWJlcnMgbGlrZSAxLjAwMDAwMDAwMDAwMDAwMDIgaW5zdGVhZCBvZiAxLlxuXG5cbiAgdmVjdG9yW3ZlY3Rvci5sZW5ndGggLSAxXSA9IGI7XG4gIHJldHVybiB2ZWN0b3I7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIFwicmFuay9pbmRleFwiIG9mIHRoZSBlbGVtZW50IGluIGEgc29ydGVkIGFycmF5IGlmIGZvdW5kIG9yIHRoZSBoaWdoZXN0IGluZGV4IGlmIG5vdC4gVXNlcyAoYmluYXJ5IHNlYXJjaClcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IEEgc29ydGVkIGFycmF5IHRvIHNlYXJjaCBpblxuICogQHBhcmFtIHthbnl9IGVsZW0gdGhlIGVsZW1lbnQgaW4gdGhlIGFycmF5IHRvIHNlYXJjaCBmb3JcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSByYW5rL2luZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoZSBnaXZlbiBhcnJheVxuICogQG1lbWJlcm9mIENvbG9yc1xuICovXG5cblxuZnVuY3Rpb24gZ2V0UmFuayhhcnJheSwgZWxlbSkge1xuICB2YXIgbGVmdCA9IDA7XG4gIHZhciByaWdodCA9IGFycmF5Lmxlbmd0aCAtIDE7XG5cbiAgd2hpbGUgKGxlZnQgPD0gcmlnaHQpIHtcbiAgICB2YXIgbWlkID0gbGVmdCArIE1hdGguZmxvb3IoKHJpZ2h0IC0gbGVmdCkgLyAyKTtcbiAgICB2YXIgbWlkRWxlbSA9IGFycmF5W21pZF07XG5cbiAgICBpZiAobWlkRWxlbSA9PT0gZWxlbSkge1xuICAgICAgcmV0dXJuIG1pZDtcbiAgICB9IGVsc2UgaWYgKGVsZW0gPCBtaWRFbGVtKSB7XG4gICAgICByaWdodCA9IG1pZCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlZnQgPSBtaWQgKyAxO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBsZWZ0O1xufVxuLyoqXG4gKiBGaW5kIHRoZSBpbmRpY2VzIGludG8gYSBzb3J0ZWQgYXJyYXkgYSBzdWNoIHRoYXQsIGlmIHRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnRzXG4gKiBJbiB2IHdlcmUgaW5zZXJ0ZWQgYmVmb3JlIHRoZSBpbmRpY2VzLCB0aGUgb3JkZXIgb2YgYSB3b3VsZCBiZSBwcmVzZXJ2ZWQuXG4gKiAgaHR0cDovL2xhZ3JhbmdlLnVuaXYtbHlvbjEuZnIvZG9jcy9udW1weS8xLjExLjAvcmVmZXJlbmNlL2dlbmVyYXRlZC9udW1weS5zZWFyY2hzb3J0ZWQuaHRtbFxuICogQHBhcmFtIHtBcnJheX0gaW5wdXRBcnJheSBUaGUgYXJyYXkgd2hlcmUgdGhlIHZhbHVlcyB3aWxsIGJlIGluc2VydGVkXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgQW4gYXJyYXkgb2YgdGhlIHZhbHVlcyB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBpbnB1dEFycmF5XG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBpbmRpY2VzIHdoZXJlIGVsZW1lbnRzIHNob3VsZCBiZSBpbnNlcnRlZCB0byBtYWludGFpbiBvcmRlci5cbiAqIEBtZW1iZXJvZiBDb2xvcnNcbiAqL1xuXG5cbmZ1bmN0aW9uIHNlYXJjaFNvcnRlZChpbnB1dEFycmF5LCB2YWx1ZXMpIHtcbiAgdmFyIGk7XG4gIHZhciBpbmRleGVzID0gW107XG4gIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICBpbnB1dEFycmF5LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYSAtIGI7XG4gIH0pO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGluZGV4ZXNbaV0gPSBnZXRSYW5rKGlucHV0QXJyYXksIHZhbHVlc1tpXSk7XG4gIH1cblxuICByZXR1cm4gaW5kZXhlcztcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiAqTiogLWVsZW1lbnQgMS1kIGxvb2t1cCB0YWJsZVxuICogQHBhcmFtIHtOdW1iZXJ9IE4gVGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgcmVzdWx0IGxvb2t1cCB0YWJsZVxuICogQHBhcmFtIHtBcnJheX0gZGF0YSByZXByZXNlbnRlZCBieSBhIGxpc3Qgb2YgeCx5MCx5MSBtYXBwaW5nIGNvcnJlc3BvbmRlbmNlcy4gRWFjaCBlbGVtZW50IGluIHRoaXNcbiAqIExpc3QgcmVwcmVzZW50cyBob3cgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgKGluY2x1c2l2ZSkgcmVwcmVzZW50ZWQgYnkgeCBpcyBtYXBwZWQgdG9cbiAqIEEgY29ycmVzcG9uZGluZyB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgKGluY2x1c2l2ZSkuIFRoZSB0d28gdmFsdWVzIG9mIHkgYXJlIHRvIGFsbG93IGZvclxuICogRGlzY29udGludW91cyBtYXBwaW5nIGZ1bmN0aW9ucyAoc2F5IGFzIG1pZ2h0IGJlIGZvdW5kIGluIGEgc2F3dG9vdGgpIHdoZXJlIHkwIHJlcHJlc2VudHNcbiAqIFRoZSB2YWx1ZSBvZiB5IGZvciB2YWx1ZXMgb2YgeCA8PSB0byB0aGF0IGdpdmVuLCBhbmQgeTEgaXMgdGhlIHZhbHVlIHRvIGJlIHVzZWQgZm9yIHggPlxuICogVGhhbiB0aGF0IGdpdmVuKS4gVGhlIGxpc3QgbXVzdCBzdGFydCB3aXRoIHg9MCwgZW5kIHdpdGggeD0xLCBhbmQgYWxsIHZhbHVlcyBvZiB4IG11c3QgYmVcbiAqIEluIGluY3JlYXNpbmcgb3JkZXIuIFZhbHVlcyBiZXR3ZWVuIHRoZSBnaXZlbiBtYXBwaW5nIHBvaW50cyBhcmUgZGV0ZXJtaW5lZCBieSBzaW1wbGUgbGluZWFyXG4gKiBJbnRlcnBvbGF0aW9uLlxuICogQHBhcmFtIHthbnl9IGdhbW1hIHZhbHVlIGRlbm90ZXMgYSBcImdhbW1hIGN1cnZlXCIgdmFsdWUgd2hpY2ggYWRqdXN0cyB0aGUgYnJpZ2h0bmVzc1xuICogYXQgdGhlIGJvdHRvbSBhbmQgdG9wIG9mIHRoZSBtYXAuXG4gKiBAcmV0dXJucyB7YW55W119IGFuIGFycmF5IFwicmVzdWx0XCIgd2hlcmUgcmVzdWx0W3gqKE4tMSldIGdpdmVzIHRoZSBjbG9zZXN0IHZhbHVlIGZvclxuICogVmFsdWVzIG9mIHggYmV0d2VlbiAwIGFuZCAxLlxuICogQG1lbWJlcm9mIENvbG9yc1xuICovXG5cblxuZnVuY3Rpb24gbWFrZU1hcHBpbmdBcnJheShOLCBkYXRhLCBnYW1tYSkge1xuICB2YXIgaTtcbiAgdmFyIHggPSBbXTtcbiAgdmFyIHkwID0gW107XG4gIHZhciB5MSA9IFtdO1xuICB2YXIgbHV0ID0gW107XG4gIGdhbW1hID0gZ2FtbWEgPT09IG51bGwgPyAxIDogZ2FtbWE7XG5cbiAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZWxlbWVudCA9IGRhdGFbaV07XG4gICAgeC5wdXNoKChOIC0gMSkgKiBlbGVtZW50WzBdKTtcbiAgICB5MC5wdXNoKGVsZW1lbnRbMV0pO1xuICAgIHkxLnB1c2goZWxlbWVudFsxXSk7XG4gIH1cblxuICB2YXIgeExpblNwYWNlID0gbGluc3BhY2UoMCwgMSwgTik7XG5cbiAgZm9yIChpID0gMDsgaSA8IE47IGkrKykge1xuICAgIHhMaW5TcGFjZVtpXSA9IChOIC0gMSkgKiBNYXRoLnBvdyh4TGluU3BhY2VbaV0sIGdhbW1hKTtcbiAgfVxuXG4gIHZhciB4TGluU3BhY2VJbmRleGVzID0gc2VhcmNoU29ydGVkKHgsIHhMaW5TcGFjZSk7XG5cbiAgZm9yIChpID0gMTsgaSA8IE4gLSAxOyBpKyspIHtcbiAgICB2YXIgaW5kZXggPSB4TGluU3BhY2VJbmRleGVzW2ldO1xuICAgIHZhciBjb2xvclBlcmNlbnQgPSAoeExpblNwYWNlW2ldIC0geFtpbmRleCAtIDFdKSAvICh4W2luZGV4XSAtIHhbaW5kZXggLSAxXSk7XG4gICAgdmFyIGNvbG9yRGVsdGEgPSB5MFtpbmRleF0gLSB5MVtpbmRleCAtIDFdO1xuICAgIGx1dFtpXSA9IGNvbG9yUGVyY2VudCAqIGNvbG9yRGVsdGEgKyB5MVtpbmRleCAtIDFdO1xuICB9XG5cbiAgbHV0WzBdID0geTFbMF07XG4gIGx1dFtOIC0gMV0gPSB5MFtkYXRhLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gbHV0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgQ29sb3JtYXAgYmFzZWQgb24gbG9va3VwIHRhYmxlcyB1c2luZyBsaW5lYXIgc2VnbWVudHMuXG4gKiBAcGFyYW0ge3tyZWQ6QXJyYXksIGdyZWVuOkFycmF5LCBibHVlOkFycmF5fX0gc2VnbWVudGVkRGF0YSBBbiBvYmplY3Qgd2l0aCBhIHJlZCwgZ3JlZW4gYW5kIGJsdWUgZW50cmllcy5cbiAqIEVhY2ggZW50cnkgc2hvdWxkIGJlIGEgbGlzdCBvZiB4LCB5MCwgeTEgdHVwbGVzLCBmb3JtaW5nIHJvd3MgaW4gYSB0YWJsZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBOIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIHJlc3VsdCBDb2xvcm1hcFxuICogQHBhcmFtIHthbnl9IGdhbW1hIHZhbHVlIGRlbm90ZXMgYSBcImdhbW1hIGN1cnZlXCIgdmFsdWUgd2hpY2ggYWRqdXN0cyB0aGUgYnJpZ2h0bmVzc1xuICogYXQgdGhlIGJvdHRvbSBhbmQgdG9wIG9mIHRoZSBDb2xvcm1hcC5cbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGNyZWF0ZWQgQ29sb3JtYXAgb2JqZWN0XG4gKiBAZGVzY3JpcHRpb24gVGhlIGxvb2t1cCB0YWJsZSBpcyBnZW5lcmF0ZWQgdXNpbmcgbGluZWFyIGludGVycG9sYXRpb24gZm9yIGVhY2hcbiAqICBQcmltYXJ5IGNvbG9yLCB3aXRoIHRoZSAwLTEgZG9tYWluIGRpdmlkZWQgaW50byBhbnkgbnVtYmVyIG9mXG4gKiBTZWdtZW50cy5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zdGVmYW52L21hdHBsb3RsaWIvYmxvYi8zZjFhMjM3NTVlODZmZWY5N2Q1MWUzMGUxMDYxOTVmMzQ0MjVjOWUzL2xpYi9tYXRwbG90bGliL2NvbG9ycy5weSNMNjYzXG4gKiBAbWVtYmVyb2YgQ29sb3JzXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVMaW5lYXJTZWdtZW50ZWRDb2xvcm1hcChzZWdtZW50ZWREYXRhLCBOLCBnYW1tYSkge1xuICB2YXIgaTtcbiAgdmFyIGx1dCA9IFtdO1xuICBOID0gTiA9PT0gbnVsbCA/IDI1NiA6IE47XG4gIGdhbW1hID0gZ2FtbWEgPT09IG51bGwgPyAxIDogZ2FtbWE7XG4gIHZhciByZWRMdXQgPSBtYWtlTWFwcGluZ0FycmF5KE4sIHNlZ21lbnRlZERhdGEucmVkLCBnYW1tYSk7XG4gIHZhciBncmVlbkx1dCA9IG1ha2VNYXBwaW5nQXJyYXkoTiwgc2VnbWVudGVkRGF0YS5ncmVlbiwgZ2FtbWEpO1xuICB2YXIgYmx1ZUx1dCA9IG1ha2VNYXBwaW5nQXJyYXkoTiwgc2VnbWVudGVkRGF0YS5ibHVlLCBnYW1tYSk7XG5cbiAgZm9yIChpID0gMDsgaSA8IE47IGkrKykge1xuICAgIHZhciByZWQgPSBNYXRoLnJvdW5kKHJlZEx1dFtpXSAqIDI1NSk7XG4gICAgdmFyIGdyZWVuID0gTWF0aC5yb3VuZChncmVlbkx1dFtpXSAqIDI1NSk7XG4gICAgdmFyIGJsdWUgPSBNYXRoLnJvdW5kKGJsdWVMdXRbaV0gKiAyNTUpO1xuICAgIHZhciByZ2JhID0gW3JlZCwgZ3JlZW4sIGJsdWUsIDI1NV07XG4gICAgbHV0LnB1c2gocmdiYSk7XG4gIH1cblxuICByZXR1cm4gbHV0O1xufVxuLyoqXG4gKiBSZXR1cm4gYWxsIGF2YWlsYWJsZSBjb2xvcm1hcHMgKGlkIGFuZCBuYW1lKVxuICogQHJldHVybnMge0FycmF5PHtpZCxrZXl9Pn0gQW4gYXJyYXkgb2YgY29sb3JtYXBzIHdpdGggYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIFwiaWRcIiBhbmQgZGlzcGxheSBcIm5hbWVcIlxuICogQG1lbWJlcm9mIENvbG9yc1xuICovXG5cblxuZnVuY3Rpb24gZ2V0Q29sb3JtYXBzTGlzdCgpIHtcbiAgdmFyIGNvbG9ybWFwcyA9IFtdO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGNvbG9ybWFwc0RhdGEpO1xuICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIGlmIChjb2xvcm1hcHNEYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhciBjb2xvcm1hcCA9IGNvbG9ybWFwc0RhdGFba2V5XTtcbiAgICAgIGNvbG9ybWFwcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogY29sb3JtYXAubmFtZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgY29sb3JtYXBzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgYU5hbWUgPSBhLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgYk5hbWUgPSBiLm5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChhTmFtZSA9PT0gYk5hbWUpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHJldHVybiBhTmFtZSA8IGJOYW1lID8gLTEgOiAxO1xuICB9KTtcbiAgcmV0dXJuIGNvbG9ybWFwcztcbn1cbi8qKlxuICogUmV0dXJuIGEgY29sb3JNYXAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGlkIGFuZCBjb2xvcm1hcERhdGFcbiAqIGlmIHRoZSBJZCBtYXRjaGVzIGV4aXN0ZW50IGNvbG9yTWFwIG9iamVjdHMgKGNoZWNrIGNvbG9ybWFwc0RhdGEpIHRoZSBjb2xvcm1hcERhdGEgaXMgaWdub3JlZC5cbiAqIGlmIHRoZSBjb2xvcm1hcERhdGEgaXMgbm90IGVtcHR5LCB0aGUgY29sb3JNYXAgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29sb3JtYXBzRGF0YSBsaXN0LiBPdGhlcndpc2UsIGFuIGVtcHR5IGNvbG9yTWFwIG9iamVjdCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgb2YgdGhlIGNvbG9ybWFwXG4gKiBAcGFyYW0ge09iamVjdH0gY29sb3JtYXBEYXRhIC0gQW4gb2JqZWN0IHRoYXQgY2FuIGNvbnRhaW4gYSBuYW1lLCBudW1Db2xvcnMsIGdhbWEsIHNlZ21lbnRlZERhdGEgYW5kL29yIGNvbG9yc1xuICogQHJldHVybnMgeyp9IFRoZSBDb2xvcm1hcCBPYmplY3RcbiAqIEBtZW1iZXJvZiBDb2xvcnNcbiovXG5cbmZ1bmN0aW9uIGdldENvbG9ybWFwKGlkLCBjb2xvcm1hcERhdGEpIHtcbiAgdmFyIGNvbG9ybWFwID0gY29sb3JtYXBzRGF0YVtpZF07XG5cbiAgaWYgKCFjb2xvcm1hcCkge1xuICAgIGNvbG9ybWFwID0gY29sb3JtYXBzRGF0YVtpZF0gPSBjb2xvcm1hcERhdGEgfHwge1xuICAgICAgbmFtZTogJycsXG4gICAgICBjb2xvcnM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIGlmICghY29sb3JtYXAuY29sb3JzICYmIGNvbG9ybWFwLnNlZ21lbnRlZERhdGEpIHtcbiAgICBjb2xvcm1hcC5jb2xvcnMgPSBjcmVhdGVMaW5lYXJTZWdtZW50ZWRDb2xvcm1hcChjb2xvcm1hcC5zZWdtZW50ZWREYXRhLCBjb2xvcm1hcC5udW1Db2xvcnMsIGNvbG9ybWFwLmdhbW1hKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0SWQ6IGZ1bmN0aW9uIGdldElkKCkge1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH0sXG4gICAgZ2V0Q29sb3JTY2hlbWVOYW1lOiBmdW5jdGlvbiBnZXRDb2xvclNjaGVtZU5hbWUoKSB7XG4gICAgICByZXR1cm4gY29sb3JtYXAubmFtZTtcbiAgICB9LFxuICAgIHNldENvbG9yU2NoZW1lTmFtZTogZnVuY3Rpb24gc2V0Q29sb3JTY2hlbWVOYW1lKG5hbWUpIHtcbiAgICAgIGNvbG9ybWFwLm5hbWUgPSBuYW1lO1xuICAgIH0sXG4gICAgZ2V0TnVtYmVyT2ZDb2xvcnM6IGZ1bmN0aW9uIGdldE51bWJlck9mQ29sb3JzKCkge1xuICAgICAgcmV0dXJuIGNvbG9ybWFwLmNvbG9ycy5sZW5ndGg7XG4gICAgfSxcbiAgICBzZXROdW1iZXJPZkNvbG9yczogZnVuY3Rpb24gc2V0TnVtYmVyT2ZDb2xvcnMobnVtQ29sb3JzKSB7XG4gICAgICB3aGlsZSAoY29sb3JtYXAuY29sb3JzLmxlbmd0aCA8IG51bUNvbG9ycykge1xuICAgICAgICBjb2xvcm1hcC5jb2xvcnMucHVzaChDT0xPUl9UUkFOU1BBUkVOVCk7XG4gICAgICB9XG5cbiAgICAgIGNvbG9ybWFwLmNvbG9ycy5sZW5ndGggPSBudW1Db2xvcnM7XG4gICAgfSxcbiAgICBnZXRDb2xvcjogZnVuY3Rpb24gZ2V0Q29sb3IoaW5kZXgpIHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWRJbmRleChpbmRleCkpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9ybWFwLmNvbG9yc1tpbmRleF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDT0xPUl9UUkFOU1BBUkVOVDtcbiAgICB9LFxuICAgIGdldENvbG9yUmVwZWF0aW5nOiBmdW5jdGlvbiBnZXRDb2xvclJlcGVhdGluZyhpbmRleCkge1xuICAgICAgdmFyIG51bUNvbG9ycyA9IGNvbG9ybWFwLmNvbG9ycy5sZW5ndGg7XG4gICAgICBpbmRleCA9IG51bUNvbG9ycyA/IGluZGV4ICUgbnVtQ29sb3JzIDogMDtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbG9yKGluZGV4KTtcbiAgICB9LFxuICAgIHNldENvbG9yOiBmdW5jdGlvbiBzZXRDb2xvcihpbmRleCwgcmdiYSkge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZEluZGV4KGluZGV4KSkge1xuICAgICAgICBjb2xvcm1hcC5jb2xvcnNbaW5kZXhdID0gcmdiYTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFkZENvbG9yOiBmdW5jdGlvbiBhZGRDb2xvcihyZ2JhKSB7XG4gICAgICBjb2xvcm1hcC5jb2xvcnMucHVzaChyZ2JhKTtcbiAgICB9LFxuICAgIGluc2VydENvbG9yOiBmdW5jdGlvbiBpbnNlcnRDb2xvcihpbmRleCwgcmdiYSkge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZEluZGV4KGluZGV4KSkge1xuICAgICAgICBjb2xvcm1hcC5jb2xvcnMuc3BsaWNlKGluZGV4LCAxLCByZ2JhKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlbW92ZUNvbG9yOiBmdW5jdGlvbiByZW1vdmVDb2xvcihpbmRleCkge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZEluZGV4KGluZGV4KSkge1xuICAgICAgICBjb2xvcm1hcC5jb2xvcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNsZWFyQ29sb3JzOiBmdW5jdGlvbiBjbGVhckNvbG9ycygpIHtcbiAgICAgIGNvbG9ybWFwLmNvbG9ycyA9IFtdO1xuICAgIH0sXG4gICAgYnVpbGRMb29rdXBUYWJsZTogZnVuY3Rpb24gYnVpbGRMb29rdXBUYWJsZShsdXQpIHtcbiAgICAgIGlmICghbHV0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG51bUNvbG9ycyA9IGNvbG9ybWFwLmNvbG9ycy5sZW5ndGg7XG4gICAgICBsdXQuc2V0TnVtYmVyT2ZUYWJsZVZhbHVlcyhudW1Db2xvcnMpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUNvbG9yczsgaSsrKSB7XG4gICAgICAgIGx1dC5zZXRUYWJsZVZhbHVlKGksIGNvbG9ybWFwLmNvbG9yc1tpXSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVMb29rdXBUYWJsZTogZnVuY3Rpb24gY3JlYXRlTG9va3VwVGFibGUoKSB7XG4gICAgICB2YXIgbHV0ID0gbmV3IF9sb29rdXBUYWJsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSgpO1xuICAgICAgdGhpcy5idWlsZExvb2t1cFRhYmxlKGx1dCk7XG4gICAgICByZXR1cm4gbHV0O1xuICAgIH0sXG4gICAgaXNWYWxpZEluZGV4OiBmdW5jdGlvbiBpc1ZhbGlkSW5kZXgoaW5kZXgpIHtcbiAgICAgIHJldHVybiBpbmRleCA+PSAwICYmIGluZGV4IDwgY29sb3JtYXAuY29sb3JzLmxlbmd0aDtcbiAgICB9XG4gIH07XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vY29sb3JzL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vY29sb3JzL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbG9ybWFwX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbG9ybWFwLmpzICovIFwiLi9jb2xvcnMvY29sb3JtYXAuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvb2t1cFRhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvb2t1cFRhYmxlLmpzICovIFwiLi9jb2xvcnMvbG9va3VwVGFibGUuanNcIik7XG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9ICh7XG4gIGdldENvbG9ybWFwOiBfY29sb3JtYXBfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldENvbG9ybWFwXCJdLFxuICBnZXRDb2xvcm1hcHNMaXN0OiBfY29sb3JtYXBfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldENvbG9ybWFwc0xpc3RcIl0sXG4gIExvb2t1cFRhYmxlOiBfbG9va3VwVGFibGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2NvbG9ycy9sb29rdXBUYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2NvbG9ycy9sb29rdXBUYWJsZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyBUaGlzIGNvZGUgd2FzIGNyZWF0ZWQgYmFzZWQgb24gdnRrTG9va3VwVGFibGVcbi8vIGh0dHA6Ly93d3cudnRrLm9yZy9kb2MvcmVsZWFzZS81LjAvaHRtbC9hMDE2OTcuaHRtbFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0tpdHdhcmUvVlRLL2Jsb2IvbWFzdGVyL0NvbW1vbi9Db3JlL3Z0a0xvb2t1cFRhYmxlLmN4eFxudmFyIEJFTE9XX1JBTkdFX0NPTE9SX0lOREVYID0gMDtcbnZhciBBQk9WRV9SQU5HRV9DT0xPUl9JTkRFWCA9IDE7XG52YXIgTkFOX0NPTE9SX0lOREVYID0gMjtcbi8qKlxuICogQ29udmVydHMgYW4gSFNWICAoSHVlLCBTYXR1cmF0aW9uLCBWYWx1ZSkgY29sb3IgdG8gUkdCIChSZWQsIEdyZWVuLCBCbHVlKSBjb2xvciB2YWx1ZVxuICogQHBhcmFtIHtOdW1iZXJ9IGh1ZSBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGh1ZSBjb2xvciB2YWx1ZVxuICogQHBhcmFtIHthbnl9IHNhdCBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIHNhdHVyYXRpb24gY29sb3IgdmFsdWVcbiAqIEBwYXJhbSB7YW55fSB2YWwgQSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBjb2xvciB2YWx1ZVxuICogQHJldHVybnMge051bWJlcnBbXX0gQW4gUkdCIGNvbG9yIGFycmF5XG4gKi9cblxuZnVuY3Rpb24gSFNWVG9SR0IoaHVlLCBzYXQsIHZhbCkge1xuICBpZiAoaHVlID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSFNWVG9SR0IgZXhwZWN0cyBodWUgPCAxJyk7XG4gIH1cblxuICB2YXIgcmdiID0gW107XG5cbiAgaWYgKHNhdCA9PT0gMCkge1xuICAgIHJnYlswXSA9IHZhbDtcbiAgICByZ2JbMV0gPSB2YWw7XG4gICAgcmdiWzJdID0gdmFsO1xuICAgIHJldHVybiByZ2I7XG4gIH1cblxuICB2YXIgaHVlQ2FzZSA9IE1hdGguZmxvb3IoaHVlICogNik7XG4gIHZhciBmcmFjID0gNiAqIGh1ZSAtIGh1ZUNhc2U7XG4gIHZhciBseCA9IHZhbCAqICgxIC0gc2F0KTtcbiAgdmFyIGx5ID0gdmFsICogKDEgLSBzYXQgKiBmcmFjKTtcbiAgdmFyIGx6ID0gdmFsICogKDEgLSBzYXQgKiAoMSAtIGZyYWMpKTtcblxuICBzd2l0Y2ggKGh1ZUNhc2UpIHtcbiAgICAvKiAwPGh1ZTwxLzYgKi9cbiAgICBjYXNlIDA6XG4gICAgY2FzZSA2OlxuICAgICAgcmdiWzBdID0gdmFsO1xuICAgICAgcmdiWzFdID0gbHo7XG4gICAgICByZ2JbMl0gPSBseDtcbiAgICAgIGJyZWFrO1xuXG4gICAgLyogMS82PGh1ZTwyLzYgKi9cblxuICAgIGNhc2UgMTpcbiAgICAgIHJnYlswXSA9IGx5O1xuICAgICAgcmdiWzFdID0gdmFsO1xuICAgICAgcmdiWzJdID0gbHg7XG4gICAgICBicmVhaztcblxuICAgIC8qIDIvNjxodWU8My82ICovXG5cbiAgICBjYXNlIDI6XG4gICAgICByZ2JbMF0gPSBseDtcbiAgICAgIHJnYlsxXSA9IHZhbDtcbiAgICAgIHJnYlsyXSA9IGx6O1xuICAgICAgYnJlYWs7XG5cbiAgICAvKiAzLzY8aHVlLzQvNiAqL1xuXG4gICAgY2FzZSAzOlxuICAgICAgcmdiWzBdID0gbHg7XG4gICAgICByZ2JbMV0gPSBseTtcbiAgICAgIHJnYlsyXSA9IHZhbDtcbiAgICAgIGJyZWFrO1xuXG4gICAgLyogNC82PGh1ZTw1LzYgKi9cblxuICAgIGNhc2UgNDpcbiAgICAgIHJnYlswXSA9IGx6O1xuICAgICAgcmdiWzFdID0gbHg7XG4gICAgICByZ2JbMl0gPSB2YWw7XG4gICAgICBicmVhaztcblxuICAgIC8qIDUvNjxodWU8MSAqL1xuXG4gICAgY2FzZSA1OlxuICAgICAgcmdiWzBdID0gdmFsO1xuICAgICAgcmdiWzFdID0gbHg7XG4gICAgICByZ2JbMl0gPSBseTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHJnYjtcbn1cbi8qKlxuICogTWFwcyBhIHZhbHVlIHRvIGFuIGluZGV4IGluIHRoZSB0YWJsZVxuICogQHBhcmFtIHtOdW1iZXJ9IHYgQSBkb3VibGUgdmFsdWUgd2hpY2ggdGFibGUgaW5kZXggd2lsbCBiZSByZXR1cm5lZC5cbiAqIEBwYXJhbSB7YW55fSBwIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBUYWJsZSBcIlJhbmdlXCIsIHRoZSB0YWJsZSBcIk1heEluZGV4XCIsXG4gKiBBIFwiU2hpZnRcIiBmcm9tIGZpcnN0IHZhbHVlIGluIHRoZSB0YWJsZSBhbmQgdGhlIHRhYmxlIFwiU2NhbGVcIiB2YWx1ZVxuICogQHJldHVybnMge051bWJlcn0gVGhlIG1hcHBlZCBpbmRleCBpbiB0aGUgdGFibGVcbiAqIEBtZW1iZXJvZiBDb2xvcnNcbiAqL1xuXG5cbmZ1bmN0aW9uIGxpbmVhckluZGV4TG9va3VwTWFpbih2LCBwKSB7XG4gIHZhciBkSW5kZXg7IC8vIE5PVEU6IEFkZGVkIE1hdGguZmxvb3Igc2luY2UgdmFsdWVzIHdlcmUgbm90IGludGVnZXJzPyBDaGVjayBWVEsgc291cmNlXG5cbiAgaWYgKHYgPCBwLlJhbmdlWzBdKSB7XG4gICAgZEluZGV4ID0gcC5NYXhJbmRleCArIEJFTE9XX1JBTkdFX0NPTE9SX0lOREVYICsgMS41O1xuICB9IGVsc2UgaWYgKHYgPiBwLlJhbmdlWzFdKSB7XG4gICAgZEluZGV4ID0gcC5NYXhJbmRleCArIEFCT1ZFX1JBTkdFX0NPTE9SX0lOREVYICsgMS41O1xuICB9IGVsc2Uge1xuICAgIGRJbmRleCA9ICh2ICsgcC5TaGlmdCkgKiBwLlNjYWxlO1xuICB9XG5cbiAgcmV0dXJuIE1hdGguZmxvb3IoZEluZGV4KTtcbn1cbi8qKlxuICogTWFwcyBzY2FsYXIgdmFsdWVzIGludG8gY29sb3JzIHZpYSBhIGxvb2t1cCB0YWJsZVxuICogTG9va3VwVGFibGUgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdXNlZCBieSBtYXBwZXIgb2JqZWN0cyB0byBtYXAgc2NhbGFyIHZhbHVlcyBpbnRvIHJnYmEgKHJlZC1ncmVlbi1ibHVlLWFscGhhIHRyYW5zcGFyZW5jeSkgY29sb3Igc3BlY2lmaWNhdGlvbixcbiAqIG9yIHJnYmEgaW50byBzY2FsYXIgdmFsdWVzLiBUaGUgY29sb3IgdGFibGUgY2FuIGJlIGNyZWF0ZWQgYnkgZGlyZWN0IGluc2VydGlvbiBvZiBjb2xvciB2YWx1ZXMsIG9yIGJ5IHNwZWNpZnlpbmcgaHVlLCBzYXR1cmF0aW9uLCB2YWx1ZSwgYW5kIGFscGhhIHJhbmdlIGFuZCBnZW5lcmF0aW5nIGEgdGFibGVcbiAqL1xuXG5cbnZhciBMb29rdXBUYWJsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGVmYXVsdCBsaW5lYXIgTG9va3VwVGFibGUgb2JqZWN0IHdpdGggMjU2IGNvbG9ycy5cbiAgICovXG4gIGZ1bmN0aW9uIExvb2t1cFRhYmxlKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb29rdXBUYWJsZSk7XG5cbiAgICB0aGlzLk51bWJlck9mQ29sb3JzID0gMjU2O1xuICAgIHRoaXMuUmFtcCA9ICdsaW5lYXInO1xuICAgIHRoaXMuVGFibGVSYW5nZSA9IFswLCAyNTVdO1xuICAgIHRoaXMuSHVlUmFuZ2UgPSBbMCwgMC42NjY2N107XG4gICAgdGhpcy5TYXR1cmF0aW9uUmFuZ2UgPSBbMSwgMV07XG4gICAgdGhpcy5WYWx1ZVJhbmdlID0gWzEsIDFdO1xuICAgIHRoaXMuQWxwaGFSYW5nZSA9IFsxLCAxXTtcbiAgICB0aGlzLk5hTkNvbG9yID0gWzEyOCwgMCwgMCwgMjU1XTtcbiAgICB0aGlzLkJlbG93UmFuZ2VDb2xvciA9IFswLCAwLCAwLCAyNTVdO1xuICAgIHRoaXMuVXNlQmVsb3dSYW5nZUNvbG9yID0gdHJ1ZTtcbiAgICB0aGlzLkFib3ZlUmFuZ2VDb2xvciA9IFsyNTUsIDI1NSwgMjU1LCAyNTVdO1xuICAgIHRoaXMuVXNlQWJvdmVSYW5nZUNvbG9yID0gdHJ1ZTtcbiAgICB0aGlzLklucHV0UmFuZ2UgPSBbMCwgMjU1XTtcbiAgICB0aGlzLlRhYmxlID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFNwZWNpZnkgdGhlIG51bWJlciBvZiB2YWx1ZXMgKGkuZS4sIGNvbG9ycykgaW4gdGhlIGxvb2t1cCB0YWJsZS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IG51bWJlciBUaGUgbnVtYmVyIG9mIGNvbG9ycyBpbiBoZSBMb29rdXBUYWJsZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhMb29rdXBUYWJsZSwgW3tcbiAgICBrZXk6IFwic2V0TnVtYmVyT2ZUYWJsZVZhbHVlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXROdW1iZXJPZlRhYmxlVmFsdWVzKG51bWJlcikge1xuICAgICAgdGhpcy5OdW1iZXJPZkNvbG9ycyA9IG51bWJlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaGFwZSBvZiB0aGUgdGFibGUgcmFtcCB0byBlaXRoZXIgJ2xpbmVhcicsICdzY3VydmUnIG9yICdzcXJ0J1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByYW1wIEEgc3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgc2hhcGUgb2YgdGhlIHRhYmxlLiBBbGxvd2VkIHZhbHVlcyBhcmUgJ2xpbmVhcicsICdzY3VydmUnIG9yICdzcXJ0J1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBtZW1iZXJvZiBDb2xvcnNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInNldFJhbXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmFtcChyYW1wKSB7XG4gICAgICB0aGlzLlJhbXAgPSByYW1wO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBtaW5pbXVtL21heGltdW0gc2NhbGFyIHZhbHVlcyBmb3Igc2NhbGFyIG1hcHBpbmcuXG4gICAgICogU2NhbGFyIHZhbHVlcyBsZXNzIHRoYW4gbWluaW11bSByYW5nZSB2YWx1ZSBhcmUgY2xhbXBlZCB0byBtaW5pbXVtIHJhbmdlIHZhbHVlLlxuICAgICAqIFNjYWxhciB2YWx1ZXMgZ3JlYXRlciB0aGFuIG1heGltdW0gcmFuZ2UgdmFsdWUgYXJlIGNsYW1wZWQgdG8gbWF4aW11bSByYW5nZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgQSBkb3VibGUgcmVwcmVzZW50aW5nIHRoZSBtaW5pbXVtIHNjYWxlciB2YWx1ZSBvZiB0aGUgTG9va3VwVGFibGVcbiAgICAgKiBAcGFyYW0ge2FueX0gZW5kIEEgZG91YmxlIHJlcHJlc2VudGluZyB0aGUgbWF4aW11bSBzY2FsZXIgdmFsdWUgb2YgdGhlIExvb2t1cFRhYmxlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2V0VGFibGVSYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUYWJsZVJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHRoaXMuVGFibGVSYW5nZVswXSA9IHN0YXJ0O1xuICAgICAgdGhpcy5UYWJsZVJhbmdlWzFdID0gZW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJhbmdlIGluIGh1ZSAodXNpbmcgYXV0b21hdGljIGdlbmVyYXRpb24pLiBIdWUgcmFuZ2VzIGJldHdlZW4gWzAsMV0uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IEEgZG91YmxlIHJlcHJlc2VudGluZyB0aGUgbWluaW11bSBodWUgdmFsdWUgaW4gYSByYW5nZS4gTWluLiBpcyAwXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGVuZCBBIGRvdWJsZSByZXByZXNlbnRpbmcgdGhlIG1heGltdW0gaHVlIHZhbHVlIGluIGEgcmFuZ2UuIE1heC4gaXMgMVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBtZW1iZXJvZiBDb2xvcnNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInNldEh1ZVJhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEh1ZVJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgIHRoaXMuSHVlUmFuZ2VbMF0gPSBzdGFydDtcbiAgICAgIHRoaXMuSHVlUmFuZ2VbMV0gPSBlbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmFuZ2UgaW4gc2F0dXJhdGlvbiAodXNpbmcgYXV0b21hdGljIGdlbmVyYXRpb24pLiBTYXR1cmF0aW9uIHJhbmdlcyBiZXR3ZWVuIFswLDFdLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBBIGRvdWJsZSByZXByZXNlbnRpbmcgdGhlIG1pbmltdW0gU2F0dXJhdGlvbiB2YWx1ZSBpbiBhIHJhbmdlLiBNaW4uIGlzIDBcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZW5kIEEgZG91YmxlIHJlcHJlc2VudGluZyB0aGUgbWF4aW11bSBTYXR1cmF0aW9uIHZhbHVlIGluIGEgcmFuZ2UuIE1heC4gaXMgMVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBtZW1iZXJvZiBDb2xvcnNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInNldFNhdHVyYXRpb25SYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTYXR1cmF0aW9uUmFuZ2Uoc3RhcnQsIGVuZCkge1xuICAgICAgdGhpcy5TYXR1cmF0aW9uUmFuZ2VbMF0gPSBzdGFydDtcbiAgICAgIHRoaXMuU2F0dXJhdGlvblJhbmdlWzFdID0gZW5kO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJhbmdlIGluIHZhbHVlICh1c2luZyBhdXRvbWF0aWMgZ2VuZXJhdGlvbikuIFZhbHVlIHJhbmdlcyBiZXR3ZWVuIFswLDFdLlxuICAgICAqIEBwYXJhbSB7TnVtZWJlciB9IHN0YXJ0IEEgZG91YmxlIHJlcHJlc2VudGluZyB0aGUgbWluaW11bSB2YWx1ZSBpbiBhIHJhbmdlLiBNaW4uIGlzIDBcbiAgICAgKiBAcGFyYW0ge051bWViZXJ9IGVuZCBBIGRvdWJsZSByZXByZXNlbnRpbmcgdGhlIG1heGltdW0gdmFsdWUgaW4gYSByYW5nZS4gTWF4LiBpcyAxXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2V0VmFsdWVSYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYWx1ZVJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgIC8vIFNldCB0aGUgcmFuZ2UgaW4gdmFsdWUgKHVzaW5nIGF1dG9tYXRpYyBnZW5lcmF0aW9uKS4gVmFsdWUgcmFuZ2VzIGJldHdlZW4gWzAsMV0uXG4gICAgICB0aGlzLlZhbHVlUmFuZ2VbMF0gPSBzdGFydDtcbiAgICAgIHRoaXMuVmFsdWVSYW5nZVsxXSA9IGVuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogKE5vdCBVc2VkKSBTZXRzIHRoZSByYW5nZSBvZiBzY2FsYXJzIHdoaWNoIHdpbGwgYmUgbWFwcGVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCB0aGUgbWluaW11bSBzY2FsYXIgdmFsdWUgaW4gdGhlIHJhbmdlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGVuZCB0aGUgbWF4aW11bSBzY2FsYXIgdmFsdWUgaW4gdGhlIHJhbmdlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2V0UmFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmFuZ2Uoc3RhcnQsIGVuZCkge1xuICAgICAgdGhpcy5JbnB1dFJhbmdlWzBdID0gc3RhcnQ7XG4gICAgICB0aGlzLklucHV0UmFuZ2VbMV0gPSBlbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmFuZ2UgaW4gYWxwaGEgKHVzaW5nIGF1dG9tYXRpYyBnZW5lcmF0aW9uKS4gQWxwaGEgcmFuZ2VzIGZyb20gWzAsMV0uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IEEgZG91YmxlIHJlcHJlc2VudGluZyB0aGUgbWluaW11bSBhbHBoYSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmQgQSBkb3VibGUgcmVwcmVzZW50aW5nIHRoZSBtYXhpbXVtIGFscGhhIHZhbHVlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwic2V0QWxwaGFSYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBbHBoYVJhbmdlKHN0YXJ0LCBlbmQpIHtcbiAgICAgIC8vIFNldCB0aGUgcmFuZ2UgaW4gYWxwaGEgKHVzaW5nIGF1dG9tYXRpYyBnZW5lcmF0aW9uKS4gQWxwaGEgcmFuZ2VzIGZyb20gWzAsMV0uXG4gICAgICB0aGlzLkFscGhhUmFuZ2VbMF0gPSBzdGFydDtcbiAgICAgIHRoaXMuQWxwaGFSYW5nZVsxXSA9IGVuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFwIG9uZSB2YWx1ZSB0aHJvdWdoIHRoZSBsb29rdXAgdGFibGUgYW5kIHJldHVybiB0aGUgY29sb3IgYXMgYW5cbiAgICAgKiBSR0JBIGFycmF5IG9mIGRvdWJsZXMgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsYXIgQSBkb3VibGUgc2NhbGFyIHZhbHVlIHdoaWNoIHdpbGwgYmUgbWFwcGVkIHRvIGEgY29sb3IgaW4gdGhlIExvb2t1cFRhYmxlXG4gICAgICogQHJldHVybnMge051bWJlcltdfSBBbiBSR0JBIGFycmF5IG9mIGRvdWJsZXMgYmV0d2VlbiAwIGFuZCAxXG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0Q29sb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29sb3Ioc2NhbGFyKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXBWYWx1ZShzY2FsYXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBsb29rdXAgdGFibGUgZnJvbSBodWUsIHNhdHVyYXRpb24sIHZhbHVlLCBhbHBoYSBtaW4vbWF4IHZhbHVlcy4gVGFibGUgaXMgYnVpbHQgZnJvbSBsaW5lYXIgcmFtcCBvZiBlYWNoIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZm9yY2UgdHJ1ZSB0byBmb3JjZSB0aGUgYnVpbGQgb2YgdGhlIExvb2t1cFRhYmxlLiBPdGhlcndpZSwgZmFsc2UuIFRoaXMgaXMgdXNlZnVsIGlmIGEgbG9va3VwIHRhYmxlIGhhcyBiZWVuIGRlZmluZWQgbWFudWFsbHlcbiAgICAgKiAodXNpbmcgU2V0VGFibGVWYWx1ZSkgYW5kIHRoZW4gYW4gYXBwbGljYXRpb24gZGVjaWRlcyB0byByZWJ1aWxkIHRoZSBsb29rdXAgdGFibGUgdXNpbmcgdGhlIGltcGxpY2l0IHByb2Nlc3MuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYnVpbGRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGQoZm9yY2UpIHtcbiAgICAgIGlmICh0aGlzLlRhYmxlLmxlbmd0aCA+IDEgJiYgIWZvcmNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQ2xlYXIgdGhlIHRhYmxlXG5cblxuICAgICAgdGhpcy5UYWJsZSA9IFtdO1xuICAgICAgdmFyIG1heEluZGV4ID0gdGhpcy5OdW1iZXJPZkNvbG9ycyAtIDE7XG4gICAgICB2YXIgaGluYywgc2luYywgdmluYywgYWluYztcblxuICAgICAgaWYgKG1heEluZGV4KSB7XG4gICAgICAgIGhpbmMgPSAodGhpcy5IdWVSYW5nZVsxXSAtIHRoaXMuSHVlUmFuZ2VbMF0pIC8gbWF4SW5kZXg7XG4gICAgICAgIHNpbmMgPSAodGhpcy5TYXR1cmF0aW9uUmFuZ2VbMV0gLSB0aGlzLlNhdHVyYXRpb25SYW5nZVswXSkgLyBtYXhJbmRleDtcbiAgICAgICAgdmluYyA9ICh0aGlzLlZhbHVlUmFuZ2VbMV0gLSB0aGlzLlZhbHVlUmFuZ2VbMF0pIC8gbWF4SW5kZXg7XG4gICAgICAgIGFpbmMgPSAodGhpcy5BbHBoYVJhbmdlWzFdIC0gdGhpcy5BbHBoYVJhbmdlWzBdKSAvIG1heEluZGV4O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGluYyA9IHNpbmMgPSB2aW5jID0gYWluYyA9IDAuMDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gbWF4SW5kZXg7IGkrKykge1xuICAgICAgICB2YXIgaHVlID0gdGhpcy5IdWVSYW5nZVswXSArIGkgKiBoaW5jO1xuICAgICAgICB2YXIgc2F0ID0gdGhpcy5TYXR1cmF0aW9uUmFuZ2VbMF0gKyBpICogc2luYztcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMuVmFsdWVSYW5nZVswXSArIGkgKiB2aW5jO1xuICAgICAgICB2YXIgYWxwaGEgPSB0aGlzLkFscGhhUmFuZ2VbMF0gKyBpICogYWluYztcbiAgICAgICAgdmFyIHJnYiA9IEhTVlRvUkdCKGh1ZSwgc2F0LCB2YWwpO1xuICAgICAgICB2YXIgY19yZ2JhID0gW107XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLlJhbXApIHtcbiAgICAgICAgICBjYXNlICdzY3VydmUnOlxuICAgICAgICAgICAgY19yZ2JhWzBdID0gTWF0aC5mbG9vcigxMjcuNSAqICgxLjAgKyBNYXRoLmNvcygoMS4wIC0gcmdiWzBdKSAqIE1hdGguUEkpKSk7XG4gICAgICAgICAgICBjX3JnYmFbMV0gPSBNYXRoLmZsb29yKDEyNy41ICogKDEuMCArIE1hdGguY29zKCgxLjAgLSByZ2JbMV0pICogTWF0aC5QSSkpKTtcbiAgICAgICAgICAgIGNfcmdiYVsyXSA9IE1hdGguZmxvb3IoMTI3LjUgKiAoMS4wICsgTWF0aC5jb3MoKDEuMCAtIHJnYlsyXSkgKiBNYXRoLlBJKSkpO1xuICAgICAgICAgICAgY19yZ2JhWzNdID0gTWF0aC5mbG9vcihhbHBoYSAqIDI1NSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2xpbmVhcic6XG4gICAgICAgICAgICBjX3JnYmFbMF0gPSBNYXRoLmZsb29yKHJnYlswXSAqIDI1NSArIDAuNSk7XG4gICAgICAgICAgICBjX3JnYmFbMV0gPSBNYXRoLmZsb29yKHJnYlsxXSAqIDI1NSArIDAuNSk7XG4gICAgICAgICAgICBjX3JnYmFbMl0gPSBNYXRoLmZsb29yKHJnYlsyXSAqIDI1NSArIDAuNSk7XG4gICAgICAgICAgICBjX3JnYmFbM10gPSBNYXRoLmZsb29yKGFscGhhICogMjU1ICsgMC41KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnc3FydCc6XG4gICAgICAgICAgICBjX3JnYmFbMF0gPSBNYXRoLmZsb29yKE1hdGguc3FydChyZ2JbMF0pICogMjU1ICsgMC41KTtcbiAgICAgICAgICAgIGNfcmdiYVsxXSA9IE1hdGguZmxvb3IoTWF0aC5zcXJ0KHJnYlsxXSkgKiAyNTUgKyAwLjUpO1xuICAgICAgICAgICAgY19yZ2JhWzJdID0gTWF0aC5mbG9vcihNYXRoLnNxcnQocmdiWzJdKSAqIDI1NSArIDAuNSk7XG4gICAgICAgICAgICBjX3JnYmFbM10gPSBNYXRoLmZsb29yKE1hdGguc3FydChhbHBoYSkgKiAyNTUgKyAwLjUpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBSYW1wIHZhbHVlIChcIi5jb25jYXQodGhpcy5SYW1wLCBcIilcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5UYWJsZS5wdXNoKGNfcmdiYSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnVpbGRTcGVjaWFsQ29sb3JzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIG91dC1vZi1yYW5nZSBjb2xvcnMgKEJlbG93IHJhbmdlIGFuZCBBYm92ZSByYW5nZSkgYXJlIHNldCBjb3JyZWN0bHkuXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQG1lbWJlcm9mIENvbG9yc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYnVpbGRTcGVjaWFsQ29sb3JzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkU3BlY2lhbENvbG9ycygpIHtcbiAgICAgIHZhciBudW1iZXJPZkNvbG9ycyA9IHRoaXMuTnVtYmVyT2ZDb2xvcnM7XG4gICAgICB2YXIgYmVsb3dSYW5nZUNvbG9ySW5kZXggPSBudW1iZXJPZkNvbG9ycyArIEJFTE9XX1JBTkdFX0NPTE9SX0lOREVYO1xuICAgICAgdmFyIGFib3ZlUmFuZ2VDb2xvckluZGV4ID0gbnVtYmVyT2ZDb2xvcnMgKyBBQk9WRV9SQU5HRV9DT0xPUl9JTkRFWDtcbiAgICAgIHZhciBuYW5Db2xvckluZGV4ID0gbnVtYmVyT2ZDb2xvcnMgKyBOQU5fQ09MT1JfSU5ERVg7IC8vIEJlbG93IHJhbmdlIGNvbG9yXG5cbiAgICAgIGlmICh0aGlzLlVzZUJlbG93UmFuZ2VDb2xvciB8fCBudW1iZXJPZkNvbG9ycyA9PT0gMCkge1xuICAgICAgICB0aGlzLlRhYmxlW2JlbG93UmFuZ2VDb2xvckluZGV4XSA9IHRoaXMuQmVsb3dSYW5nZUNvbG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRHVwbGljYXRlIHRoZSBmaXJzdCBjb2xvciBpbiB0aGUgdGFibGUuXG4gICAgICAgIHRoaXMuVGFibGVbYmVsb3dSYW5nZUNvbG9ySW5kZXhdID0gdGhpcy5UYWJsZVswXTtcbiAgICAgIH0gLy8gQWJvdmUgcmFuZ2UgY29sb3JcblxuXG4gICAgICBpZiAodGhpcy5Vc2VBYm92ZVJhbmdlQ29sb3IgfHwgbnVtYmVyT2ZDb2xvcnMgPT09IDApIHtcbiAgICAgICAgdGhpcy5UYWJsZVthYm92ZVJhbmdlQ29sb3JJbmRleF0gPSB0aGlzLkFib3ZlUmFuZ2VDb2xvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIER1cGxpY2F0ZSB0aGUgbGFzdCBjb2xvciBpbiB0aGUgdGFibGUuXG4gICAgICAgIHRoaXMuVGFibGVbYWJvdmVSYW5nZUNvbG9ySW5kZXhdID0gdGhpcy5UYWJsZVtudW1iZXJPZkNvbG9ycyAtIDFdO1xuICAgICAgfSAvLyBBbHdheXMgdXNlIE5hbkNvbG9yXG5cblxuICAgICAgdGhpcy5UYWJsZVtuYW5Db2xvckluZGV4XSA9IHRoaXMuTmFOQ29sb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gR2V0Q29sb3IgLSBNYXAgb25lIHZhbHVlIHRocm91Z2ggdGhlIGxvb2t1cCB0YWJsZSBhbmQgcmV0dXJuIHRoZSBjb2xvciBhcyBhblxuICAgICAqIFJHQkEgYXJyYXkgb2YgZG91YmxlcyBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICogQHBhcmFtIHtOdW1lYmVyfSB2IEEgZG91YmxlIHNjYWxhciB2YWx1ZSB3aGljaCB3aWxsIGJlIG1hcHBlZCB0byBhIGNvbG9yIGluIHRoZSBMb29rdXBUYWJsZVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJbXX0gQW4gUkdCQSBhcnJheSBvZiBkb3VibGVzIGJldHdlZW4gMCBhbmQgMVxuICAgICAqIEBtZW1iZXJvZiBDb2xvcnNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcIm1hcFZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hcFZhbHVlKHYpIHtcbiAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXgodik7XG5cbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTmFOQ29sb3I7XG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLlVzZUJlbG93UmFuZ2VDb2xvciAmJiB2IDwgdGhpcy5UYWJsZVJhbmdlWzBdKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuQmVsb3dSYW5nZUNvbG9yO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSB0aGlzLk51bWJlck9mQ29sb3JzIC0gMSkge1xuICAgICAgICBpZiAodGhpcy5Vc2VBYm92ZVJhbmdlQ29sb3IgJiYgdiA+IHRoaXMuVGFibGVSYW5nZVsxXSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLkFib3ZlUmFuZ2VDb2xvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5UYWJsZVtpbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdGFibGUgaW5kZXggYXNzb2NpYXRlZCB3aXRoIGEgcGFydGljdWxhciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdiBBIGRvdWJsZSB2YWx1ZSB3aGljaCB0YWJsZSBpbmRleCB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBpbmRleCBpbiB0aGUgTG9va3VwVGFibGVcbiAgICAgKiBAbWVtYmVyb2YgQ29sb3JzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJnZXRJbmRleFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleCh2KSB7XG4gICAgICB2YXIgcCA9IHt9O1xuICAgICAgcC5SYW5nZSA9IFtdO1xuICAgICAgcC5NYXhJbmRleCA9IHRoaXMuTnVtYmVyT2ZDb2xvcnMgLSAxOyAvLyBUaGlzIHdhcyBMb29rdXBTaGlmdEFuZFNjYWxlXG5cbiAgICAgIHAuU2hpZnQgPSAtdGhpcy5UYWJsZVJhbmdlWzBdO1xuXG4gICAgICBpZiAodGhpcy5UYWJsZVJhbmdlWzFdIDw9IHRoaXMuVGFibGVSYW5nZVswXSkge1xuICAgICAgICBwLlNjYWxlID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuU2NhbGUgPSBwLk1heEluZGV4IC8gKHRoaXMuVGFibGVSYW5nZVsxXSAtIHRoaXMuVGFibGVSYW5nZVswXSk7XG4gICAgICB9XG5cbiAgICAgIHAuUmFuZ2VbMF0gPSB0aGlzLlRhYmxlUmFuZ2VbMF07XG4gICAgICBwLlJhbmdlWzFdID0gdGhpcy5UYWJsZVJhbmdlWzFdOyAvLyBGaXJzdCwgY2hlY2sgd2hldGhlciB3ZSBoYXZlIGEgbnVtYmVyLi4uXG5cbiAgICAgIGlmIChpc05hTih2KSkge1xuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSAvLyBNYXAgdG8gYW4gaW5kZXg6XG5cblxuICAgICAgdmFyIGluZGV4ID0gbGluZWFySW5kZXhMb29rdXBNYWluKHYsIHApOyAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGlmIHRoZSBpbmRleCBpbmRpY2F0ZXMgYW5cbiAgICAgIC8vIE91dC1vZi1yYW5nZSB2YWx1ZSwgdHJ1bmNhdGUgdG8gaW5kZXggcmFuZ2UgZm9yIGluLXJhbmdlIGNvbG9ycy5cblxuICAgICAgaWYgKGluZGV4ID09PSB0aGlzLk51bWJlck9mQ29sb3JzICsgQkVMT1dfUkFOR0VfQ09MT1JfSU5ERVgpIHtcbiAgICAgICAgaW5kZXggPSAwO1xuICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gdGhpcy5OdW1iZXJPZkNvbG9ycyArIEFCT1ZFX1JBTkdFX0NPTE9SX0lOREVYKSB7XG4gICAgICAgIGluZGV4ID0gdGhpcy5OdW1iZXJPZkNvbG9ycyAtIDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlyZWN0bHkgbG9hZCBjb2xvciBpbnRvIGxvb2t1cCB0YWJsZS4gVXNlIFswLDFdIGRvdWJsZSB2YWx1ZXMgZm9yIGNvbG9yIGNvbXBvbmVudCBzcGVjaWZpY2F0aW9uLlxuICAgICAqIE1ha2Ugc3VyZSB0aGF0IHlvdSd2ZSBlaXRoZXIgdXNlZCB0aGUgQnVpbGQoKSBtZXRob2Qgb3IgdXNlZCBTZXROdW1iZXJPZlRhYmxlVmFsdWVzKCkgcHJpb3IgdG8gdXNpbmcgdGhpcyBtZXRob2QuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBpbmRleCBpbiB0aGUgTG9va3VwVGFibGUgb2Ygd2hlcmUgdG8gaW5zZXJ0IHRoZSBjb2xvciB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyW119IHJnYmEgQW4gYXJyYXkgb2YgWzAsMV0gZG91YmxlIHZhbHVlcyBmb3IgYW4gUkdCQSBjb2xvciBjb21wb25lbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAbWVtYmVyb2YgQ29sb3JzXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJzZXRUYWJsZVZhbHVlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRhYmxlVmFsdWUoaW5kZXgsIHJnYmEpIHtcbiAgICAgIC8vIENoZWNrIGlmIGl0IGluZGV4LCByZWQsIGdyZWVuLCBibHVlIGFuZCBhbHBoYSB3ZXJlIHBhc3NlZCBhcyBwYXJhbWV0ZXJcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA1KSB7XG4gICAgICAgIHJnYmEgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgfSAvLyBDaGVjayB0aGUgaW5kZXggdG8gbWFrZSBzdXJlIGl0IGlzIHZhbGlkXG5cblxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBzZXQgdGhlIHRhYmxlIHZhbHVlIGZvciBuZWdhdGl2ZSBpbmRleCAoXCIuY29uY2F0KGluZGV4LCBcIilcIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaW5kZXggPj0gdGhpcy5OdW1iZXJPZkNvbG9ycykge1xuICAgICAgICBuZXcgRXJyb3IoXCJJbmRleCBcIi5jb25jYXQoaW5kZXgsIFwiIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGNvbG9ycyBcIikuY29uY2F0KHRoaXMuTnVtYmVyT2ZDb2xvcnMpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5UYWJsZVtpbmRleF0gPSByZ2JhO1xuXG4gICAgICBpZiAoaW5kZXggPT09IDAgfHwgaW5kZXggPT09IHRoaXMuTnVtYmVyT2ZDb2xvcnMgLSAxKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGR1ZSB0byB0aGUgd2F5IHRoZSBzcGVjaWFsIGNvbG9ycyBhcmUgc3RvcmVkIGluXG4gICAgICAgIC8vIFRoZSBpbnRlcm5hbCB0YWJsZS4gSWYgQWJvdmUvQmVsb3dSYW5nZUNvbG9ycyBhcmUgbm90IHVzZWQgYW5kXG4gICAgICAgIC8vIFRoZSBtaW4vbWF4IGNvbG9ycyBhcmUgY2hhbmdlZCBpbiB0aGUgdGFibGUgd2l0aCB0aGlzIG1lbWJlclxuICAgICAgICAvLyBGdW5jdGlvbiwgdGhlbiB0aGUgY29sb3JzIHVzZWQgZm9yIHZhbHVlcyBvdXRzaWRlIHRoZSByYW5nZSBtYXlcbiAgICAgICAgLy8gQmUgaW5jb3JyZWN0LiBDYWxsaW5nIHRoaXMgaGVyZSBlbnN1cmVzIHRoZSBvdXQtb2YtcmFuZ2UgY29sb3JzXG4gICAgICAgIC8vIEFyZSBzZXQgY29ycmVjdGx5LlxuICAgICAgICB0aGlzLmJ1aWxkU3BlY2lhbENvbG9ycygpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBMb29rdXBUYWJsZTtcbn0oKTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChMb29rdXBUYWJsZSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZGlzYWJsZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9kaXNhYmxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlZEVsZW1lbnRzLmpzICovIFwiLi9lbmFibGVkRWxlbWVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2V2ZW50cy5qcyAqLyBcIi4vZXZlbnRzLmpzXCIpO1xuXG5cblxuLyoqXHJcbiAqICBEaXNhYmxlIGFuIEhUTUwgZWxlbWVudCBmb3IgZnVydGhlciB1c2UgaW4gQ29ybmVyc3RvbmVcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBtZW1iZXJvZiBFbmFibGVcclxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZGlzYWJsZTogZWxlbWVudCBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfSAvLyBTZWFyY2ggZm9yIHRoaXMgZWxlbWVudCBpbiB0aGlzIGxpc3Qgb2YgZW5hYmxlZCBlbGVtZW50c1xuXG5cbiAgdmFyIGVuYWJsZWRFbGVtZW50cyA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudHNcIl0pKCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbmFibGVkRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZW5hYmxlZEVsZW1lbnRzW2ldLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgIC8vIFdlIGZvdW5kIGl0IVxuICAgICAgLy8gRmlyZSBhbiBldmVudCBzbyBkZXBlbmRlbmNpZXMgY2FuIGNsZWFudXBcbiAgICAgIHZhciBldmVudERhdGEgPSB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcbiAgICAgIH07XG4gICAgICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZWxlbWVudCwgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXS5FTEVNRU5UX0RJU0FCTEVELCBldmVudERhdGEpO1xuICAgICAgT2JqZWN0KF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImV2ZW50c1wiXSwgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXS5FTEVNRU5UX0RJU0FCTEVELCBldmVudERhdGEpOyAvLyBSZW1vdmUgdGhlIGNoaWxkIERPTSBlbGVtZW50cyB0aGF0IHdlIGNyZWF0ZWQgKGUuZy5jYW52YXMpXG5cbiAgICAgIGVuYWJsZWRFbGVtZW50c1tpXS5lbGVtZW50LnJlbW92ZUNoaWxkKGVuYWJsZWRFbGVtZW50c1tpXS5jYW52YXMpO1xuICAgICAgZW5hYmxlZEVsZW1lbnRzW2ldLmNhbnZhcyA9IHVuZGVmaW5lZDsgLy8gUmVtb3ZlIHRoaXMgZWxlbWVudCBmcm9tIHRoZSBsaXN0IG9mIGVuYWJsZWQgZWxlbWVudHNcblxuICAgICAgZW5hYmxlZEVsZW1lbnRzLnNwbGljZShpLCAxKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZGlzcGxheUltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vZGlzcGxheUltYWdlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldERlZmF1bHRWaWV3cG9ydC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91cGRhdGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91cGRhdGVJbWFnZS5qcyAqLyBcIi4vdXBkYXRlSW1hZ2UuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9ub3cuanMgKi8gXCIuL2ludGVybmFsL25vdy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xheWVycy5qcyAqLyBcIi4vbGF5ZXJzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdHJpZ2dlckV2ZW50LmpzICovIFwiLi90cmlnZ2VyRXZlbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcblxuXG5cblxuXG5cblxuLyoqXG4gKiBTZXRzIGEgbmV3IGltYWdlIG9iamVjdCBmb3IgYSBnaXZlbiBlbGVtZW50LlxuICpcbiAqIFdpbGwgYWxzbyBhcHBseSBhbiBvcHRpb25hbCB2aWV3cG9ydCBzZXR0aW5nLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgQW4gSFRNTCBFbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2UgQW4gSW1hZ2UgbG9hZGVkIGJ5IGEgQ29ybmVyc3RvbmUgSW1hZ2UgTG9hZGVyXG4gKiBAcGFyYW0ge09iamVjdH0gW3ZpZXdwb3J0XSBBIHNldCBvZiBDb3JuZXJzdG9uZSB2aWV3cG9ydCBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBEcmF3aW5nXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgaW1hZ2UsIHZpZXdwb3J0KSB7XG4gIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Rpc3BsYXlJbWFnZTogcGFyYW1ldGVyIGVsZW1lbnQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICBpZiAoaW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZGlzcGxheUltYWdlOiBwYXJhbWV0ZXIgaW1hZ2UgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICB2YXIgb2xkSW1hZ2UgPSBlbmFibGVkRWxlbWVudC5pbWFnZTtcbiAgZW5hYmxlZEVsZW1lbnQuaW1hZ2UgPSBpbWFnZTtcblxuICBpZiAoZW5hYmxlZEVsZW1lbnQubGF5ZXJzICYmIGVuYWJsZWRFbGVtZW50LmxheWVycy5sZW5ndGgpIHtcbiAgICBPYmplY3QoX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wic2V0TGF5ZXJJbWFnZVwiXSkoZWxlbWVudCwgaW1hZ2UpO1xuICB9XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmFibGVkRWxlbWVudC52aWV3cG9ydCA9IE9iamVjdChfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5jYW52YXMsIGltYWdlKTtcbiAgfSAvLyBNZXJnZSB2aWV3cG9ydFxuXG5cbiAgaWYgKHZpZXdwb3J0KSB7XG4gICAgZm9yICh2YXIgYXR0cm5hbWUgaW4gdmlld3BvcnQpIHtcbiAgICAgIGlmICh2aWV3cG9ydFthdHRybmFtZV0gIT09IG51bGwpIHtcbiAgICAgICAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnRbYXR0cm5hbWVdID0gdmlld3BvcnRbYXR0cm5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBmcmFtZVJhdGU7XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50Lmxhc3RJbWFnZVRpbWVTdGFtcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RJbWFnZSA9IE9iamVjdChfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKSgpIC0gZW5hYmxlZEVsZW1lbnQubGFzdEltYWdlVGltZVN0YW1wO1xuICAgIGZyYW1lUmF0ZSA9ICgxMDAwIC8gdGltZVNpbmNlTGFzdEltYWdlKS50b0ZpeGVkKCk7XG4gIH1cblxuICBlbmFibGVkRWxlbWVudC5sYXN0SW1hZ2VUaW1lU3RhbXAgPSBPYmplY3QoX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIG5ld0ltYWdlRXZlbnREYXRhID0ge1xuICAgIHZpZXdwb3J0OiBlbmFibGVkRWxlbWVudC52aWV3cG9ydCxcbiAgICBlbGVtZW50OiBlbmFibGVkRWxlbWVudC5lbGVtZW50LFxuICAgIGltYWdlOiBlbmFibGVkRWxlbWVudC5pbWFnZSxcbiAgICBvbGRJbWFnZTogb2xkSW1hZ2UsXG4gICAgZW5hYmxlZEVsZW1lbnQ6IGVuYWJsZWRFbGVtZW50LFxuICAgIGZyYW1lUmF0ZTogZnJhbWVSYXRlXG4gIH07XG4gIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5lbGVtZW50LCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0XCJdLk5FV19JTUFHRSwgbmV3SW1hZ2VFdmVudERhdGEpO1xuICBPYmplY3QoX3VwZGF0ZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShlbGVtZW50KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2RyYXcuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vZHJhdy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzICovIFwiLi9pbnRlcm5hbC9kcmF3SW1hZ2UuanNcIik7XG5cblxuLyoqXG4gKiBJbW1lZGlhdGVseSBkcmF3cyB0aGUgZW5hYmxlZCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIERyYXdpbmdcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIE9iamVjdChfaW50ZXJuYWxfZHJhd0ltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9kcmF3SW52YWxpZGF0ZWQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9kcmF3SW52YWxpZGF0ZWQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzICovIFwiLi9pbnRlcm5hbC9kcmF3SW1hZ2UuanNcIik7XG4vKipcbiAqIFRoaXMgbW9kdWxlIGlzIHJlc3BvbnNpYmxlIGZvciBkcmF3aW5nIGludmFsaWRhdGVkIGVuYWJsZWQgZWxlbWVudHNcbiAqL1xuXG5cbi8qKlxuICogRHJhd3MgYWxsIGludmFsaWRhdGVkIGVuYWJsZWQgZWxlbWVudHMgYW5kIGNsZWFycyB0aGUgaW52YWxpZCBmbGFnIGFmdGVyIGRyYXdpbmcgaXRcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBEcmF3aW5nXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBlbmFibGVkRWxlbWVudHMgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRzXCJdKSgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZW5hYmxlZEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVlID0gZW5hYmxlZEVsZW1lbnRzW2ldO1xuXG4gICAgaWYgKGVlLmludmFsaWQgPT09IHRydWUpIHtcbiAgICAgIE9iamVjdChfaW50ZXJuYWxfZHJhd0ltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlZSwgdHJ1ZSk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9lbmFibGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9lbmFibGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXNpemVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVzaXplLmpzICovIFwiLi9yZXNpemUuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2RyYXdJbWFnZVN5bmNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZHJhd0ltYWdlU3luYy5qcyAqLyBcIi4vaW50ZXJuYWwvZHJhd0ltYWdlU3luYy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfcmVxdWVzdEFuaW1hdGlvbkZyYW1lX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyAqLyBcIi4vaW50ZXJuYWwvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF90cnlFbmFibGVXZWJnbF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC90cnlFbmFibGVXZWJnbC5qcyAqLyBcIi4vaW50ZXJuYWwvdHJ5RW5hYmxlV2ViZ2wuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2VuZXJhdGVVVUlEX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dlbmVyYXRlVVVJRC5qcyAqLyBcIi4vZ2VuZXJhdGVVVUlELmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZXZlbnRzLmpzICovIFwiLi9ldmVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldENhbnZhc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9nZXRDYW52YXMuanMgKi8gXCIuL2ludGVybmFsL2dldENhbnZhcy5qc1wiKTtcblxuXG5cblxuXG5cblxuXG5cbi8qKlxyXG4gKiBAbW9kdWxlIEVuYWJsZVxyXG4gKiBUaGlzIG1vZHVsZSBpcyByZXNwb25zaWJsZSBmb3IgZW5hYmxpbmcgYW4gZWxlbWVudCB0byBkaXNwbGF5IGltYWdlcyB3aXRoIGNvcm5lcnN0b25lXHJcbiAqL1xuXG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhbiBFbmFibGVkIEVsZW1lbnQgaGFzIGVpdGhlciBhIGN1cnJlbnRseSBhY3RpdmUgaW1hZ2Ugb3JcclxuICogYSBub24tZW1wdHkgQXJyYXkgb2YgRW5hYmxlZCBFbGVtZW50IExheWVycy5cclxuICpcclxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgQW4gRW5hYmxlZCBFbGVtZW50XHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBFbmFibGVkIEVsZW1lbnQgaGFzIGFuIGFjdGl2ZSBpbWFnZSBvciB2YWxpZCBzZXQgb2YgbGF5ZXJzXHJcbiAqIEBtZW1iZXJvZiBFbmFibGVcclxuICovXG5cbmZ1bmN0aW9uIGhhc0ltYWdlT3JMYXllcnMoZW5hYmxlZEVsZW1lbnQpIHtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmltYWdlICE9PSB1bmRlZmluZWQgfHwgZW5hYmxlZEVsZW1lbnQubGF5ZXJzLmxlbmd0aCA+IDA7XG59XG4vKipcclxuICogRW5hYmxlIGFuIEhUTUwgRWxlbWVudCBmb3IgdXNlIGluIENvcm5lcnN0b25lXHJcbiAqXHJcbiAqIC0gSWYgdGhlcmUgaXMgYSBDYW52YXMgYWxyZWFkeSBwcmVzZW50IHdpdGhpbiB0aGUgSFRNTEVsZW1lbnQsIGFuZCBpdCBoYXMgdGhlIGNsYXNzXHJcbiAqICdjb3JuZXJzdG9uZS1jYW52YXMnLCB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIHRoaXMgZXhpc3RpbmcgQ2FudmFzIGluc3RlYWQgb2YgY3JlYXRpbmdcclxuICogYSBuZXcgb25lLiBUaGlzIG1heSBiZSBoZWxwZnVsIHdoZW4gdXNpbmcgbGlicmFyaWVzIChlLmcuIFJlYWN0LCBWdWUpIHdoaWNoIGRvbid0XHJcbiAqIHdhbnQgdGhpcmQgcGFydGllcyB0byBjaGFuZ2UgdGhlIERPTS5cclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGVuYWJsZWRFbGVtZW50XHJcbiAqXHJcbiAqIEByZXR1cm4ge3ZvaWR9XHJcbiAqIEBtZW1iZXJvZiBFbmFibGVcclxuICovXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykge1xuICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdlbmFibGU6IHBhcmFtZXRlciBlbGVtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfSAvLyBJZiB0aGlzIGVuYWJsZWQgZWxlbWVudCBoYXMgdGhlIG9wdGlvbiBzZXQgZm9yIFdlYkdMLCB3ZSBzaG91bGRcbiAgLy8gQ2hlY2sgaWYgdGhpcyBkZXZpY2UgYWN0dWFsbHkgc3VwcG9ydHMgaXRcblxuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVuZGVyZXIgJiYgb3B0aW9ucy5yZW5kZXJlci50b0xvd2VyQ2FzZSgpID09PSAnd2ViZ2wnKSB7XG4gICAgT2JqZWN0KF9pbnRlcm5hbF90cnlFbmFibGVXZWJnbF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSkob3B0aW9ucyk7XG4gIH1cblxuICB2YXIgY2FudmFzID0gT2JqZWN0KF9pbnRlcm5hbF9nZXRDYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQpO1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSB7XG4gICAgZWxlbWVudDogZWxlbWVudCxcbiAgICBjYW52YXM6IGNhbnZhcyxcbiAgICBpbWFnZTogdW5kZWZpbmVkLFxuICAgIC8vIFdpbGwgYmUgc2V0IG9uY2UgaW1hZ2UgaXMgbG9hZGVkXG4gICAgaW52YWxpZDogZmFsc2UsXG4gICAgLy8gVHJ1ZSBpZiBpbWFnZSBuZWVkcyB0byBiZSBkcmF3biwgZmFsc2UgaWYgbm90XG4gICAgbmVlZHNSZWRyYXc6IHRydWUsXG4gICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgbGF5ZXJzOiBbXSxcbiAgICBkYXRhOiB7fSxcbiAgICByZW5kZXJpbmdUb29sczoge30sXG4gICAgdXVpZDogT2JqZWN0KF9nZW5lcmF0ZVVVSURfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcImRlZmF1bHRcIl0pKClcbiAgfTtcbiAgT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImFkZEVuYWJsZWRFbGVtZW50XCJdKShlbmFibGVkRWxlbWVudCk7XG4gIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcImRlZmF1bHRcIl0uRUxFTUVOVF9FTkFCTEVELCBlbmFibGVkRWxlbWVudCk7XG4gIE9iamVjdChfcmVzaXplX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbGVtZW50LCB0cnVlKTtcbiAgLyoqXHJcbiAgICogRHJhdyB0aGUgaW1hZ2UgaW1tZWRpYXRlbHlcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gdGltZXN0YW1wIFRoZSBjdXJyZW50IHRpbWUgZm9yIHdoZW4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHN0YXJ0cyB0byBmaXJlIGNhbGxiYWNrc1xyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAqIEBtZW1iZXJvZiBEcmF3aW5nXHJcbiAgICovXG5cbiAgZnVuY3Rpb24gZHJhdyh0aW1lc3RhbXApIHtcbiAgICBpZiAoZW5hYmxlZEVsZW1lbnQuY2FudmFzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXZlbnREZXRhaWxzID0ge1xuICAgICAgZW5hYmxlZEVsZW1lbnQ6IGVuYWJsZWRFbGVtZW50LFxuICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcbiAgICB9O1xuICAgIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5lbGVtZW50LCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJkZWZhdWx0XCJdLlBSRV9SRU5ERVIsIGV2ZW50RGV0YWlscyk7XG5cbiAgICBpZiAoZW5hYmxlZEVsZW1lbnQubmVlZHNSZWRyYXcgJiYgaGFzSW1hZ2VPckxheWVycyhlbmFibGVkRWxlbWVudCkpIHtcbiAgICAgIE9iamVjdChfaW50ZXJuYWxfZHJhd0ltYWdlU3luY19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGVuYWJsZWRFbGVtZW50LmludmFsaWQpO1xuICAgIH1cblxuICAgIE9iamVjdChfaW50ZXJuYWxfcmVxdWVzdEFuaW1hdGlvbkZyYW1lX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKShkcmF3KTtcbiAgfVxuXG4gIGRyYXcoKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2VuYWJsZWRFbGVtZW50RGF0YS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2VuYWJsZWRFbGVtZW50RGF0YS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBnZXRFbGVtZW50RGF0YSwgcmVtb3ZlRWxlbWVudERhdGEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0RWxlbWVudERhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRFbGVtZW50RGF0YTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlRWxlbWVudERhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW1vdmVFbGVtZW50RGF0YTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgYW55IGRhdGEgZm9yIGEgQ29ybmVyc3RvbmUgZW5hYmxlZEVsZW1lbnQgZm9yIGEgc3BlY2lmaWMgc3RyaW5nXG4gKiBkYXRhVHlwZVxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgQW4gSFRNTCBFbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKiBAcGFyYW0ge3N0cmluZ30gZGF0YVR5cGUgQSBzdHJpbmcgbmFtZSBmb3IgYW4gYXJiaXRyYXJ5IHNldCBvZiBkYXRhXG4gKiBAcmV0dXJucyB7Kn0gV2hhdGV2ZXIgZGF0YSBpcyBzdG9yZWQgZm9yIHRoaXMgZW5hYmxlZCBlbGVtZW50XG4gKi9cblxuZnVuY3Rpb24gZ2V0RWxlbWVudERhdGEoZWxlbWVudCwgZGF0YVR5cGUpIHtcbiAgdmFyIGVlID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcblxuICBpZiAoZWUuZGF0YS5oYXNPd25Qcm9wZXJ0eShkYXRhVHlwZSkgPT09IGZhbHNlKSB7XG4gICAgZWUuZGF0YVtkYXRhVHlwZV0gPSB7fTtcbiAgfVxuXG4gIHJldHVybiBlZS5kYXRhW2RhdGFUeXBlXTtcbn1cbi8qKlxuICogQ2xlYXJzIGFueSBkYXRhIGZvciBhIENvcm5lcnN0b25lIGVuYWJsZWRFbGVtZW50IGZvciBhIHNwZWNpZmljIHN0cmluZ1xuICogZGF0YVR5cGVcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IEFuIEhUTUwgRWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGFUeXBlIEEgc3RyaW5nIG5hbWUgZm9yIGFuIGFyYml0cmFyeSBzZXQgb2YgZGF0YVxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUVsZW1lbnREYXRhKGVsZW1lbnQsIGRhdGFUeXBlKSB7XG4gIHZhciBlZSA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIGRlbGV0ZSBlZS5kYXRhW2RhdGFUeXBlXTtcbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9lbmFibGVkRWxlbWVudHMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9lbmFibGVkRWxlbWVudHMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZ2V0RW5hYmxlZEVsZW1lbnQsIGFkZEVuYWJsZWRFbGVtZW50LCBnZXRFbmFibGVkRWxlbWVudHNCeUltYWdlSWQsIGdldEVuYWJsZWRFbGVtZW50cyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRFbmFibGVkRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEVuYWJsZWRFbGVtZW50OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRFbmFibGVkRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZEVuYWJsZWRFbGVtZW50OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRFbmFibGVkRWxlbWVudHNCeUltYWdlSWRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRFbmFibGVkRWxlbWVudHNCeUltYWdlSWQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEVuYWJsZWRFbGVtZW50c1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEVuYWJsZWRFbGVtZW50czsgfSk7XG52YXIgZW5hYmxlZEVsZW1lbnRzID0gW107XG4vKipcbiAqIEBtb2R1bGUgRW5hYmxlZEVsZW1lbnRzXG4gKi9cblxuLyoqXG4gKiBAbW9kdWxlIE9iamVjdHNcbiAqL1xuXG4vKipcbiAqIEEgdHdvLWRpbWVuc2lvbmFsIHZlY3RvclxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IHZlYzJcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcGFyYW0ge051bWJlcn0geCAtIFRoZSB4IGRpc3RhbmNlXG4gKiBAcGFyYW0ge051bWJlcn0geSAtIFRoZSB5IGRpc3RhbmNlXG4gKi9cblxuLyoqXG4gKiBWT0lcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWT0lcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcGFyYW0ge051bWJlcn0gd2luZG93V2lkdGggLSBXaW5kb3cgV2lkdGggZm9yIGRpc3BsYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSB3aW5kb3dDZW50ZXIgLSBXaW5kb3cgQ2VudGVyIGZvciBkaXNwbGF5XG4gKi9cblxuLyoqXG4gKiBMb29rdXAgVGFibGUgQXJyYXlcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMVVRcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcHJvcGVydHkge051bWJlcn0gZmlyc3RWYWx1ZU1hcHBlZFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG51bUJpdHNQZXJFbnRyeVxuICogQHByb3BlcnR5IHtBcnJheX0gbHV0XG4gKi9cblxuLyoqXG4gKiBJbWFnZSBTdGF0aXN0aWNzIE9iamVjdFxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEltYWdlU3RhdHNcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcHJvcGVydHkge051bWJlcn0gW2xhc3RHZXRQaXhlbERhdGFUaW1lXSBUaGUgdGltZSBpbiBtcyB0YWtlbiB0byByZXRyaWV2ZSBzdG9yZWQgcGl4ZWxzIHJlcXVpcmVkIHRvIGRyYXcgdGhlIGltYWdlXG4gKiBAcHJvcGVydHkge051bWJlcn0gW2xhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWVdIFRoZSB0aW1lIGluIG1zIHRha2VuIHRvIG1hcCBmcm9tIHN0b3JlZCBwaXhlbCBhcnJheSB0byBjYW52YXMgcGl4ZWwgYXJyYXlcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbbGFzdFB1dEltYWdlRGF0YVRpbWVdIFRoZSB0aW1lIGluIG1zIHRha2VuIGZvciBwdXRJbWFnZURhdGEgdG8gcHV0IHRoZSBjYW52YXMgcGl4ZWwgZGF0YSBpbnRvIHRoZSBjYW52YXMgY29udGV4dFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtsYXN0UmVuZGVyVGltZV0gVGhlIHRvdGFsIHRpbWUgaW4gbXMgdGFrZW4gZm9yIHRoZSBlbnRpcmUgcmVuZGVyaW5nIGZ1bmN0aW9uIHRvIHJ1blxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtsYXN0THV0R2VuZXJhdGVUaW1lXSBUaGUgdGltZSBpbiBtcyB0YWtlbiB0byBnZW5lcmF0ZSB0aGUgbG9va3VwIHRhYmxlIGZvciB0aGUgaW1hZ2VcbiAqL1xuXG4vKipcbiAqIEFuIEltYWdlIE9iamVjdCBpbiBDb3JuZXJzdG9uZVxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEltYWdlXG4gKiBAbWVtYmVyb2YgT2JqZWN0c1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGltYWdlSWQgLSBUaGUgaW1hZ2VJZCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbWFnZSBvYmplY3RcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtaW5QaXhlbFZhbHVlIC0gdGhlIG1pbmltdW0gc3RvcmVkIHBpeGVsIHZhbHVlIGluIHRoZSBpbWFnZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1heFBpeGVsVmFsdWUgLSB0aGUgbWF4aW11bSBzdG9yZWQgcGl4ZWwgdmFsdWUgaW4gdGhlIGltYWdlXG4gKiBAcHJvcGVydHkge051bWJlcn0gc2xvcGUgLSB0aGUgcmVzY2FsZSBzbG9wZSB0byBjb252ZXJ0IHN0b3JlZCBwaXhlbCB2YWx1ZXMgdG8gbW9kYWxpdHkgcGl4ZWwgdmFsdWVzIG9yIDEgaWYgbm90IHNwZWNpZmllZFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IGludGVyY2VwdCAtIHRoZSByZXNjYWxlIGludGVyY2VwdCB1c2VkIHRvIGNvbnZlcnQgc3RvcmVkIHBpeGVsIHZhbHVlcyB0byBtb2RhbGl0eSB2YWx1ZXMgb3IgMCBpZiBub3Qgc3BlY2lmaWVkXG4gKiBAcHJvcGVydHkge051bWJlcn0gd2luZG93Q2VudGVyIC0gdGhlIGRlZmF1bHQgd2luZG93Q2VudGVyIHRvIGFwcGx5IHRvIHRoZSBpbWFnZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHdpbmRvd1dpZHRoIC0gdGhlIGRlZmF1bHQgd2luZG93V2lkdGggdG8gYXBwbHkgdG8gdGhlIGltYWdlXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBnZXRQaXhlbERhdGEgLSBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdW5kZXJseWluZyBwaXhlbCBkYXRhLiBBbiBhcnJheSBvZiBpbnRlZ2VycyBmb3IgZ3JheXNjYWxlIGFuZCBhbiBhcnJheSBvZiBSR0JBIGZvciBjb2xvclxuICogQHByb3BlcnR5IHtmdW5jdGlvbn0gZ2V0SW1hZ2VEYXRhIC0gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBjYW52YXMgaW1hZ2VEYXRhIG9iamVjdCBmb3IgdGhlIGltYWdlLiBUaGlzIGlzIG9ubHkgbmVlZGVkIGZvciBjb2xvciBpbWFnZXNcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGdldENhbnZhcyAtIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgY2FudmFzIGVsZW1lbnQgd2l0aCB0aGUgaW1hZ2UgbG9hZGVkIGludG8gaXQuIFRoaXMgaXMgb25seSBuZWVkZWQgZm9yIGNvbG9yIGltYWdlcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGdldEltYWdlIC0gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBKYXZhU2NyaXB0IEltYWdlIG9iamVjdCB3aXRoIHRoZSBpbWFnZSBkYXRhLiBUaGlzIGlzIG9wdGlvbmFsIGFuZCB0eXBpY2FsbHkgdXNlZCBmb3IgaW1hZ2VzIGVuY29kZWQgaW4gc3RhbmRhcmQgd2ViIEpQRUcgYW5kIFBORyBmb3JtYXRzXG4gKiBAcHJvcGVydHkge051bWJlcn0gcm93cyAtIG51bWJlciBvZiByb3dzIGluIHRoZSBpbWFnZS4gVGhpcyBpcyB0aGUgc2FtZSBhcyBoZWlnaHQgYnV0IGR1cGxpY2F0ZWQgZm9yIGNvbnZlbmllbmNlXG4gKiBAcHJvcGVydHkge051bWJlcn0gY29sdW1ucyAtIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBpbWFnZS4gVGhpcyBpcyB0aGUgc2FtZSBhcyB3aWR0aCBidXQgZHVwbGljYXRlZCBmb3IgY29udmVuaWVuY2VcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBoZWlnaHQgLSB0aGUgaGVpZ2h0IG9mIHRoZSBpbWFnZS4gVGhpcyBpcyB0aGUgc2FtZSBhcyByb3dzIGJ1dCBkdXBsaWNhdGVkIGZvciBjb252ZW5pZW5jZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHdpZHRoIC0gdGhlIHdpZHRoIG9mIHRoZSBpbWFnZS4gVGhpcyBpcyB0aGUgc2FtZSBhcyBjb2x1bW5zIGJ1dCBkdXBsaWNhdGVkIGZvciBjb252ZW5pZW5jZVxuICogQHByb3BlcnR5IHtCb29sZWFufSBjb2xvciAtIHRydWUgaWYgcGl4ZWwgZGF0YSBpcyBSR0IsIGZhbHNlIGlmIGdyYXlzY2FsZVxuICogQHByb3BlcnR5IHtPYmplY3R9IGx1dCAtIFRoZSBMb29rdXAgVGFibGVcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gcmdiYSAtIElzIHRoZSBjb2xvciBwaXhlbCBkYXRhIHN0b3JlZCBpbiBSR0JBP1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IGNvbHVtblBpeGVsU3BhY2luZyAtIGhvcml6b250YWwgZGlzdGFuY2UgYmV0d2VlbiB0aGUgbWlkZGxlIG9mIGVhY2ggcGl4ZWwgKG9yIHdpZHRoIG9mIGVhY2ggcGl4ZWwpIGluIG1tIG9yIHVuZGVmaW5lZCBpZiBub3Qga25vd25cbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSByb3dQaXhlbFNwYWNpbmcgLSB2ZXJ0aWNhbCBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBtaWRkbGUgb2YgZWFjaCBwaXhlbCAob3IgaGVpZ2h0IG9mIGVhY2ggcGl4ZWwpIGluIG1tIG9yIHVuZGVmaW5lZCBpZiBub3Qga25vd25cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaW52ZXJ0IC0gdHJ1ZSBpZiB0aGUgdGhlIGltYWdlIHNob3VsZCBpbml0aWFsbHkgYmUgZGlzcGxheWVkIGJlIGludmVydGVkLCBmYWxzZSBpZiBub3QuIFRoaXMgaXMgaGVyZSBtYWlubHkgdG8gc3VwcG9ydCBESUNPTSBpbWFnZXMgd2l0aCBhIHBob3RvbWV0cmljIGludGVycHJldGF0aW9uIG9mIE1PTk9DSFJPTUUxXG4gKiBAcHJvcGVydHkge051bWJlcn0gc2l6ZUluQnl0ZXMgLSB0aGUgbnVtYmVyIG9mIGJ5dGVzIHVzZWQgdG8gc3RvcmUgdGhlIHBpeGVscyBmb3IgdGhpcyBpbWFnZS5cbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2ZhbHNlQ29sb3I9ZmFsc2VdIC0gV2hldGhlciBvciBub3QgdGhlIGltYWdlIGhhcyB1bmRlcmdvbmUgZmFsc2UgY29sb3IgbWFwcGluZ1xuICogQHByb3BlcnR5IHtBcnJheX0gW29yaWdQaXhlbERhdGFdIC0gT3JpZ2luYWwgcGl4ZWwgZGF0YSBmb3IgYW4gaW1hZ2UgYWZ0ZXIgaXQgaGFzIHVuZGVyZ29uZSBmYWxzZSBjb2xvciBtYXBwaW5nXG4gKiBAcHJvcGVydHkge0ltYWdlU3RhdHN9IFtzdGF0c10gLSBTdGF0aXN0aWNzIGZvciB0aGUgbGFzdCByZWRyYXcgb2YgdGhlIGltYWdlXG4gKiBAcHJvcGVydHkge09iamVjdH0gY2FjaGVkTHV0IC0gQ2FjaGVkIExvb2t1cCBUYWJsZSBmb3IgdGhpcyBpbWFnZS5cbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfENvbG9ybWFwfSBbY29sb3JtYXBdIC0gRGVwcmVhY3RlZC4gVXNlIHZpZXdwb3J0LmNvbG9ybWFwIGluc3RlYWQuIGFuIG9wdGlvbmFsIGNvbG9ybWFwIElEIG9yIGNvbG9ybWFwIG9iamVjdCAoZnJvbSBjb2xvcnMvY29sb3JtYXAuanMpLiBUaGlzIHdpbGwgYmUgYXBwbGllZCBkdXJpbmcgcmVuZGVyaW5nIHRvIGNvbnZlcnQgdGhlIGltYWdlIHRvIHBzZXVkb2NvbG9yXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtsYWJlbG1hcD1mYWxzZV0gLSB3aGV0aGVyIG9yIG5vdCB0byByZW5kZXIgdGhpcyBpbWFnZSBhcyBhIGxhYmVsIG1hcCAoaS5lLiBza2lwIG1vZGFsaXR5IGFuZCBWT0kgTFVUIHBpcGVsaW5lcyBhbmQgdXNlIG9ubHkgYSBjb2xvciBsb29rdXAgdGFibGUpXG4gKi9cblxuLyoqXG4gKiBBIFZpZXdwb3J0IFNldHRpbmdzIE9iamVjdCBDb3JuZXJzdG9uZVxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdwb3J0XG4gKiBAbWVtYmVyb2YgT2JqZWN0c1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IFtzY2FsZT0xLjBdIC0gVGhlIHNjYWxlIGFwcGxpZWQgdG8gdGhlIGltYWdlLiBBIHNjYWxlIG9mIDEuMCB3aWxsIGRpc3BsYXkgbm8gem9vbSAob25lIGltYWdlIHBpeGVsIHRha2VzIHVwIG9uZSBzY3JlZW4gcGl4ZWwpLiBBIHNjYWxlIG9mIDIuMCB3aWxsIGJlIGRvdWJsZSB6b29tIGFuZCBhIHNjYWxlIG9mIC41IHdpbGwgYmUgem9vbWVkIG91dCBieSAyeFxuICogQHByb3BlcnR5IHt2ZWMyfSBbdHJhbnNsYXRpb25dIC0gQW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB4IGFuZCB5IHdoaWNoIGRlc2NyaWJlIHRoZSB0cmFuc2xhdGlvbiB0byBhcHBseSBpbiB0aGUgcGl4ZWwgY29vcmRpbmF0ZSBzeXN0ZW0uIE5vdGUgdGhhdCB0aGUgaW1hZ2UgaXMgaW5pdGlhbGx5IGRpc3BsYXllZCBjZW50ZXJlZCBpbiB0aGUgZW5hYmxlZCBlbGVtZW50IHdpdGggYSB4IGFuZCB5IHRyYW5zbGF0aW9uIG9mIDAgYW5kIDAgcmVzcGVjdGl2ZWx5LlxuICogQHByb3BlcnR5IHtWT0l9IFt2b2ldIC0gYW4gb2JqZWN0IHdpdGggcHJvcGVydGllcyB3aW5kb3dXaWR0aCBhbmQgd2luZG93Q2VudGVyLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW52ZXJ0PWZhbHNlXSAtIFdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBpcyBpbnZlcnRlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpeGVsUmVwbGljYXRpb249ZmFsc2VdIC0gdHJ1ZSBpZiB0aGUgaW1hZ2Ugc21vb3RoIC8gaW50ZXJwb2xhdGlvbiBzaG91bGQgYmUgdXNlZCB3aGVuIHpvb21lZCBpbiBvbiB0aGUgaW1hZ2Ugb3IgZmFsc2UgaWYgcGl4ZWwgcmVwbGljYXRpb24gc2hvdWxkIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtoZmxpcD1mYWxzZV0gLSB0cnVlIGlmIHRoZSBpbWFnZSBpcyBmbGlwcGVkIGhvcml6b250YWxseS4gRGVmYXVsdCBpcyBmYWxzZVxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmZsaXA9ZmFsc2VdIC0gdHJ1ZSBpZiB0aGUgaW1hZ2UgaXMgZmxpcHBlZCB2ZXJ0aWNhbGx5LiBEZWZhdWx0IGlzIGZhbHNlXG4gKiBAcHJvcGVydHkge051bWJlcn0gW3JvdGF0aW9uPTBdIC0gdGhlIHJvdGF0aW9uIG9mIHRoZSBpbWFnZSAoOTAgZGVncmVlIGluY3JlbWVudHMpLiBEZWZhdWx0IGlzIDBcbiAqIEBwcm9wZXJ0eSB7TFVUfSBbbW9kYWxpdHlMVVRdIC0gdGhlIG1vZGFsaXR5IExVVCB0byBhcHBseSBvciB1bmRlZmluZWQgaWYgbm9uZVxuICogQHByb3BlcnR5IHtMVVR9IFt2b2lMVVRdIC0gdGhlIG1vZGFsaXR5IExVVCB0byBhcHBseSBvciB1bmRlZmluZWQgaWYgbm9uZVxuICogQHByb3BlcnR5IHtTdHJpbmd8Q29sb3JtYXB9IFtjb2xvcm1hcF0gLSBhbiBvcHRpb25hbCBjb2xvcm1hcCBJRCBvciBjb2xvcm1hcCBvYmplY3QgKGZyb20gY29sb3JzL2NvbG9ybWFwLmpzKS4gVGhpcyB3aWxsIGJlIGFwcGxpZWQgZHVyaW5nIHJlbmRlcmluZyB0byBjb252ZXJ0IHRoZSBpbWFnZSB0byBwc2V1ZG9jb2xvclxuICogQHByb3BlcnR5IHtCb29sZWFufSBbbGFiZWxtYXA9ZmFsc2VdIC0gd2hldGhlciBvciBub3QgdG8gcmVuZGVyIHRoaXMgaW1hZ2UgYXMgYSBsYWJlbCBtYXAgKGkuZS4gc2tpcCBtb2RhbGl0eSBhbmQgVk9JIExVVCBwaXBlbGluZXMgYW5kIHVzZSBvbmx5IGEgY29sb3IgbG9va3VwIHRhYmxlKVxuICovXG5cbi8qKlxuICogQW4gRW5hYmxlZCBFbGVtZW50IGluIENvcm5lcnN0b25lXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gRW5hYmxlZEVsZW1lbnRcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGhlIERPTSBlbGVtZW50IHdoaWNoIGhhcyBiZWVuIGVuYWJsZWQgZm9yIHVzZSBieSBDb3JuZXJzdG9uZVxuICogQHByb3BlcnR5IHtJbWFnZX0gW2ltYWdlXSAtIFRoZSBpbWFnZSBjdXJyZW50bHkgZGlzcGxheWVkIGluIHRoZSBlbmFibGVkRWxlbWVudFxuICogQHByb3BlcnR5IHtWaWV3cG9ydH0gW3ZpZXdwb3J0XSAtIFRoZSBjdXJyZW50IHZpZXdwb3J0IHNldHRpbmdzIG9mIHRoZSBlbmFibGVkRWxlbWVudFxuICogQHByb3BlcnR5IHtIVE1MQ2FudmFzRWxlbWVudH0gW2NhbnZhc10gLSBUaGUgY3VycmVudCBjYW52YXMgZm9yIHRoaXMgZW5hYmxlZEVsZW1lbnRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaW52YWxpZCAtIFdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBwaXhlbCBkYXRhIHVuZGVybHlpbmcgdGhlIGVuYWJsZWRFbGVtZW50IGhhcyBiZWVuIGNoYW5nZWQsIG5lY2Vzc2l0YXRpbmcgYSByZWRyYXdcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gbmVlZHNSZWRyYXcgLSBBIGZsYWcgZm9yIHRyaWdnZXJpbmcgYSByZWRyYXcgb2YgdGhlIGNhbnZhcyB3aXRob3V0IHJlLXJldHJpZXZpbmcgdGhlIHBpeGVsIGRhdGEsIHNpbmNlIGl0IHJlbWFpbnMgdmFsaWRcbiAqIEBwcm9wZXJ0eSB7RW5hYmxlZEVsZW1lbnRMYXllcltdfSBbbGF5ZXJzXSAtIFRoZSBsYXllcnMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgdG8gdGhlIGVuYWJsZWRFbGVtZW50XG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtzeW5jVmlld3BvcnRzXSAtIFdoZXRoZXIgb3Igbm90IHRvIHN5bmNocm9uaXplIHRoZSB2aWV3cG9ydCBwYXJhbWV0ZXJzXG4gKiBmb3IgZWFjaCBvZiB0aGUgZW5hYmxlZCBlbGVtZW50J3MgbGF5ZXJzXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IFtsYXN0U3luY1ZpZXdwb3J0c1N0YXRlXSAtIFRoZSBwcmV2aW91cyBzdGF0ZSBmb3IgdGhlIHN5bmMgdmlld3BvcnQgYm9vbGVhblxuICovXG5cbi8qKlxuICogQW4gRW5hYmxlZCBFbGVtZW50IExheWVyIGluIENvcm5lcnN0b25lXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gRW5hYmxlZEVsZW1lbnRMYXllclxuICogQG1lbWJlcm9mIE9iamVjdHNcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBUaGUgRE9NIGVsZW1lbnQgd2hpY2ggaGFzIGJlZW4gZW5hYmxlZCBmb3IgdXNlIGJ5IENvcm5lcnN0b25lXG4gKiBAcHJvcGVydHkge0ltYWdlfSBbaW1hZ2VdIC0gVGhlIGltYWdlIGN1cnJlbnRseSBkaXNwbGF5ZWQgaW4gdGhlIGVuYWJsZWRFbGVtZW50XG4gKiBAcHJvcGVydHkge1ZpZXdwb3J0fSBbdmlld3BvcnRdIC0gVGhlIGN1cnJlbnQgdmlld3BvcnQgc2V0dGluZ3Mgb2YgdGhlIGVuYWJsZWRFbGVtZW50XG4gKiBAcHJvcGVydHkge0hUTUxDYW52YXNFbGVtZW50fSBbY2FudmFzXSAtIFRoZSBjdXJyZW50IGNhbnZhcyBmb3IgdGhpcyBlbmFibGVkRWxlbWVudFxuICogQHByb3BlcnR5IHtPYmplY3R9IFtvcHRpb25zXSAtIExheWVyIGRyYXdpbmcgb3B0aW9uc1xuICogQHByb3BlcnR5IHtCb29sZWFufSBpbnZhbGlkIC0gV2hldGhlciBvciBub3QgdGhlIGltYWdlIHBpeGVsIGRhdGEgdW5kZXJseWluZyB0aGUgZW5hYmxlZEVsZW1lbnQgaGFzIGJlZW4gY2hhbmdlZCwgbmVjZXNzaXRhdGluZyBhIHJlZHJhd1xuICogQHByb3BlcnR5IHtCb29sZWFufSBuZWVkc1JlZHJhdyAtIEEgZmxhZyBmb3IgdHJpZ2dlcmluZyBhIHJlZHJhdyBvZiB0aGUgY2FudmFzIHdpdGhvdXQgcmUtcmV0cmlldmluZyB0aGUgcGl4ZWwgZGF0YSwgc2luY2UgaXQgcmVtYWlucyB2YWxpZFxuICovXG5cbi8qKlxuICogQW4gSW1hZ2UgTG9hZCBPYmplY3RcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJbWFnZUxvYWRPYmplY3RcbiAqIEBtZW1iZXJvZiBPYmplY3RzXG4gKiBAcHJvcGVydHkge1Byb21pc2V9IHByb21pc2UgLSBUaGUgUHJvbWlzZSB0cmFja2luZyB0aGUgbG9hZGluZyBvZiB0aGlzIGltYWdlXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufHVuZGVmaW5lZH0gY2FuY2VsRm4gLSBBIGZ1bmN0aW9uIHRvIGNhbmNlbCB0aGUgaW1hZ2UgbG9hZCByZXF1ZXN0XG4gKi9cblxuLyoqXG4gKiBSZXRyaWV2ZXMgYSBDb3JuZXJzdG9uZSBFbmFibGVkIEVsZW1lbnQgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqXG4gKiBAcmV0dXJucyB7RW5hYmxlZEVsZW1lbnR9IEEgQ29ybmVyc3RvbmUgRW5hYmxlZCBFbGVtZW50XG4gKiBAbWVtYmVyb2YgRW5hYmxlZEVsZW1lbnRzXG4gKi9cblxuZnVuY3Rpb24gZ2V0RW5hYmxlZEVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZXRFbmFibGVkRWxlbWVudDogcGFyYW1ldGVyIGVsZW1lbnQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZWRFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChlbmFibGVkRWxlbWVudHNbaV0uZWxlbWVudCA9PT0gZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVuYWJsZWRFbGVtZW50c1tpXTtcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ2VsZW1lbnQgbm90IGVuYWJsZWQnKTtcbn1cbi8qKlxuICogQWRkcyBhIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudCBvYmplY3QgdG8gdGhlIGNlbnRyYWwgc3RvcmUgb2YgZW5hYmxlZEVsZW1lbnRzXG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgQSBDb3JuZXJzdG9uZSBlbmFibGVkRWxlbWVudCBPYmplY3RcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIEVuYWJsZWRFbGVtZW50c1xuICovXG5cbmZ1bmN0aW9uIGFkZEVuYWJsZWRFbGVtZW50KGVuYWJsZWRFbGVtZW50KSB7XG4gIGlmIChlbmFibGVkRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZXRFbmFibGVkRWxlbWVudDogZW5hYmxlZEVsZW1lbnQgZWxlbWVudCBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGVuYWJsZWRFbGVtZW50cy5wdXNoKGVuYWJsZWRFbGVtZW50KTtcbn1cbi8qKlxuICogQWRkcyBhIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudCBvYmplY3QgdG8gdGhlIGNlbnRyYWwgc3RvcmUgb2YgZW5hYmxlZEVsZW1lbnRzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltYWdlSWQgQSBDb3JuZXJzdG9uZSBJbWFnZSBJRFxuICogQHJldHVybnMge0VuYWJsZWRFbGVtZW50W119IEFuIEFycmF5IG9mIENvcm5lcnN0b25lIGVuYWJsZWRFbGVtZW50IE9iamVjdHNcbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudHNcbiAqL1xuXG5mdW5jdGlvbiBnZXRFbmFibGVkRWxlbWVudHNCeUltYWdlSWQoaW1hZ2VJZCkge1xuICB2YXIgZWVzID0gW107XG4gIGVuYWJsZWRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCkge1xuICAgIGlmIChlbmFibGVkRWxlbWVudC5pbWFnZSAmJiBlbmFibGVkRWxlbWVudC5pbWFnZS5pbWFnZUlkID09PSBpbWFnZUlkKSB7XG4gICAgICBlZXMucHVzaChlbmFibGVkRWxlbWVudCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGVlcztcbn1cbi8qKlxuICogUmV0cmlldmUgYWxsIG9mIHRoZSBjdXJyZW50bHkgZW5hYmxlZCBDb3JuZXJzdG9uZSBlbGVtZW50c1xuICpcbiAqIEByZXR1cm4ge0VuYWJsZWRFbGVtZW50W119IEFuIEFycmF5IG9mIENvcm5lcnN0b25lIGVuYWJsZWRFbGVtZW50IE9iamVjdHNcbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudHNcbiAqL1xuXG5mdW5jdGlvbiBnZXRFbmFibGVkRWxlbWVudHMoKSB7XG4gIHJldHVybiBlbmFibGVkRWxlbWVudHM7XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZXZlbnRzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vZXZlbnRzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQsIGV2ZW50cyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJldmVudHNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBldmVudHM7IH0pO1xuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG52YXIgRVZFTlRTID0ge1xuICBORVdfSU1BR0U6ICdjb3JuZXJzdG9uZW5ld2ltYWdlJyxcbiAgSU5WQUxJREFURUQ6ICdjb3JuZXJzdG9uZWludmFsaWRhdGVkJyxcbiAgUFJFX1JFTkRFUjogJ2Nvcm5lcnN0b25lcHJlcmVuZGVyJyxcbiAgSU1BR0VfQ0FDSEVfTUFYSU1VTV9TSVpFX0NIQU5HRUQ6ICdjb3JuZXJzdG9uZWltYWdlY2FjaGVtYXhpbXVtc2l6ZWNoYW5nZWQnLFxuICBJTUFHRV9DQUNIRV9QUk9NSVNFX1JFTU9WRUQ6ICdjb3JuZXJzdG9uZWltYWdlY2FjaGVwcm9taXNlcmVtb3ZlZCcsXG4gIElNQUdFX0NBQ0hFX0ZVTEw6ICdjb3JuZXJzdG9uZWltYWdlY2FjaGVmdWxsJyxcbiAgSU1BR0VfQ0FDSEVfQ0hBTkdFRDogJ2Nvcm5lcnN0b25laW1hZ2VjYWNoZWNoYW5nZWQnLFxuICBXRUJHTF9URVhUVVJFX1JFTU9WRUQ6ICdjb3JuZXJzdG9uZXdlYmdsdGV4dHVyZXJlbW92ZWQnLFxuICBXRUJHTF9URVhUVVJFX0NBQ0hFX0ZVTEw6ICdjb3JuZXJzdG9uZXdlYmdsdGV4dHVyZWNhY2hlZnVsbCcsXG4gIElNQUdFX0xPQURFRDogJ2Nvcm5lcnN0b25laW1hZ2Vsb2FkZWQnLFxuICBJTUFHRV9MT0FEX1BST0dSRVNTOiAnY29ybmVyc3RvbmVpbWFnZWxvYWRwcm9ncmVzcycsXG4gIElNQUdFX0xPQURfRkFJTEVEOiAnY29ybmVyc3RvbmVpbWFnZWxvYWRmYWlsZWQnLFxuICBFTEVNRU5UX1JFU0laRUQ6ICdjb3JuZXJzdG9uZWVsZW1lbnRyZXNpemVkJyxcbiAgSU1BR0VfUkVOREVSRUQ6ICdjb3JuZXJzdG9uZWltYWdlcmVuZGVyZWQnLFxuICBMQVlFUl9BRERFRDogJ2Nvcm5lcnN0b25lbGF5ZXJhZGRlZCcsXG4gIExBWUVSX1JFTU9WRUQ6ICdjb3JuZXJzdG9uZWxheWVycmVtb3ZlZCcsXG4gIEFDVElWRV9MQVlFUl9DSEFOR0VEOiAnY29ybmVyc3RvbmVhY3RpdmVsYXllcmNoYW5nZWQnLFxuICBFTEVNRU5UX0RJU0FCTEVEOiAnY29ybmVyc3RvbmVlbGVtZW50ZGlzYWJsZWQnLFxuICBFTEVNRU5UX0VOQUJMRUQ6ICdjb3JuZXJzdG9uZWVsZW1lbnRlbmFibGVkJ1xufTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoRVZFTlRTKTtcbi8qKlxuICogRXZlbnRUYXJnZXQgLSBQcm92aWRlcyB0aGUgW0V2ZW50VGFyZ2V0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRXZlbnRUYXJnZXQpIGludGVyZmFjZVxuICpcbiAqIEBjbGFzc1xuICogQG1lbWJlcm9mIFBvbHlmaWxsc1xuICovXG5cbnZhciBFdmVudFRhcmdldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50VGFyZ2V0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudFRhcmdldCk7XG5cbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xuICAgIHRoaXMubmFtZXNwYWNlcyA9IHt9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEV2ZW50VGFyZ2V0LCBbe1xuICAgIGtleTogXCJhZGRFdmVudE5hbWVzcGFjZUxpc3RlbmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TmFtZXNwYWNlTGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHtcbiAgICAgIGlmICh0eXBlLmluZGV4T2YoJy4nKSA8PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5uYW1lc3BhY2VzW3R5cGVdID0gY2FsbGJhY2s7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZS5zcGxpdCgnLicpWzBdLCBjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUV2ZW50TmFtZXNwYWNlTGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRXZlbnROYW1lc3BhY2VMaXN0ZW5lcih0eXBlKSB7XG4gICAgICBpZiAodHlwZS5pbmRleE9mKCcuJykgPD0gMCB8fCAhdGhpcy5uYW1lc3BhY2VzW3R5cGVdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUuc3BsaXQoJy4nKVswXSwgdGhpcy5uYW1lc3BhY2VzW3R5cGVdKTtcbiAgICAgIGRlbGV0ZSB0aGlzLm5hbWVzcGFjZXNbdHlwZV07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZEV2ZW50TGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgYW4gZXZlbnQgbmFtZXNwYWNlXG4gICAgICBpZiAodHlwZS5pbmRleE9mKCcuJykgPiAwKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnROYW1lc3BhY2VMaXN0ZW5lcih0eXBlLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLmxpc3RlbmVycykpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0gPSBbXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaykge1xuICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgYW4gZXZlbnQgbmFtZXNwYWNlXG4gICAgICBpZiAodHlwZS5pbmRleE9mKCcuJykgPiAwKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnROYW1lc3BhY2VMaXN0ZW5lcih0eXBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoISh0eXBlIGluIHRoaXMubGlzdGVuZXJzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFjayA9IHRoaXMubGlzdGVuZXJzW3R5cGVdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YWNrLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoc3RhY2tbaV0gPT09IGNhbGxiYWNrKSB7XG4gICAgICAgICAgc3RhY2suc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkaXNwYXRjaEV2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcbiAgICAgIGlmICghKGV2ZW50LnR5cGUgaW4gdGhpcy5saXN0ZW5lcnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhY2sgPSB0aGlzLmxpc3RlbmVyc1tldmVudC50eXBlXS5zbGljZSgpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YWNrLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzdGFja1tpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudFRhcmdldDtcbn0oKTtcblxudmFyIGV2ZW50cyA9IG5ldyBFdmVudFRhcmdldCgpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ZhbHNlQ29sb3JNYXBwaW5nLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9mYWxzZUNvbG9yTWFwcGluZy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGNvbnZlcnRJbWFnZVRvRmFsc2VDb2xvckltYWdlLCBjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2UsIHJlc3RvcmVJbWFnZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb252ZXJ0SW1hZ2VUb0ZhbHNlQ29sb3JJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnZlcnRJbWFnZVRvRmFsc2VDb2xvckltYWdlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlc3RvcmVJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlc3RvcmVJbWFnZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9waXhlbERhdGFUb0ZhbHNlQ29sb3JEYXRhLmpzICovIFwiLi9waXhlbERhdGFUb0ZhbHNlQ29sb3JEYXRhLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb2xvcnNfY29sb3JtYXBfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29sb3JzL2NvbG9ybWFwLmpzICovIFwiLi9jb2xvcnMvY29sb3JtYXAuanNcIik7XG5cblxuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBwaXhlbCB2YWx1ZXMgZnJvbSBhbiBBcnJheSBvZiBwaXhlbCBkYXRhXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcGl4ZWxEYXRhIFRoZSBpbnB1dCBwaXhlbCBkYXRhIGFycmF5XG4gKlxuICogQHJldHVybnMge3ttaW5QaXhlbFZhbHVlOiBOdW1iZXIsIG1heFBpeGVsVmFsdWU6IE51bWJlcn19IFRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHBpeGVsIHZhbHVlcyBpbiB0aGUgaW5wdXQgQXJyYXlcbiAqL1xuXG5mdW5jdGlvbiBnZXRQaXhlbFZhbHVlcyhwaXhlbERhdGEpIHtcbiAgdmFyIG1pblBpeGVsVmFsdWUgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB2YXIgbWF4UGl4ZWxWYWx1ZSA9IE51bWJlci5NSU5fVkFMVUU7XG4gIHZhciBsZW4gPSBwaXhlbERhdGEubGVuZ3RoO1xuICB2YXIgcGl4ZWw7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHBpeGVsID0gcGl4ZWxEYXRhW2ldO1xuICAgIG1pblBpeGVsVmFsdWUgPSBtaW5QaXhlbFZhbHVlIDwgcGl4ZWwgPyBtaW5QaXhlbFZhbHVlIDogcGl4ZWw7XG4gICAgbWF4UGl4ZWxWYWx1ZSA9IG1heFBpeGVsVmFsdWUgPiBwaXhlbCA/IG1heFBpeGVsVmFsdWUgOiBwaXhlbDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbWluUGl4ZWxWYWx1ZTogbWluUGl4ZWxWYWx1ZSxcbiAgICBtYXhQaXhlbFZhbHVlOiBtYXhQaXhlbFZhbHVlXG4gIH07XG59XG4vKipcbiAqIFJldHJpZXZlIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGFsbG93IGFuIGltYWdlIG9iamVjdCB0byBiZSByZXNldCB0byBpdHMgb3JpZ2luYWwgZm9ybVxuICogYWZ0ZXIgYSBmYWxzZSBjb2xvciBtYXBwaW5nIHRyYW5zZm9ybWF0aW9uXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBmb3IgcmVzZXR0aW5nIGFuIEltYWdlIE9iamVjdCB0byBpdHMgb3JpZ2luYWwgZm9ybVxuICovXG5cblxuZnVuY3Rpb24gZ2V0UmVzdG9yZUltYWdlTWV0aG9kKGltYWdlKSB7XG4gIGlmIChpbWFnZS5yZXN0b3JlKSB7XG4gICAgcmV0dXJuIGltYWdlLnJlc3RvcmU7XG4gIH1cblxuICB2YXIgY29sb3IgPSBpbWFnZS5jb2xvcjtcbiAgdmFyIHJnYmEgPSBpbWFnZS5yZ2JhO1xuICB2YXIgY2FjaGVkTHV0ID0gaW1hZ2UuY2FjaGVkTHV0O1xuICB2YXIgc2xvcGUgPSBpbWFnZS5zbG9wZTtcbiAgdmFyIHdpbmRvd1dpZHRoID0gaW1hZ2Uud2luZG93V2lkdGg7XG4gIHZhciB3aW5kb3dDZW50ZXIgPSBpbWFnZS53aW5kb3dDZW50ZXI7XG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIG1heFBpeGVsVmFsdWUgPSBpbWFnZS5tYXhQaXhlbFZhbHVlO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGltYWdlLmNvbG9yID0gY29sb3I7XG4gICAgaW1hZ2UucmdiYSA9IHJnYmE7XG4gICAgaW1hZ2UuY2FjaGVkTHV0ID0gY2FjaGVkTHV0O1xuICAgIGltYWdlLnNsb3BlID0gc2xvcGU7XG4gICAgaW1hZ2Uud2luZG93V2lkdGggPSB3aW5kb3dXaWR0aDtcbiAgICBpbWFnZS53aW5kb3dDZW50ZXIgPSB3aW5kb3dDZW50ZXI7XG4gICAgaW1hZ2UubWluUGl4ZWxWYWx1ZSA9IG1pblBpeGVsVmFsdWU7XG4gICAgaW1hZ2UubWF4UGl4ZWxWYWx1ZSA9IG1heFBpeGVsVmFsdWU7XG5cbiAgICBpZiAoaW1hZ2Uub3JpZ1BpeGVsRGF0YSkge1xuICAgICAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLm9yaWdQaXhlbERhdGE7XG5cbiAgICAgIGltYWdlLmdldFBpeGVsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBpeGVsRGF0YTtcbiAgICAgIH07XG4gICAgfSAvLyBSZW1vdmUgc29tZSBhdHRyaWJ1dGVzIGFkZGVkIGJ5IGZhbHNlIGNvbG9yIG1hcHBpbmdcblxuXG4gICAgaW1hZ2Uub3JpZ1BpeGVsRGF0YSA9IHVuZGVmaW5lZDtcbiAgICBpbWFnZS5jb2xvcm1hcElkID0gdW5kZWZpbmVkO1xuICAgIGltYWdlLmZhbHNlQ29sb3IgPSB1bmRlZmluZWQ7XG4gIH07XG59IC8vXG4vLyBUaGVuIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGl0IHdpbGwgYmUgY29udmVydGVkIGludG8gYSBjb2xvcm1hcCBvYmplY3QgaWYgaXQncyBhcyBzdHJpbmcuXG5cbi8qKlxuICogVXNlciBjYW4gcGFzcyBhIGNvbG9ybWFwIG9yIGl0cyBpZCBhcyBzdHJpbmcgdG8gc29tZSBvZiB0aGVzZSBwdWJsaWMgZnVuY3Rpb25zLlxuICogVGhlbiB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBpdCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvIGEgY29sb3JtYXAgb2JqZWN0IGlmIGl0J3MgYSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHsqfSBjb2xvcm1hcCBBIGNvbG9ybWFwIElEIG9yIE9iamVjdFxuICogQHJldHVybiB7Kn0gVGhlIGNvbG9ybWFwXG4gKi9cblxuXG5mdW5jdGlvbiBlbnN1cmVzQ29sb3JtYXAoY29sb3JtYXApIHtcbiAgaWYgKGNvbG9ybWFwICYmIHR5cGVvZiBjb2xvcm1hcCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2xvcm1hcCA9IE9iamVjdChfY29sb3JzX2NvbG9ybWFwX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJnZXRDb2xvcm1hcFwiXSkoY29sb3JtYXApO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9ybWFwO1xufVxuLyoqXG4gKiBSZXN0b3JlcyBhIGZhbHNlIGNvbG9yIGltYWdlIHRvIGl0cyBvcmlnaW5hbCB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBpbWFnZSBvYmplY3QgaGFkIGEgdmFsaWQgcmVzdG9yZSBmdW5jdGlvbiwgd2hpY2ggd2FzIHJ1bi4gT3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIHJlc3RvcmVJbWFnZShpbWFnZSkge1xuICBpZiAoaW1hZ2UucmVzdG9yZSAmJiB0eXBlb2YgaW1hZ2UucmVzdG9yZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGltYWdlLnJlc3RvcmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQ29udmVydCBhbiBpbWFnZSB0byBhIGZhbHNlIGNvbG9yIGltYWdlXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gY29sb3JtYXAgLSBpdCBjYW4gYmUgYSBjb2xvcm1hcCBvYmplY3Qgb3IgYSBjb2xvcm1hcCBpZCAoc3RyaW5nKVxuICpcbiAqIEByZXR1cm5zIHtCb29sZWFufSAtIFdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBoYXMgYmVlbiBjb252ZXJ0ZWQgdG8gYSBmYWxzZSBjb2xvciBpbWFnZVxuICovXG5cblxuZnVuY3Rpb24gY29udmVydEltYWdlVG9GYWxzZUNvbG9ySW1hZ2UoaW1hZ2UsIGNvbG9ybWFwKSB7XG4gIGlmIChpbWFnZS5jb2xvciAmJiAhaW1hZ2UuZmFsc2VDb2xvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignQ29sb3IgdHJhbnNmb3JtcyBhcmUgbm90IGltcGxlbWVudGVkIHlldCcpO1xuICB9IC8vIFVzZXIgY2FuIHBhc3MgYSBjb2xvcm1hcCBpZCBvciBhIGNvbG9ybWFwIG9iamVjdFxuXG5cbiAgY29sb3JtYXAgPSBlbnN1cmVzQ29sb3JtYXAoY29sb3JtYXApO1xuICB2YXIgY29sb3JtYXBJZCA9IGNvbG9ybWFwLmdldElkKCk7IC8vIERvZXNuJ3QgZG8gYW55dGhpbmcgaWYgY29sb3JtYXBJZCBoYXNuJ3QgY2hhbmdlZFxuXG4gIGlmIChpbWFnZS5jb2xvcm1hcElkID09PSBjb2xvcm1hcElkKSB7XG4gICAgLy8gSXQgaGFzIGFscmVhZHkgYmVpbmcgY29udmVydGVkIGludG8gYSBmYWxzZSBjb2xvciBpbWFnZVxuICAgIC8vIFVzaW5nIHRoZSBjb2xvcm1hcElkIHBhc3NlZCBhcyBwYXJhbWV0ZXJcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gUmVzdG9yZSB0aGUgaW1hZ2UgYXR0cmlidXRlcyB1cGRhdGVkIHdoZW4gY29udmVydGluZyB0byBhIGZhbHNlIGNvbG9yIGltYWdlXG5cblxuICByZXN0b3JlSW1hZ2UoaW1hZ2UpOyAvLyBDb252ZXJ0IHRoZSBpbWFnZSB0byBhIGZhbHNlIGNvbG9yIGltYWdlXG5cbiAgaWYgKGNvbG9ybWFwSWQpIHtcbiAgICB2YXIgbWluUGl4ZWxWYWx1ZSA9IGltYWdlLm1pblBpeGVsVmFsdWUgfHwgMDtcbiAgICB2YXIgbWF4UGl4ZWxWYWx1ZSA9IGltYWdlLm1heFBpeGVsVmFsdWUgfHwgMjU1O1xuICAgIGltYWdlLnJlc3RvcmUgPSBnZXRSZXN0b3JlSW1hZ2VNZXRob2QoaW1hZ2UpO1xuICAgIHZhciBsb29rdXBUYWJsZSA9IGNvbG9ybWFwLmNyZWF0ZUxvb2t1cFRhYmxlKCk7XG4gICAgbG9va3VwVGFibGUuc2V0VGFibGVSYW5nZShtaW5QaXhlbFZhbHVlLCBtYXhQaXhlbFZhbHVlKTsgLy8gVXBkYXRlIHRoZSBwaXhlbCBkYXRhIGFuZCByZW5kZXIgdGhlIG5ldyBpbWFnZVxuXG4gICAgT2JqZWN0KF9waXhlbERhdGFUb0ZhbHNlQ29sb3JEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShpbWFnZSwgbG9va3VwVGFibGUpOyAvLyBVcGRhdGUgbWluIGFuZCBtYXggcGl4ZWwgdmFsdWVzXG5cbiAgICB2YXIgcGl4ZWxWYWx1ZXMgPSBnZXRQaXhlbFZhbHVlcyhpbWFnZS5nZXRQaXhlbERhdGEoKSk7XG4gICAgaW1hZ2UubWluUGl4ZWxWYWx1ZSA9IHBpeGVsVmFsdWVzLm1pblBpeGVsVmFsdWU7XG4gICAgaW1hZ2UubWF4UGl4ZWxWYWx1ZSA9IHBpeGVsVmFsdWVzLm1heFBpeGVsVmFsdWU7XG4gICAgaW1hZ2Uud2luZG93V2lkdGggPSAyNTU7XG4gICAgaW1hZ2Uud2luZG93Q2VudGVyID0gMTI4OyAvLyBDYWNoZSB0aGUgbGFzdCBjb2xvcm1hcElkIHVzZWQgZm9yIHBlcmZvcm1hbmNlXG4gICAgLy8gVGhlbiBpdCBkb2Vzbid0IG5lZWQgdG8gYmUgcmUtcmVuZGVyZWQgb24gbmV4dFxuICAgIC8vIFRpbWUgaWYgdGhlIHVzZXIgaGFzbid0IHVwZGF0ZWQgaXRcblxuICAgIGltYWdlLmNvbG9ybWFwSWQgPSBjb2xvcm1hcElkO1xuICB9IC8vIFJldHVybiBgdHJ1ZWAgdG8gdGVsbCB0aGUgY2FsbGVyIHRoYXQgdGhlIGltYWdlIGhhcyBnb3QgdXBkYXRlZFxuXG5cbiAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIENvbnZlcnQgdGhlIGltYWdlIG9mIGEgZWxlbWVudCB0byBhIGZhbHNlIGNvbG9yIGltYWdlXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgQ29ybmVyc3RvbmUgZWxlbWVudFxuICogQHBhcmFtIHsqfSBjb2xvcm1hcCAtIGl0IGNhbiBiZSBhIGNvbG9ybWFwIG9iamVjdCBvciBhIGNvbG9ybWFwIGlkIChzdHJpbmcpXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuXG5mdW5jdGlvbiBjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2UoZWxlbWVudCwgY29sb3JtYXApIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGNvbnZlcnRJbWFnZVRvRmFsc2VDb2xvckltYWdlKGVuYWJsZWRFbGVtZW50LmltYWdlLCBjb2xvcm1hcCk7XG59XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ZpdFRvV2luZG93LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9maXRUb1dpbmRvdy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXBkYXRlSW1hZ2UuanMgKi8gXCIuL3VwZGF0ZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXRJbWFnZUZpdFNjYWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldEltYWdlRml0U2NhbGUuanMgKi8gXCIuL2ludGVybmFsL2dldEltYWdlRml0U2NhbGUuanNcIik7XG5cblxuXG4vKipcbiAqIEFkanVzdHMgYW4gaW1hZ2UncyBzY2FsZSBhbmQgdHJhbnNsYXRpb24gc28gdGhlIGltYWdlIGlzIGNlbnRlcmVkIGFuZCBhbGwgcGl4ZWxzXG4gKiBpbiB0aGUgaW1hZ2UgYXJlIHZpZXdhYmxlLlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIENvcm5lcnN0b25lIGVsZW1lbnQgdG8gdXBkYXRlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciBpbWFnZSA9IGVuYWJsZWRFbGVtZW50LmltYWdlOyAvLyBUaGUgbmV3IHNjYWxlIGlzIHRoZSBtaW5pbXVtIG9mIHRoZSBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBzY2FsZSB2YWx1ZXNcblxuICBlbmFibGVkRWxlbWVudC52aWV3cG9ydC5zY2FsZSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0SW1hZ2VGaXRTY2FsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQuY2FudmFzLCBpbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucm90YXRpb24pLnNjYWxlRmFjdG9yO1xuICBlbmFibGVkRWxlbWVudC52aWV3cG9ydC50cmFuc2xhdGlvbi54ID0gMDtcbiAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudHJhbnNsYXRpb24ueSA9IDA7XG4gIE9iamVjdChfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZ2VuZXJhdGVVVUlELmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vZ2VuZXJhdGVVVUlELmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKipcbiogR2VuZXJhdGVzIGEgVVVJRCBmb3IgdGhlIGVuYWJsZWRFbGVtZW50LlxuKlxuKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBVVUlELlxuKi9cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKCkge1xuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvODgwOTQ3Mi85MjA4MzIwIFB1YmxpYyBEb21haW4vTUlUXG5cbiAgLyogZXNsaW50IG5vLWJpdHdpc2U6IFtcImVycm9yXCIsIHsgXCJhbGxvd1wiOiBbXCImXCIsXCJ8XCJdIH1dICovXG4gIHZhciBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgaWYgKHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGQgKz0gcGVyZm9ybWFuY2Uubm93KCk7IC8vIFVzZSBoaWdoLXByZWNpc2lvbiB0aW1lciBpZiBhdmFpbGFibGVcbiAgfVxuXG4gIHJldHVybiAneC54LngueC54LngueHh4eC54eHgueC54Lnh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgIHZhciByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xuICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XG4gICAgcmV0dXJuIChjID09PSAneCcgPyByIDogciAmIDB4MyB8IDB4OCkudG9TdHJpbmcoMTYpO1xuICB9KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2dldERlZmF1bHRWaWV3cG9ydEZvckltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9nZXREZWZhdWx0Vmlld3BvcnRGb3JJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldERlZmF1bHRWaWV3cG9ydC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzXCIpO1xuXG5cbi8qKlxuICogUmV0dXJucyBhIGRlZmF1bHQgdmlld3BvcnQgZm9yIGRpc3BsYXkgdGhlIHNwZWNpZmllZCBpbWFnZSBvbiB0aGUgc3BlY2lmaWVkXG4gKiBlbmFibGVkIGVsZW1lbnQuICBUaGUgZGVmYXVsdCB2aWV3cG9ydCBpcyBmaXQgdG8gd2luZG93XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0XG4gKlxuICogQHJldHVybnMge1ZpZXdwb3J0fSBUaGUgZGVmYXVsdCB2aWV3cG9ydCBmb3IgdGhlIGltYWdlXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgaW1hZ2UpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIE9iamVjdChfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5jYW52YXMsIGltYWdlKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2dldEltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9nZXRJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkIGltYWdlIGZvciBhbiBlbGVtZW50IG9yIHVuZGVmaW5lZCBpZiBubyBpbWFnZSBoYXNcbiAqIGJlZW4gZGlzcGxheWVkIHlldFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIERPTSBlbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKiBAcmV0dXJucyB7SW1hZ2V9IFRoZSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3QgZGlzcGxheWVkIGluIHRoaXMgZWxlbWVudFxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmltYWdlO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZ2V0UGl4ZWxzLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vZ2V0UGl4ZWxzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0U3RvcmVkUGl4ZWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldFN0b3JlZFBpeGVscy5qcyAqLyBcIi4vZ2V0U3RvcmVkUGl4ZWxzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXRNb2RhbGl0eUxVVF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9nZXRNb2RhbGl0eUxVVC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0TW9kYWxpdHlMVVQuanNcIik7XG5cblxuXG4vKipcbiAqIFJldHJpZXZlcyBhbiBhcnJheSBvZiBwaXhlbHMgZnJvbSBhIHJlY3Rhbmd1bGFyIHJlZ2lvbiB3aXRoIG1vZGFsaXR5IExVVCB0cmFuc2Zvcm1hdGlvbiBhcHBsaWVkXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgc2FtcGxpbmcgcmVjdGFuZ2xlIGluIGltYWdlIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge051bWJlcn0geSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIHNhbXBsaW5nIHJlY3RhbmdsZSBpbiBpbWFnZSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtOdW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgb2YgdGhlIHNhbXBsaW5nIHJlY3RhbmdsZSBpbiBpbWFnZSBjb29yZGluYXRlc1xuICogQHBhcmFtIHtOdW1iZXJ9IGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBvZiB0aGUgc2FtcGxpbmcgcmVjdGFuZ2xlIGluIGltYWdlIGNvb3JkaW5hdGVzXG4gKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBtb2RhbGl0eSBwaXhlbCB2YWx1ZSBvZiB0aGUgcGl4ZWxzIGluIHRoZSBzYW1wbGluZyByZWN0YW5nbGVcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbGVtZW50LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gIHZhciBzdG9yZWRQaXhlbHMgPSBPYmplY3QoX2dldFN0b3JlZFBpeGVsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZWxlbWVudCwgeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gIHZhciBlZSA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciBtbHV0Zm4gPSBPYmplY3QoX2ludGVybmFsX2dldE1vZGFsaXR5TFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShlZS5pbWFnZS5zbG9wZSwgZWUuaW1hZ2UuaW50ZXJjZXB0LCBlZS52aWV3cG9ydC5tb2RhbGl0eUxVVCk7XG4gIHJldHVybiBzdG9yZWRQaXhlbHMubWFwKG1sdXRmbik7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9nZXRTdG9yZWRQaXhlbHMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9nZXRTdG9yZWRQaXhlbHMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuXG4vKipcbiAqIFJldHJpZXZlcyBhbiBhcnJheSBvZiBzdG9yZWQgcGl4ZWwgdmFsdWVzIGZyb20gYSByZWN0YW5ndWxhciByZWdpb24gb2YgYW4gaW1hZ2VcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxuICogQHBhcmFtIHtOdW1iZXJ9IHggVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSBzYW1wbGluZyByZWN0YW5nbGUgaW4gaW1hZ2UgY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgc2FtcGxpbmcgcmVjdGFuZ2xlIGluIGltYWdlIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge051bWJlcn0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBvZiB0aGUgc2FtcGxpbmcgcmVjdGFuZ2xlIGluIGltYWdlIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge051bWJlcn0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIG9mIHRoZSBzYW1wbGluZyByZWN0YW5nbGUgaW4gaW1hZ2UgY29vcmRpbmF0ZXNcbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIHN0b3JlZCBwaXhlbCB2YWx1ZSBvZiB0aGUgcGl4ZWxzIGluIHRoZSBzYW1wbGluZyByZWN0YW5nbGVcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbGVtZW50LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGlmIChlbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFN0b3JlZFBpeGVsczogcGFyYW1ldGVyIGVsZW1lbnQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB4ID0gTWF0aC5yb3VuZCh4KTtcbiAgeSA9IE1hdGgucm91bmQoeSk7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciBzdG9yZWRQaXhlbHMgPSBbXTtcbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIHBpeGVsRGF0YSA9IGVuYWJsZWRFbGVtZW50LmltYWdlLmdldFBpeGVsRGF0YSgpO1xuXG4gIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGhlaWdodDsgcm93KyspIHtcbiAgICBmb3IgKHZhciBjb2x1bW4gPSAwOyBjb2x1bW4gPCB3aWR0aDsgY29sdW1uKyspIHtcbiAgICAgIHZhciBzcEluZGV4ID0gKHJvdyArIHkpICogZW5hYmxlZEVsZW1lbnQuaW1hZ2UuY29sdW1ucyArIChjb2x1bW4gKyB4KTtcbiAgICAgIHN0b3JlZFBpeGVsc1tpbmRleCsrXSA9IHBpeGVsRGF0YVtzcEluZGV4XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RvcmVkUGl4ZWxzO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vZ2V0Vmlld3BvcnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2dldFZpZXdwb3J0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgdmlld3BvcnQgZm9yIHRoZSBzcGVjaWZpZWQgZW5hYmxlZCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEByZXR1cm5zIHtWaWV3cG9ydHx1bmRlZmluZWR9IFRoZSBDb3JuZXJzdG9uZSBWaWV3cG9ydCBzZXR0aW5ncyBmb3IgdGhpcyBlbGVtZW50LCBpZiB0aGV5IGV4aXN0LiBPdGhlcndpc2UsIHVuZGVmaW5lZFxuICogQG1lbWJlcm9mIFZpZXdwb3J0U2V0dGluZ3NcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciB2aWV3cG9ydCA9IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0O1xuXG4gIGlmICh2aWV3cG9ydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIHZpZXdwb3J0XG5cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdmlld3BvcnQpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW1hZ2VDYWNoZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbWFnZUNhY2hlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBjYWNoZWRJbWFnZXMsIHNldE1heGltdW1TaXplQnl0ZXMsIHB1dEltYWdlTG9hZE9iamVjdCwgZ2V0SW1hZ2VMb2FkT2JqZWN0LCByZW1vdmVJbWFnZUxvYWRPYmplY3QsIGdldENhY2hlSW5mbywgcHVyZ2VDYWNoZSwgY2hhbmdlSW1hZ2VJZENhY2hlU2l6ZSwgZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjYWNoZWRJbWFnZXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjYWNoZWRJbWFnZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldE1heGltdW1TaXplQnl0ZXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzZXRNYXhpbXVtU2l6ZUJ5dGVzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJwdXRJbWFnZUxvYWRPYmplY3RcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwdXRJbWFnZUxvYWRPYmplY3Q7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEltYWdlTG9hZE9iamVjdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEltYWdlTG9hZE9iamVjdDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlSW1hZ2VMb2FkT2JqZWN0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVtb3ZlSW1hZ2VMb2FkT2JqZWN0OyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRDYWNoZUluZm9cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRDYWNoZUluZm87IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInB1cmdlQ2FjaGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwdXJnZUNhY2hlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjaGFuZ2VJbWFnZUlkQ2FjaGVTaXplXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2hhbmdlSW1hZ2VJZENhY2hlU2l6ZTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RyaWdnZXJFdmVudC5qcyAqLyBcIi4vdHJpZ2dlckV2ZW50LmpzXCIpO1xuXG5cbi8qKlxuICogVGhpcyBtb2R1bGUgZGVhbHMgd2l0aCBjYWNoaW5nIGltYWdlc1xuICogQG1vZHVsZSBJbWFnZUNhY2hlXG4gKi9cblxudmFyIG1heGltdW1TaXplSW5CeXRlcyA9IDEwMjQgKiAxMDI0ICogMTAyNDsgLy8gMSBHQlxuXG52YXIgY2FjaGVTaXplSW5CeXRlcyA9IDA7IC8vIERpY3Rpb25hcnkgb2YgaW1hZ2VJZCB0byBjYWNoZWRJbWFnZSBvYmplY3RzXG5cbnZhciBpbWFnZUNhY2hlRGljdCA9IHt9OyAvLyBBcnJheSBvZiBjYWNoZWRJbWFnZSBvYmplY3RzXG5cbnZhciBjYWNoZWRJbWFnZXMgPSBbXTtcbi8qKiBTZXRzIHRoZSBtYXhpbXVtIHNpemUgb2YgY2FjaGUgYW5kIHB1cmdlcyBjYWNoZSBjb250ZW50cyBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG51bUJ5dGVzIFRoZSBtYXhpbXVuIHNpemUgdGhhdCB0aGUgY2FjaGUgc2hvdWxkIG9jY3VweS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbmZ1bmN0aW9uIHNldE1heGltdW1TaXplQnl0ZXMobnVtQnl0ZXMpIHtcbiAgaWYgKG51bUJ5dGVzID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldE1heGltdW1TaXplQnl0ZXM6IHBhcmFtZXRlciBudW1CeXRlcyBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChudW1CeXRlcy50b0ZpeGVkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldE1heGltdW1TaXplQnl0ZXM6IHBhcmFtZXRlciBudW1CeXRlcyBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gIH1cblxuICBtYXhpbXVtU2l6ZUluQnl0ZXMgPSBudW1CeXRlcztcbiAgT2JqZWN0KF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImV2ZW50c1wiXSwgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXS5JTUFHRV9DQUNIRV9NQVhJTVVNX1NJWkVfQ0hBTkdFRCk7XG4gIHB1cmdlQ2FjaGVJZk5lY2Vzc2FyeSgpO1xufVxuLyoqXG4gKiBQdXJnZXMgdGhlIGNhY2hlIGlmIHNpemUgZXhjZWVkcyBtYXhpbXVtXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiBwdXJnZUNhY2hlSWZOZWNlc3NhcnkoKSB7XG4gIC8vIElmIG1heCBjYWNoZSBzaXplIGhhcyBub3QgYmVlbiBleGNlZWRlZCwgZG8gbm90aGluZ1xuICBpZiAoY2FjaGVTaXplSW5CeXRlcyA8PSBtYXhpbXVtU2l6ZUluQnl0ZXMpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQ2FjaGUgc2l6ZSBoYXMgYmVlbiBleGNlZWRlZCwgY3JlYXRlIGxpc3Qgb2YgaW1hZ2VzIHNvcnRlZCBieSB0aW1lU3RhbXBcbiAgLy8gU28gd2UgY2FuIHB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIGltYWdlXG5cblxuICBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgICBpZiAoYS50aW1lU3RhbXAgPiBiLnRpbWVTdGFtcCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGlmIChhLnRpbWVTdGFtcCA8IGIudGltZVN0YW1wKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNhY2hlZEltYWdlcy5zb3J0KGNvbXBhcmUpOyAvLyBSZW1vdmUgaW1hZ2VzIGFzIG5lY2Vzc2FyeSlcblxuICB3aGlsZSAoY2FjaGVTaXplSW5CeXRlcyA+IG1heGltdW1TaXplSW5CeXRlcykge1xuICAgIHZhciBsYXN0Q2FjaGVkSW1hZ2UgPSBjYWNoZWRJbWFnZXNbY2FjaGVkSW1hZ2VzLmxlbmd0aCAtIDFdO1xuICAgIHZhciBpbWFnZUlkID0gbGFzdENhY2hlZEltYWdlLmltYWdlSWQ7XG4gICAgcmVtb3ZlSW1hZ2VMb2FkT2JqZWN0KGltYWdlSWQpO1xuICAgIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0uSU1BR0VfQ0FDSEVfUFJPTUlTRV9SRU1PVkVELCB7XG4gICAgICBpbWFnZUlkOiBpbWFnZUlkXG4gICAgfSk7XG4gIH1cblxuICB2YXIgY2FjaGVJbmZvID0gZ2V0Q2FjaGVJbmZvKCk7XG4gIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0uSU1BR0VfQ0FDSEVfRlVMTCwgY2FjaGVJbmZvKTtcbn1cbi8qKlxuICogUHV0cyBhIG5ldyBpbWFnZSBsb2FkZXIgaW50byB0aGUgY2FjaGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1hZ2VJZCBJbWFnZUlkIG9mIHRoZSBpbWFnZSBsb2FkZXJcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbWFnZUxvYWRPYmplY3QgVGhlIG9iamVjdCB0aGF0IGlzIGxvYWRpbmcgb3IgbG9hZGVkIHRoZSBpbWFnZVxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuXG5mdW5jdGlvbiBwdXRJbWFnZUxvYWRPYmplY3QoaW1hZ2VJZCwgaW1hZ2VMb2FkT2JqZWN0KSB7XG4gIGlmIChpbWFnZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3B1dEltYWdlTG9hZE9iamVjdDogaW1hZ2VJZCBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChpbWFnZUxvYWRPYmplY3QucHJvbWlzZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZUxvYWRPYmplY3Q6IGltYWdlTG9hZE9iamVjdC5wcm9taXNlIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgaWYgKGltYWdlQ2FjaGVEaWN0Lmhhc093blByb3BlcnR5KGltYWdlSWQpID09PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZUxvYWRPYmplY3Q6IGltYWdlSWQgYWxyZWFkeSBpbiBjYWNoZScpO1xuICB9XG5cbiAgaWYgKGltYWdlTG9hZE9iamVjdC5jYW5jZWxGbiAmJiB0eXBlb2YgaW1hZ2VMb2FkT2JqZWN0LmNhbmNlbEZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZUxvYWRPYmplY3Q6IGltYWdlTG9hZE9iamVjdC5jYW5jZWxGbiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBjYWNoZWRJbWFnZSA9IHtcbiAgICBsb2FkZWQ6IGZhbHNlLFxuICAgIGltYWdlSWQ6IGltYWdlSWQsXG4gICAgc2hhcmVkQ2FjaGVLZXk6IHVuZGVmaW5lZCxcbiAgICAvLyBUaGUgc2hhcmVkQ2FjaGVLZXkgZm9yIHRoaXMgaW1hZ2VJZC4gIHVuZGVmaW5lZCBieSBkZWZhdWx0XG4gICAgaW1hZ2VMb2FkT2JqZWN0OiBpbWFnZUxvYWRPYmplY3QsXG4gICAgdGltZVN0YW1wOiBEYXRlLm5vdygpLFxuICAgIHNpemVJbkJ5dGVzOiAwXG4gIH07XG4gIGltYWdlQ2FjaGVEaWN0W2ltYWdlSWRdID0gY2FjaGVkSW1hZ2U7XG4gIGNhY2hlZEltYWdlcy5wdXNoKGNhY2hlZEltYWdlKTtcbiAgaW1hZ2VMb2FkT2JqZWN0LnByb21pc2UudGhlbihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICBpZiAoY2FjaGVkSW1hZ2VzLmluZGV4T2YoY2FjaGVkSW1hZ2UpID09PSAtMSkge1xuICAgICAgLy8gSWYgdGhlIGltYWdlIGhhcyBiZWVuIHB1cmdlZCBiZWZvcmUgYmVpbmcgbG9hZGVkLCB3ZSBzdG9wIGhlcmUuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2FjaGVkSW1hZ2UubG9hZGVkID0gdHJ1ZTtcbiAgICBjYWNoZWRJbWFnZS5pbWFnZSA9IGltYWdlO1xuXG4gICAgaWYgKGltYWdlLnNpemVJbkJ5dGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncHV0SW1hZ2VMb2FkT2JqZWN0OiBpbWFnZS5zaXplSW5CeXRlcyBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoaW1hZ2Uuc2l6ZUluQnl0ZXMudG9GaXhlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3B1dEltYWdlTG9hZE9iamVjdDogaW1hZ2Uuc2l6ZUluQnl0ZXMgaXMgbm90IGEgbnVtYmVyJyk7XG4gICAgfVxuXG4gICAgY2FjaGVkSW1hZ2Uuc2l6ZUluQnl0ZXMgPSBpbWFnZS5zaXplSW5CeXRlcztcbiAgICBjYWNoZVNpemVJbkJ5dGVzICs9IGNhY2hlZEltYWdlLnNpemVJbkJ5dGVzO1xuICAgIHZhciBldmVudERldGFpbHMgPSB7XG4gICAgICBhY3Rpb246ICdhZGRJbWFnZScsXG4gICAgICBpbWFnZTogY2FjaGVkSW1hZ2VcbiAgICB9O1xuICAgIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0uSU1BR0VfQ0FDSEVfQ0hBTkdFRCwgZXZlbnREZXRhaWxzKTtcbiAgICBjYWNoZWRJbWFnZS5zaGFyZWRDYWNoZUtleSA9IGltYWdlLnNoYXJlZENhY2hlS2V5O1xuICAgIHB1cmdlQ2FjaGVJZk5lY2Vzc2FyeSgpO1xuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhY2hlZEltYWdlID0gaW1hZ2VDYWNoZURpY3RbaW1hZ2VJZF07XG4gICAgY2FjaGVkSW1hZ2VzLnNwbGljZShjYWNoZWRJbWFnZXMuaW5kZXhPZihjYWNoZWRJbWFnZSksIDEpO1xuICAgIGRlbGV0ZSBpbWFnZUNhY2hlRGljdFtpbWFnZUlkXTtcbiAgfSk7XG59XG4vKipcbiAqIFJldHVucyB0aGUgb2JqZWN0IHRoYXQgaXMgbG9hZGluZyBhIGdpdmVuIGltYWdlSWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1hZ2VJZCBJbWFnZSBJRFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SW1hZ2VMb2FkT2JqZWN0KGltYWdlSWQpIHtcbiAgaWYgKGltYWdlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZ2V0SW1hZ2VMb2FkT2JqZWN0OiBpbWFnZUlkIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIGNhY2hlZEltYWdlID0gaW1hZ2VDYWNoZURpY3RbaW1hZ2VJZF07XG5cbiAgaWYgKGNhY2hlZEltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQnVtcCB0aW1lIHN0YW1wIGZvciBjYWNoZWQgaW1hZ2VcblxuXG4gIGNhY2hlZEltYWdlLnRpbWVTdGFtcCA9IERhdGUubm93KCk7XG4gIHJldHVybiBjYWNoZWRJbWFnZS5pbWFnZUxvYWRPYmplY3Q7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGltYWdlIGxvYWRlciBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBJZCBmcm9tIHRoZSBjYWNoZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWFnZUlkIEltYWdlIElEXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVJbWFnZUxvYWRPYmplY3QoaW1hZ2VJZCkge1xuICBpZiAoaW1hZ2VJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW1vdmVJbWFnZUxvYWRPYmplY3Q6IGltYWdlSWQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgY2FjaGVkSW1hZ2UgPSBpbWFnZUNhY2hlRGljdFtpbWFnZUlkXTtcblxuICBpZiAoY2FjaGVkSW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVtb3ZlSW1hZ2VMb2FkT2JqZWN0OiBpbWFnZUlkIHdhcyBub3QgcHJlc2VudCBpbiBpbWFnZUNhY2hlJyk7XG4gIH1cblxuICBjYWNoZWRJbWFnZXMuc3BsaWNlKGNhY2hlZEltYWdlcy5pbmRleE9mKGNhY2hlZEltYWdlKSwgMSk7XG4gIGNhY2hlU2l6ZUluQnl0ZXMgLT0gY2FjaGVkSW1hZ2Uuc2l6ZUluQnl0ZXM7XG4gIHZhciBldmVudERldGFpbHMgPSB7XG4gICAgYWN0aW9uOiAnZGVsZXRlSW1hZ2UnLFxuICAgIGltYWdlOiBjYWNoZWRJbWFnZVxuICB9O1xuICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZXZlbnRzXCJdLCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdLklNQUdFX0NBQ0hFX0NIQU5HRUQsIGV2ZW50RGV0YWlscyk7XG4gIGRlY2FjaGUoY2FjaGVkSW1hZ2UuaW1hZ2VMb2FkT2JqZWN0KTtcbiAgZGVsZXRlIGltYWdlQ2FjaGVEaWN0W2ltYWdlSWRdO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDYWNoZUluZm9ybWF0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4aW11bVNpemVJbkJ5dGVzICBUaGUgbWF4aW11bSBzaXplIG9mIHRoZSBjYWNoZSBpbiBieXRlc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IGNhY2hlU2l6ZUluQnl0ZXMgQ3VycmVudGx5IG9jY3VwaWVkIHNwYWNlIGluIHRoZSBjYWNoZSBpbiBieXRlc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IG51bWJlck9mSW1hZ2VzQ2FjaGVkIE51bWJlciBvZiBJbWFnZUxvYWRlcnMgaW4gdGhlIGNhY2hlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGNhY2hlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRDYWNoZUluZm8oKSB7XG4gIHJldHVybiB7XG4gICAgbWF4aW11bVNpemVJbkJ5dGVzOiBtYXhpbXVtU2l6ZUluQnl0ZXMsXG4gICAgY2FjaGVTaXplSW5CeXRlczogY2FjaGVTaXplSW5CeXRlcyxcbiAgICBudW1iZXJPZkltYWdlc0NhY2hlZDogY2FjaGVkSW1hZ2VzLmxlbmd0aFxuICB9O1xufSAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgYnkgYHJlbW92ZUltYWdlTG9hZE9iamVjdGAgYmVjYXVzZSBpdCdzXG4vLyBUaGUgb25lIHRoYXQga25vd3MgaG93IHRvIGRlYWwgd2l0aCBzaGFyZWQgY2FjaGUga2V5cyBhbmQgY2FjaGUgc2l6ZS5cblxuLyoqXG4gKiBJTlRFUk5BTDogUmVtb3ZlcyBhbmQgSW1hZ2VMb2FkZXIgZnJvbSB0aGUgY2FjaGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2VMb2FkT2JqZWN0IEltYWdlIExvYWRlciBPYmplY3QgdG8gcmVtb3ZlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiBkZWNhY2hlKGltYWdlTG9hZE9iamVjdCkge1xuICBpbWFnZUxvYWRPYmplY3QucHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaW1hZ2VMb2FkT2JqZWN0LmRlY2FjaGUpIHtcbiAgICAgIGltYWdlTG9hZE9iamVjdC5kZWNhY2hlKCk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGltYWdlTG9hZE9iamVjdC5kZWNhY2hlKSB7XG4gICAgICBpbWFnZUxvYWRPYmplY3QuZGVjYWNoZSgpO1xuICAgIH1cbiAgfSk7XG59XG4vKipcbiAqIFJlbW92ZXMgYWxsIGltYWdlcyBmcm9tIGNhY2hlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5cbmZ1bmN0aW9uIHB1cmdlQ2FjaGUoKSB7XG4gIHdoaWxlIChjYWNoZWRJbWFnZXMubGVuZ3RoID4gMCkge1xuICAgIHZhciByZW1vdmVkQ2FjaGVkSW1hZ2UgPSBjYWNoZWRJbWFnZXNbMF07XG4gICAgcmVtb3ZlSW1hZ2VMb2FkT2JqZWN0KHJlbW92ZWRDYWNoZWRJbWFnZS5pbWFnZUlkKTtcbiAgfVxufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSBzcGFjZSB0aGFuIGFuIGltYWdlIGlzIHVzaW5nIGluIHRoZSBjYWNoZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWFnZUlkIEltYWdlIElEXG4gKiBAcGFyYW0ge251bWJlcn0gbmV3Q2FjaGVTaXplIE5ldyBpbWFnZSBzaXplXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGFuZ2VJbWFnZUlkQ2FjaGVTaXplKGltYWdlSWQsIG5ld0NhY2hlU2l6ZSkge1xuICB2YXIgY2FjaGVFbnRyeSA9IGltYWdlQ2FjaGVEaWN0W2ltYWdlSWRdO1xuXG4gIGlmIChjYWNoZUVudHJ5KSB7XG4gICAgY2FjaGVFbnRyeS5pbWFnZUxvYWRPYmplY3QucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgdmFyIGNhY2hlU2l6ZURpZmZlcmVuY2UgPSBuZXdDYWNoZVNpemUgLSBpbWFnZS5zaXplSW5CeXRlcztcbiAgICAgIGltYWdlLnNpemVJbkJ5dGVzID0gbmV3Q2FjaGVTaXplO1xuICAgICAgY2FjaGVFbnRyeS5zaXplSW5CeXRlcyA9IG5ld0NhY2hlU2l6ZTtcbiAgICAgIGNhY2hlU2l6ZUluQnl0ZXMgKz0gY2FjaGVTaXplRGlmZmVyZW5jZTtcbiAgICAgIHZhciBldmVudERldGFpbHMgPSB7XG4gICAgICAgIGFjdGlvbjogJ2NoYW5nZUltYWdlU2l6ZScsXG4gICAgICAgIGltYWdlOiBpbWFnZVxuICAgICAgfTtcbiAgICAgIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0uSU1BR0VfQ0FDSEVfQ0hBTkdFRCwgZXZlbnREZXRhaWxzKTtcbiAgICB9KTtcbiAgfVxufVxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9ICh7XG4gIGltYWdlQ2FjaGU6IGltYWdlQ2FjaGVEaWN0LFxuICBjYWNoZWRJbWFnZXM6IGNhY2hlZEltYWdlcyxcbiAgc2V0TWF4aW11bVNpemVCeXRlczogc2V0TWF4aW11bVNpemVCeXRlcyxcbiAgcHV0SW1hZ2VMb2FkT2JqZWN0OiBwdXRJbWFnZUxvYWRPYmplY3QsXG4gIGdldEltYWdlTG9hZE9iamVjdDogZ2V0SW1hZ2VMb2FkT2JqZWN0LFxuICByZW1vdmVJbWFnZUxvYWRPYmplY3Q6IHJlbW92ZUltYWdlTG9hZE9iamVjdCxcbiAgZ2V0Q2FjaGVJbmZvOiBnZXRDYWNoZUluZm8sXG4gIHB1cmdlQ2FjaGU6IHB1cmdlQ2FjaGUsXG4gIGNoYW5nZUltYWdlSWRDYWNoZVNpemU6IGNoYW5nZUltYWdlSWRDYWNoZVNpemVcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ltYWdlTG9hZGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbWFnZUxvYWRlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGxvYWRJbWFnZSwgbG9hZEFuZENhY2hlSW1hZ2UsIHJlZ2lzdGVySW1hZ2VMb2FkZXIsIHJlZ2lzdGVyVW5rbm93bkltYWdlTG9hZGVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImxvYWRJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGxvYWRJbWFnZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibG9hZEFuZENhY2hlSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBsb2FkQW5kQ2FjaGVJbWFnZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVnaXN0ZXJJbWFnZUxvYWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlZ2lzdGVySW1hZ2VMb2FkZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlZ2lzdGVyVW5rbm93bkltYWdlTG9hZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVnaXN0ZXJVbmtub3duSW1hZ2VMb2FkZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbWFnZUNhY2hlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ltYWdlQ2FjaGUuanMgKi8gXCIuL2ltYWdlQ2FjaGUuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3RyaWdnZXJFdmVudC5qcyAqLyBcIi4vdHJpZ2dlckV2ZW50LmpzXCIpO1xuXG5cblxuLyoqXHJcbiAqIFRoaXMgbW9kdWxlIGRlYWxzIHdpdGggSW1hZ2VMb2FkZXJzLCBsb2FkaW5nIGltYWdlcyBhbmQgY2FjaGluZyBpbWFnZXNcclxuICogQG1vZHVsZSBJbWFnZUxvYWRlclxyXG4gKi9cblxudmFyIGltYWdlTG9hZGVycyA9IHt9O1xudmFyIHVua25vd25JbWFnZUxvYWRlcjtcbi8qKlxyXG4gKiBMb2FkIGFuIGltYWdlIHVzaW5nIGEgcmVnaXN0ZXJlZCBDb3JuZXJzdG9uZSBJbWFnZSBMb2FkZXIuXHJcbiAqXHJcbiAqIFRoZSBpbWFnZSBsb2FkZXIgdGhhdCBpcyB1c2VkIHdpbGwgYmVcclxuICogZGV0ZXJtaW5lZCBieSB0aGUgaW1hZ2UgbG9hZGVyIHNjaGVtZSBtYXRjaGluZyBhZ2FpbnN0IHRoZSBpbWFnZUlkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gaW1hZ2VJZCBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdCdzIGltYWdlSWRcclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIHRvIGJlIHBhc3NlZCB0byB0aGUgSW1hZ2UgTG9hZGVyXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtJbWFnZUxvYWRPYmplY3R9IEFuIE9iamVjdCB3aGljaCBjYW4gYmUgdXNlZCB0byBhY3QgYWZ0ZXIgYW4gaW1hZ2UgaXMgbG9hZGVkIG9yIGxvYWRpbmcgZmFpbHNcclxuICogQG1lbWJlcm9mIEltYWdlTG9hZGVyXHJcbiAqL1xuXG5mdW5jdGlvbiBsb2FkSW1hZ2VGcm9tSW1hZ2VMb2FkZXIoaW1hZ2VJZCwgb3B0aW9ucykge1xuICB2YXIgY29sb25JbmRleCA9IGltYWdlSWQuaW5kZXhPZignOicpO1xuICB2YXIgc2NoZW1lID0gaW1hZ2VJZC5zdWJzdHJpbmcoMCwgY29sb25JbmRleCk7XG4gIHZhciBsb2FkZXIgPSBpbWFnZUxvYWRlcnNbc2NoZW1lXTtcblxuICBpZiAobG9hZGVyID09PSB1bmRlZmluZWQgfHwgbG9hZGVyID09PSBudWxsKSB7XG4gICAgaWYgKHVua25vd25JbWFnZUxvYWRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdW5rbm93bkltYWdlTG9hZGVyKGltYWdlSWQpO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignbG9hZEltYWdlRnJvbUltYWdlTG9hZGVyOiBubyBpbWFnZSBsb2FkZXIgZm9yIGltYWdlSWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZUxvYWRPYmplY3QgPSBsb2FkZXIoaW1hZ2VJZCwgb3B0aW9ucyk7IC8vIEJyb2FkY2FzdCBhbiBpbWFnZSBsb2FkZWQgZXZlbnQgb25jZSB0aGUgaW1hZ2UgaXMgbG9hZGVkXG5cbiAgaW1hZ2VMb2FkT2JqZWN0LnByb21pc2UudGhlbihmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZXZlbnRzXCJdLCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdLklNQUdFX0xPQURFRCwge1xuICAgICAgaW1hZ2U6IGltYWdlXG4gICAgfSk7XG4gIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgIHZhciBlcnJvck9iamVjdCA9IHtcbiAgICAgIGltYWdlSWQ6IGltYWdlSWQsXG4gICAgICBlcnJvcjogZXJyb3JcbiAgICB9O1xuICAgIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJldmVudHNcIl0sIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0uSU1BR0VfTE9BRF9GQUlMRUQsIGVycm9yT2JqZWN0KTtcbiAgfSk7XG4gIHJldHVybiBpbWFnZUxvYWRPYmplY3Q7XG59XG4vKipcclxuICogTG9hZHMgYW4gaW1hZ2UgZ2l2ZW4gYW4gaW1hZ2VJZCBhbmQgb3B0aW9uYWwgcHJpb3JpdHkgYW5kIHJldHVybnMgYSBwcm9taXNlIHdoaWNoIHdpbGwgcmVzb2x2ZSB0b1xyXG4gKiB0aGUgbG9hZGVkIGltYWdlIG9iamVjdCBvciBmYWlsIGlmIGFuIGVycm9yIG9jY3VycmVkLiAgVGhlIGxvYWRlZCBpbWFnZSBpcyBub3Qgc3RvcmVkIGluIHRoZSBjYWNoZS5cclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IGltYWdlSWQgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3QncyBpbWFnZUlkXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gdGhlIEltYWdlIExvYWRlclxyXG4gKlxyXG4gKiBAcmV0dXJucyB7SW1hZ2VMb2FkT2JqZWN0fSBBbiBPYmplY3Qgd2hpY2ggY2FuIGJlIHVzZWQgdG8gYWN0IGFmdGVyIGFuIGltYWdlIGlzIGxvYWRlZCBvciBsb2FkaW5nIGZhaWxzXHJcbiAqIEBtZW1iZXJvZiBJbWFnZUxvYWRlclxyXG4gKi9cblxuXG5mdW5jdGlvbiBsb2FkSW1hZ2UoaW1hZ2VJZCwgb3B0aW9ucykge1xuICBpZiAoaW1hZ2VJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdsb2FkSW1hZ2U6IHBhcmFtZXRlciBpbWFnZUlkIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIGltYWdlTG9hZE9iamVjdCA9IE9iamVjdChfaW1hZ2VDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0SW1hZ2VMb2FkT2JqZWN0XCJdKShpbWFnZUlkKTtcblxuICBpZiAoaW1hZ2VMb2FkT2JqZWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gaW1hZ2VMb2FkT2JqZWN0LnByb21pc2U7XG4gIH1cblxuICByZXR1cm4gbG9hZEltYWdlRnJvbUltYWdlTG9hZGVyKGltYWdlSWQsIG9wdGlvbnMpLnByb21pc2U7XG59IC8vXG5cbi8qKlxyXG4gKiBMb2FkcyBhbiBpbWFnZSBnaXZlbiBhbiBpbWFnZUlkIGFuZCBvcHRpb25hbCBwcmlvcml0eSBhbmQgcmV0dXJucyBhIHByb21pc2Ugd2hpY2ggd2lsbCByZXNvbHZlIHRvXHJcbiAqIHRoZSBsb2FkZWQgaW1hZ2Ugb2JqZWN0IG9yIGZhaWwgaWYgYW4gZXJyb3Igb2NjdXJyZWQuIFRoZSBpbWFnZSBpcyBzdG9yZWQgaW4gdGhlIGNhY2hlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge1N0cmluZ30gaW1hZ2VJZCBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdCdzIGltYWdlSWRcclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIHRvIGJlIHBhc3NlZCB0byB0aGUgSW1hZ2UgTG9hZGVyXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtJbWFnZUxvYWRPYmplY3R9IEltYWdlIExvYWRlciBPYmplY3RcclxuICogQG1lbWJlcm9mIEltYWdlTG9hZGVyXHJcbiAqL1xuXG5mdW5jdGlvbiBsb2FkQW5kQ2FjaGVJbWFnZShpbWFnZUlkLCBvcHRpb25zKSB7XG4gIGlmIChpbWFnZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2xvYWRBbmRDYWNoZUltYWdlOiBwYXJhbWV0ZXIgaW1hZ2VJZCBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZUxvYWRPYmplY3QgPSBPYmplY3QoX2ltYWdlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEltYWdlTG9hZE9iamVjdFwiXSkoaW1hZ2VJZCk7XG5cbiAgaWYgKGltYWdlTG9hZE9iamVjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGltYWdlTG9hZE9iamVjdC5wcm9taXNlO1xuICB9XG5cbiAgaW1hZ2VMb2FkT2JqZWN0ID0gbG9hZEltYWdlRnJvbUltYWdlTG9hZGVyKGltYWdlSWQsIG9wdGlvbnMpO1xuICBPYmplY3QoX2ltYWdlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInB1dEltYWdlTG9hZE9iamVjdFwiXSkoaW1hZ2VJZCwgaW1hZ2VMb2FkT2JqZWN0KTtcbiAgcmV0dXJuIGltYWdlTG9hZE9iamVjdC5wcm9taXNlO1xufVxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhbiBpbWFnZUxvYWRlciBwbHVnaW4gd2l0aCBjb3JuZXJzdG9uZSBmb3IgdGhlIHNwZWNpZmllZCBzY2hlbWVcclxuICpcclxuICogQHBhcmFtIHtTdHJpbmd9IHNjaGVtZSBUaGUgc2NoZW1lIHRvIHVzZSBmb3IgdGhpcyBpbWFnZSBsb2FkZXIgKGUuZy4gJ2RpY29td2ViJywgJ3dhZG91cmknLCAnaHR0cCcpXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGltYWdlTG9hZGVyIEEgQ29ybmVyc3RvbmUgSW1hZ2UgTG9hZGVyIGZ1bmN0aW9uXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKiBAbWVtYmVyb2YgSW1hZ2VMb2FkZXJcclxuICovXG5cbmZ1bmN0aW9uIHJlZ2lzdGVySW1hZ2VMb2FkZXIoc2NoZW1lLCBpbWFnZUxvYWRlcikge1xuICBpbWFnZUxvYWRlcnNbc2NoZW1lXSA9IGltYWdlTG9hZGVyO1xufVxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIG5ldyB1bmtub3duSW1hZ2VMb2FkZXIgYW5kIHJldHVybnMgdGhlIHByZXZpb3VzIG9uZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbWFnZUxvYWRlciBBIENvcm5lcnN0b25lIEltYWdlIExvYWRlclxyXG4gKlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258VW5kZWZpbmVkfSBUaGUgcHJldmlvdXMgVW5rbm93biBJbWFnZSBMb2FkZXJcclxuICogQG1lbWJlcm9mIEltYWdlTG9hZGVyXHJcbiAqL1xuXG5mdW5jdGlvbiByZWdpc3RlclVua25vd25JbWFnZUxvYWRlcihpbWFnZUxvYWRlcikge1xuICB2YXIgb2xkSW1hZ2VMb2FkZXIgPSB1bmtub3duSW1hZ2VMb2FkZXI7XG4gIHVua25vd25JbWFnZUxvYWRlciA9IGltYWdlTG9hZGVyO1xuICByZXR1cm4gb2xkSW1hZ2VMb2FkZXI7XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZHJhd0ltYWdlLCBnZW5lcmF0ZUx1dCwgZ2V0RGVmYXVsdFZpZXdwb3J0LCBzZXREZWZhdWx0Vmlld3BvcnQsIHJlcXVlc3RBbmltYXRpb25GcmFtZSwgc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEsIHN0b3JlZENvbG9yUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEsIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQsIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUHNldWRvY29sb3JMVVQsIGludGVybmFsLCByZW5kZXJMYWJlbE1hcEltYWdlLCByZW5kZXJQc2V1ZG9Db2xvckltYWdlLCByZW5kZXJDb2xvckltYWdlLCByZW5kZXJHcmF5c2NhbGVJbWFnZSwgcmVuZGVyV2ViSW1hZ2UsIHJlbmRlclRvQ2FudmFzLCBjYW52YXNUb1BpeGVsLCBkaXNhYmxlLCBkaXNwbGF5SW1hZ2UsIGRyYXcsIGRyYXdJbnZhbGlkYXRlZCwgZW5hYmxlLCBnZXRFbGVtZW50RGF0YSwgcmVtb3ZlRWxlbWVudERhdGEsIGdldEVuYWJsZWRFbGVtZW50LCBhZGRFbmFibGVkRWxlbWVudCwgZ2V0RW5hYmxlZEVsZW1lbnRzQnlJbWFnZUlkLCBnZXRFbmFibGVkRWxlbWVudHMsIGFkZExheWVyLCByZW1vdmVMYXllciwgZ2V0TGF5ZXIsIGdldExheWVycywgZ2V0VmlzaWJsZUxheWVycywgc2V0QWN0aXZlTGF5ZXIsIGdldEFjdGl2ZUxheWVyLCBwdXJnZUxheWVycywgc2V0TGF5ZXJJbWFnZSwgZml0VG9XaW5kb3csIGdldERlZmF1bHRWaWV3cG9ydEZvckltYWdlLCBnZXREaXNwbGF5ZWRBcmVhLCBnZXRJbWFnZSwgZ2V0UGl4ZWxzLCBnZXRTdG9yZWRQaXhlbHMsIGdldFZpZXdwb3J0LCBsb2FkSW1hZ2UsIGxvYWRBbmRDYWNoZUltYWdlLCByZWdpc3RlckltYWdlTG9hZGVyLCByZWdpc3RlclVua25vd25JbWFnZUxvYWRlciwgaW52YWxpZGF0ZSwgaW52YWxpZGF0ZUltYWdlSWQsIHBhZ2VUb1BpeGVsLCBwaXhlbFRvQ2FudmFzLCByZXNldCwgcmVzaXplLCBzZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbSwgc2V0Vmlld3BvcnQsIHVwZGF0ZUltYWdlLCBwaXhlbERhdGFUb0ZhbHNlQ29sb3JEYXRhLCByZW5kZXJpbmcsIGltYWdlQ2FjaGUsIG1ldGFEYXRhLCB3ZWJHTCwgY29sb3JzLCBjb252ZXJ0SW1hZ2VUb0ZhbHNlQ29sb3JJbWFnZSwgY29udmVydFRvRmFsc2VDb2xvckltYWdlLCByZXN0b3JlSW1hZ2UsIEVWRU5UUywgZXZlbnRzLCB0cmlnZ2VyRXZlbnQsIGltYWdlTG9hZFBvb2xNYW5hZ2VyLCBpbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyLCBSZXF1ZXN0UG9vbE1hbmFnZXIsIGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIkVWRU5UU1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJldmVudHNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEVuYWJsZWRFbGVtZW50XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRFbmFibGVkRWxlbWVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImFkZEVuYWJsZWRFbGVtZW50XCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0RW5hYmxlZEVsZW1lbnRzQnlJbWFnZUlkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRzQnlJbWFnZUlkXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0RW5hYmxlZEVsZW1lbnRzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRzXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbGF5ZXJzLmpzICovIFwiLi9sYXllcnMuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImFkZExheWVyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlTGF5ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJyZW1vdmVMYXllclwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldExheWVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZ2V0TGF5ZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRMYXllcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJnZXRMYXllcnNcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRWaXNpYmxlTGF5ZXJzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZ2V0VmlzaWJsZUxheWVyc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldEFjdGl2ZUxheWVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wic2V0QWN0aXZlTGF5ZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRBY3RpdmVMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImdldEFjdGl2ZUxheWVyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicHVyZ2VMYXllcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJwdXJnZUxheWVyc1wiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldExheWVySW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXRMYXllckltYWdlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9mYWxzZUNvbG9yTWFwcGluZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9mYWxzZUNvbG9yTWFwcGluZy5qcyAqLyBcIi4vZmFsc2VDb2xvck1hcHBpbmcuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb252ZXJ0SW1hZ2VUb0ZhbHNlQ29sb3JJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9mYWxzZUNvbG9yTWFwcGluZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiY29udmVydEltYWdlVG9GYWxzZUNvbG9ySW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfZmFsc2VDb2xvck1hcHBpbmdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImNvbnZlcnRUb0ZhbHNlQ29sb3JJbWFnZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlc3RvcmVJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9mYWxzZUNvbG9yTWFwcGluZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wicmVzdG9yZUltYWdlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbmFibGVkRWxlbWVudERhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlZEVsZW1lbnREYXRhLmpzICovIFwiLi9lbmFibGVkRWxlbWVudERhdGEuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRFbGVtZW50RGF0YVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9lbmFibGVkRWxlbWVudERhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcImdldEVsZW1lbnREYXRhXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVtb3ZlRWxlbWVudERhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfZW5hYmxlZEVsZW1lbnREYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJyZW1vdmVFbGVtZW50RGF0YVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW1hZ2VMb2FkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW1hZ2VMb2FkZXIuanMgKi8gXCIuL2ltYWdlTG9hZGVyLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwibG9hZEltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ltYWdlTG9hZGVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJsb2FkSW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJsb2FkQW5kQ2FjaGVJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbWFnZUxvYWRlcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wibG9hZEFuZENhY2hlSW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZWdpc3RlckltYWdlTG9hZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ltYWdlTG9hZGVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJyZWdpc3RlckltYWdlTG9hZGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVnaXN0ZXJVbmtub3duSW1hZ2VMb2FkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW1hZ2VMb2FkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcInJlZ2lzdGVyVW5rbm93bkltYWdlTG9hZGVyXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXF1ZXN0UG9vbF9pbWFnZUxvYWRQb29sTWFuYWdlcl90c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZXF1ZXN0UG9vbC9pbWFnZUxvYWRQb29sTWFuYWdlci50cyAqLyBcIi4vcmVxdWVzdFBvb2wvaW1hZ2VMb2FkUG9vbE1hbmFnZXIudHNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJpbWFnZUxvYWRQb29sTWFuYWdlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZXF1ZXN0UG9vbF9pbWFnZUxvYWRQb29sTWFuYWdlcl90c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVxdWVzdFBvb2xfaW1hZ2VSZXRyaWV2YWxQb29sTWFuYWdlcl90c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZXF1ZXN0UG9vbC9pbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyLnRzICovIFwiLi9yZXF1ZXN0UG9vbC9pbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyLnRzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW1hZ2VSZXRyaWV2YWxQb29sTWFuYWdlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZXF1ZXN0UG9vbF9pbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyX3RzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXF1ZXN0UG9vbF9SZXF1ZXN0UG9vbE1hbmFnZXJfdHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVxdWVzdFBvb2wvUmVxdWVzdFBvb2xNYW5hZ2VyLnRzICovIFwiLi9yZXF1ZXN0UG9vbC9SZXF1ZXN0UG9vbE1hbmFnZXIudHNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJSZXF1ZXN0UG9vbE1hbmFnZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVxdWVzdFBvb2xfUmVxdWVzdFBvb2xNYW5hZ2VyX3RzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJSZXF1ZXN0UG9vbE1hbmFnZXJcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NhbnZhc1RvUGl4ZWxfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY2FudmFzVG9QaXhlbC5qcyAqLyBcIi4vY2FudmFzVG9QaXhlbC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNhbnZhc1RvUGl4ZWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfY2FudmFzVG9QaXhlbF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb2xvcnMvaW5kZXguanMgKi8gXCIuL2NvbG9ycy9pbmRleC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImNvbG9yc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9jb2xvcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kaXNhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kaXNhYmxlLmpzICovIFwiLi9kaXNhYmxlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGlzYWJsZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9kaXNhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZGlzcGxheUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kaXNwbGF5SW1hZ2UuanMgKi8gXCIuL2Rpc3BsYXlJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRpc3BsYXlJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9kaXNwbGF5SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEyX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kcmF3X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kcmF3LmpzICovIFwiLi9kcmF3LmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZHJhd1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9kcmF3X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xM19fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZHJhd0ltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9kcmF3SW1hZ2UuanMgKi8gXCIuL2ludGVybmFsL2RyYXdJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRyYXdJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE0X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kcmF3SW52YWxpZGF0ZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2RyYXdJbnZhbGlkYXRlZC5qcyAqLyBcIi4vZHJhd0ludmFsaWRhdGVkLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZHJhd0ludmFsaWRhdGVkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2RyYXdJbnZhbGlkYXRlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTVfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlLmpzICovIFwiLi9lbmFibGUuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJlbmFibGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfZW5hYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xNl9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZml0VG9XaW5kb3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ZpdFRvV2luZG93LmpzICovIFwiLi9maXRUb1dpbmRvdy5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImZpdFRvV2luZG93XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ZpdFRvV2luZG93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xN19fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2VuZXJhdGVMdXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dlbmVyYXRlTHV0LmpzICovIFwiLi9pbnRlcm5hbC9nZW5lcmF0ZUx1dC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdlbmVyYXRlTHV0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX2dlbmVyYXRlTHV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanMgKi8gXCIuL2ludGVybmFsL2dldERlZmF1bHRWaWV3cG9ydC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldERlZmF1bHRWaWV3cG9ydFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9nZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE5X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nZXREZWZhdWx0Vmlld3BvcnRGb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZ2V0RGVmYXVsdFZpZXdwb3J0Rm9ySW1hZ2UuanMgKi8gXCIuL2dldERlZmF1bHRWaWV3cG9ydEZvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0RGVmYXVsdFZpZXdwb3J0Rm9ySW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfZ2V0RGVmYXVsdFZpZXdwb3J0Rm9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIwX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzICovIFwiLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0RGlzcGxheWVkQXJlYVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIyX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldEltYWdlLmpzICovIFwiLi9nZXRJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldEltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2dldEltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0UGl4ZWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXRQaXhlbHMuanMgKi8gXCIuL2dldFBpeGVscy5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFBpeGVsc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9nZXRQaXhlbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIzX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nZXRTdG9yZWRQaXhlbHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldFN0b3JlZFBpeGVscy5qcyAqLyBcIi4vZ2V0U3RvcmVkUGl4ZWxzLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0U3RvcmVkUGl4ZWxzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2dldFN0b3JlZFBpeGVsc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjRfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dldFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXRWaWV3cG9ydC5qcyAqLyBcIi4vZ2V0Vmlld3BvcnQuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRWaWV3cG9ydFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9nZXRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjVfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ltYWdlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ltYWdlQ2FjaGUuanMgKi8gXCIuL2ltYWdlQ2FjaGUuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJpbWFnZUNhY2hlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ltYWdlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI2X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvaW5kZXguanMgKi8gXCIuL2ludGVybmFsL2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW50ZXJuYWxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI3X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnZhbGlkYXRlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yOF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnZhbGlkYXRlLmpzICovIFwiLi9pbnZhbGlkYXRlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW52YWxpZGF0ZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnZhbGlkYXRlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yOF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW52YWxpZGF0ZUltYWdlSWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludmFsaWRhdGVJbWFnZUlkLmpzICovIFwiLi9pbnZhbGlkYXRlSW1hZ2VJZC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImludmFsaWRhdGVJbWFnZUlkXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludmFsaWRhdGVJbWFnZUlkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yOV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbWV0YURhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL21ldGFEYXRhLmpzICovIFwiLi9tZXRhRGF0YS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcIm1ldGFEYXRhXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX21ldGFEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGFnZVRvUGl4ZWxfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMxX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BhZ2VUb1BpeGVsLmpzICovIFwiLi9wYWdlVG9QaXhlbC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInBhZ2VUb1BpeGVsXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3BhZ2VUb1BpeGVsX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YS5qcyAqLyBcIi4vcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInBpeGVsRGF0YVRvRmFsc2VDb2xvckRhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzJfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3BpeGVsVG9DYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3BpeGVsVG9DYW52YXMuanMgKi8gXCIuL3BpeGVsVG9DYW52YXMuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJwaXhlbFRvQ2FudmFzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3BpeGVsVG9DYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMzX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyaW5nL3JlbmRlckNvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJDb2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVuZGVyQ29sb3JJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzRfX1tcInJlbmRlckNvbG9ySW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlbmRlcmluZ19yZW5kZXJHcmF5c2NhbGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyaW5nL3JlbmRlckdyYXlzY2FsZUltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyR3JheXNjYWxlSW1hZ2UuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJHcmF5c2NhbGVJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZW5kZXJpbmdfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM1X19bXCJyZW5kZXJHcmF5c2NhbGVJbWFnZVwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyaW5nX3JlbmRlckxhYmVsTWFwSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlbmRlcmluZy9yZW5kZXJMYWJlbE1hcEltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyTGFiZWxNYXBJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlbmRlckxhYmVsTWFwSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVuZGVyaW5nX3JlbmRlckxhYmVsTWFwSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM2X19bXCJyZW5kZXJMYWJlbE1hcEltYWdlXCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyaW5nL3JlbmRlclBzZXVkb0NvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJQc2V1ZG9Db2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVuZGVyUHNldWRvQ29sb3JJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZW5kZXJpbmdfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfX1tcInJlbmRlclBzZXVkb0NvbG9ySW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlbmRlcmluZ19yZW5kZXJUb0NhbnZhc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyaW5nL3JlbmRlclRvQ2FudmFzLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyVG9DYW52YXMuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJUb0NhbnZhc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9yZW5kZXJpbmdfcmVuZGVyVG9DYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM4X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyV2ViSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzM5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlbmRlcmluZy9yZW5kZXJXZWJJbWFnZS5qcyAqLyBcIi4vcmVuZGVyaW5nL3JlbmRlcldlYkltYWdlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVuZGVyV2ViSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVuZGVyaW5nX3JlbmRlcldlYkltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOV9fW1wicmVuZGVyV2ViSW1hZ2VcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlbmRlcmluZ19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyaW5nL2luZGV4LmpzICovIFwiLi9yZW5kZXJpbmcvaW5kZXguanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJpbmdcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVuZGVyaW5nX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80MF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfcmVxdWVzdEFuaW1hdGlvbkZyYW1lX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMgKi8gXCIuL2ludGVybmFsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlcXVlc3RBbmltYXRpb25GcmFtZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQxX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXNldF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVzZXQuanMgKi8gXCIuL3Jlc2V0LmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVzZXRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfcmVzZXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQyX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXNpemVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Jlc2l6ZS5qcyAqLyBcIi4vcmVzaXplLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVzaXplXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3Jlc2l6ZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDNfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3NldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvc2V0RGVmYXVsdFZpZXdwb3J0LmpzICovIFwiLi9pbnRlcm5hbC9zZXREZWZhdWx0Vmlld3BvcnQuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXREZWZhdWx0Vmlld3BvcnRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfc2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ1X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtLmpzICovIFwiLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80NV9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ2X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldFZpZXdwb3J0LmpzICovIFwiLi9zZXRWaWV3cG9ydC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNldFZpZXdwb3J0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX3NldFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80Nl9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInN0b3JlZENvbG9yUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfaW50ZXJuYWxfc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDdfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80OF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDhfX1tcImRlZmF1bHRcIl07IH0pO1xuXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ5X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQuanMgKi8gXCIuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQuanNcIik7XG4vKiBoYXJtb255IHJlZXhwb3J0IChzYWZlKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVUXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ5X19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVULmpzICovIFwiLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVULmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwic3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF9pbnRlcm5hbF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MF9fW1wiZGVmYXVsdFwiXTsgfSk7XG5cbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgcmVleHBvcnQgKHNhZmUpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInRyaWdnZXJFdmVudFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUxX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91cGRhdGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXBkYXRlSW1hZ2UuanMgKi8gXCIuL3VwZGF0ZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidXBkYXRlSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUyX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF93ZWJnbF9pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vd2ViZ2wvaW5kZXguanMgKi8gXCIuL3dlYmdsL2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSByZWV4cG9ydCAoc2FmZSkgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwid2ViR0xcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBfd2ViZ2xfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzUzX19bXCJkZWZhdWx0XCJdOyB9KTtcblxuLy8gSW50ZXJuYWwgKHNvbWUgb2YgdGhlc2UgYXJlIGZyb20gb2xkIGludGVybmFsL2xlZ2FjeSBleHBvc2UpXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIC8vIFJlbmRlcmluZ1xuXG4vKipcbiAqIEBtb2R1bGUgUGl4ZWxDb29yZGluYXRlU3lzdGVtXG4gKi9cblxuLyoqXG4gKiBAbW9kdWxlIFZpZXdwb3J0U2V0dGluZ3NcbiAqL1xuXG52YXIgY29ybmVyc3RvbmUgPSB7XG4gIGRyYXdJbWFnZTogX2ludGVybmFsX2RyYXdJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTRfX1tcImRlZmF1bHRcIl0sXG4gIGdlbmVyYXRlTHV0OiBfaW50ZXJuYWxfZ2VuZXJhdGVMdXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE4X19bXCJkZWZhdWx0XCJdLFxuICBnZXREZWZhdWx0Vmlld3BvcnQ6IF9pbnRlcm5hbF9nZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE5X19bXCJkZWZhdWx0XCJdLFxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWU6IF9pbnRlcm5hbF9yZXF1ZXN0QW5pbWF0aW9uRnJhbWVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQxX19bXCJkZWZhdWx0XCJdLFxuICBzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YTogX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80OF9fW1wiZGVmYXVsdFwiXSxcbiAgc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YTogX2ludGVybmFsX3N0b3JlZENvbG9yUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ3X19bXCJkZWZhdWx0XCJdLFxuICBzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVUOiBfaW50ZXJuYWxfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFDb2xvckxVVF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDlfX1tcImRlZmF1bHRcIl0sXG4gIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUHNldWRvY29sb3JMVVQ6IF9pbnRlcm5hbF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81MF9fW1wiZGVmYXVsdFwiXSxcbiAgaW50ZXJuYWw6IF9pbnRlcm5hbF9pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjdfX1tcImRlZmF1bHRcIl0sXG4gIHJlbmRlckxhYmVsTWFwSW1hZ2U6IF9yZW5kZXJpbmdfcmVuZGVyTGFiZWxNYXBJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzZfX1tcInJlbmRlckxhYmVsTWFwSW1hZ2VcIl0sXG4gIHJlbmRlclBzZXVkb0NvbG9ySW1hZ2U6IF9yZW5kZXJpbmdfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzdfX1tcInJlbmRlclBzZXVkb0NvbG9ySW1hZ2VcIl0sXG4gIHJlbmRlckNvbG9ySW1hZ2U6IF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMzRfX1tcInJlbmRlckNvbG9ySW1hZ2VcIl0sXG4gIHJlbmRlckdyYXlzY2FsZUltYWdlOiBfcmVuZGVyaW5nX3JlbmRlckdyYXlzY2FsZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zNV9fW1wicmVuZGVyR3JheXNjYWxlSW1hZ2VcIl0sXG4gIHJlbmRlcldlYkltYWdlOiBfcmVuZGVyaW5nX3JlbmRlcldlYkltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOV9fW1wicmVuZGVyV2ViSW1hZ2VcIl0sXG4gIHJlbmRlclRvQ2FudmFzOiBfcmVuZGVyaW5nX3JlbmRlclRvQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zOF9fW1wiZGVmYXVsdFwiXSxcbiAgY2FudmFzVG9QaXhlbDogX2NhbnZhc1RvUGl4ZWxfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcImRlZmF1bHRcIl0sXG4gIGRpc2FibGU6IF9kaXNhYmxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMV9fW1wiZGVmYXVsdFwiXSxcbiAgZGlzcGxheUltYWdlOiBfZGlzcGxheUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fW1wiZGVmYXVsdFwiXSxcbiAgZHJhdzogX2RyYXdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEzX19bXCJkZWZhdWx0XCJdLFxuICBkcmF3SW52YWxpZGF0ZWQ6IF9kcmF3SW52YWxpZGF0ZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE1X19bXCJkZWZhdWx0XCJdLFxuICBlbmFibGU6IF9lbmFibGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE2X19bXCJkZWZhdWx0XCJdLFxuICBnZXRFbGVtZW50RGF0YTogX2VuYWJsZWRFbGVtZW50RGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZ2V0RWxlbWVudERhdGFcIl0sXG4gIHJlbW92ZUVsZW1lbnREYXRhOiBfZW5hYmxlZEVsZW1lbnREYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJyZW1vdmVFbGVtZW50RGF0YVwiXSxcbiAgZ2V0RW5hYmxlZEVsZW1lbnQ6IF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdLFxuICBhZGRFbmFibGVkRWxlbWVudDogX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiYWRkRW5hYmxlZEVsZW1lbnRcIl0sXG4gIGdldEVuYWJsZWRFbGVtZW50c0J5SW1hZ2VJZDogX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRzQnlJbWFnZUlkXCJdLFxuICBnZXRFbmFibGVkRWxlbWVudHM6IF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50c1wiXSxcbiAgYWRkTGF5ZXI6IF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImFkZExheWVyXCJdLFxuICByZW1vdmVMYXllcjogX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicmVtb3ZlTGF5ZXJcIl0sXG4gIGdldExheWVyOiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJnZXRMYXllclwiXSxcbiAgZ2V0TGF5ZXJzOiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJnZXRMYXllcnNcIl0sXG4gIGdldFZpc2libGVMYXllcnM6IF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImdldFZpc2libGVMYXllcnNcIl0sXG4gIHNldEFjdGl2ZUxheWVyOiBfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJzZXRBY3RpdmVMYXllclwiXSxcbiAgZ2V0QWN0aXZlTGF5ZXI6IF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImdldEFjdGl2ZUxheWVyXCJdLFxuICBwdXJnZUxheWVyczogX2xheWVyc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicHVyZ2VMYXllcnNcIl0sXG4gIHNldExheWVySW1hZ2U6IF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInNldExheWVySW1hZ2VcIl0sXG4gIGZpdFRvV2luZG93OiBfZml0VG9XaW5kb3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzE3X19bXCJkZWZhdWx0XCJdLFxuICBnZXREZWZhdWx0Vmlld3BvcnRGb3JJbWFnZTogX2dldERlZmF1bHRWaWV3cG9ydEZvckltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMF9fW1wiZGVmYXVsdFwiXSxcbiAgZ2V0RGlzcGxheWVkQXJlYTogX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzIxX19bXCJkZWZhdWx0XCJdLFxuICBzZXREZWZhdWx0Vmlld3BvcnQ6IF9pbnRlcm5hbF9zZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ0X19bXCJkZWZhdWx0XCJdLFxuICBnZXRJbWFnZTogX2dldEltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yMl9fW1wiZGVmYXVsdFwiXSxcbiAgZ2V0UGl4ZWxzOiBfZ2V0UGl4ZWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yM19fW1wiZGVmYXVsdFwiXSxcbiAgZ2V0U3RvcmVkUGl4ZWxzOiBfZ2V0U3RvcmVkUGl4ZWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yNF9fW1wiZGVmYXVsdFwiXSxcbiAgZ2V0Vmlld3BvcnQ6IF9nZXRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjVfX1tcImRlZmF1bHRcIl0sXG4gIGxvYWRJbWFnZTogX2ltYWdlTG9hZGVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJsb2FkSW1hZ2VcIl0sXG4gIGxvYWRBbmRDYWNoZUltYWdlOiBfaW1hZ2VMb2FkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImxvYWRBbmRDYWNoZUltYWdlXCJdLFxuICByZWdpc3RlckltYWdlTG9hZGVyOiBfaW1hZ2VMb2FkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcInJlZ2lzdGVySW1hZ2VMb2FkZXJcIl0sXG4gIHJlZ2lzdGVyVW5rbm93bkltYWdlTG9hZGVyOiBfaW1hZ2VMb2FkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcInJlZ2lzdGVyVW5rbm93bkltYWdlTG9hZGVyXCJdLFxuICBpbnZhbGlkYXRlOiBfaW52YWxpZGF0ZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjhfX1tcImRlZmF1bHRcIl0sXG4gIGludmFsaWRhdGVJbWFnZUlkOiBfaW52YWxpZGF0ZUltYWdlSWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzI5X19bXCJkZWZhdWx0XCJdLFxuICBwYWdlVG9QaXhlbDogX3BhZ2VUb1BpeGVsX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zMV9fW1wiZGVmYXVsdFwiXSxcbiAgcGl4ZWxUb0NhbnZhczogX3BpeGVsVG9DYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMzX19bXCJkZWZhdWx0XCJdLFxuICByZXNldDogX3Jlc2V0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80Ml9fW1wiZGVmYXVsdFwiXSxcbiAgcmVzaXplOiBfcmVzaXplX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80M19fW1wiZGVmYXVsdFwiXSxcbiAgc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW06IF9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNDVfX1tcImRlZmF1bHRcIl0sXG4gIHNldFZpZXdwb3J0OiBfc2V0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQ2X19bXCJkZWZhdWx0XCJdLFxuICB1cGRhdGVJbWFnZTogX3VwZGF0ZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81Ml9fW1wiZGVmYXVsdFwiXSxcbiAgcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YTogX3BpeGVsRGF0YVRvRmFsc2VDb2xvckRhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMyX19bXCJkZWZhdWx0XCJdLFxuICByZW5kZXJpbmc6IF9yZW5kZXJpbmdfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzQwX19bXCJkZWZhdWx0XCJdLFxuICBpbWFnZUNhY2hlOiBfaW1hZ2VDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMjZfX1tcImRlZmF1bHRcIl0sXG4gIG1ldGFEYXRhOiBfbWV0YURhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzMwX19bXCJkZWZhdWx0XCJdLFxuICB3ZWJHTDogX3dlYmdsX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81M19fW1wiZGVmYXVsdFwiXSxcbiAgY29sb3JzOiBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiZGVmYXVsdFwiXSxcbiAgY29udmVydEltYWdlVG9GYWxzZUNvbG9ySW1hZ2U6IF9mYWxzZUNvbG9yTWFwcGluZ19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiY29udmVydEltYWdlVG9GYWxzZUNvbG9ySW1hZ2VcIl0sXG4gIGNvbnZlcnRUb0ZhbHNlQ29sb3JJbWFnZTogX2ZhbHNlQ29sb3JNYXBwaW5nX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJjb252ZXJ0VG9GYWxzZUNvbG9ySW1hZ2VcIl0sXG4gIHJlc3RvcmVJbWFnZTogX2ZhbHNlQ29sb3JNYXBwaW5nX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJyZXN0b3JlSW1hZ2VcIl0sXG4gIEVWRU5UUzogX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSxcbiAgZXZlbnRzOiBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJldmVudHNcIl0sXG4gIHRyaWdnZXJFdmVudDogX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNTFfX1tcImRlZmF1bHRcIl0sXG4gIGltYWdlTG9hZFBvb2xNYW5hZ2VyOiBfcmVxdWVzdFBvb2xfaW1hZ2VMb2FkUG9vbE1hbmFnZXJfdHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcImRlZmF1bHRcIl0sXG4gIGltYWdlUmV0cmlldmFsUG9vbE1hbmFnZXI6IF9yZXF1ZXN0UG9vbF9pbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyX3RzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJkZWZhdWx0XCJdLFxuICBSZXF1ZXN0UG9vbE1hbmFnZXI6IF9yZXF1ZXN0UG9vbF9SZXF1ZXN0UG9vbE1hbmFnZXJfdHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcIlJlcXVlc3RQb29sTWFuYWdlclwiXVxufTtcblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChjb3JuZXJzdG9uZSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvY2FsY3VsYXRlVHJhbnNmb3JtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvY2FsY3VsYXRlVHJhbnNmb3JtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmFuc2Zvcm0uanMgKi8gXCIuL2ludGVybmFsL3RyYW5zZm9ybS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0RGlzcGxheWVkQXJlYV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXREaXNwbGF5ZWRBcmVhLmpzICovIFwiLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzXCIpO1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSB0cmFuc2Zvcm0gZm9yIGEgQ29ybmVyc3RvbmUgZW5hYmxlZCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgVGhlIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudFxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gVGhlIHZpZXdwb3J0IHNjYWxlXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm19IFRoZSBjdXJyZW50IHRyYW5zZm9ybVxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZW5hYmxlZEVsZW1lbnQsIHNjYWxlKSB7XG4gIHZhciB0cmFuc2Zvcm0gPSBuZXcgX3RyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiVHJhbnNmb3JtXCJdKCk7IC8vIE1vdmUgdG8gY2VudGVyIG9mIGNhbnZhc1xuXG4gIHRyYW5zZm9ybS50cmFuc2xhdGUoZW5hYmxlZEVsZW1lbnQuY2FudmFzLndpZHRoIC8gMiwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLmhlaWdodCAvIDIpOyAvLyBBcHBseSB0aGUgcm90YXRpb24gYmVmb3JlIHNjYWxpbmcgZm9yIG5vbiBzcXVhcmUgcGl4ZWxzXG5cbiAgdmFyIGFuZ2xlID0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucm90YXRpb247XG5cbiAgaWYgKGFuZ2xlICE9PSAwKSB7XG4gICAgdHJhbnNmb3JtLnJvdGF0ZShhbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICB9IC8vIEFwcGx5IHRoZSBzY2FsZVxuXG5cbiAgdmFyIHdpZHRoU2NhbGUgPSBlbmFibGVkRWxlbWVudC52aWV3cG9ydC5zY2FsZTtcbiAgdmFyIGhlaWdodFNjYWxlID0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuc2NhbGU7XG4gIHZhciBpbWFnZURpc3BsYXllZEFyZWEgPSBPYmplY3QoX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LmltYWdlLCBlbmFibGVkRWxlbWVudC52aWV3cG9ydCk7XG4gIHZhciBvZmZzZXRYID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueCAtIDE7XG4gIHZhciBvZmZzZXRZID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueSAtIDE7XG4gIHZhciB3aWR0aCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnggLSBvZmZzZXRYO1xuICB2YXIgaGVpZ2h0ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLmJyaGMueSAtIG9mZnNldFk7XG5cbiAgaWYgKGltYWdlRGlzcGxheWVkQXJlYS5wcmVzZW50YXRpb25TaXplTW9kZSA9PT0gJ05PTkUnKSB7XG4gICAgaWYgKGVuYWJsZWRFbGVtZW50LmltYWdlLnJvd1BpeGVsU3BhY2luZyA8IGVuYWJsZWRFbGVtZW50LmltYWdlLmNvbHVtblBpeGVsU3BhY2luZykge1xuICAgICAgd2lkdGhTY2FsZSAqPSBlbmFibGVkRWxlbWVudC5pbWFnZS5jb2x1bW5QaXhlbFNwYWNpbmcgLyBlbmFibGVkRWxlbWVudC5pbWFnZS5yb3dQaXhlbFNwYWNpbmc7XG4gICAgfSBlbHNlIGlmIChlbmFibGVkRWxlbWVudC5pbWFnZS5jb2x1bW5QaXhlbFNwYWNpbmcgPCBlbmFibGVkRWxlbWVudC5pbWFnZS5yb3dQaXhlbFNwYWNpbmcpIHtcbiAgICAgIGhlaWdodFNjYWxlICo9IGVuYWJsZWRFbGVtZW50LmltYWdlLnJvd1BpeGVsU3BhY2luZyAvIGVuYWJsZWRFbGVtZW50LmltYWdlLmNvbHVtblBpeGVsU3BhY2luZztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhlc2Ugc2hvdWxkIGJlIGdvb2QgZm9yIFwiVFJVRSBTSVpFXCIgYW5kIFwiTUFHTklGWVwiXG4gICAgd2lkdGhTY2FsZSA9IGltYWdlRGlzcGxheWVkQXJlYS5jb2x1bW5QaXhlbFNwYWNpbmc7XG4gICAgaGVpZ2h0U2NhbGUgPSBpbWFnZURpc3BsYXllZEFyZWEucm93UGl4ZWxTcGFjaW5nO1xuXG4gICAgaWYgKGltYWdlRGlzcGxheWVkQXJlYS5wcmVzZW50YXRpb25TaXplTW9kZSA9PT0gJ1NDQUxFIFRPIEZJVCcpIHtcbiAgICAgIC8vIEZpdCBUUlVFIElNQUdFIGltYWdlICh3aWR0aC9oZWlnaHQpIHRvIHdpbmRvd1xuICAgICAgdmFyIHZlcnRpY2FsU2NhbGUgPSBlbmFibGVkRWxlbWVudC5jYW52YXMuaGVpZ2h0IC8gKGhlaWdodCAqIGhlaWdodFNjYWxlKTtcbiAgICAgIHZhciBob3Jpem9udGFsU2NhbGUgPSBlbmFibGVkRWxlbWVudC5jYW52YXMud2lkdGggLyAod2lkdGggKiB3aWR0aFNjYWxlKTsgLy8gQXBwbHkgbmV3IHNjYWxlXG5cbiAgICAgIHdpZHRoU2NhbGUgPSBoZWlnaHRTY2FsZSA9IE1hdGgubWluKGhvcml6b250YWxTY2FsZSwgdmVydGljYWxTY2FsZSk7XG5cbiAgICAgIGlmIChpbWFnZURpc3BsYXllZEFyZWEucm93UGl4ZWxTcGFjaW5nIDwgaW1hZ2VEaXNwbGF5ZWRBcmVhLmNvbHVtblBpeGVsU3BhY2luZykge1xuICAgICAgICB3aWR0aFNjYWxlICo9IGltYWdlRGlzcGxheWVkQXJlYS5jb2x1bW5QaXhlbFNwYWNpbmcgLyBpbWFnZURpc3BsYXllZEFyZWEucm93UGl4ZWxTcGFjaW5nO1xuICAgICAgfSBlbHNlIGlmIChpbWFnZURpc3BsYXllZEFyZWEuY29sdW1uUGl4ZWxTcGFjaW5nIDwgaW1hZ2VEaXNwbGF5ZWRBcmVhLnJvd1BpeGVsU3BhY2luZykge1xuICAgICAgICBoZWlnaHRTY2FsZSAqPSBpbWFnZURpc3BsYXllZEFyZWEucm93UGl4ZWxTcGFjaW5nIC8gaW1hZ2VEaXNwbGF5ZWRBcmVhLmNvbHVtblBpeGVsU3BhY2luZztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0cmFuc2Zvcm0uc2NhbGUod2lkdGhTY2FsZSwgaGVpZ2h0U2NhbGUpOyAvLyBVbnJvdGF0ZSB0byBzbyB3ZSBjYW4gdHJhbnNsYXRlIHVucm90YXRlZFxuXG4gIGlmIChhbmdsZSAhPT0gMCkge1xuICAgIHRyYW5zZm9ybS5yb3RhdGUoLWFuZ2xlICogTWF0aC5QSSAvIDE4MCk7XG4gIH0gLy8gQXBwbHkgdGhlIHBhbiBvZmZzZXRcblxuXG4gIHRyYW5zZm9ybS50cmFuc2xhdGUoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudHJhbnNsYXRpb24ueCwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudHJhbnNsYXRpb24ueSk7IC8vIFJvdGF0ZSBhZ2FpbiBzbyB3ZSBjYW4gYXBwbHkgZ2VuZXJhbCBzY2FsZVxuXG4gIGlmIChhbmdsZSAhPT0gMCkge1xuICAgIHRyYW5zZm9ybS5yb3RhdGUoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgfVxuXG4gIGlmIChzY2FsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gQXBwbHkgdGhlIGZvbnQgc2NhbGVcbiAgICB0cmFuc2Zvcm0uc2NhbGUoc2NhbGUsIHNjYWxlKTtcbiAgfSAvLyBBcHBseSBGbGlwIGlmIHJlcXVpcmVkXG5cblxuICBpZiAoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuaGZsaXApIHtcbiAgICB0cmFuc2Zvcm0uc2NhbGUoLTEsIDEpO1xuICB9XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnZmbGlwKSB7XG4gICAgdHJhbnNmb3JtLnNjYWxlKDEsIC0xKTtcbiAgfSAvLyBNb3ZlIGJhY2sgZnJvbSBjZW50ZXIgb2YgaW1hZ2VcblxuXG4gIHRyYW5zZm9ybS50cmFuc2xhdGUoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpOyAvLyBNb3ZlIHRvIGRpc3BsYXllZEFyZWFcblxuICB0cmFuc2Zvcm0udHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9jb21wdXRlQXV0b1ZvaS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvY29tcHV0ZUF1dG9Wb2kuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBjb21wdXRlQXV0b1ZvaTsgfSk7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBWT0kgdG8gZGlzcGxheSBhbGwgdGhlIHBpeGVscyBpZiBubyBWT0kgTFVUIGRhdGEgKFdpbmRvdyBXaWR0aC9XaW5kb3cgQ2VudGVyIG9yIHZvaUxVVCkgZXhpc3RzIG9uIHRoZSB2aWV3cG9ydCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWaWV3cG9ydH0gdmlld3BvcnQgLSBPYmplY3QgY29udGFpbmluZyB0aGUgdmlld3BvcnQgcHJvcGVydGllc1xuICogQHBhcmFtIHtPYmplY3R9IGltYWdlIEFuIEltYWdlIGxvYWRlZCBieSBhIENvcm5lcnN0b25lIEltYWdlIExvYWRlclxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUF1dG9Wb2kodmlld3BvcnQsIGltYWdlKSB7XG4gIGlmIChoYXNWb2kodmlld3BvcnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIG1heFZvaSA9IGltYWdlLm1heFBpeGVsVmFsdWUgKiBpbWFnZS5zbG9wZSArIGltYWdlLmludGVyY2VwdDtcbiAgdmFyIG1pblZvaSA9IGltYWdlLm1pblBpeGVsVmFsdWUgKiBpbWFnZS5zbG9wZSArIGltYWdlLmludGVyY2VwdDtcbiAgdmFyIHd3ID0gbWF4Vm9pIC0gbWluVm9pO1xuICB2YXIgd2MgPSAobWF4Vm9pICsgbWluVm9pKSAvIDI7XG5cbiAgaWYgKHZpZXdwb3J0LnZvaSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdmlld3BvcnQudm9pID0ge1xuICAgICAgd2luZG93V2lkdGg6IHd3LFxuICAgICAgd2luZG93Q2VudGVyOiB3Y1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmlld3BvcnQudm9pLndpbmRvd1dpZHRoID0gd3c7XG4gICAgdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciA9IHdjO1xuICB9XG59XG4vKipcbiAqIENoZWNrIGlmIHZpZXdwb3J0IGhhcyB2b2kgTFVUIGRhdGFcbiAqIEBwYXJhbSB7YW55fSB2aWV3cG9ydCBUaGUgdmlld3BvcnQgdG8gY2hlY2sgZm9yIHZvaSBMVVQgZGF0YVxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgdmlld3BvcnQgaGFzIExVVCBkYXRhIChXaW5kb3cgV2lkdGgvV2luZG93IENlbnRlciBvciB2b2lMVVQpLiBPdGhlcndpc2UsIGZhbHNlLlxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuZnVuY3Rpb24gaGFzVm9pKHZpZXdwb3J0KSB7XG4gIHZhciBoYXNMdXQgPSB2aWV3cG9ydC52b2lMVVQgJiYgdmlld3BvcnQudm9pTFVULmx1dCAmJiB2aWV3cG9ydC52b2lMVVQubHV0Lmxlbmd0aCA+IDA7XG4gIHJldHVybiBoYXNMdXQgfHwgdmlld3BvcnQudm9pLndpbmRvd1dpZHRoICE9PSB1bmRlZmluZWQgJiYgdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciAhPT0gdW5kZWZpbmVkO1xufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2NyZWF0ZVZpZXdwb3J0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9jcmVhdGVWaWV3cG9ydC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zZXREZWZhdWx0Vmlld3BvcnQuanMgKi8gXCIuL2ludGVybmFsL3NldERlZmF1bHRWaWV3cG9ydC5qc1wiKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZpZXdwb3J0IG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzXG4gKlxuICogQHJldHVybnMge1ZpZXdwb3J0fSB2aWV3cG9ydCBvYmplY3RcbiAqIEBtZW1iZXJvZiBJbnRlcm5hbFxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgaW5pdGlhbERlZmF1bHRWaWV3cG9ydCA9IHtcbiAgICBzY2FsZTogMSxcbiAgICB0cmFuc2xhdGlvbjoge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9LFxuICAgIHZvaToge1xuICAgICAgd2luZG93V2lkdGg6IHVuZGVmaW5lZCxcbiAgICAgIHdpbmRvd0NlbnRlcjogdW5kZWZpbmVkXG4gICAgfSxcbiAgICBpbnZlcnQ6IGZhbHNlLFxuICAgIHBpeGVsUmVwbGljYXRpb246IGZhbHNlLFxuICAgIHJvdGF0aW9uOiAwLFxuICAgIGhmbGlwOiBmYWxzZSxcbiAgICB2ZmxpcDogZmFsc2UsXG4gICAgbW9kYWxpdHlMVVQ6IHVuZGVmaW5lZCxcbiAgICB2b2lMVVQ6IHVuZGVmaW5lZCxcbiAgICBjb2xvcm1hcDogdW5kZWZpbmVkLFxuICAgIGxhYmVsbWFwOiBmYWxzZSxcbiAgICBkaXNwbGF5ZWRBcmVhOiB1bmRlZmluZWRcbiAgfTtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGluaXRpYWxEZWZhdWx0Vmlld3BvcnQsIF9zZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInN0YXRlXCJdLnZpZXdwb3J0KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2RyYXdDb21wb3NpdGVJbWFnZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2RyYXdDb21wb3NpdGVJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2xheWVycy5qcyAqLyBcIi4vbGF5ZXJzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlbmRlcmluZy9yZW5kZXJHcmF5c2NhbGVJbWFnZS5qcyAqLyBcIi4vcmVuZGVyaW5nL3JlbmRlckdyYXlzY2FsZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlckNvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJDb2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlclBzZXVkb0NvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJQc2V1ZG9Db2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyTGFiZWxNYXBJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlckxhYmVsTWFwSW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJMYWJlbE1hcEltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW0uanMgKi8gXCIuL3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldERpc3BsYXllZEFyZWEuanMgKi8gXCIuL2ludGVybmFsL2dldERpc3BsYXllZEFyZWEuanNcIik7XG5cblxuXG5cblxuXG5cblxuZnVuY3Rpb24gZ2V0Vmlld3BvcnRSYXRpbyhiYXNlTGF5ZXIsIHRhcmdldExheWVyKSB7XG4gIGlmICghYmFzZUxheWVyLnN5bmNQcm9wcykge1xuICAgIHVwZGF0ZUxheWVyU3luY1Byb3BzKGJhc2VMYXllcik7XG4gIH1cblxuICBpZiAoIXRhcmdldExheWVyLnN5bmNQcm9wcykge1xuICAgIHVwZGF0ZUxheWVyU3luY1Byb3BzKHRhcmdldExheWVyKTtcbiAgfVxuXG4gIHJldHVybiB0YXJnZXRMYXllci5zeW5jUHJvcHMub3JpZ2luYWxTY2FsZSAvIGJhc2VMYXllci5zeW5jUHJvcHMub3JpZ2luYWxTY2FsZTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlTGF5ZXJTeW5jUHJvcHMobGF5ZXIpIHtcbiAgdmFyIHN5bmNQcm9wcyA9IGxheWVyLnN5bmNQcm9wcyB8fCB7fTsgLy8gVGhpcyBpcyB1c2VkIHRvIGtlZXAgZWFjaCBvZiB0aGUgbGF5ZXJzJyB2aWV3cG9ydHMgaW4gc3luYyB3aXRoIHRoZSBhY3RpdmUgbGF5ZXJcblxuICBzeW5jUHJvcHMub3JpZ2luYWxTY2FsZSA9IGxheWVyLnZpZXdwb3J0LnNjYWxlO1xuICBsYXllci5zeW5jUHJvcHMgPSBzeW5jUHJvcHM7XG59IC8vIFN5bmMgYWxsIHZpZXdwb3J0cyBiYXNlZCBvbiBhY3RpdmUgbGF5ZXIncyB2aWV3cG9ydFxuXG5cbmZ1bmN0aW9uIHN5bmNWaWV3cG9ydHMobGF5ZXJzLCBhY3RpdmVMYXllcikge1xuICAvLyBJZiB3ZSBpbnRlbmQgdG8ga2VlcCB0aGUgdmlld3BvcnQncyBzY2FsZSwgdHJhbnNsYXRpb24gYW5kIHJvdGF0aW9uIGluIHN5bmMsXG4gIC8vIGxvb3AgdGhyb3VnaCB0aGUgbGF5ZXJzXG4gIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgIC8vIERvbid0IGRvIGFueXRoaW5nIHRvIHRoZSBhY3RpdmUgbGF5ZXJcbiAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGlzIGxheWVyIGhhcyBubyB2aWV3cG9ydFxuICAgIGlmIChsYXllciA9PT0gYWN0aXZlTGF5ZXIgfHwgIWxheWVyLnZpZXdwb3J0IHx8ICFhY3RpdmVMYXllci52aWV3cG9ydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbGF5ZXIuc3luY1Byb3BzKSB7XG4gICAgICB1cGRhdGVMYXllclN5bmNQcm9wcyhsYXllcik7XG4gICAgfVxuXG4gICAgdmFyIHZpZXdwb3J0UmF0aW8gPSBnZXRWaWV3cG9ydFJhdGlvKGFjdGl2ZUxheWVyLCBsYXllcik7IC8vIFVwZGF0ZSB0aGUgbGF5ZXIncyB0cmFuc2xhdGlvbiBhbmQgc2NhbGUgdG8ga2VlcCB0aGVtIGluIHN5bmMgd2l0aCB0aGUgZmlyc3QgaW1hZ2VcbiAgICAvLyBiYXNlZCBvbiB0aGUgcmF0aW9zIGJldHdlZW4gdGhlIGltYWdlc1xuXG4gICAgbGF5ZXIudmlld3BvcnQuc2NhbGUgPSBhY3RpdmVMYXllci52aWV3cG9ydC5zY2FsZSAqIHZpZXdwb3J0UmF0aW87XG4gICAgbGF5ZXIudmlld3BvcnQucm90YXRpb24gPSBhY3RpdmVMYXllci52aWV3cG9ydC5yb3RhdGlvbjtcbiAgICBsYXllci52aWV3cG9ydC50cmFuc2xhdGlvbiA9IHtcbiAgICAgIHg6IGFjdGl2ZUxheWVyLnZpZXdwb3J0LnRyYW5zbGF0aW9uLnggLyB2aWV3cG9ydFJhdGlvLFxuICAgICAgeTogYWN0aXZlTGF5ZXIudmlld3BvcnQudHJhbnNsYXRpb24ueSAvIHZpZXdwb3J0UmF0aW9cbiAgICB9O1xuICAgIGxheWVyLnZpZXdwb3J0LmhmbGlwID0gYWN0aXZlTGF5ZXIudmlld3BvcnQuaGZsaXA7XG4gICAgbGF5ZXIudmlld3BvcnQudmZsaXAgPSBhY3RpdmVMYXllci52aWV3cG9ydC52ZmxpcDtcbiAgfSk7XG59XG4vKipcbiAqIEludGVybmFsIGZ1bmN0aW9uIHRvIHJlbmRlciBhbGwgbGF5ZXJzIGZvciBhIENvcm5lcnN0b25lIGVuYWJsZWQgZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENhbnZhcyBjb250ZXh0IHRvIGRyYXcgdXBvblxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudExheWVyW119IGxheWVycyBUaGUgYXJyYXkgb2YgYWxsIGxheWVycyBmb3IgdGhpcyBlbmFibGVkIGVsZW1lbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW52YWxpZGF0ZWQgQSBib29sZWFuIHdoZXRoZXIgb3Igbm90IHRoaXMgaW1hZ2UgaGFzIGJlZW4gaW52YWxpZGF0ZWQgYW5kIG11c3QgYmUgcmVkcmF3blxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG5cbmZ1bmN0aW9uIHJlbmRlckxheWVycyhjb250ZXh0LCBsYXllcnMsIGludmFsaWRhdGVkKSB7XG4gIC8vIExvb3AgdGhyb3VnaCBlYWNoIGxheWVyIGFuZCBkcmF3IGl0IHRvIHRoZSBjYW52YXNcbiAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpbmRleCkge1xuICAgIGlmICghbGF5ZXIuaW1hZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb250ZXh0LnNhdmUoKTsgLy8gU2V0IHRoZSBsYXllcidzIGNhbnZhcyB0byB0aGUgcGl4ZWwgY29vcmRpbmF0ZSBzeXN0ZW1cblxuICAgIGxheWVyLmNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgIE9iamVjdChfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0pKGxheWVyLCBjb250ZXh0KTsgLy8gUmVuZGVyIGludG8gdGhlIGxheWVyJ3MgY2FudmFzXG5cbiAgICB2YXIgY29sb3JtYXAgPSBsYXllci52aWV3cG9ydC5jb2xvcm1hcCB8fCBsYXllci5vcHRpb25zLmNvbG9ybWFwO1xuICAgIHZhciBsYWJlbG1hcCA9IGxheWVyLnZpZXdwb3J0LmxhYmVsbWFwO1xuICAgIHZhciBpc0ludmFsaWQgPSBsYXllci5pbnZhbGlkIHx8IGludmFsaWRhdGVkO1xuXG4gICAgaWYgKGNvbG9ybWFwICYmIGNvbG9ybWFwICE9PSAnJyAmJiBsYWJlbG1hcCA9PT0gdHJ1ZSkge1xuICAgICAgT2JqZWN0KF9yZW5kZXJpbmdfcmVuZGVyTGFiZWxNYXBJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiYWRkTGFiZWxNYXBMYXllclwiXSkobGF5ZXIsIGlzSW52YWxpZCk7XG4gICAgfSBlbHNlIGlmIChjb2xvcm1hcCAmJiBjb2xvcm1hcCAhPT0gJycpIHtcbiAgICAgIE9iamVjdChfcmVuZGVyaW5nX3JlbmRlclBzZXVkb0NvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImFkZFBzZXVkb0NvbG9yTGF5ZXJcIl0pKGxheWVyLCBpc0ludmFsaWQpO1xuICAgIH0gZWxzZSBpZiAobGF5ZXIuaW1hZ2UuY29sb3IgPT09IHRydWUpIHtcbiAgICAgIE9iamVjdChfcmVuZGVyaW5nX3JlbmRlckNvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImFkZENvbG9yTGF5ZXJcIl0pKGxheWVyLCBpc0ludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGlzIGlzIHRoZSBiYXNlIGxheWVyLCB1c2UgdGhlIGFscGhhIGNoYW5uZWwgZm9yIHJlbmRlcmluZyBvZiB0aGUgZ3JheXNjYWxlIGltYWdlXG4gICAgICB2YXIgdXNlQWxwaGFDaGFubmVsID0gaW5kZXggPT09IDA7XG4gICAgICBPYmplY3QoX3JlbmRlcmluZ19yZW5kZXJHcmF5c2NhbGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiYWRkR3JheXNjYWxlTGF5ZXJcIl0pKGxheWVyLCBpc0ludmFsaWQsIHVzZUFscGhhQ2hhbm5lbCk7XG4gICAgfSAvLyBBcHBseSBhbnkgZ2xvYmFsIG9wYWNpdHkgc2V0dGluZ3MgdGhhdCBoYXZlIGJlZW4gZGVmaW5lZCBmb3IgdGhpcyBsYXllclxuXG5cbiAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLm9wYWNpdHkpIHtcbiAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSBsYXllci5vcHRpb25zLm9wYWNpdHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgPSAxO1xuICAgIH1cblxuICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMuZmlsbFN0eWxlKSB7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGxheWVyLm9wdGlvbnMuZmlsbFN0eWxlO1xuICAgIH0gLy8gU2V0IHRoZSBwaXhlbFJlcGxpY2F0aW9uIHByb3BlcnR5IGJlZm9yZSBkcmF3aW5nIGZyb20gdGhlIGxheWVyIGludG8gdGhlXG4gICAgLy8gY29tcG9zaXRlIGNhbnZhc1xuXG5cbiAgICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICFsYXllci52aWV3cG9ydC5waXhlbFJlcGxpY2F0aW9uO1xuICAgIGNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQ7IC8vIERyYXcgZnJvbSB0aGUgY3VycmVudCBsYXllcidzIGNhbnZhcyBvbnRvIHRoZSBlbmFibGVkIGVsZW1lbnQncyBjYW52YXNcblxuICAgIHZhciBsYXllckRpc3BsYXllZEFyZWEgPSBPYmplY3QoX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcImRlZmF1bHRcIl0pKGxheWVyLmltYWdlLCBsYXllci52aWV3cG9ydCk7XG4gICAgdmFyIHN4ID0gbGF5ZXJEaXNwbGF5ZWRBcmVhLnRsaGMueCAtIDE7XG4gICAgdmFyIHN5ID0gbGF5ZXJEaXNwbGF5ZWRBcmVhLnRsaGMueSAtIDE7XG4gICAgdmFyIHdpZHRoID0gbGF5ZXJEaXNwbGF5ZWRBcmVhLmJyaGMueCAtIHN4O1xuICAgIHZhciBoZWlnaHQgPSBsYXllckRpc3BsYXllZEFyZWEuYnJoYy55IC0gc3k7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UobGF5ZXIuY2FudmFzLCBzeCwgc3ksIHdpZHRoLCBoZWlnaHQsIHN4LCBzeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgbGF5ZXIuaW52YWxpZCA9IGZhbHNlO1xuICB9KTtcbn1cbi8qKlxuICogSW50ZXJuYWwgQVBJIGZ1bmN0aW9uIHRvIGRyYXcgYSBjb21wb3NpdGUgaW1hZ2UgdG8gYSBnaXZlbiBlbmFibGVkIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50fSBlbmFibGVkRWxlbWVudCBBbiBlbmFibGVkIGVsZW1lbnQgdG8gZHJhdyBpbnRvXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCwgaW52YWxpZGF0ZWQpIHtcbiAgdmFyIGVsZW1lbnQgPSBlbmFibGVkRWxlbWVudC5lbGVtZW50O1xuICB2YXIgYWxsTGF5ZXJzID0gT2JqZWN0KF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldExheWVyc1wiXSkoZWxlbWVudCk7XG4gIHZhciBhY3RpdmVMYXllciA9IE9iamVjdChfbGF5ZXJzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRBY3RpdmVMYXllclwiXSkoZWxlbWVudCk7XG4gIHZhciB2aXNpYmxlTGF5ZXJzID0gT2JqZWN0KF9sYXllcnNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldFZpc2libGVMYXllcnNcIl0pKGVsZW1lbnQpO1xuICB2YXIgcmVzeW5jZWQgPSAhZW5hYmxlZEVsZW1lbnQubGFzdFN5bmNWaWV3cG9ydHNTdGF0ZSAmJiBlbmFibGVkRWxlbWVudC5zeW5jVmlld3BvcnRzOyAvLyBUaGlzIHN0YXRlIHdpbGwgaGVscCB1cyB0byBkZXRlcm1pbmUgaWYgdGhlIHVzZXIgaGFzIHJlLXN5bmNlZCB0aGVcbiAgLy8gbGF5ZXJzIGFsbG93aW5nIHVzIHRvIG1ha2UgYSBuZXcgY29weSBvZiB0aGUgdmlld3BvcnRzXG5cbiAgZW5hYmxlZEVsZW1lbnQubGFzdFN5bmNWaWV3cG9ydHNTdGF0ZSA9IGVuYWJsZWRFbGVtZW50LnN5bmNWaWV3cG9ydHM7IC8vIFN0b3JlcyBhIGNvcHkgb2YgYWxsIHZpZXdwb3J0cyBpZiB0aGUgdXNlciBoYXMganVzdCBzeW5jZWQgdGhlbSB0aGVuIHdlIGNhbiB1c2UgdGhlXG4gIC8vIGNvcGllcyB0byBjYWxjdWxhdGUgYW55dGhpbmcgbGF0ZXIgKHJhdGlvLCB0cmFuc2xhdGlvbiBvZmZzZXQsIHJvdGF0aW9uIG9mZnNldCwgZXRjKVxuXG4gIGlmIChyZXN5bmNlZCkge1xuICAgIGFsbExheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgaWYgKGxheWVyLnZpZXdwb3J0KSB7XG4gICAgICAgIHVwZGF0ZUxheWVyU3luY1Byb3BzKGxheWVyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSAvLyBTeW5jIGFsbCB2aWV3cG9ydHMgaW4gY2FzZSBpdCdzIGFjdGl2YXRlZFxuXG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LnN5bmNWaWV3cG9ydHMgPT09IHRydWUpIHtcbiAgICBzeW5jVmlld3BvcnRzKHZpc2libGVMYXllcnMsIGFjdGl2ZUxheWVyKTtcbiAgfSAvLyBHZXQgdGhlIGVuYWJsZWQgZWxlbWVudCdzIGNhbnZhcyBzbyB3ZSBjYW4gZHJhdyB0byBpdFxuXG5cbiAgdmFyIGNvbnRleHQgPSBlbmFibGVkRWxlbWVudC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7XG4gICAgZGVzeW5jaHJvbml6ZWQ6IHRydWVcbiAgfSk7XG4gIGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApOyAvLyBDbGVhciB0aGUgY2FudmFzXG5cbiAgY29udGV4dC5maWxsU3R5bGUgPSAnYmxhY2snO1xuICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGVuYWJsZWRFbGVtZW50LmNhbnZhcy53aWR0aCwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLmhlaWdodCk7IC8vIFJlbmRlciBhbGwgdmlzaWJsZSBsYXllcnNcblxuICByZW5kZXJMYXllcnMoY29udGV4dCwgdmlzaWJsZUxheWVycywgaW52YWxpZGF0ZWQpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKipcbiAqIEludGVybmFsIEFQSSBmdW5jdGlvbiB0byBkcmF3IGFuIGltYWdlIHRvIGEgZ2l2ZW4gZW5hYmxlZCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgVGhlIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudCB0byByZWRyYXdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ludmFsaWRhdGVkID0gZmFsc2VdIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZW5hYmxlZEVsZW1lbnQpIHtcbiAgdmFyIGludmFsaWRhdGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgZW5hYmxlZEVsZW1lbnQubmVlZHNSZWRyYXcgPSB0cnVlO1xuXG4gIGlmIChpbnZhbGlkYXRlZCkge1xuICAgIGVuYWJsZWRFbGVtZW50LmludmFsaWQgPSB0cnVlO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9kcmF3SW1hZ2VTeW5jLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2RyYXdJbWFnZVN5bmMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ub3cuanMgKi8gXCIuL2ludGVybmFsL25vdy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZHJhd0NvbXBvc2l0ZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2RyYXdDb21wb3NpdGVJbWFnZS5qcyAqLyBcIi4vaW50ZXJuYWwvZHJhd0NvbXBvc2l0ZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlckNvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJDb2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3JlbmRlcmluZy9yZW5kZXJHcmF5c2NhbGVJbWFnZS5qcyAqLyBcIi4vcmVuZGVyaW5nL3JlbmRlckdyYXlzY2FsZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlclBzZXVkb0NvbG9ySW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJQc2V1ZG9Db2xvckltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZW5kZXJpbmdfcmVuZGVyTGFiZWxNYXBJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vcmVuZGVyaW5nL3JlbmRlckxhYmVsTWFwSW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJMYWJlbE1hcEltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3RyaWdnZXJFdmVudC5qcyAqLyBcIi4vdHJpZ2dlckV2ZW50LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2V2ZW50cy5qcyAqLyBcIi4vZXZlbnRzLmpzXCIpO1xuXG5cblxuXG5cblxuXG5cbi8qKlxyXG4gKiBEcmF3IGFuIGltYWdlIHRvIGEgZ2l2ZW4gZW5hYmxlZCBlbGVtZW50IHN5bmNocm9ub3VzbHlcclxuICpcclxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgQW4gZW5hYmxlZCBlbGVtZW50IHRvIGRyYXcgaW50b1xyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICogQG1lbWJlcm9mIEludGVybmFsXHJcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCwgaW52YWxpZGF0ZWQpIHtcbiAgdmFyIGltYWdlID0gZW5hYmxlZEVsZW1lbnQuaW1hZ2U7XG4gIHZhciBlbGVtZW50ID0gZW5hYmxlZEVsZW1lbnQuZWxlbWVudDtcbiAgdmFyIGxheWVycyA9IGVuYWJsZWRFbGVtZW50LmxheWVycyB8fCBbXTsgLy8gQ2hlY2sgaWYgZW5hYmxlZEVsZW1lbnQgY2FuIGJlIHJlZHJhd25cblxuICBpZiAoIWVuYWJsZWRFbGVtZW50LmNhbnZhcyB8fCAhZW5hYmxlZEVsZW1lbnQuaW1hZ2UpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gU3RhcnQgbWVhc3VyaW5nIHRoZSB0aW1lIG5lZWRlZCB0byBkcmF3IHRoZSBpbWFnZS9sYXllcnNcblxuXG4gIHZhciBzdGFydCA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpO1xuICBpbWFnZS5zdGF0cyA9IHtcbiAgICBsYXN0R2V0UGl4ZWxEYXRhVGltZTogLTEuMCxcbiAgICBsYXN0U3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFUaW1lOiAtMS4wLFxuICAgIGxhc3RQdXRJbWFnZURhdGFUaW1lOiAtMS4wLFxuICAgIGxhc3RSZW5kZXJUaW1lOiAtMS4wLFxuICAgIGxhc3RMdXRHZW5lcmF0ZVRpbWU6IC0xLjBcbiAgfTtcblxuICBpZiAobGF5ZXJzICYmIGxheWVycy5sZW5ndGgpIHtcbiAgICBPYmplY3QoX2RyYXdDb21wb3NpdGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGludmFsaWRhdGVkKTtcbiAgfSBlbHNlIGlmIChpbWFnZSkge1xuICAgIHZhciByZW5kZXIgPSBpbWFnZS5yZW5kZXI7XG5cbiAgICBpZiAoIXJlbmRlcikge1xuICAgICAgaWYgKGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LmNvbG9ybWFwICYmIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LmNvbG9ybWFwICE9PSAnJyAmJiBlbmFibGVkRWxlbWVudC5pbWFnZS5sYWJlbG1hcCA9PT0gdHJ1ZSkge1xuICAgICAgICByZW5kZXIgPSBfcmVuZGVyaW5nX3JlbmRlckxhYmVsTWFwSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcInJlbmRlckxhYmVsTWFwSW1hZ2VcIl07XG4gICAgICB9IGVsc2UgaWYgKGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LmNvbG9ybWFwICYmIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LmNvbG9ybWFwICE9PSAnJykge1xuICAgICAgICByZW5kZXIgPSBfcmVuZGVyaW5nX3JlbmRlclBzZXVkb0NvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcInJlbmRlclBzZXVkb0NvbG9ySW1hZ2VcIl07XG4gICAgICB9IGVsc2UgaWYgKGltYWdlLmNvbG9yKSB7XG4gICAgICAgIHJlbmRlciA9IF9yZW5kZXJpbmdfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wicmVuZGVyQ29sb3JJbWFnZVwiXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbmRlciA9IF9yZW5kZXJpbmdfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcInJlbmRlckdyYXlzY2FsZUltYWdlXCJdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcihlbmFibGVkRWxlbWVudCwgaW52YWxpZGF0ZWQpO1xuICB9IC8vIENhbGN1bGF0ZSBob3cgbG9uZyBpdCB0b29rIHRvIGRyYXcgdGhlIGltYWdlL2xheWVyc1xuXG5cbiAgdmFyIHJlbmRlclRpbWVJbk1zID0gT2JqZWN0KF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgdmFyIGV2ZW50RGF0YSA9IHtcbiAgICB2aWV3cG9ydDogZW5hYmxlZEVsZW1lbnQudmlld3BvcnQsXG4gICAgZWxlbWVudDogZWxlbWVudCxcbiAgICBpbWFnZTogaW1hZ2UsXG4gICAgZW5hYmxlZEVsZW1lbnQ6IGVuYWJsZWRFbGVtZW50LFxuICAgIGNhbnZhc0NvbnRleHQ6IGVuYWJsZWRFbGVtZW50LmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgIGRlc3luY2hyb25pemVkOiB0cnVlXG4gICAgfSksXG4gICAgcmVuZGVyVGltZUluTXM6IHJlbmRlclRpbWVJbk1zXG4gIH07XG4gIGltYWdlLnN0YXRzLmxhc3RSZW5kZXJUaW1lID0gcmVuZGVyVGltZUluTXM7XG4gIGVuYWJsZWRFbGVtZW50LmludmFsaWQgPSBmYWxzZTtcbiAgZW5hYmxlZEVsZW1lbnQubmVlZHNSZWRyYXcgPSBmYWxzZTtcbiAgT2JqZWN0KF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQsIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcImRlZmF1bHRcIl0uSU1BR0VfUkVOREVSRUQsIGV2ZW50RGF0YSk7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9nZW5lcmF0ZUNvbG9yTHV0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dlbmVyYXRlQ29sb3JMdXQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dldFZPSUx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXRWT0lMdXQuanMgKi8gXCIuL2ludGVybmFsL2dldFZPSUx1dC5qc1wiKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgTFVUIHVzZWQgd2hpbGUgcmVuZGVyaW5nIHRvIGNvbnZlcnQgc3RvcmVkIHBpeGVsIHZhbHVlcyB0b1xuICogZGlzcGxheSBwaXhlbHNcbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxuICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd1dpZHRoIFRoZSBXaW5kb3cgV2lkdGhcbiAqIEBwYXJhbSB7TnVtYmVyfSB3aW5kb3dDZW50ZXIgVGhlIFdpbmRvdyBDZW50ZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW52ZXJ0IEEgYm9vbGVhbiBkZXNjcmliaW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBoYXMgYmVlbiBpbnZlcnRlZFxuICogQHBhcmFtIHtBcnJheX0gW3ZvaUxVVF0gQSBWb2x1bWUgb2YgSW50ZXJlc3QgTG9va3VwIFRhYmxlXG4gKlxuICogQHJldHVybnMge1VpbnQ4Q2xhbXBlZEFycmF5fSBBIGxvb2t1cCB0YWJsZSB0byBhcHBseSB0byB0aGUgaW1hZ2VcbiAqIEBtZW1iZXJvZiBJbnRlcm5hbFxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGltYWdlLCB3aW5kb3dXaWR0aCwgd2luZG93Q2VudGVyLCBpbnZlcnQsIHZvaUxVVCkge1xuICB2YXIgbWF4UGl4ZWxWYWx1ZSA9IGltYWdlLm1heFBpeGVsVmFsdWU7XG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIG9mZnNldCA9IE1hdGgubWluKG1pblBpeGVsVmFsdWUsIDApO1xuXG4gIGlmIChpbWFnZS5jYWNoZWRMdXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBsZW5ndGggPSBtYXhQaXhlbFZhbHVlIC0gb2Zmc2V0ICsgMTtcbiAgICBpbWFnZS5jYWNoZWRMdXQgPSB7fTtcbiAgICBpbWFnZS5jYWNoZWRMdXQubHV0QXJyYXkgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTtcbiAgfVxuXG4gIHZhciBsdXQgPSBpbWFnZS5jYWNoZWRMdXQubHV0QXJyYXk7XG4gIHZhciB2bHV0Zm4gPSBPYmplY3QoX2dldFZPSUx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkod2luZG93V2lkdGgsIHdpbmRvd0NlbnRlciwgdm9pTFVUKTtcblxuICBpZiAoaW52ZXJ0ID09PSB0cnVlKSB7XG4gICAgZm9yICh2YXIgc3RvcmVkVmFsdWUgPSBtaW5QaXhlbFZhbHVlOyBzdG9yZWRWYWx1ZSA8PSBtYXhQaXhlbFZhbHVlOyBzdG9yZWRWYWx1ZSsrKSB7XG4gICAgICBsdXRbc3RvcmVkVmFsdWUgKyAtb2Zmc2V0XSA9IDI1NSAtIHZsdXRmbihzdG9yZWRWYWx1ZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIF9zdG9yZWRWYWx1ZSA9IG1pblBpeGVsVmFsdWU7IF9zdG9yZWRWYWx1ZSA8PSBtYXhQaXhlbFZhbHVlOyBfc3RvcmVkVmFsdWUrKykge1xuICAgICAgbHV0W19zdG9yZWRWYWx1ZSArIC1vZmZzZXRdID0gdmx1dGZuKF9zdG9yZWRWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGx1dDtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2dlbmVyYXRlTHV0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9nZW5lcmF0ZUx1dC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dldE1vZGFsaXR5TFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldE1vZGFsaXR5TFVULmpzICovIFwiLi9pbnRlcm5hbC9nZXRNb2RhbGl0eUxVVC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0Vk9JTHV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldFZPSUx1dC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0Vk9JTHV0LmpzXCIpO1xuXG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgTFVUIHVzZWQgd2hpbGUgcmVuZGVyaW5nIHRvIGNvbnZlcnQgc3RvcmVkIHBpeGVsIHZhbHVlcyB0b1xyXG4gKiBkaXNwbGF5IHBpeGVsc1xyXG4gKlxyXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxyXG4gKiBAcGFyYW0ge051bWJlcn0gd2luZG93V2lkdGggVGhlIFdpbmRvdyBXaWR0aFxyXG4gKiBAcGFyYW0ge051bWJlcn0gd2luZG93Q2VudGVyIFRoZSBXaW5kb3cgQ2VudGVyXHJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW52ZXJ0IEEgYm9vbGVhbiBkZXNjcmliaW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBoYXMgYmVlbiBpbnZlcnRlZFxyXG4gKiBAcGFyYW0ge0FycmF5fSBbbW9kYWxpdHlMVVRdIEEgbW9kYWxpdHkgTG9va3VwIFRhYmxlXHJcbiAqIEBwYXJhbSB7QXJyYXl9IFt2b2lMVVRdIEEgVm9sdW1lIG9mIEludGVyZXN0IExvb2t1cCBUYWJsZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7VWludDhDbGFtcGVkQXJyYXl9IEEgbG9va3VwIHRhYmxlIHRvIGFwcGx5IHRvIHRoZSBpbWFnZVxyXG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcclxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGltYWdlLCB3aW5kb3dXaWR0aCwgd2luZG93Q2VudGVyLCBpbnZlcnQsIG1vZGFsaXR5TFVULCB2b2lMVVQpIHtcbiAgdmFyIG1heFBpeGVsVmFsdWUgPSBpbWFnZS5tYXhQaXhlbFZhbHVlO1xuICB2YXIgbWluUGl4ZWxWYWx1ZSA9IGltYWdlLm1pblBpeGVsVmFsdWU7XG4gIHZhciBvZmZzZXQgPSBNYXRoLm1pbihtaW5QaXhlbFZhbHVlLCAwKTtcblxuICBpZiAoaW1hZ2UuY2FjaGVkTHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgbGVuZ3RoID0gbWF4UGl4ZWxWYWx1ZSAtIG9mZnNldCArIDE7XG4gICAgaW1hZ2UuY2FjaGVkTHV0ID0ge307XG4gICAgaW1hZ2UuY2FjaGVkTHV0Lmx1dEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGxlbmd0aCk7XG4gIH1cblxuICB2YXIgbHV0ID0gaW1hZ2UuY2FjaGVkTHV0Lmx1dEFycmF5O1xuICB2YXIgc2xvcGVPckludGVyY2VwdEFyZUZsb2F0ID0gQm9vbGVhbihpbWFnZS5zbG9wZSAlIDEpIHx8IEJvb2xlYW4oaW1hZ2UuaW50ZXJjZXB0ICUgMSk7XG4gIHZhciBtbHV0Zm4gPSBPYmplY3QoX2dldE1vZGFsaXR5TFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKShpbWFnZS5zbG9wZSwgaW1hZ2UuaW50ZXJjZXB0LCBtb2RhbGl0eUxVVCk7XG4gIHZhciB2bHV0Zm4gPSBPYmplY3QoX2dldFZPSUx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkod2luZG93V2lkdGgsIHdpbmRvd0NlbnRlciwgdm9pTFVULCBzbG9wZU9ySW50ZXJjZXB0QXJlRmxvYXQpO1xuXG4gIGlmIChpbnZlcnQgPT09IHRydWUpIHtcbiAgICBmb3IgKHZhciBzdG9yZWRWYWx1ZSA9IG1pblBpeGVsVmFsdWU7IHN0b3JlZFZhbHVlIDw9IG1heFBpeGVsVmFsdWU7IHN0b3JlZFZhbHVlKyspIHtcbiAgICAgIGx1dFtzdG9yZWRWYWx1ZSArIC1vZmZzZXRdID0gMjU1IC0gdmx1dGZuKG1sdXRmbihzdG9yZWRWYWx1ZSkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBfc3RvcmVkVmFsdWUgPSBtaW5QaXhlbFZhbHVlOyBfc3RvcmVkVmFsdWUgPD0gbWF4UGl4ZWxWYWx1ZTsgX3N0b3JlZFZhbHVlKyspIHtcbiAgICAgIGx1dFtfc3RvcmVkVmFsdWUgKyAtb2Zmc2V0XSA9IHZsdXRmbihtbHV0Zm4oX3N0b3JlZFZhbHVlKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGx1dDtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2dldENhbnZhcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldENhbnZhcy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRDYW52YXM7IH0pO1xudmFyIENBTlZBU19DU1NfQ0xBU1MgPSAnY29ybmVyc3RvbmUtY2FudmFzJztcbi8qKlxuICogQ3JlYXRlIGEgY2FudmFzIGFuZCBhcHBlbmQgaXQgdG8gdGhlIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IEFuIEhUTUwgRWxlbWVudFxuICogQHJldHVybiB7SFRNTEVsZW1lbnR9IGNhbnZhcyBBIENhbnZhcyBET00gZWxlbWVudFxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhbnZhcyhlbGVtZW50KSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBjYW52YXMuY2xhc3NMaXN0LmFkZChDQU5WQVNfQ1NTX0NMQVNTKTtcbiAgZWxlbWVudC5hcHBlbmRDaGlsZChjYW52YXMpO1xuICByZXR1cm4gY2FudmFzO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBjYW52YXMgb3IgcmV0dXJucyB0aGUgb25lIHRoYXQgYWxyZWFkeSBleGlzdHMgZm9yIGEgZ2l2ZW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgQW4gSFRNTCBFbGVtZW50XG4gKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gY2FudmFzIEEgQ2FudmFzIERPTSBlbGVtZW50XG4gKi9cblxuXG5mdW5jdGlvbiBnZXRDYW52YXMoZWxlbWVudCkge1xuICB2YXIgc2VsZWN0b3IgPSBcImNhbnZhcy5cIi5jb25jYXQoQ0FOVkFTX0NTU19DTEFTUyk7XG4gIHJldHVybiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIHx8IGNyZWF0ZUNhbnZhcyhlbGVtZW50KTtcbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY3JlYXRlVmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY3JlYXRlVmlld3BvcnQuanMgKi8gXCIuL2ludGVybmFsL2NyZWF0ZVZpZXdwb3J0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nZXRJbWFnZUZpdFNjYWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldEltYWdlRml0U2NhbGUuanMgKi8gXCIuL2ludGVybmFsL2dldEltYWdlRml0U2NhbGUuanNcIik7XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZpZXdwb3J0IG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzIGZvciB0aGUgaW1hZ2UgYW5kIGNhbnZhc1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhbnZhcyBBIENhbnZhcyBET00gZWxlbWVudFxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEByZXR1cm5zIHtWaWV3cG9ydH0gdmlld3BvcnQgb2JqZWN0XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChjYW52YXMsIGltYWdlKSB7XG4gIGlmIChjYW52YXMgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZ2V0RGVmYXVsdFZpZXdwb3J0OiBwYXJhbWV0ZXIgY2FudmFzIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgaWYgKGltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gT2JqZWN0KF9jcmVhdGVWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgfSAvLyBGaXQgaW1hZ2UgdG8gd2luZG93XG5cblxuICB2YXIgc2NhbGUgPSBPYmplY3QoX2dldEltYWdlRml0U2NhbGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGNhbnZhcywgaW1hZ2UsIDApLnNjYWxlRmFjdG9yO1xuICByZXR1cm4ge1xuICAgIHNjYWxlOiBzY2FsZSxcbiAgICB0cmFuc2xhdGlvbjoge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9LFxuICAgIHZvaToge1xuICAgICAgd2luZG93V2lkdGg6IGltYWdlLndpbmRvd1dpZHRoLFxuICAgICAgd2luZG93Q2VudGVyOiBpbWFnZS53aW5kb3dDZW50ZXJcbiAgICB9LFxuICAgIGludmVydDogaW1hZ2UuaW52ZXJ0LFxuICAgIHBpeGVsUmVwbGljYXRpb246IGZhbHNlLFxuICAgIHJvdGF0aW9uOiAwLFxuICAgIGhmbGlwOiBmYWxzZSxcbiAgICB2ZmxpcDogZmFsc2UsXG4gICAgbW9kYWxpdHlMVVQ6IGltYWdlLm1vZGFsaXR5TFVULFxuICAgIHZvaUxVVDogaW1hZ2Uudm9pTFVULFxuICAgIGNvbG9ybWFwOiBpbWFnZS5jb2xvcm1hcCxcbiAgICBsYWJlbG1hcDogQm9vbGVhbihpbWFnZS5sYWJlbG1hcCksXG4gICAgZGlzcGxheWVkQXJlYTogdW5kZWZpbmVkXG4gIH07XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldERpc3BsYXllZEFyZWEuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKipcbiAqIFJldHVybnMgdGhlIGRpc3BsYXllZEFyZWEgZnJvbSB0aGUgdmlld3BvcnQgaWYgZXhpc3RzIG9yXG4gKiBjcmVhdGVzIGEgbmV3IGRpc3BsYXllZEFyZWEgb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSBpbWFnZVxuICpcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0XG4gKiBAcGFyYW0ge1ZpZXdwb3J0fSB2aWV3cG9ydCBBbiBvcHRpb25hbCB2aWV3cG9ydCBPYmplY3RcbiAqIEByZXR1cm5zIHtEaXNwbGF5ZWRBcmVhfSBkaXNwbGF5ZWRBcmVhIG9iamVjdFxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGltYWdlKSB7XG4gIHZhciB2aWV3cG9ydCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcblxuICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuZGlzcGxheWVkQXJlYSkge1xuICAgIHJldHVybiB2aWV3cG9ydC5kaXNwbGF5ZWRBcmVhO1xuICB9XG5cbiAgaWYgKGltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldERpc3BsYXllZEFyZWE6IHBhcmFtZXRlciBpbWFnZSBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdGxoYzoge1xuICAgICAgeDogMSxcbiAgICAgIHk6IDFcbiAgICB9LFxuICAgIGJyaGM6IHtcbiAgICAgIHg6IGltYWdlLmNvbHVtbnMsXG4gICAgICB5OiBpbWFnZS5yb3dzXG4gICAgfSxcbiAgICByb3dQaXhlbFNwYWNpbmc6IGltYWdlLnJvd1BpeGVsU3BhY2luZyA9PT0gdW5kZWZpbmVkID8gMSA6IGltYWdlLnJvd1BpeGVsU3BhY2luZyxcbiAgICBjb2x1bW5QaXhlbFNwYWNpbmc6IGltYWdlLmNvbHVtblBpeGVsU3BhY2luZyA9PT0gdW5kZWZpbmVkID8gMSA6IGltYWdlLmNvbHVtblBpeGVsU3BhY2luZyxcbiAgICBwcmVzZW50YXRpb25TaXplTW9kZTogJ05PTkUnXG4gIH07XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9nZXRGaWxsU3R5bGUuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9nZXRGaWxsU3R5bGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qKlxuICogR2V0IGN1cnJlbnQgZmlsbFN0eWxlIGZvciBlbmFibGVkIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZW5hYmxlZEVsZW1lbnQgRW5hYmxlZCBlbGVtZW50XG4gKiBAcmV0dXJucyB7U3RyaW5nfSBDdXJyZW50IGZpbGxTdHlsZSBvZiBlbmFibGVkIGVsZW1lbnRcbiAqL1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZW5hYmxlZEVsZW1lbnQpIHtcbiAgdmFyIF9yZWYgPSBlbmFibGVkRWxlbWVudC52aWV3cG9ydCB8fCB7fSxcbiAgICAgIGludmVydCA9IF9yZWYuaW52ZXJ0O1xuXG4gIHZhciBfcmVmMiA9IGVuYWJsZWRFbGVtZW50Lm9wdGlvbnMgfHwge30sXG4gICAgICBmaWxsU3R5bGUgPSBfcmVmMi5maWxsU3R5bGU7XG5cbiAgaWYgKFsnYmxhY2snLCAnd2hpdGUnXS5pbmRleE9mKGZpbGxTdHlsZSkgIT09IC0xKSB7XG4gICAgcmV0dXJuIGludmVydCA/ICd3aGl0ZScgOiAnYmxhY2snO1xuICB9XG5cbiAgcmV0dXJuICdibGFjayc7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9nZXRJbWFnZUZpdFNjYWxlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldEltYWdlRml0U2NhbGUuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3ZhbGlkYXRvcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi92YWxpZGF0b3IuanMgKi8gXCIuL2ludGVybmFsL3ZhbGlkYXRvci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0SW1hZ2VTaXplX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldEltYWdlU2l6ZS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0SW1hZ2VTaXplLmpzXCIpO1xuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgaG9yaXpvbnRhbCwgdmVydGljYWwgYW5kIG1pbmltdW0gc2NhbGUgZmFjdG9yIGZvciBhbiBpbWFnZVxuICAgQHBhcmFtIHt7d2lkdGgsIGhlaWdodH19IHdpbmRvd1NpemUgVGhlIHdpbmRvdyBzaXplIHdoZXJlIHRoZSBpbWFnZSBpcyBkaXNwbGF5ZWQuIFRoaXMgY2FuIGJlIGFueSBIVE1MIGVsZW1lbnQgb3Igc3RydWN0dXJlIHdpdGggYSB3aWR0aCwgaGVpZ2h0IGZpZWxkcyAoZS5nLiBjYW52YXMpLlxuICogQHBhcmFtIHthbnl9IGltYWdlIFRoZSBjb3JuZXJzdG9uZSBpbWFnZSBvYmplY3RcbiAqIEBwYXJhbSB7TnVtYmVyfSByb3RhdGlvbiBPcHRpb25hbC4gVGhlIHJvdGF0aW9uIGFuZ2xlIG9mIHRoZSBpbWFnZS5cbiAqIEByZXR1cm4ge3tob3Jpem9udGFsU2NhbGUsIHZlcnRpY2FsU2NhbGUsIHNjYWxlRmFjdG9yfX0gVGhlIGNhbGN1bGF0ZWQgaG9yaXpvbnRhbCwgdmVydGljYWwgYW5kIG1pbmltdW0gc2NhbGUgZmFjdG9yXG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uICh3aW5kb3dTaXplLCBpbWFnZSkge1xuICB2YXIgcm90YXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG4gIE9iamVjdChfdmFsaWRhdG9yX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJ2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZE9yTnVsbFwiXSkod2luZG93U2l6ZSwgJ2dldEltYWdlU2NhbGU6IHBhcmFtZXRlciB3aW5kb3dTaXplIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICBPYmplY3QoX3ZhbGlkYXRvcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1widmFsaWRhdGVQYXJhbWV0ZXJVbmRlZmluZWRPck51bGxcIl0pKGltYWdlLCAnZ2V0SW1hZ2VTY2FsZTogcGFyYW1ldGVyIGltYWdlIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB2YXIgaW1hZ2VTaXplID0gT2JqZWN0KF9nZXRJbWFnZVNpemVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGltYWdlLCByb3RhdGlvbik7XG4gIHZhciByb3dQaXhlbFNwYWNpbmcgPSBpbWFnZS5yb3dQaXhlbFNwYWNpbmcgfHwgMTtcbiAgdmFyIGNvbHVtblBpeGVsU3BhY2luZyA9IGltYWdlLmNvbHVtblBpeGVsU3BhY2luZyB8fCAxO1xuICB2YXIgdmVydGljYWxSYXRpbyA9IDE7XG4gIHZhciBob3Jpem9udGFsUmF0aW8gPSAxO1xuXG4gIGlmIChyb3dQaXhlbFNwYWNpbmcgPCBjb2x1bW5QaXhlbFNwYWNpbmcpIHtcbiAgICBob3Jpem9udGFsUmF0aW8gPSBjb2x1bW5QaXhlbFNwYWNpbmcgLyByb3dQaXhlbFNwYWNpbmc7XG4gIH0gZWxzZSB7XG4gICAgLy8gZXZlbiBpZiB0aGV5IGFyZSBlcXVhbCB3ZSB3YW50IHRvIGNhbGN1bGF0ZSB0aGlzIHJhdGlvICh0aGUgcmF0aW9uIG1pZ2h0IGJlIDAuNSlcbiAgICB2ZXJ0aWNhbFJhdGlvID0gcm93UGl4ZWxTcGFjaW5nIC8gY29sdW1uUGl4ZWxTcGFjaW5nO1xuICB9XG5cbiAgdmFyIHZlcnRpY2FsU2NhbGUgPSB3aW5kb3dTaXplLmhlaWdodCAvIGltYWdlU2l6ZS5oZWlnaHQgLyB2ZXJ0aWNhbFJhdGlvO1xuICB2YXIgaG9yaXpvbnRhbFNjYWxlID0gd2luZG93U2l6ZS53aWR0aCAvIGltYWdlU2l6ZS53aWR0aCAvIGhvcml6b250YWxSYXRpbzsgLy8gRml0IGltYWdlIHRvIHdpbmRvd1xuXG4gIHJldHVybiB7XG4gICAgdmVydGljYWxTY2FsZTogdmVydGljYWxTY2FsZSxcbiAgICBob3Jpem9udGFsU2NhbGU6IGhvcml6b250YWxTY2FsZSxcbiAgICBzY2FsZUZhY3RvcjogTWF0aC5taW4oaG9yaXpvbnRhbFNjYWxlLCB2ZXJ0aWNhbFNjYWxlKVxuICB9O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvZ2V0SW1hZ2VTaXplLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvZ2V0SW1hZ2VTaXplLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3ZhbGlkYXRvcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi92YWxpZGF0b3IuanMgKi8gXCIuL2ludGVybmFsL3ZhbGlkYXRvci5qc1wiKTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYW5nbGUgaXMgcm90YXRlZFxuICogQHBhcmFtIHtOdW1iZXJ9IHJvdGF0aW9uIHRoZSByb3RhdGlvbiBhbmdsZVxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgdGhlIGFuZ2xlIGlzIHJvdGF0ZWQ7IE90aGVyd2lzZSwgZmFsc2UuXG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG5mdW5jdGlvbiBpc1JvdGF0ZWQocm90YXRpb24pIHtcbiAgcmV0dXJuICEocm90YXRpb24gPT09IG51bGwgfHwgcm90YXRpb24gPT09IHVuZGVmaW5lZCB8fCByb3RhdGlvbiA9PT0gMCB8fCByb3RhdGlvbiA9PT0gMTgwKTtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjdXJyZW50IGltYWdlIGRpbWVuc2lvbnMgZ2l2ZW4gYW4gZW5hYmxlZCBlbGVtZW50XG4gKlxuICogQHBhcmFtIHthbnl9IGltYWdlIFRoZSBDb3JuZXJzdG9uZSBpbWFnZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSByb3RhdGlvbiBPcHRpb25hbC4gVGhlIHJvdGF0aW9uIGFuZ2xlIG9mIHRoZSBpbWFnZS5cbiAqIEByZXR1cm4ge3t3aWR0aDpOdW1iZXIsIGhlaWdodDpOdW1iZXJ9fSBUaGUgSW1hZ2UgZGltZW5zaW9uc1xuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChpbWFnZSkge1xuICB2YXIgcm90YXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gIE9iamVjdChfdmFsaWRhdG9yX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJ2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZE9yTnVsbFwiXSkoaW1hZ2UsICdnZXRJbWFnZVNpemU6IHBhcmFtZXRlciBpbWFnZSBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgT2JqZWN0KF92YWxpZGF0b3JfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInZhbGlkYXRlUGFyYW1ldGVyVW5kZWZpbmVkT3JOdWxsXCJdKShpbWFnZS53aWR0aCwgJ2dldEltYWdlU2l6ZTogcGFyYW1ldGVyIGltYWdlIG11c3QgaGF2ZSB3aWR0aCcpO1xuICBPYmplY3QoX3ZhbGlkYXRvcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1widmFsaWRhdGVQYXJhbWV0ZXJVbmRlZmluZWRPck51bGxcIl0pKGltYWdlLmhlaWdodCwgJ2dldEltYWdlU2l6ZTogcGFyYW1ldGVyIGltYWdlIG11c3QgaGF2ZSBoZWlnaHQnKTtcblxuICBpZiAoaXNSb3RhdGVkKHJvdGF0aW9uKSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWlnaHQ6IGltYWdlLndpZHRoLFxuICAgICAgd2lkdGg6IGltYWdlLmhlaWdodFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiBpbWFnZS53aWR0aCxcbiAgICBoZWlnaHQ6IGltYWdlLmhlaWdodFxuICB9O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvZ2V0TW9kYWxpdHlMVVQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldE1vZGFsaXR5TFVULmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qKlxuICogR2VuZXJhdGVzIGEgbGluZWFyIG1vZGFsaXR5IHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uXG4gKlxuICogU2VlIERJQ09NIFBTMy4zIEMuMTEuMSBNb2RhbGl0eSBMVVQgTW9kdWxlXG4gKlxuICogaHR0cDovL2RpY29tLm5lbWEub3JnL21lZGljYWwvRGljb20vY3VycmVudC9vdXRwdXQvY2h0bWwvcGFydDAzL3NlY3RfQy4xMS5odG1sXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHNsb3BlIG0gaW4gdGhlIGVxdWF0aW9uIHNwZWNpZmllZCBieSBSZXNjYWxlIEludGVyY2VwdCAoMDAyOCwxMDUyKS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnRlcmNlcHQgVGhlIHZhbHVlIGIgaW4gcmVsYXRpb25zaGlwIGJldHdlZW4gc3RvcmVkIHZhbHVlcyAoU1YpIGFuZCB0aGUgb3V0cHV0IHVuaXRzIHNwZWNpZmllZCBpbiBSZXNjYWxlIFR5cGUgKDAwMjgsMTA1NCkuXG5cbiBPdXRwdXQgdW5pdHMgPSBtKlNWICsgYi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCopOiAqfSBBIGxpbmVhciBtb2RhbGl0eSBMVVQgZnVuY3Rpb24uIEdpdmVuIGEgc3RvcmVkIHBpeGVsIGl0IHJldHVybnMgdGhlIG1vZGFsaXR5IHBpeGVsIHZhbHVlXG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVMaW5lYXJNb2RhbGl0eUxVVChzbG9wZSwgaW50ZXJjZXB0KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RvcmVkUGl4ZWxWYWx1ZSkge1xuICAgIHJldHVybiBzdG9yZWRQaXhlbFZhbHVlICogc2xvcGUgKyBpbnRlcmNlcHQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTm9uTGluZWFyTW9kYWxpdHlMVVQobW9kYWxpdHlMVVQpIHtcbiAgdmFyIG1pblZhbHVlID0gbW9kYWxpdHlMVVQubHV0WzBdO1xuICB2YXIgbWF4VmFsdWUgPSBtb2RhbGl0eUxVVC5sdXRbbW9kYWxpdHlMVVQubHV0Lmxlbmd0aCAtIDFdO1xuICB2YXIgbWF4VmFsdWVNYXBwZWQgPSBtb2RhbGl0eUxVVC5maXJzdFZhbHVlTWFwcGVkICsgbW9kYWxpdHlMVVQubHV0Lmxlbmd0aDtcbiAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZWRQaXhlbFZhbHVlKSB7XG4gICAgaWYgKHN0b3JlZFBpeGVsVmFsdWUgPCBtb2RhbGl0eUxVVC5maXJzdFZhbHVlTWFwcGVkKSB7XG4gICAgICByZXR1cm4gbWluVmFsdWU7XG4gICAgfSBlbHNlIGlmIChzdG9yZWRQaXhlbFZhbHVlID49IG1heFZhbHVlTWFwcGVkKSB7XG4gICAgICByZXR1cm4gbWF4VmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGFsaXR5TFVULmx1dFtzdG9yZWRQaXhlbFZhbHVlXTtcbiAgfTtcbn1cbi8qKlxuICogR2V0IHRoZSBhcHByb3ByaWF0ZSBNb2RhbGl0eSBMVVQgZm9yIHRoZSBjdXJyZW50IHNpdHVhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gW3Nsb3BlXSBtIGluIHRoZSBlcXVhdGlvbiBzcGVjaWZpZWQgYnkgUmVzY2FsZSBJbnRlcmNlcHQgKDAwMjgsMTA1MikuXG4gKiBAcGFyYW0ge051bWJlcn0gW2ludGVyY2VwdF0gVGhlIHZhbHVlIGIgaW4gcmVsYXRpb25zaGlwIGJldHdlZW4gc3RvcmVkIHZhbHVlcyAoU1YpIGFuZCB0aGUgb3V0cHV0IHVuaXRzIHNwZWNpZmllZCBpbiBSZXNjYWxlIFR5cGUgKDAwMjgsMTA1NCkuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbW9kYWxpdHlMVVRdIEEgbW9kYWxpdHkgTFVUIGZ1bmN0aW9uLiBHaXZlbiBhIHN0b3JlZCBwaXhlbCBpdCByZXR1cm5zIHRoZSBtb2RhbGl0eSBwaXhlbCB2YWx1ZS5cbiAqXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigqKTogKn0gQSBtb2RhbGl0eSBMVVQgZnVuY3Rpb24uIEdpdmVuIGEgc3RvcmVkIHBpeGVsIGl0IHJldHVybnMgdGhlIG1vZGFsaXR5IHBpeGVsIHZhbHVlLlxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChzbG9wZSwgaW50ZXJjZXB0LCBtb2RhbGl0eUxVVCkge1xuICBpZiAobW9kYWxpdHlMVVQpIHtcbiAgICByZXR1cm4gZ2VuZXJhdGVOb25MaW5lYXJNb2RhbGl0eUxVVChtb2RhbGl0eUxVVCk7XG4gIH1cblxuICByZXR1cm4gZ2VuZXJhdGVMaW5lYXJNb2RhbGl0eUxVVChzbG9wZSwgaW50ZXJjZXB0KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2dldFRyYW5zZm9ybS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldFRyYW5zZm9ybS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jYWxjdWxhdGVUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY2FsY3VsYXRlVHJhbnNmb3JtLmpzICovIFwiLi9pbnRlcm5hbC9jYWxjdWxhdGVUcmFuc2Zvcm0uanNcIik7XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVuYWJsZWRFbGVtZW50KSB7XG4gIC8vIEZvciBub3cgd2Ugd2lsbCBjYWxjdWxhdGUgaXQgZXZlcnkgdGltZSBpdCBpcyByZXF1ZXN0ZWQuXG4gIC8vIEluIHRoZSBmdXR1cmUsIHdlIG1heSB3YW50IHRvIGNhY2hlIGl0IGluIHRoZSBlbmFibGVkIGVsZW1lbnQgdG8gc3BlZWQgdGhpbmdzIHVwLlxuICByZXR1cm4gT2JqZWN0KF9jYWxjdWxhdGVUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2dldFZPSUx1dC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL2dldFZPSUx1dC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyW1wiQEBpdGVyYXRvclwiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xuXG4vKipcbiAqIFZvbHVtZSBvZiBJbnRlcmVzdCBMb29rdXAgVGFibGUgRnVuY3Rpb25cbiAqXG4gKiBAdHlwZWRlZiB7RnVuY3Rpb259IFZPSUxVVEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1vZGFsaXR5THV0VmFsdWVcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHRyYW5zZm9ybWVkIHZhbHVlXG4gKiBAbWVtYmVyb2YgT2JqZWN0c1xuICovXG5cbi8qKlxuICogQG1vZHVsZTogVk9JTFVUXG4gKi9cblxuLyoqXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd1dpZHRoIFdpbmRvdyBXaWR0aFxuICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd0NlbnRlciBXaW5kb3cgQ2VudGVyXG4gKiBAcmV0dXJucyB7Vk9JTFVURnVuY3Rpb259IFZPSSBMVVQgbWFwcGluZyBmdW5jdGlvblxuICogQG1lbWJlcm9mIFZPSUxVVFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZUxpbmVhclZPSUxVVCh3aW5kb3dXaWR0aCwgd2luZG93Q2VudGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobW9kYWxpdHlMdXRWYWx1ZSkge1xuICAgIHJldHVybiAoKG1vZGFsaXR5THV0VmFsdWUgLSB3aW5kb3dDZW50ZXIpIC8gd2luZG93V2lkdGggKyAwLjUpICogMjU1LjA7XG4gIH07XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgbm9uLWxpbmVhciB2b2x1bWUgb2YgaW50ZXJlc3QgbG9va3VwIHRhYmxlXG4gKlxuICogQHBhcmFtIHtMVVR9IHZvaUxVVCBWb2x1bWUgb2YgSW50ZXJlc3QgTG9va3VwIFRhYmxlIE9iamVjdFxuICogQHBhcmFtIHtCb29sZWFufSByb3VuZE1vZGFsaXR5TFVUVmFsdWVzIERvIGEgTWF0aC5yb3VuZCBvZiBtb2RhbGl0eSBsdXQgdG8gY29tcHV0ZSBub24gbGluZWFyIHZvaWx1dFxuXG4gKlxuICogQHJldHVybnMge1ZPSUxVVEZ1bmN0aW9ufSBWT0kgTFVUIG1hcHBpbmcgZnVuY3Rpb25cbiAqIEBtZW1iZXJvZiBWT0lMVVRcbiAqL1xuXG5cbmZ1bmN0aW9uIGdlbmVyYXRlTm9uTGluZWFyVk9JTFVUKHZvaUxVVCwgcm91bmRNb2RhbGl0eUxVVFZhbHVlcykge1xuICAvLyBXZSBkb24ndCB0cnVzdCB0aGUgdm9pTFVULm51bUJpdHNQZXJFbnRyeSwgbWFpbmx5IHRoYW5rcyB0byBBZ2ZhIVxuICB2YXIgYml0c1BlckVudHJ5ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX3RvQ29uc3VtYWJsZUFycmF5KHZvaUxVVC5sdXQpKS50b1N0cmluZygyKS5sZW5ndGg7XG4gIHZhciBzaGlmdCA9IGJpdHNQZXJFbnRyeSAtIDg7XG4gIHZhciBtaW5WYWx1ZSA9IHZvaUxVVC5sdXRbMF0gPj4gc2hpZnQ7XG4gIHZhciBtYXhWYWx1ZSA9IHZvaUxVVC5sdXRbdm9pTFVULmx1dC5sZW5ndGggLSAxXSA+PiBzaGlmdDtcbiAgdmFyIG1heFZhbHVlTWFwcGVkID0gdm9pTFVULmZpcnN0VmFsdWVNYXBwZWQgKyB2b2lMVVQubHV0Lmxlbmd0aCAtIDE7XG4gIHJldHVybiBmdW5jdGlvbiAobW9kYWxpdHlMdXRWYWx1ZSkge1xuICAgIGlmIChtb2RhbGl0eUx1dFZhbHVlIDwgdm9pTFVULmZpcnN0VmFsdWVNYXBwZWQpIHtcbiAgICAgIHJldHVybiBtaW5WYWx1ZTtcbiAgICB9IGVsc2UgaWYgKG1vZGFsaXR5THV0VmFsdWUgPj0gbWF4VmFsdWVNYXBwZWQpIHtcbiAgICAgIHJldHVybiBtYXhWYWx1ZTtcbiAgICB9XG5cbiAgICBpZiAocm91bmRNb2RhbGl0eUxVVFZhbHVlcykge1xuICAgICAgcmV0dXJuIHZvaUxVVC5sdXRbTWF0aC5yb3VuZChtb2RhbGl0eUx1dFZhbHVlKSAtIHZvaUxVVC5maXJzdFZhbHVlTWFwcGVkXSA+PiBzaGlmdDtcbiAgICB9XG5cbiAgICByZXR1cm4gdm9pTFVULmx1dFttb2RhbGl0eUx1dFZhbHVlIC0gdm9pTFVULmZpcnN0VmFsdWVNYXBwZWRdID4+IHNoaWZ0O1xuICB9O1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBhIFZPSSBMVVQgbWFwcGluZyBmdW5jdGlvbiBnaXZlbiB0aGUgY3VycmVudCB3aW5kb3dpbmcgc2V0dGluZ3NcbiAqIGFuZCB0aGUgVk9JIExVVCBmb3IgdGhlIGltYWdlXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd1dpZHRoIFdpbmRvdyBXaWR0aFxuICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd0NlbnRlciBXaW5kb3cgQ2VudGVyXG4gKiBAcGFyYW0ge0xVVH0gW3ZvaUxVVF0gVm9sdW1lIG9mIEludGVyZXN0IExvb2t1cCBUYWJsZSBPYmplY3RcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcm91bmRNb2RhbGl0eUxVVFZhbHVlcyBEbyBhIE1hdGgucm91bmQgb2YgbW9kYWxpdHkgbHV0IHRvIGNvbXB1dGUgbm9uIGxpbmVhciB2b2lsdXRcbiAqXG4gKiBAcmV0dXJuIHtWT0lMVVRGdW5jdGlvbn0gVk9JIExVVCBtYXBwaW5nIGZ1bmN0aW9uXG4gKiBAbWVtYmVyb2YgVk9JTFVUXG4gKi9cblxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uICh3aW5kb3dXaWR0aCwgd2luZG93Q2VudGVyLCB2b2lMVVQsIHJvdW5kTW9kYWxpdHlMVVRWYWx1ZXMpIHtcbiAgaWYgKHZvaUxVVCkge1xuICAgIHJldHVybiBnZW5lcmF0ZU5vbkxpbmVhclZPSUxVVCh2b2lMVVQsIHJvdW5kTW9kYWxpdHlMVVRWYWx1ZXMpO1xuICB9XG5cbiAgcmV0dXJuIGdlbmVyYXRlTGluZWFyVk9JTFVUKHdpbmRvd1dpZHRoLCB3aW5kb3dDZW50ZXIpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvZ3VpZC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9ndWlkLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuZnVuY3Rpb24gczQoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHVuaXF1ZSBpZGVudGlmaWVyXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBBIHVuaXF1ZSBpZGVudGlmaWVyXG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gXCJcIi5jb25jYXQoczQoKSArIHM0KCksIFwiLVwiKS5jb25jYXQoczQoKSwgXCItXCIpLmNvbmNhdChzNCgpLCBcIi1cIikuY29uY2F0KHM0KCksIFwiLVwiKS5jb25jYXQoczQoKSkuY29uY2F0KHM0KCkpLmNvbmNhdChzNCgpKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmFuc2Zvcm0uanMgKi8gXCIuL2ludGVybmFsL3RyYW5zZm9ybS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY2FsY3VsYXRlVHJhbnNmb3JtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NhbGN1bGF0ZVRyYW5zZm9ybS5qcyAqLyBcIi4vaW50ZXJuYWwvY2FsY3VsYXRlVHJhbnNmb3JtLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZHJhd0ltYWdlLmpzICovIFwiLi9pbnRlcm5hbC9kcmF3SW1hZ2UuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dlbmVyYXRlTHV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dlbmVyYXRlTHV0LmpzICovIFwiLi9pbnRlcm5hbC9nZW5lcmF0ZUx1dC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldERlZmF1bHRWaWV3cG9ydC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nZXRUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZ2V0VHJhbnNmb3JtLmpzICovIFwiLi9pbnRlcm5hbC9nZXRUcmFuc2Zvcm0uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlcXVlc3RBbmltYXRpb25GcmFtZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMgKi8gXCIuL2ludGVybmFsL3JlcXVlc3RBbmltYXRpb25GcmFtZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NldERlZmF1bHRWaWV3cG9ydC5qcyAqLyBcIi4vaW50ZXJuYWwvc2V0RGVmYXVsdFZpZXdwb3J0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3N0b3JlZENvbG9yUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEuanMgKi8gXCIuL2ludGVybmFsL3N0b3JlZENvbG9yUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzICovIFwiLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFDb2xvckxVVF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFDb2xvckxVVC5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFDb2xvckxVVC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVC5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFSR0JBX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVJHQkEuanMgKi8gXCIuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUkdCQS5qc1wiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLyoqXHJcbiAqIEBtb2R1bGUgSW50ZXJuYWxcclxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoe1xuICBkcmF3SW1hZ2U6IF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl0sXG4gIGdlbmVyYXRlTHV0OiBfZ2VuZXJhdGVMdXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImRlZmF1bHRcIl0sXG4gIGdldERlZmF1bHRWaWV3cG9ydDogX2dldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSxcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiBfcmVxdWVzdEFuaW1hdGlvbkZyYW1lX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0XCJdLFxuICBzZXREZWZhdWx0Vmlld3BvcnQ6IF9zZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcImRlZmF1bHRcIl0sXG4gIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhOiBfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcImRlZmF1bHRcIl0sXG4gIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUkdCQTogX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUkdCQV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMTJfX1tcImRlZmF1bHRcIl0sXG4gIHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQ6IF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiZGVmYXVsdFwiXSxcbiAgc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVDogX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUHNldWRvY29sb3JMVVRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzExX19bXCJkZWZhdWx0XCJdLFxuICBzdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhOiBfc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOF9fW1wiZGVmYXVsdFwiXSxcbiAgZ2V0VHJhbnNmb3JtOiBfZ2V0VHJhbnNmb3JtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdLFxuICBjYWxjdWxhdGVUcmFuc2Zvcm06IF9jYWxjdWxhdGVUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0sXG4gIFRyYW5zZm9ybTogX3RyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiVHJhbnNmb3JtXCJdXG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9ub3cuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9ub3cuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qKlxuICogQG1vZHVsZSBQb2x5ZmlsbHNcbiAqL1xuXG4vKipcbiAqIFVzZSB0aGUgcGVyZm9ybWFuY2Uubm93KCkgbWV0aG9kIGlmIHBvc3NpYmxlLCBhbmQgaWYgbm90LCB1c2UgRGF0ZS5ub3coKVxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGltZSBlbGFwc2VkIHNpbmNlIHRoZSB0aW1lIG9yaWdpblxuICogQG1lbWJlcm9mIFBvbHlmaWxsc1xuICovXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSkge1xuICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgfVxuXG4gIHJldHVybiBEYXRlLm5vdygpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG5mdW5jdGlvbiByZXF1ZXN0RnJhbWUoY2FsbGJhY2spIHtcbiAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG59XG4vKipcbiAqIFBvbHlmaWxscyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZm9yIG9sZGVyIGJyb3dzZXJzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIEEgcGFyYW1ldGVyIHNwZWNpZnlpbmcgYSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gaXQncyB0aW1lIHRvIHVwZGF0ZSB5b3VyIGFuaW1hdGlvbiBmb3IgdGhlIG5leHQgcmVwYWludC4gVGhlIGNhbGxiYWNrIGhhcyBvbmUgc2luZ2xlIGFyZ3VtZW50LCBhIERPTUhpZ2hSZXNUaW1lU3RhbXAsIHdoaWNoIGluZGljYXRlcyB0aGUgY3VycmVudCB0aW1lICh0aGUgdGltZSByZXR1cm5lZCBmcm9tIHBlcmZvcm1hbmNlLm5vdygpICkgZm9yIHdoZW4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHN0YXJ0cyB0byBmaXJlIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEEgbG9uZyBpbnRlZ2VyIHZhbHVlLCB0aGUgcmVxdWVzdCBpZCwgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBlbnRyeSBpbiB0aGUgY2FsbGJhY2sgbGlzdC4gVGhpcyBpcyBhIG5vbi16ZXJvIHZhbHVlLCBidXQgeW91IG1heSBub3QgbWFrZSBhbnkgb3RoZXIgYXNzdW1wdGlvbnMgYWJvdXQgaXRzIHZhbHVlLiBZb3UgY2FuIHBhc3MgdGhpcyB2YWx1ZSB0byB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoKSB0byBjYW5jZWwgdGhlIHJlZnJlc2ggY2FsbGJhY2sgcmVxdWVzdC5cbiAqIEBtZW1iZXJvZiBQb2x5ZmlsbHNcbiAqL1xuXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB8fCB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB8fCByZXF1ZXN0RnJhbWUoY2FsbGJhY2spO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvc2V0RGVmYXVsdFZpZXdwb3J0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvc2V0RGVmYXVsdFZpZXdwb3J0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQsIHN0YXRlICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInN0YXRlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc3RhdGU7IH0pO1xudmFyIHN0YXRlID0ge1xuICB2aWV3cG9ydDoge31cbn07XG4vKipcbiAqIFNldHMgbmV3IGRlZmF1bHQgdmFsdWVzIGZvciBgZ2V0RGVmYXVsdFZpZXdwb3J0YFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2aWV3cG9ydCAtIE9iamVjdCB0aGF0IHNldHMgbmV3IGRlZmF1bHQgdmFsdWVzIGZvciBnZXREZWZhdWx0Vmlld3BvcnRcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAodmlld3BvcnQpIHtcbiAgc3RhdGUudmlld3BvcnQgPSB2aWV3cG9ydCB8fCB7fTtcbn0pO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9zdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbm93LmpzICovIFwiLi9pbnRlcm5hbC9ub3cuanNcIik7XG5cbi8qKlxuICogQ29udmVydHMgc3RvcmVkIGNvbG9yIHBpeGVsIHZhbHVlcyB0byBkaXNwbGF5IHBpeGVsIHZhbHVlcyB1c2luZyBhIExVVC5cbiAqXG4gKiBOb3RlOiBTa2lwcyBhbHBoYSB2YWx1ZSBmb3IgYW55IGlucHV0IGltYWdlIHBpeGVsIGRhdGEuXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEBwYXJhbSB7QXJyYXl9IGx1dCBMb29rdXAgdGFibGUgYXJyYXlcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGNhbnZhc0ltYWdlRGF0YURhdGEgY2FudmFzSW1hZ2VEYXRhLmRhdGEgYnVmZmVyIGZpbGxlZCB3aXRoIHdoaXRlIHBpeGVsc1xuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoaW1hZ2UsIGx1dCwgY2FudmFzSW1hZ2VEYXRhRGF0YSkge1xuICB2YXIgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLmdldFBpeGVsRGF0YSgpO1xuICBpbWFnZS5zdGF0cy5sYXN0R2V0UGl4ZWxEYXRhVGltZSA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIGNhbnZhc0ltYWdlRGF0YUluZGV4ID0gMDtcbiAgdmFyIHN0b3JlZFBpeGVsRGF0YUluZGV4ID0gMDtcbiAgdmFyIG51bVBpeGVscyA9IHBpeGVsRGF0YS5sZW5ndGg7IC8vIE5PVEU6IEFzIG9mIE5vdiAyMDE0LCBtb3N0IGphdmFzY3JpcHQgZW5naW5lcyBoYXZlIGxvd2VyIHBlcmZvcm1hbmNlIHdoZW4gaW5kZXhpbmcgbmVnYXRpdmUgaW5kZXhlcy5cbiAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwgY29kZSBwYXRoIGZvciB0aGlzIGNhc2UgdGhhdCBpbXByb3ZlcyBwZXJmb3JtYW5jZS4gIFRoYW5rcyB0byBAanBhbWJydW4gZm9yIHRoaXMgZW5oYW5jZW1lbnRcblxuICBzdGFydCA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpO1xuXG4gIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK10gKyAtbWluUGl4ZWxWYWx1ZV07IC8vIFJlZFxuXG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXSArIC1taW5QaXhlbFZhbHVlXTsgLy8gR3JlZW5cblxuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleF0gPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4XSArIC1taW5QaXhlbFZhbHVlXTsgLy8gQmx1ZVxuXG4gICAgICBzdG9yZWRQaXhlbERhdGFJbmRleCArPSAyO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhSW5kZXggKz0gMjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXV07IC8vIFJlZFxuXG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXV07IC8vIEdyZWVuXG5cbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXhdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleF1dOyAvLyBCbHVlXG5cbiAgICAgIHN0b3JlZFBpeGVsRGF0YUluZGV4ICs9IDI7XG4gICAgICBjYW52YXNJbWFnZURhdGFJbmRleCArPSAyO1xuICAgIH1cbiAgfVxuXG4gIGltYWdlLnN0YXRzLmxhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL25vdy5qcyAqLyBcIi4vaW50ZXJuYWwvbm93LmpzXCIpO1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdHJhbnNmb3JtcyBzdG9yZWQgcGl4ZWwgdmFsdWVzIGludG8gYSBjYW52YXMgaW1hZ2UgZGF0YSBidWZmZXJcbiAqIGJ5IHVzaW5nIGEgTFVULiAgVGhpcyBpcyB0aGUgbW9zdCBwZXJmb3JtYW5jZSBzZW5zaXRpdmUgY29kZSBpbiBjb3JuZXJzdG9uZSBhbmRcbiAqIHdlIHVzZSBhIHNwZWNpYWwgdHJpY2sgdG8gbWFrZSB0aGlzIGdvIGFzIGZhc3QgYXMgcG9zc2libGUuICBTcGVjaWZpY2FsbHkgd2VcbiAqIHVzZSB0aGUgYWxwaGEgY2hhbm5lbCBvbmx5IHRvIGNvbnRyb2wgdGhlIGx1bWluYW5jZSByYXRoZXIgdGhhbiB0aGUgcmVkLCBncmVlbiBhbmRcbiAqIGJsdWUgY2hhbm5lbHMgd2hpY2ggbWFrZXMgaXQgb3ZlciAzeCBmYXN0ZXIuIFRoZSBjYW52YXNJbWFnZURhdGFEYXRhIGJ1ZmZlciBuZWVkc1xuICogdG8gYmUgcHJldmlvdXNseSBmaWxsZWQgd2l0aCB3aGl0ZSBwaXhlbHMuXG4gKlxuICogTk9URTogQXR0cmlidXRpb24gd291bGQgYmUgYXBwcmVjaWF0ZWQgaWYgeW91IHVzZSB0aGlzIHRlY2huaXF1ZSFcbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxuICogQHBhcmFtIHtBcnJheX0gbHV0IExvb2t1cCB0YWJsZSBhcnJheVxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gY2FudmFzSW1hZ2VEYXRhRGF0YSBjYW52YXNJbWFnZURhdGEuZGF0YSBidWZmZXIgZmlsbGVkIHdpdGggd2hpdGUgcGl4ZWxzXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChpbWFnZSwgbHV0LCBjYW52YXNJbWFnZURhdGFEYXRhKSB7XG4gIHZhciBzdGFydCA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpO1xuICB2YXIgcGl4ZWxEYXRhID0gaW1hZ2UuZ2V0UGl4ZWxEYXRhKCk7XG4gIGltYWdlLnN0YXRzLmxhc3RHZXRQaXhlbERhdGFUaW1lID0gT2JqZWN0KF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgdmFyIG51bVBpeGVscyA9IHBpeGVsRGF0YS5sZW5ndGg7XG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIGNhbnZhc0ltYWdlRGF0YUluZGV4ID0gMztcbiAgdmFyIHN0b3JlZFBpeGVsRGF0YUluZGV4ID0gMDsgLy8gTk9URTogQXMgb2YgTm92IDIwMTQsIG1vc3QgamF2YXNjcmlwdCBlbmdpbmVzIGhhdmUgbG93ZXIgcGVyZm9ybWFuY2Ugd2hlbiBpbmRleGluZyBuZWdhdGl2ZSBpbmRleGVzLlxuICAvLyBXZSBoYXZlIGEgc3BlY2lhbCBjb2RlIHBhdGggZm9yIHRoaXMgY2FzZSB0aGF0IGltcHJvdmVzIHBlcmZvcm1hbmNlLiAgVGhhbmtzIHRvIEBqcGFtYnJ1biBmb3IgdGhpcyBlbmhhbmNlbWVudFxuICAvLyBBZGRlZCB0d28gcGF0aHMgKEludDE2QXJyYXksIFVpbnQxNkFycmF5KSB0byBhdm9pZCBwb2x5bW9ycGhpYyBkZW9wdGltaXphdGlvbiBpbiBjaHJvbWUuXG5cbiAgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcblxuICBpZiAocGl4ZWxEYXRhIGluc3RhbmNlb2YgSW50MTZBcnJheSkge1xuICAgIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXhdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXSArIC1taW5QaXhlbFZhbHVlXTsgLy8gQWxwaGFcblxuICAgICAgICBjYW52YXNJbWFnZURhdGFJbmRleCArPSA0O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoc3RvcmVkUGl4ZWxEYXRhSW5kZXggPCBudW1QaXhlbHMpIHtcbiAgICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleF0gPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdXTsgLy8gQWxwaGFcblxuICAgICAgICBjYW52YXNJbWFnZURhdGFJbmRleCArPSA0O1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChwaXhlbERhdGEgaW5zdGFuY2VvZiBVaW50MTZBcnJheSkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleF0gPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdXTsgLy8gQWxwaGFcblxuICAgICAgY2FudmFzSW1hZ2VEYXRhSW5kZXggKz0gNDtcbiAgICB9XG4gIH0gZWxzZSBpZiAobWluUGl4ZWxWYWx1ZSA8IDApIHtcbiAgICB3aGlsZSAoc3RvcmVkUGl4ZWxEYXRhSW5kZXggPCBudW1QaXhlbHMpIHtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXhdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXSArIC1taW5QaXhlbFZhbHVlXTsgLy8gQWxwaGFcblxuICAgICAgY2FudmFzSW1hZ2VEYXRhSW5kZXggKz0gNDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4XSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK11dOyAvLyBBbHBoYVxuXG4gICAgICBjYW52YXNJbWFnZURhdGFJbmRleCArPSA0O1xuICAgIH1cbiAgfVxuXG4gIGltYWdlLnN0YXRzLmxhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFDb2xvckxVVC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVULmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb2xvcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2NvbG9ycy9pbmRleC5qcyAqLyBcIi4vY29sb3JzL2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbm93LmpzICovIFwiLi9pbnRlcm5hbC9ub3cuanNcIik7XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEBwYXJhbSB7TG9va3VwVGFibGV8QXJyYXl9IGNvbG9yTHV0IExvb2t1cCB0YWJsZSBhcnJheVxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gY2FudmFzSW1hZ2VEYXRhRGF0YSBjYW52YXNJbWFnZURhdGEuZGF0YSBidWZmZXIgZmlsbGVkIHdpdGggd2hpdGUgcGl4ZWxzXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgSW50ZXJuYWxcbiAqL1xuXG5mdW5jdGlvbiBzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVUKGltYWdlLCBjb2xvckx1dCwgY2FudmFzSW1hZ2VEYXRhRGF0YSkge1xuICB2YXIgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLmdldFBpeGVsRGF0YSgpO1xuICBpbWFnZS5zdGF0cy5sYXN0R2V0UGl4ZWxEYXRhVGltZSA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciBudW1QaXhlbHMgPSBwaXhlbERhdGEubGVuZ3RoO1xuICB2YXIgbWluUGl4ZWxWYWx1ZSA9IGltYWdlLm1pblBpeGVsVmFsdWU7XG4gIHZhciBjYW52YXNJbWFnZURhdGFJbmRleCA9IDA7XG4gIHZhciBzdG9yZWRQaXhlbERhdGFJbmRleCA9IDA7XG4gIHZhciByZ2JhO1xuICB2YXIgY2x1dDtcbiAgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKTtcblxuICBpZiAoY29sb3JMdXQgaW5zdGFuY2VvZiBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdLkxvb2t1cFRhYmxlKSB7XG4gICAgY2x1dCA9IGNvbG9yTHV0LlRhYmxlO1xuICB9IGVsc2Uge1xuICAgIGNsdXQgPSBjb2xvckx1dDtcbiAgfVxuXG4gIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgcmdiYSA9IGNsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdICsgLW1pblBpeGVsVmFsdWVdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHJnYmFbMF07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVsxXTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSByZ2JhWzJdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHJnYmFbM107XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgcmdiYSA9IGNsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdXTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSByZ2JhWzBdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHJnYmFbMV07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVsyXTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSByZ2JhWzNdO1xuICAgIH1cbiAgfVxuXG4gIGltYWdlLnN0YXRzLmxhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKHN0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUHNldWRvY29sb3JMVVQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb2xvcnMvaW5kZXguanMgKi8gXCIuL2NvbG9ycy9pbmRleC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL25vdy5qcyAqLyBcIi4vaW50ZXJuYWwvbm93LmpzXCIpO1xuXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBncmF5c2NhbGVMdXQgTG9va3VwIHRhYmxlIGFycmF5XG4gKiBAcGFyYW0ge0xvb2t1cFRhYmxlfEFycmF5fSBjb2xvckx1dCBMb29rdXAgdGFibGUgYXJyYXlcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGNhbnZhc0ltYWdlRGF0YURhdGEgY2FudmFzSW1hZ2VEYXRhLmRhdGEgYnVmZmVyIGZpbGxlZCB3aXRoIHdoaXRlIHBpeGVsc1xuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuZnVuY3Rpb24gc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVChpbWFnZSwgZ3JheXNjYWxlTHV0LCBjb2xvckx1dCwgY2FudmFzSW1hZ2VEYXRhRGF0YSkge1xuICB2YXIgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLmdldFBpeGVsRGF0YSgpO1xuICBpbWFnZS5zdGF0cy5sYXN0R2V0UGl4ZWxEYXRhVGltZSA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciBudW1QaXhlbHMgPSBwaXhlbERhdGEubGVuZ3RoO1xuICB2YXIgbWluUGl4ZWxWYWx1ZSA9IGltYWdlLm1pblBpeGVsVmFsdWU7XG4gIHZhciBjYW52YXNJbWFnZURhdGFJbmRleCA9IDA7XG4gIHZhciBzdG9yZWRQaXhlbERhdGFJbmRleCA9IDA7XG4gIHZhciBncmF5c2NhbGU7XG4gIHZhciByZ2JhO1xuICB2YXIgY2x1dDtcbiAgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKTtcblxuICBpZiAoY29sb3JMdXQgaW5zdGFuY2VvZiBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdLkxvb2t1cFRhYmxlKSB7XG4gICAgY2x1dCA9IGNvbG9yTHV0LlRhYmxlO1xuICB9IGVsc2Uge1xuICAgIGNsdXQgPSBjb2xvckx1dDtcbiAgfVxuXG4gIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgZ3JheXNjYWxlID0gZ3JheXNjYWxlTHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXSArIC1taW5QaXhlbFZhbHVlXTtcbiAgICAgIHJnYmEgPSBjbHV0W2dyYXlzY2FsZV07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVswXTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSByZ2JhWzFdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHJnYmFbMl07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVszXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBncmF5c2NhbGUgPSBncmF5c2NhbGVMdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdXTtcbiAgICAgIHJnYmEgPSBjbHV0W2dyYXlzY2FsZV07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVswXTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSByZ2JhWzFdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHJnYmFbMl07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcmdiYVszXTtcbiAgICB9XG4gIH1cblxuICBpbWFnZS5zdGF0cy5sYXN0U3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFUaW1lID0gT2JqZWN0KF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbn1cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChzdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVBzZXVkb2NvbG9yTFVUKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVJHQkEuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVJHQkEuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL25vdy5qcyAqLyBcIi4vaW50ZXJuYWwvbm93LmpzXCIpO1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdHJhbnNmb3JtcyBzdG9yZWQgcGl4ZWwgdmFsdWVzIGludG8gYSBjYW52YXMgaW1hZ2UgZGF0YSBidWZmZXJcbiAqIGJ5IHVzaW5nIGEgTFVULlxuICpcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0XG4gKiBAcGFyYW0ge0FycmF5fSBsdXQgTG9va3VwIHRhYmxlIGFycmF5XG4gKiBAcGFyYW0ge1VpbnQ4Q2xhbXBlZEFycmF5fSBjYW52YXNJbWFnZURhdGFEYXRhIGNhbnZhc0ltYWdlRGF0YS5kYXRhIGJ1ZmZlciBmaWxsZWQgd2l0aCB3aGl0ZSBwaXhlbHNcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBJbnRlcm5hbFxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGltYWdlLCBsdXQsIGNhbnZhc0ltYWdlRGF0YURhdGEpIHtcbiAgdmFyIHN0YXJ0ID0gT2JqZWN0KF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCk7XG4gIHZhciBwaXhlbERhdGEgPSBpbWFnZS5nZXRQaXhlbERhdGEoKTtcbiAgaW1hZ2Uuc3RhdHMubGFzdEdldFBpeGVsRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xuICB2YXIgbnVtUGl4ZWxzID0gcGl4ZWxEYXRhLmxlbmd0aDtcbiAgdmFyIG1pblBpeGVsVmFsdWUgPSBpbWFnZS5taW5QaXhlbFZhbHVlO1xuICB2YXIgY2FudmFzSW1hZ2VEYXRhSW5kZXggPSAwO1xuICB2YXIgc3RvcmVkUGl4ZWxEYXRhSW5kZXggPSAwO1xuICB2YXIgcGl4ZWxWYWx1ZTsgLy8gTk9URTogQXMgb2YgTm92IDIwMTQsIG1vc3QgamF2YXNjcmlwdCBlbmdpbmVzIGhhdmUgbG93ZXIgcGVyZm9ybWFuY2Ugd2hlbiBpbmRleGluZyBuZWdhdGl2ZSBpbmRleGVzLlxuICAvLyBXZSBoYXZlIGEgc3BlY2lhbCBjb2RlIHBhdGggZm9yIHRoaXMgY2FzZSB0aGF0IGltcHJvdmVzIHBlcmZvcm1hbmNlLiAgVGhhbmtzIHRvIEBqcGFtYnJ1biBmb3IgdGhpcyBlbmhhbmNlbWVudFxuICAvLyBBZGRlZCB0d28gcGF0aHMgKEludDE2QXJyYXksIFVpbnQxNkFycmF5KSB0byBhdm9pZCBwb2x5bW9ycGhpYyBkZW9wdGltaXphdGlvbiBpbiBjaHJvbWUuXG5cbiAgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcblxuICBpZiAocGl4ZWxEYXRhIGluc3RhbmNlb2YgSW50MTZBcnJheSkge1xuICAgIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICAgIHBpeGVsVmFsdWUgPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdICsgLW1pblBpeGVsVmFsdWVdO1xuICAgICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxWYWx1ZTtcbiAgICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsVmFsdWU7XG4gICAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBwaXhlbFZhbHVlO1xuICAgICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gMjU1OyAvLyBBbHBoYVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB3aGlsZSAoc3RvcmVkUGl4ZWxEYXRhSW5kZXggPCBudW1QaXhlbHMpIHtcbiAgICAgICAgcGl4ZWxWYWx1ZSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK11dO1xuICAgICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxWYWx1ZTtcbiAgICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsVmFsdWU7XG4gICAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBwaXhlbFZhbHVlO1xuICAgICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gMjU1OyAvLyBBbHBoYVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChwaXhlbERhdGEgaW5zdGFuY2VvZiBVaW50MTZBcnJheSkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgcGl4ZWxWYWx1ZSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK11dO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsVmFsdWU7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxWYWx1ZTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBwaXhlbFZhbHVlO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IDI1NTsgLy8gQWxwaGFcbiAgICB9XG4gIH0gZWxzZSBpZiAobWluUGl4ZWxWYWx1ZSA8IDApIHtcbiAgICB3aGlsZSAoc3RvcmVkUGl4ZWxEYXRhSW5kZXggPCBudW1QaXhlbHMpIHtcbiAgICAgIHBpeGVsVmFsdWUgPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdICsgLW1pblBpeGVsVmFsdWVdO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsVmFsdWU7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxWYWx1ZTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBwaXhlbFZhbHVlO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IDI1NTsgLy8gQWxwaGFcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBwaXhlbFZhbHVlID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXV07XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxWYWx1ZTtcbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBwaXhlbFZhbHVlO1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsVmFsdWU7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gMjU1OyAvLyBBbHBoYVxuICAgIH1cbiAgfVxuXG4gIGltYWdlLnN0YXRzLmxhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUkdCQVBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvc3RvcmVkUkdCQVBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ub3cuanMgKi8gXCIuL2ludGVybmFsL25vdy5qc1wiKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBzdG9yZWQgUkdCQSBjb2xvciBwaXhlbCB2YWx1ZXMgdG8gZGlzcGxheSBwaXhlbCB2YWx1ZXMgdXNpbmcgYSBMVVQuXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEBwYXJhbSB7QXJyYXl9IGx1dCBMb29rdXAgdGFibGUgYXJyYXlcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGNhbnZhc0ltYWdlRGF0YURhdGEgY2FudmFzSW1hZ2VEYXRhLmRhdGEgYnVmZmVyIGZpbGxlZCB3aXRoIHdoaXRlIHBpeGVsc1xuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIEludGVybmFsXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoaW1hZ2UsIGx1dCwgY2FudmFzSW1hZ2VEYXRhRGF0YSkge1xuICB2YXIgc3RhcnQgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLmdldFBpeGVsRGF0YSgpO1xuICBpbWFnZS5zdGF0cy5sYXN0R2V0UGl4ZWxEYXRhVGltZSA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIGNhbnZhc0ltYWdlRGF0YUluZGV4ID0gMDtcbiAgdmFyIHN0b3JlZFBpeGVsRGF0YUluZGV4ID0gMDtcbiAgdmFyIG51bVBpeGVscyA9IHBpeGVsRGF0YS5sZW5ndGg7IC8vIE5PVEU6IEFzIG9mIE5vdiAyMDE0LCBtb3N0IGphdmFzY3JpcHQgZW5naW5lcyBoYXZlIGxvd2VyIHBlcmZvcm1hbmNlIHdoZW4gaW5kZXhpbmcgbmVnYXRpdmUgaW5kZXhlcy5cbiAgLy8gV2UgaGF2ZSBhIHNwZWNpYWwgY29kZSBwYXRoIGZvciB0aGlzIGNhc2UgdGhhdCBpbXByb3ZlcyBwZXJmb3JtYW5jZS4gIFRoYW5rcyB0byBAanBhbWJydW4gZm9yIHRoaXMgZW5oYW5jZW1lbnRcblxuICBzdGFydCA9IE9iamVjdChfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpO1xuXG4gIGlmIChtaW5QaXhlbFZhbHVlIDwgMCkge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK10gKyAtbWluUGl4ZWxWYWx1ZV07IC8vIFJlZFxuXG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXSArIC1taW5QaXhlbFZhbHVlXTsgLy8gR3JlZW5cblxuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGx1dFtwaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK10gKyAtbWluUGl4ZWxWYWx1ZV07IC8vIEJsdWVcblxuICAgICAgY2FudmFzSW1hZ2VEYXRhRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHBpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXV07IC8vIFJlZFxuXG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbHV0W3BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXV07IC8vIEdyZWVuXG5cbiAgICAgIGNhbnZhc0ltYWdlRGF0YURhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBsdXRbcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdXTsgLy8gQmx1ZVxuXG4gICAgICBjYW52YXNJbWFnZURhdGFEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gcGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdO1xuICAgIH1cbiAgfVxuXG4gIGltYWdlLnN0YXRzLmxhc3RTdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVRpbWUgPSBPYmplY3QoX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvdHJhbnNmb3JtLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vaW50ZXJuYWwvdHJhbnNmb3JtLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IFRyYW5zZm9ybSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJUcmFuc2Zvcm1cIiwgZnVuY3Rpb24oKSB7IHJldHVybiBUcmFuc2Zvcm07IH0pO1xuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyBCeSBTaW1vbiBTYXJyaXNcbi8vIFd3dy5zaW1vbnNhcnJpcy5jb21cbi8vIFNhcnJpc0BhY20ub3JnXG4vL1xuLy8gRnJlZSB0byB1c2UgYW5kIGRpc3RyaWJ1dGUgYXQgd2lsbFxuLy8gU28gbG9uZyBhcyB5b3UgYXJlIG5pY2UgdG8gcGVvcGxlLCBldGNcbi8vIFNpbXBsZSBjbGFzcyBmb3Iga2VlcGluZyB0cmFjayBvZiB0aGUgY3VycmVudCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcbi8vIEZvciBpbnN0YW5jZTpcbi8vICAgIFZhciB0ID0gbmV3IFRyYW5zZm9ybSgpO1xuLy8gICAgVC5yb3RhdGUoNSk7XG4vLyAgICBWYXIgbSA9IHQubTtcbi8vICAgIEN0eC5zZXRUcmFuc2Zvcm0obVswXSwgbVsxXSwgbVsyXSwgbVszXSwgbVs0XSwgbVs1XSk7XG4vLyBJcyBlcXVpdmFsZW50IHRvOlxuLy8gICAgQ3R4LnJvdGF0ZSg1KTtcbi8vIEJ1dCBub3cgeW91IGNhbiByZXRyaWV2ZSBpdCA6KVxuLy8gUmVtZW1iZXIgdGhhdCB0aGlzIGRvZXMgbm90IGFjY291bnQgZm9yIGFueSBDU1MgdHJhbnNmb3JtcyBhcHBsaWVkIHRvIHRoZSBjYW52YXNcbnZhciBUcmFuc2Zvcm0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBUcmFuc2Zvcm0oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zZm9ybSk7XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVHJhbnNmb3JtLCBbe1xuICAgIGtleTogXCJyZXNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMubSA9IFsxLCAwLCAwLCAxLCAwLCAwXTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xvbmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvbmUoKSB7XG4gICAgICB2YXIgdHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpO1xuICAgICAgdHJhbnNmb3JtLm1bMF0gPSB0aGlzLm1bMF07XG4gICAgICB0cmFuc2Zvcm0ubVsxXSA9IHRoaXMubVsxXTtcbiAgICAgIHRyYW5zZm9ybS5tWzJdID0gdGhpcy5tWzJdO1xuICAgICAgdHJhbnNmb3JtLm1bM10gPSB0aGlzLm1bM107XG4gICAgICB0cmFuc2Zvcm0ubVs0XSA9IHRoaXMubVs0XTtcbiAgICAgIHRyYW5zZm9ybS5tWzVdID0gdGhpcy5tWzVdO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibXVsdGlwbHlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbXVsdGlwbHkobWF0cml4KSB7XG4gICAgICB2YXIgbTExID0gdGhpcy5tWzBdICogbWF0cml4Lm1bMF0gKyB0aGlzLm1bMl0gKiBtYXRyaXgubVsxXTtcbiAgICAgIHZhciBtMTIgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVswXSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzFdO1xuICAgICAgdmFyIG0yMSA9IHRoaXMubVswXSAqIG1hdHJpeC5tWzJdICsgdGhpcy5tWzJdICogbWF0cml4Lm1bM107XG4gICAgICB2YXIgbTIyID0gdGhpcy5tWzFdICogbWF0cml4Lm1bMl0gKyB0aGlzLm1bM10gKiBtYXRyaXgubVszXTtcbiAgICAgIHZhciBkeCA9IHRoaXMubVswXSAqIG1hdHJpeC5tWzRdICsgdGhpcy5tWzJdICogbWF0cml4Lm1bNV0gKyB0aGlzLm1bNF07XG4gICAgICB2YXIgZHkgPSB0aGlzLm1bMV0gKiBtYXRyaXgubVs0XSArIHRoaXMubVszXSAqIG1hdHJpeC5tWzVdICsgdGhpcy5tWzVdO1xuICAgICAgdGhpcy5tWzBdID0gbTExO1xuICAgICAgdGhpcy5tWzFdID0gbTEyO1xuICAgICAgdGhpcy5tWzJdID0gbTIxO1xuICAgICAgdGhpcy5tWzNdID0gbTIyO1xuICAgICAgdGhpcy5tWzRdID0gZHg7XG4gICAgICB0aGlzLm1bNV0gPSBkeTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW52ZXJ0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGludmVydCgpIHtcbiAgICAgIHZhciBkID0gMSAvICh0aGlzLm1bMF0gKiB0aGlzLm1bM10gLSB0aGlzLm1bMV0gKiB0aGlzLm1bMl0pO1xuICAgICAgdmFyIG0wID0gdGhpcy5tWzNdICogZDtcbiAgICAgIHZhciBtMSA9IC10aGlzLm1bMV0gKiBkO1xuICAgICAgdmFyIG0yID0gLXRoaXMubVsyXSAqIGQ7XG4gICAgICB2YXIgbTMgPSB0aGlzLm1bMF0gKiBkO1xuICAgICAgdmFyIG00ID0gZCAqICh0aGlzLm1bMl0gKiB0aGlzLm1bNV0gLSB0aGlzLm1bM10gKiB0aGlzLm1bNF0pO1xuICAgICAgdmFyIG01ID0gZCAqICh0aGlzLm1bMV0gKiB0aGlzLm1bNF0gLSB0aGlzLm1bMF0gKiB0aGlzLm1bNV0pO1xuICAgICAgdGhpcy5tWzBdID0gbTA7XG4gICAgICB0aGlzLm1bMV0gPSBtMTtcbiAgICAgIHRoaXMubVsyXSA9IG0yO1xuICAgICAgdGhpcy5tWzNdID0gbTM7XG4gICAgICB0aGlzLm1bNF0gPSBtNDtcbiAgICAgIHRoaXMubVs1XSA9IG01O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyb3RhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcm90YXRlKHJhZCkge1xuICAgICAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICAgICAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICAgICAgdmFyIG0xMSA9IHRoaXMubVswXSAqIGMgKyB0aGlzLm1bMl0gKiBzO1xuICAgICAgdmFyIG0xMiA9IHRoaXMubVsxXSAqIGMgKyB0aGlzLm1bM10gKiBzO1xuICAgICAgdmFyIG0yMSA9IHRoaXMubVswXSAqIC1zICsgdGhpcy5tWzJdICogYztcbiAgICAgIHZhciBtMjIgPSB0aGlzLm1bMV0gKiAtcyArIHRoaXMubVszXSAqIGM7XG4gICAgICB0aGlzLm1bMF0gPSBtMTE7XG4gICAgICB0aGlzLm1bMV0gPSBtMTI7XG4gICAgICB0aGlzLm1bMl0gPSBtMjE7XG4gICAgICB0aGlzLm1bM10gPSBtMjI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyYW5zbGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0cmFuc2xhdGUoeCwgeSkge1xuICAgICAgdGhpcy5tWzRdICs9IHRoaXMubVswXSAqIHggKyB0aGlzLm1bMl0gKiB5O1xuICAgICAgdGhpcy5tWzVdICs9IHRoaXMubVsxXSAqIHggKyB0aGlzLm1bM10gKiB5O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY2FsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzY2FsZShzeCwgc3kpIHtcbiAgICAgIHRoaXMubVswXSAqPSBzeDtcbiAgICAgIHRoaXMubVsxXSAqPSBzeDtcbiAgICAgIHRoaXMubVsyXSAqPSBzeTtcbiAgICAgIHRoaXMubVszXSAqPSBzeTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidHJhbnNmb3JtUG9pbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNmb3JtUG9pbnQocHgsIHB5KSB7XG4gICAgICB2YXIgeCA9IHB4O1xuICAgICAgdmFyIHkgPSBweTtcbiAgICAgIHB4ID0geCAqIHRoaXMubVswXSArIHkgKiB0aGlzLm1bMl0gKyB0aGlzLm1bNF07XG4gICAgICBweSA9IHggKiB0aGlzLm1bMV0gKyB5ICogdGhpcy5tWzNdICsgdGhpcy5tWzVdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgeDogcHgsXG4gICAgICAgIHk6IHB5XG4gICAgICB9O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUcmFuc2Zvcm07XG59KCk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW50ZXJuYWwvdHJ5RW5hYmxlV2ViZ2wuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL3RyeUVuYWJsZVdlYmdsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfd2ViZ2xfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3dlYmdsL2luZGV4LmpzICovIFwiLi93ZWJnbC9pbmRleC5qc1wiKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgd2ViR0wgaXMgc3VwcG9ydGVkIGFuZCBpbml0aWFsaXplcyB0aGUgcmVuZGVyaW5nIGVuZ2luZS5cbiAqIEBwYXJhbSB7YW55fSBvcHRpb25zIE9wdGlvbnMgdG8gY2hlY2sgaWYgd2ViZ2wgcmVuZGVyaW5nIGlzIHJlcXVlc3RlZCAoZS5nLiBlbmFibGUgd2ViZ2wgYnkgcGFzc2luZyB7cmVuZGVyZXI6ICd3ZWJnbCd9KVxuICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgd2ViZ2wgcmVuZGVyaW5nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBpbml0aWFsaXplZC4gT3RoZXJ3aXNlLCBmYWxzZS5cbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIGlmIChfd2ViZ2xfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0ucmVuZGVyZXIuaXNXZWJHTEF2YWlsYWJsZSgpKSB7XG4gICAgLy8gSWYgV2ViR0wgaXMgYXZhaWxhYmxlIG9uIHRoZSBkZXZpY2UsIGluaXRpYWxpemUgdGhlIHJlbmRlcmVyXG4gICAgLy8gQW5kIHJldHVybiB0aGUgcmVuZGVyQ2FudmFzIGZyb20gdGhlIFdlYkdMIHJlbmRlcmluZyBwYXRoXG4gICAgX3dlYmdsX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdLnJlbmRlcmVyLmluaXRSZW5kZXJlcigpO1xuICAgIG9wdGlvbnMucmVuZGVyZXIgPSAnd2ViZ2wnO1xuICAgIG9wdGlvbnMuZGVzeW5jaHJvbml6ZWQgPSB0cnVlO1xuICAgIG9wdGlvbnMucHJlc2VydmVEcmF3aW5nQnVmZmVyID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyBJZiBXZWJHTCBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgZGV2aWNlLCB3ZSB3aWxsIGZhbGwgYmFja1xuICAvLyBUbyB1c2luZyB0aGUgQ2FudmFzIHJlbmRlcmVyXG5cblxuICBjb25zb2xlLmVycm9yKCdXZWJHTCBub3QgYXZhaWxhYmxlLCBmYWxsaW5nIGJhY2sgdG8gQ2FudmFzIHJlbmRlcmVyJyk7XG4gIGRlbGV0ZSBvcHRpb25zLnJlbmRlcmVyO1xuICBkZWxldGUgb3B0aW9ucy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI7XG4gIHJldHVybiBmYWxzZTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL2ludGVybmFsL3ZhbGlkYXRvci5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludGVybmFsL3ZhbGlkYXRvci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiB2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZCwgdmFsaWRhdGVQYXJhbWV0ZXJVbmRlZmluZWRPck51bGwgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidmFsaWRhdGVQYXJhbWV0ZXJVbmRlZmluZWRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZDsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidmFsaWRhdGVQYXJhbWV0ZXJVbmRlZmluZWRPck51bGxcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZE9yTnVsbDsgfSk7XG4vKipcbiAqIENoZWNrIGlmIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkIGFuZCB0aHJvd3MgYW5kIGVycm9yXG4gKiBAcGFyYW0ge2FueX0gY2hlY2tQYXJhbSB0aGUgcGFyYW1ldGVyIHRvIHZhbGlkYXRlIGZvciB1bmRlZmluZWRcbiAqIEBwYXJhbSB7YW55fSBlcnJvck1zZyB0aGUgZXJyb3IgbWVzc2FnZSB0byBiZSB0aHJvd25cbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUGFyYW1ldGVyVW5kZWZpbmVkKGNoZWNrUGFyYW0sIGVycm9yTXNnKSB7XG4gIGlmIChjaGVja1BhcmFtID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICB9XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkIG9yIG51bGwgYW5kIHRocm93cyBhbmQgZXJyb3JcbiAqIEBwYXJhbSB7YW55fSBjaGVja1BhcmFtIHRoZSBwYXJhbWV0ZXIgdG8gdmFsaWRhdGUgZm9yIHVuZGVmaW5lZFxuICogQHBhcmFtIHthbnl9IGVycm9yTXNnIHRoZSBlcnJvciBtZXNzYWdlIHRvIGJlIHRocm93blxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgaW50ZXJuYWxcbiAqL1xuXG5mdW5jdGlvbiB2YWxpZGF0ZVBhcmFtZXRlclVuZGVmaW5lZE9yTnVsbChjaGVja1BhcmFtLCBlcnJvck1zZykge1xuICBpZiAoY2hlY2tQYXJhbSA9PT0gdW5kZWZpbmVkIHx8IGNoZWNrUGFyYW0gPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICB9XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW52YWxpZGF0ZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9pbnZhbGlkYXRlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlZEVsZW1lbnRzLmpzICovIFwiLi9lbmFibGVkRWxlbWVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2V2ZW50cy5qcyAqLyBcIi4vZXZlbnRzLmpzXCIpO1xuXG5cblxuLyoqXHJcbiAqIFNldHMgdGhlIGludmFsaWQgZmxhZyBvbiB0aGUgZW5hYmxlZCBlbGVtZW50IGFuZCBmaXJlcyBhbiBldmVudFxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICogQG1lbWJlcm9mIERyYXdpbmdcclxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgZW5hYmxlZEVsZW1lbnQuaW52YWxpZCA9IHRydWU7XG4gIGVuYWJsZWRFbGVtZW50Lm5lZWRzUmVkcmF3ID0gdHJ1ZTtcbiAgdmFyIGV2ZW50RGF0YSA9IHtcbiAgICBlbGVtZW50OiBlbGVtZW50XG4gIH07XG4gIE9iamVjdChfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbGVtZW50LCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdLklOVkFMSURBVEVELCBldmVudERhdGEpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vaW52YWxpZGF0ZUltYWdlSWQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL2ludmFsaWRhdGVJbWFnZUlkLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzICovIFwiLi9pbnRlcm5hbC9kcmF3SW1hZ2UuanNcIik7XG5cblxuLyoqXG4gKiBGb3JjZXMgdGhlIGltYWdlIHRvIGJlIHVwZGF0ZWQvcmVkcmF3biBmb3IgYWxsIGVuYWJsZWQgZWxlbWVudHNcbiAqIGRpc3BsYXlpbmcgdGhlIHNwZWNpZmllZCBpbWFnZUlkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltYWdlSWQgVGhlIGltYWdlSWQgb2YgdGhlIENvcm5lcnN0b25lIEltYWdlIE9iamVjdCB0byByZWRyYXdcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIERyYXdpbmdcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChpbWFnZUlkKSB7XG4gIHZhciBlbmFibGVkRWxlbWVudHMgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRzQnlJbWFnZUlkXCJdKShpbWFnZUlkKTtcbiAgZW5hYmxlZEVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVuYWJsZWRFbGVtZW50KSB7XG4gICAgT2JqZWN0KF9pbnRlcm5hbF9kcmF3SW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCB0cnVlKTtcbiAgfSk7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9sYXllcnMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9sYXllcnMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogcmVzY2FsZUltYWdlLCBhZGRMYXllciwgcmVtb3ZlTGF5ZXIsIGdldExheWVyLCBnZXRMYXllcnMsIGdldFZpc2libGVMYXllcnMsIHNldEFjdGl2ZUxheWVyLCBzZXRMYXllckltYWdlLCBnZXRBY3RpdmVMYXllciwgcHVyZ2VMYXllcnMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVzY2FsZUltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVzY2FsZUltYWdlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZExheWVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlbW92ZUxheWVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldExheWVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJnZXRMYXllcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRMYXllcnM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFZpc2libGVMYXllcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRWaXNpYmxlTGF5ZXJzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXRBY3RpdmVMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHNldEFjdGl2ZUxheWVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJzZXRMYXllckltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gc2V0TGF5ZXJJbWFnZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZ2V0QWN0aXZlTGF5ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBnZXRBY3RpdmVMYXllcjsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicHVyZ2VMYXllcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBwdXJnZUxheWVyczsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2d1aWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZ3VpZC5qcyAqLyBcIi4vaW50ZXJuYWwvZ3VpZC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzICovIFwiLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXBkYXRlSW1hZ2UuanMgKi8gXCIuL3VwZGF0ZUltYWdlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdHJpZ2dlckV2ZW50LmpzICovIFwiLi90cmlnZ2VyRXZlbnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcblxuXG5cblxuXG5cblxuLyoqXG4gKiBAbW9kdWxlIEVuYWJsZWRFbGVtZW50TGF5ZXJzXG4gKi9cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gdHJpZ2dlciBhbiBldmVudCBvbiBhIENvcm5lcnN0b25lIGVsZW1lbnQgd2l0aFxuICogYSBzcGVjaWZpYyBsYXllcklkXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZSBUaGUgZXZlbnQgbmFtZSAoZS5nLiBDb3JuZXJzdG9uZUxheWVyQWRkZWQpXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50fSBlbmFibGVkRWxlbWVudCBUaGUgQ29ybmVyc3RvbmUgZW5hYmxlZCBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbGF5ZXJJZCBUaGUgbGF5ZXIncyB1bmlxdWUgaWRlbnRpZmllclxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgRW5hYmxlZEVsZW1lbnRMYXllcnNcbiAqL1xuXG5mdW5jdGlvbiB0cmlnZ2VyRXZlbnRGb3JMYXllcihldmVudE5hbWUsIGVuYWJsZWRFbGVtZW50LCBsYXllcklkKSB7XG4gIHZhciBlbGVtZW50ID0gZW5hYmxlZEVsZW1lbnQuZWxlbWVudDtcbiAgdmFyIGV2ZW50RGF0YSA9IHtcbiAgICB2aWV3cG9ydDogZW5hYmxlZEVsZW1lbnQudmlld3BvcnQsXG4gICAgZWxlbWVudDogZW5hYmxlZEVsZW1lbnQuZWxlbWVudCxcbiAgICBpbWFnZTogZW5hYmxlZEVsZW1lbnQuaW1hZ2UsXG4gICAgZW5hYmxlZEVsZW1lbnQ6IGVuYWJsZWRFbGVtZW50LFxuICAgIGxheWVySWQ6IGxheWVySWRcbiAgfTtcbiAgT2JqZWN0KF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQsIGV2ZW50TmFtZSwgZXZlbnREYXRhKTtcbn1cbi8qKlxuICogUmVzY2FsZSB0aGUgdGFyZ2V0IGxheWVyIHRvIHRoZSBiYXNlIGxheWVyIGJhc2VkIG9uIHRoZVxuICogcmVsYXRpdmUgc2l6ZSBvZiBlYWNoIGltYWdlIGFuZCB0aGVpciBwaXhlbCBkaW1lbnNpb25zLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCB1cGRhdGUgdGhlIFZpZXdwb3J0IHBhcmFtZXRlcnMgb2YgdGhlXG4gKiB0YXJnZXQgbGF5ZXIgdG8gYSBuZXcgc2NhbGUuXG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudExheWVyfSBiYXNlTGF5ZXIgVGhlIGJhc2UgbGF5ZXJcbiAqIEBwYXJhbSB7RW5hYmxlZEVsZW1lbnRMYXllcn0gdGFyZ2V0TGF5ZXIgVGhlIHRhcmdldCBsYXllciB0byByZXNjYWxlXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudExheWVyc1xuICovXG5cblxuZnVuY3Rpb24gcmVzY2FsZUltYWdlKGJhc2VMYXllciwgdGFyZ2V0TGF5ZXIpIHtcbiAgaWYgKGJhc2VMYXllci5sYXllcklkID09PSB0YXJnZXRMYXllci5sYXllcklkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZXNjYWxlSW1hZ2U6IGJvdGggYXJndW1lbnRzIHJlcHJlc2VudCB0aGUgc2FtZSBsYXllcicpO1xuICB9XG5cbiAgdmFyIGJhc2VJbWFnZSA9IGJhc2VMYXllci5pbWFnZTtcbiAgdmFyIHRhcmdldEltYWdlID0gdGFyZ2V0TGF5ZXIuaW1hZ2U7IC8vIFJldHVybiBpZiB0aGVzZSBpbWFnZXMgZG9uJ3QgaGF2ZSBhbiBpbWFnZUlkIChlLmcuIGZvciBkeW5hbWljIGltYWdlcylcblxuICBpZiAoIWJhc2VJbWFnZS5pbWFnZUlkIHx8ICF0YXJnZXRJbWFnZS5pbWFnZUlkKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIENvbHVtbiBwaXhlbCBzcGFjaW5nIG5lZWQgdG8gYmUgY29uc2lkZXJlZCB3aGVuIGNhbGN1bGF0aW5nIHRoZVxuICAvLyByYXRpbyBiZXR3ZWVuIHRoZSBsYXllciBhZGRlZCBhbmQgYmFzZSBsYXllciBpbWFnZXNcblxuXG4gIHZhciB0YXJnZXREaXNwbGF5ZWRBcmVhID0gT2JqZWN0KF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKSh0YXJnZXRJbWFnZSwgdGFyZ2V0TGF5ZXIudmlld3BvcnQpO1xuICB2YXIgYmFzZURpc3BsYXllZEFyZWEgPSBPYmplY3QoX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcImRlZmF1bHRcIl0pKGJhc2VJbWFnZSwgYmFzZUxheWVyLnZpZXdwb3J0KTtcbiAgdmFyIGNvbFJlbGF0aXZlID0gdGFyZ2V0RGlzcGxheWVkQXJlYS5jb2x1bW5QaXhlbFNwYWNpbmcgKiB0YXJnZXRJbWFnZS53aWR0aCAvIChiYXNlRGlzcGxheWVkQXJlYS5jb2x1bW5QaXhlbFNwYWNpbmcgKiBiYXNlSW1hZ2Uud2lkdGgpO1xuICB2YXIgdmlld3BvcnRSYXRpbyA9IHRhcmdldExheWVyLnZpZXdwb3J0LnNjYWxlIC8gYmFzZUxheWVyLnZpZXdwb3J0LnNjYWxlICogY29sUmVsYXRpdmU7XG4gIHRhcmdldExheWVyLnZpZXdwb3J0LnNjYWxlID0gYmFzZUxheWVyLnZpZXdwb3J0LnNjYWxlICogdmlld3BvcnRSYXRpbztcbn1cbi8qKlxuICogQWRkIGEgbGF5ZXIgdG8gYSBDb3JuZXJzdG9uZSBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2Ugb2JqZWN0IHRvIGFkZCBhcyBhIG5ldyBsYXllclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGxheWVyXG4gKlxuICogQHJldHVybnMge1N0cmluZ30gbGF5ZXJJZCBUaGUgbmV3IGxheWVyJ3MgdW5pcXVlIGlkZW50aWZpZXJcbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudExheWVyc1xuICovXG5cbmZ1bmN0aW9uIGFkZExheWVyKGVsZW1lbnQsIGltYWdlLCBvcHRpb25zKSB7XG4gIHZhciBsYXllcklkID0gT2JqZWN0KF9pbnRlcm5hbF9ndWlkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKSgpO1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICB2YXIgbGF5ZXJzID0gZW5hYmxlZEVsZW1lbnQubGF5ZXJzO1xuICB2YXIgdmlld3BvcnQ7XG5cbiAgaWYgKGltYWdlKSB7XG4gICAgdmlld3BvcnQgPSBPYmplY3QoX2ludGVybmFsX2dldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQuY2FudmFzLCBpbWFnZSk7IC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0cyBpZiBhbnkgb3B0aW9uYWwgdmlld3BvcnQgc2V0dGluZ3NcbiAgICAvLyBoYXZlIGJlZW4gc3BlY2lmaWVkXG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnZpZXdwb3J0KSB7XG4gICAgICB2aWV3cG9ydCA9IE9iamVjdC5hc3NpZ24odmlld3BvcnQsIG9wdGlvbnMudmlld3BvcnQpO1xuICAgIH1cbiAgfSAvLyBTZXQgc3luY1ZpZXdwb3J0cyB0byB0cnVlIGJ5IGRlZmF1bHQgd2hlbiBhIG5ldyBsYXllciBpcyBhZGRlZFxuXG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LnN5bmNWaWV3cG9ydHMgIT09IGZhbHNlKSB7XG4gICAgZW5hYmxlZEVsZW1lbnQuc3luY1ZpZXdwb3J0cyA9IHRydWU7XG4gIH1cblxuICB2YXIgbmV3TGF5ZXIgPSB7XG4gICAgaW1hZ2U6IGltYWdlLFxuICAgIGxheWVySWQ6IGxheWVySWQsXG4gICAgdmlld3BvcnQ6IHZpZXdwb3J0LFxuICAgIG9wdGlvbnM6IG9wdGlvbnMgfHwge30sXG4gICAgcmVuZGVyaW5nVG9vbHM6IHt9XG4gIH07IC8vIFJlc2NhbGUgdGhlIG5ldyBsYXllciBiYXNlZCBvbiB0aGUgYmFzZSBsYXllciB0byBtYWtlIHN1cmVcbiAgLy8gdGhleSB3aWxsIGhhdmUgYSBwcm9wb3J0aW9uYWwgc2l6ZSAocGl4ZWwgc3BhY2luZylcblxuICBpZiAobGF5ZXJzLmxlbmd0aCAmJiBpbWFnZSkge1xuICAgIHJlc2NhbGVJbWFnZShsYXllcnNbMF0sIG5ld0xheWVyKTtcbiAgfVxuXG4gIGxheWVycy5wdXNoKG5ld0xheWVyKTtcbiAgdHJpZ2dlckV2ZW50Rm9yTGF5ZXIoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiZGVmYXVsdFwiXS5MQVlFUl9BRERFRCwgZW5hYmxlZEVsZW1lbnQsIGxheWVySWQpOyAvLyBTZXQgdGhlIGxheWVyIGFzIGFjdGl2ZSBpZiBpdCdzIHRoZSBmaXJzdCBsYXllciBhZGRlZFxuXG4gIGlmIChsYXllcnMubGVuZ3RoID09PSAxICYmIGltYWdlKSB7XG4gICAgc2V0QWN0aXZlTGF5ZXIoZWxlbWVudCwgbGF5ZXJJZCk7XG4gIH1cblxuICByZXR1cm4gbGF5ZXJJZDtcbn1cbi8qKlxuICogUmVtb3ZlIGEgbGF5ZXIgZnJvbSBhIENvcm5lcnN0b25lIGVsZW1lbnQgZ2l2ZW4gYSBsYXllciBJRFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIERPTSBlbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKiBAcGFyYW0ge1N0cmluZ30gbGF5ZXJJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBsYXllclxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgRW5hYmxlZEVsZW1lbnRMYXllcnNcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVMYXllcihlbGVtZW50LCBsYXllcklkKSB7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciBsYXllcnMgPSBlbmFibGVkRWxlbWVudC5sYXllcnM7XG4gIHZhciBpbmRleCA9IGVuYWJsZWRFbGVtZW50LmxheWVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLmxheWVySWQgPT09IGxheWVySWQ7XG4gIH0pO1xuXG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICBsYXllcnMuc3BsaWNlKGluZGV4LCAxKTsgLy8gSWYgdGhlIGN1cnJlbnQgbGF5ZXIgaXMgYWN0aXZlLCBhbmQgd2UgaGF2ZSBvdGhlciBsYXllcnMsXG4gICAgLy8gc3dpdGNoIHRvIHRoZSBmaXJzdCBsYXllciB0aGF0IHJlbWFpbnMgaW4gdGhlIGFycmF5XG5cbiAgICBpZiAobGF5ZXJJZCA9PT0gZW5hYmxlZEVsZW1lbnQuYWN0aXZlTGF5ZXJJZCAmJiBsYXllcnMubGVuZ3RoKSB7XG4gICAgICBzZXRBY3RpdmVMYXllcihlbGVtZW50LCBsYXllcnNbMF0ubGF5ZXJJZCk7XG4gICAgfVxuXG4gICAgdHJpZ2dlckV2ZW50Rm9yTGF5ZXIoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiZGVmYXVsdFwiXS5MQVlFUl9SRU1PVkVELCBlbmFibGVkRWxlbWVudCwgbGF5ZXJJZCk7XG4gIH1cbn1cbi8qKlxuICogUmV0cmlldmUgYSBsYXllciBmcm9tIGEgQ29ybmVyc3RvbmUgZWxlbWVudCBnaXZlbiBhIGxheWVyIElEXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsYXllcklkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGxheWVyXG4gKiBAcmV0dXJuIHtFbmFibGVkRWxlbWVudExheWVyfSBUaGUgbGF5ZXJcbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudExheWVyc1xuICovXG5cbmZ1bmN0aW9uIGdldExheWVyKGVsZW1lbnQsIGxheWVySWQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmxheWVycy5maW5kKGZ1bmN0aW9uIChsYXllcikge1xuICAgIHJldHVybiBsYXllci5sYXllcklkID09PSBsYXllcklkO1xuICB9KTtcbn1cbi8qKlxuICogUmV0cmlldmUgYWxsIGxheWVycyBmb3IgYSBDb3JuZXJzdG9uZSBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqXG4gKiBAcmV0dXJuIHtFbmFibGVkRWxlbWVudExheWVyW119IEFuIGFycmF5IG9mIGxheWVyc1xuICogQG1lbWJlcm9mIEVuYWJsZWRFbGVtZW50TGF5ZXJzXG4gKi9cblxuZnVuY3Rpb24gZ2V0TGF5ZXJzKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmxheWVycztcbn1cbi8qKlxuICogUmV0cmlldmUgYWxsIHZpc2libGUgbGF5ZXJzIGZvciBhIENvcm5lcnN0b25lIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxuICpcbiAqIEByZXR1cm4ge0VuYWJsZWRFbGVtZW50TGF5ZXJbXX0gQW4gYXJyYXkgb2YgbGF5ZXJzXG4gKiBAbWVtYmVyb2YgRW5hYmxlZEVsZW1lbnRMYXllcnNcbiAqL1xuXG5mdW5jdGlvbiBnZXRWaXNpYmxlTGF5ZXJzKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmxheWVycy5maWx0ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy52aXNpYmxlICE9PSBmYWxzZSAmJiBsYXllci5vcHRpb25zLm9wYWNpdHkgIT09IDA7XG4gIH0pO1xufVxuLyoqXG4gKiBTZXQgdGhlIGFjdGl2ZSBsYXllciBmb3IgYSBDb3JuZXJzdG9uZSBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7U3RyaW5nfSBsYXllcklkIFRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGxheWVyXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudExheWVyc1xuICovXG5cbmZ1bmN0aW9uIHNldEFjdGl2ZUxheWVyKGVsZW1lbnQsIGxheWVySWQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTsgLy8gU3RvcCBoZXJlIGlmIHRoaXMgbGF5ZXIgaXMgYWxyZWFkeSBhY3RpdmVcblxuICBpZiAoZW5hYmxlZEVsZW1lbnQuYWN0aXZlTGF5ZXJJZCA9PT0gbGF5ZXJJZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBpbmRleCA9IGVuYWJsZWRFbGVtZW50LmxheWVycy5maW5kSW5kZXgoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgcmV0dXJuIGxheWVyLmxheWVySWQgPT09IGxheWVySWQ7XG4gIH0pO1xuXG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldEFjdGl2ZUxheWVyOiBsYXllciBub3QgZm91bmQgaW4gbGF5ZXJzIGFycmF5Jyk7XG4gIH1cblxuICB2YXIgbGF5ZXIgPSBlbmFibGVkRWxlbWVudC5sYXllcnNbaW5kZXhdO1xuXG4gIGlmICghbGF5ZXIuaW1hZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldEFjdGl2ZUxheWVyOiBsYXllciB3aXRoIHVuZGVmaW5lZCBpbWFnZSBjYW5ub3QgYmUgc2V0IGFzIGFjdGl2ZS4nKTtcbiAgfVxuXG4gIGVuYWJsZWRFbGVtZW50LmFjdGl2ZUxheWVySWQgPSBsYXllcklkO1xuICBlbmFibGVkRWxlbWVudC5pbWFnZSA9IGxheWVyLmltYWdlO1xuICBlbmFibGVkRWxlbWVudC52aWV3cG9ydCA9IGxheWVyLnZpZXdwb3J0O1xuICBPYmplY3QoX3VwZGF0ZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJkZWZhdWx0XCJdKShlbGVtZW50KTtcbiAgdHJpZ2dlckV2ZW50Rm9yTGF5ZXIoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fW1wiZGVmYXVsdFwiXS5BQ1RJVkVfTEFZRVJfQ0hBTkdFRCwgZW5hYmxlZEVsZW1lbnQsIGxheWVySWQpO1xufVxuLyoqXG4gKiBTZXQgYSBuZXcgaW1hZ2UgZm9yIGEgc3BlY2lmaWMgbGF5ZXJJZFxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIERPTSBlbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBUaGUgaW1hZ2UgdG8gYmUgZGlzcGxheWVkIGluIHRoaXMgbGF5ZXJcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbGF5ZXJJZF0gVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgbGF5ZXJcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIEVuYWJsZWRFbGVtZW50TGF5ZXJzXG4gKi9cblxuZnVuY3Rpb24gc2V0TGF5ZXJJbWFnZShlbGVtZW50LCBpbWFnZSwgbGF5ZXJJZCkge1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICB2YXIgYmFzZUxheWVyID0gZW5hYmxlZEVsZW1lbnQubGF5ZXJzWzBdO1xuICB2YXIgbGF5ZXI7XG5cbiAgaWYgKGxheWVySWQpIHtcbiAgICBsYXllciA9IGdldExheWVyKGVsZW1lbnQsIGxheWVySWQpO1xuICB9IGVsc2Uge1xuICAgIGxheWVyID0gZ2V0QWN0aXZlTGF5ZXIoZWxlbWVudCk7XG4gIH1cblxuICBpZiAoIWxheWVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRMYXllckltYWdlOiBMYXllciBub3QgZm91bmQnKTtcbiAgfVxuXG4gIGxheWVyLmltYWdlID0gaW1hZ2U7XG5cbiAgaWYgKCFpbWFnZSkge1xuICAgIGxheWVyLnZpZXdwb3J0ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICghbGF5ZXIudmlld3BvcnQpIHtcbiAgICB2YXIgZGVmYXVsdFZpZXdwb3J0ID0gT2JqZWN0KF9pbnRlcm5hbF9nZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LmNhbnZhcywgaW1hZ2UpOyAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdHMgaWYgYW55IG9wdGlvbmFsIHZpZXdwb3J0IHNldHRpbmdzXG4gICAgLy8gaGF2ZSBiZWVuIHNwZWNpZmllZFxuXG4gICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy52aWV3cG9ydCkge1xuICAgICAgbGF5ZXIudmlld3BvcnQgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRWaWV3cG9ydCwgbGF5ZXIub3B0aW9ucy52aWV3cG9ydCk7XG4gICAgfVxuXG4gICAgaWYgKGJhc2VMYXllci5sYXllcklkICE9PSBsYXllcklkKSB7XG4gICAgICByZXNjYWxlSW1hZ2UoYmFzZUxheWVyLCBsYXllcik7XG4gICAgfVxuICB9XG59XG4vKipcbiAqIFJldHJpZXZlIHRoZSBjdXJyZW50bHkgYWN0aXZlIGxheWVyIGZvciBhIENvcm5lcnN0b25lIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxuICogQHJldHVybiB7RW5hYmxlZEVsZW1lbnRMYXllcn0gVGhlIGN1cnJlbnRseSBhY3RpdmUgbGF5ZXJcbiAqIEBtZW1iZXJvZiBFbmFibGVkRWxlbWVudExheWVyc1xuICovXG5cbmZ1bmN0aW9uIGdldEFjdGl2ZUxheWVyKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgcmV0dXJuIGVuYWJsZWRFbGVtZW50LmxheWVycy5maW5kKGZ1bmN0aW9uIChsYXllcikge1xuICAgIHJldHVybiBsYXllci5sYXllcklkID09PSBlbmFibGVkRWxlbWVudC5hY3RpdmVMYXllcklkO1xuICB9KTtcbn1cbi8qKlxuICogUHVyZ2UgdGhlIGxheWVyc1xuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgVGhlIERPTSBlbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuZnVuY3Rpb24gcHVyZ2VMYXllcnMoZWxlbWVudCkge1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICBlbmFibGVkRWxlbWVudC5sYXllcnMgPSBbXTtcbiAgZGVsZXRlIGVuYWJsZWRFbGVtZW50LmFjdGl2ZUxheWVySWQ7XG4gIGRlbGV0ZSBlbmFibGVkRWxlbWVudC5sYXN0U3luY1ZpZXdwb3J0c1N0YXRlO1xufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL21ldGFEYXRhLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9tZXRhRGF0YS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGFkZFByb3ZpZGVyLCByZW1vdmVQcm92aWRlciwgZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRQcm92aWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZFByb3ZpZGVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW1vdmVQcm92aWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlbW92ZVByb3ZpZGVyOyB9KTtcbi8vIFRoaXMgbW9kdWxlIGRlZmluZXMgYSB3YXkgdG8gYWNjZXNzIHZhcmlvdXMgbWV0YWRhdGEgYWJvdXQgYW4gaW1hZ2VJZC4gIFRoaXMgbGF5ZXIgb2YgYWJzdHJhY3Rpb24gZXhpc3RzXG4vLyBTbyBtZXRhZGF0YSBjYW4gYmUgcHJvdmlkZWQgaW4gZGlmZmVyZW50IHdheXMgKGUuZy4gYnkgcGFyc2luZyBESUNPTSBQMTAgb3IgYnkgYSBXQURPLVJTIGRvY3VtZW50KVxudmFyIHByb3ZpZGVycyA9IFtdO1xuLyoqXG4gKiBAbW9kdWxlIE1ldGFkYXRhXG4gKi9cblxuLyoqXG4gKiBBZGRzIGEgbWV0YWRhdGEgcHJvdmlkZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHByaW9yaXR5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcm92aWRlciBNZXRhZGF0YSBwcm92aWRlciBmdW5jdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IFtwcmlvcml0eT0wXSAtIDAgaXMgZGVmYXVsdC9ub3JtYWwsID4gMCBpcyBoaWdoLCA8IDAgaXMgbG93XG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgTWV0YWRhdGFcbiAqL1xuXG5mdW5jdGlvbiBhZGRQcm92aWRlcihwcm92aWRlcikge1xuICB2YXIgcHJpb3JpdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG4gIHZhciBpOyAvLyBGaW5kIHRoZSByaWdodCBzcG90IHRvIGluc2VydCB0aGlzIHByb3ZpZGVyIGJhc2VkIG9uIHByaW9yaXR5XG5cbiAgZm9yIChpID0gMDsgaSA8IHByb3ZpZGVycy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwcm92aWRlcnNbaV0ucHJpb3JpdHkgPD0gcHJpb3JpdHkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSAvLyBJbnNlcnQgdGhlIGRlY29kZSB0YXNrIGF0IHBvc2l0aW9uIGlcblxuXG4gIHByb3ZpZGVycy5zcGxpY2UoaSwgMCwge1xuICAgIHByaW9yaXR5OiBwcmlvcml0eSxcbiAgICBwcm92aWRlcjogcHJvdmlkZXJcbiAgfSk7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBwcm92aWRlclxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyIE1ldGFkYXRhIHByb3ZpZGVyIGZ1bmN0aW9uXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgTWV0YWRhdGFcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVQcm92aWRlcihwcm92aWRlcikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3ZpZGVycy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwcm92aWRlcnNbaV0ucHJvdmlkZXIgPT09IHByb3ZpZGVyKSB7XG4gICAgICBwcm92aWRlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4vKipcbiAqIEdldHMgbWV0YWRhdGEgZnJvbSB0aGUgcmVnaXN0ZXJlZCBtZXRhZGF0YSBwcm92aWRlcnMuICBXaWxsIGNhbGwgZWFjaCBvbmUgZnJvbSBoaWdoZXN0IHByaW9yaXR5IHRvIGxvd2VzdFxuICogdW50aWwgb25lIHJlc3BvbmRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgbWV0YWRhdGEgcmVxdWVzdGVkIGZyb20gdGhlIG1ldGFkYXRhIHN0b3JlXG4gKiBAcGFyYW0ge1N0cmluZ30gaW1hZ2VJZCBUaGUgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0J3MgaW1hZ2VJZFxuICpcbiAqIEByZXR1cm5zIHsqfSBUaGUgbWV0YWRhdGEgcmV0cmlldmVkIGZyb20gdGhlIG1ldGFkYXRhIHN0b3JlXG4gKiBAbWVtYmVyb2YgTWV0YWRhdGFcbiAqL1xuXG5mdW5jdGlvbiBnZXRNZXRhRGF0YSh0eXBlLCBpbWFnZUlkKSB7XG4gIC8vIEludm9rZSBlYWNoIHByb3ZpZGVyIGluIHByaW9yaXR5IG9yZGVyIHVudGlsIG9uZSByZXR1cm5zIHNvbWV0aGluZ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3ZpZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByZXN1bHQgPSBwcm92aWRlcnNbaV0ucHJvdmlkZXIodHlwZSwgaW1hZ2VJZCk7XG5cbiAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9XG59XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoe1xuICBhZGRQcm92aWRlcjogYWRkUHJvdmlkZXIsXG4gIHJlbW92ZVByb3ZpZGVyOiByZW1vdmVQcm92aWRlcixcbiAgZ2V0OiBnZXRNZXRhRGF0YVxufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vcGFnZVRvUGl4ZWwuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3BhZ2VUb1BpeGVsLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2VuYWJsZWRFbGVtZW50cy5qcyAqLyBcIi4vZW5hYmxlZEVsZW1lbnRzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXRUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZ2V0VHJhbnNmb3JtLmpzICovIFwiLi9pbnRlcm5hbC9nZXRUcmFuc2Zvcm0uanNcIik7XG5cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHBvaW50IGluIHRoZSBwYWdlIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHRoZSBwaXhlbCBjb29yZGluYXRlXG4gKiBzeXN0ZW1cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBDb3JuZXJzdG9uZSBlbGVtZW50IHdpdGhpbiB3aGljaCB0aGUgaW5wdXQgcG9pbnQgbGllc1xuICogQHBhcmFtIHtOdW1iZXJ9IHBhZ2VYIFRoZSB4IHZhbHVlIGluIHRoZSBwYWdlIGNvb3JkaW5hdGUgc3lzdGVtXG4gKiBAcGFyYW0ge051bWJlcn0gcGFnZVkgVGhlIHkgdmFsdWUgaW4gdGhlIHBhZ2UgY29vcmRpbmF0ZSBzeXN0ZW1cbiAqXG4gKiBAcmV0dXJucyB7e3g6IE51bWJlciwgeTogTnVtYmVyfX0gVGhlIHRyYW5zZm9ybWVkIHBvaW50IGluIHRoZSBwaXhlbCBjb29yZGluYXRlIHN5c3RlbVxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQsIHBhZ2VYLCBwYWdlWSkge1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuXG4gIGlmIChlbmFibGVkRWxlbWVudC5pbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdpbWFnZSBoYXMgbm90IGJlZW4gbG9hZGVkIHlldCcpO1xuICB9IC8vIENvbnZlcnQgdGhlIHBhZ2VYIGFuZCBwYWdlWSB0byB0aGUgY2FudmFzIGNsaWVudCBjb29yZGluYXRlc1xuXG5cbiAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgY2xpZW50WCA9IHBhZ2VYIC0gcmVjdC5sZWZ0IC0gd2luZG93LnBhZ2VYT2Zmc2V0O1xuICB2YXIgY2xpZW50WSA9IHBhZ2VZIC0gcmVjdC50b3AgLSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gIHZhciBwdCA9IHtcbiAgICB4OiBjbGllbnRYLFxuICAgIHk6IGNsaWVudFlcbiAgfTtcbiAgdmFyIHRyYW5zZm9ybSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0VHJhbnNmb3JtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG4gIHRyYW5zZm9ybS5pbnZlcnQoKTtcbiAgcmV0dXJuIHRyYW5zZm9ybS50cmFuc2Zvcm1Qb2ludChwdC54LCBwdC55KTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3BpeGVsRGF0YVRvRmFsc2VDb2xvckRhdGEuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcGl4ZWxEYXRhVG9GYWxzZUNvbG9yRGF0YTsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbG9yc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb2xvcnMvaW5kZXguanMgKi8gXCIuL2NvbG9ycy9pbmRleC5qc1wiKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgaW1hZ2UgcGl4ZWwgZGF0YSBpbnRvIGEgZmFsc2UgY29sb3IgZGF0YVxuICpcbiAqIEBwYXJhbSB7SW1hZ2V9IGltYWdlIEEgQ29ybmVyc3RvbmUgSW1hZ2UgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gbG9va3VwVGFibGUgQSBsb29rdXAgdGFibGUgT2JqZWN0XG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIGlzIHN1cGVyc2VkZWQgYnkgdGhlIGFiaWxpdHkgdG8gc2V0IHRoZSBWaWV3cG9ydCBwYXJhbWV0ZXJzXG4gKiB0byBpbmNsdWRlIGNvbG9ybWFwcy5cbiAqL1xuXG5mdW5jdGlvbiBwaXhlbERhdGFUb0ZhbHNlQ29sb3JEYXRhKGltYWdlLCBsb29rdXBUYWJsZSkge1xuICBpZiAoaW1hZ2UuY29sb3IgJiYgIWltYWdlLmZhbHNlQ29sb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbG9yIHRyYW5zZm9ybXMgYXJlIG5vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAgfVxuXG4gIHZhciBtaW5QaXhlbFZhbHVlID0gaW1hZ2UubWluUGl4ZWxWYWx1ZTtcbiAgdmFyIGNhbnZhc0ltYWdlRGF0YUluZGV4ID0gMDtcbiAgdmFyIHN0b3JlZFBpeGVsRGF0YUluZGV4ID0gMDtcbiAgdmFyIG51bVBpeGVscyA9IGltYWdlLndpZHRoICogaW1hZ2UuaGVpZ2h0O1xuICB2YXIgb3JpZ1BpeGVsRGF0YSA9IGltYWdlLm9yaWdQaXhlbERhdGEgfHwgaW1hZ2UuZ2V0UGl4ZWxEYXRhKCk7XG4gIHZhciBzdG9yZWRDb2xvclBpeGVsRGF0YSA9IG5ldyBVaW50OEFycmF5KG51bVBpeGVscyAqIDQpO1xuICB2YXIgc3A7XG4gIHZhciBtYXBwZWQ7XG4gIGltYWdlLmNvbG9yID0gdHJ1ZTtcbiAgaW1hZ2UuZmFsc2VDb2xvciA9IHRydWU7XG4gIGltYWdlLm9yaWdQaXhlbERhdGEgPSBvcmlnUGl4ZWxEYXRhO1xuXG4gIGlmIChsb29rdXBUYWJsZSBpbnN0YW5jZW9mIF9jb2xvcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0uTG9va3VwVGFibGUpIHtcbiAgICBsb29rdXBUYWJsZS5idWlsZCgpO1xuXG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtUGl4ZWxzKSB7XG4gICAgICBzcCA9IG9yaWdQaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK107XG4gICAgICBtYXBwZWQgPSBsb29rdXBUYWJsZS5tYXBWYWx1ZShzcCk7XG4gICAgICBzdG9yZWRDb2xvclBpeGVsRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IG1hcHBlZFswXTtcbiAgICAgIHN0b3JlZENvbG9yUGl4ZWxEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbWFwcGVkWzFdO1xuICAgICAgc3RvcmVkQ29sb3JQaXhlbERhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBtYXBwZWRbMl07XG4gICAgICBzdG9yZWRDb2xvclBpeGVsRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IG1hcHBlZFszXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobWluUGl4ZWxWYWx1ZSA8IDApIHtcbiAgICB3aGlsZSAoc3RvcmVkUGl4ZWxEYXRhSW5kZXggPCBudW1QaXhlbHMpIHtcbiAgICAgIHNwID0gb3JpZ1BpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXTtcbiAgICAgIHN0b3JlZENvbG9yUGl4ZWxEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbG9va3VwVGFibGVbc3AgKyAtbWluUGl4ZWxWYWx1ZV1bMF07IC8vIFJlZFxuXG4gICAgICBzdG9yZWRDb2xvclBpeGVsRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGxvb2t1cFRhYmxlW3NwICsgLW1pblBpeGVsVmFsdWVdWzFdOyAvLyBHcmVlblxuXG4gICAgICBzdG9yZWRDb2xvclBpeGVsRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGxvb2t1cFRhYmxlW3NwICsgLW1pblBpeGVsVmFsdWVdWzJdOyAvLyBCbHVlXG5cbiAgICAgIHN0b3JlZENvbG9yUGl4ZWxEYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gbG9va3VwVGFibGVbc3AgKyAtbWluUGl4ZWxWYWx1ZV1bM107IC8vIEFscGhhXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdG9yZWRQaXhlbERhdGFJbmRleCA8IG51bVBpeGVscykge1xuICAgICAgc3AgPSBvcmlnUGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdO1xuICAgICAgc3RvcmVkQ29sb3JQaXhlbERhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBsb29rdXBUYWJsZVtzcF1bMF07IC8vIFJlZFxuXG4gICAgICBzdG9yZWRDb2xvclBpeGVsRGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IGxvb2t1cFRhYmxlW3NwXVsxXTsgLy8gR3JlZW5cblxuICAgICAgc3RvcmVkQ29sb3JQaXhlbERhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBsb29rdXBUYWJsZVtzcF1bMl07IC8vIEJsdWVcblxuICAgICAgc3RvcmVkQ29sb3JQaXhlbERhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBsb29rdXBUYWJsZVtzcF1bM107IC8vIEFscGhhXG4gICAgfVxuICB9XG5cbiAgaW1hZ2UucmdiYSA9IHRydWU7XG4gIGltYWdlLmNhY2hlZEx1dCA9IHVuZGVmaW5lZDtcbiAgaW1hZ2UucmVuZGVyID0gdW5kZWZpbmVkO1xuICBpbWFnZS5zbG9wZSA9IDE7XG4gIGltYWdlLmludGVyY2VwdCA9IDA7XG4gIGltYWdlLm1pblBpeGVsVmFsdWUgPSAwO1xuICBpbWFnZS5tYXhQaXhlbFZhbHVlID0gMjU1O1xuICBpbWFnZS53aW5kb3dXaWR0aCA9IDI1NTtcbiAgaW1hZ2Uud2luZG93Q2VudGVyID0gMTI4O1xuXG4gIGltYWdlLmdldFBpeGVsRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc3RvcmVkQ29sb3JQaXhlbERhdGE7XG4gIH07XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vcGl4ZWxUb0NhbnZhcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9waXhlbFRvQ2FudmFzLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlZEVsZW1lbnRzLmpzICovIFwiLi9lbmFibGVkRWxlbWVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldFRyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbnRlcm5hbC9nZXRUcmFuc2Zvcm0uanMgKi8gXCIuL2ludGVybmFsL2dldFRyYW5zZm9ybS5qc1wiKTtcblxuXG4vKipcbiAqIENvbnZlcnRzIGEgcG9pbnQgaW4gdGhlIHBpeGVsIGNvb3JkaW5hdGUgc3lzdGVtIHRvIHRoZSBjYW52YXMgY29vcmRpbmF0ZSBzeXN0ZW1cbiAqIHN5c3RlbS4gIFRoaXMgY2FuIGJlIHVzZWQgdG8gcmVuZGVyIHVzaW5nIGNhbnZhcyBjb250ZXh0IHdpdGhvdXQgaGF2aW5nIHRoZSB3ZWlyZFxuICogc2lkZSBlZmZlY3RzIHRoYXQgY29tZSBmcm9tIHNjYWxpbmcgYW5kIG5vbiBzcXVhcmUgcGl4ZWxzXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEBwYXJhbSB7e3g6IE51bWJlciwgeTogTnVtYmVyfX0gcHQgVGhlIHRyYW5zZm9ybWVkIHBvaW50IGluIHRoZSBwaXhlbCBjb29yZGluYXRlIHN5c3RlbVxuICpcbiAqIEByZXR1cm5zIHt7eDogTnVtYmVyLCB5OiBOdW1iZXJ9fSBUaGUgaW5wdXQgcG9pbnQgaW4gdGhlIGNhbnZhcyBjb29yZGluYXRlIHN5c3RlbVxuICogQG1lbWJlcm9mIFBpeGVsQ29vcmRpbmF0ZVN5c3RlbVxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQsIHB0KSB7XG4gIHZhciBlbmFibGVkRWxlbWVudCA9IE9iamVjdChfZW5hYmxlZEVsZW1lbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJnZXRFbmFibGVkRWxlbWVudFwiXSkoZWxlbWVudCk7XG4gIHZhciB0cmFuc2Zvcm0gPSBPYmplY3QoX2ludGVybmFsX2dldFRyYW5zZm9ybV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQpO1xuICByZXR1cm4gdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50KHB0LngsIHB0LnkpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vcmVuZGVyaW5nL2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlbmRlcmluZy9kb2VzSW1hZ2VOZWVkVG9CZVJlbmRlcmVkLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IGFuIEVuYWJsZWQgRWxlbWVudCBuZWVkcyB0byBiZSByZS1yZW5kZXJlZC5cbiAqXG4gKiBJZiB0aGUgaW1hZ2VJZCBoYXMgY2hhbmdlZCwgb3IgaWYgYW55IG9mIHRoZSBsYXN0IHJlbmRlcmVkIHZpZXdwb3J0XG4gKiBwYXJhbWV0ZXJzIGhhdmUgY2hhbmdlZCwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0cnVlLlxuICpcbiAqIEBwYXJhbSB7RW5hYmxlZEVsZW1lbnR9IGVuYWJsZWRFbGVtZW50IEFuIEVuYWJsZWQgRWxlbWVudFxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQW4gSW1hZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBFbmFibGVkIEVsZW1lbnQgbmVlZHMgdG8gcmUtcmVuZGVyIGl0cyBpbWFnZVxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCwgaW1hZ2UpIHtcbiAgdmFyIGxhc3RSZW5kZXJlZEltYWdlSWQgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5sYXN0UmVuZGVyZWRJbWFnZUlkO1xuICB2YXIgbGFzdFJlbmRlcmVkVmlld3BvcnQgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5sYXN0UmVuZGVyZWRWaWV3cG9ydDtcbiAgcmV0dXJuIGltYWdlLmltYWdlSWQgIT09IGxhc3RSZW5kZXJlZEltYWdlSWQgfHwgIWxhc3RSZW5kZXJlZFZpZXdwb3J0IHx8IGxhc3RSZW5kZXJlZFZpZXdwb3J0LndpbmRvd0NlbnRlciAhPT0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd0NlbnRlciB8fCBsYXN0UmVuZGVyZWRWaWV3cG9ydC53aW5kb3dXaWR0aCAhPT0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd1dpZHRoIHx8IGxhc3RSZW5kZXJlZFZpZXdwb3J0LmludmVydCAhPT0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuaW52ZXJ0IHx8IGxhc3RSZW5kZXJlZFZpZXdwb3J0LnJvdGF0aW9uICE9PSBlbmFibGVkRWxlbWVudC52aWV3cG9ydC5yb3RhdGlvbiB8fCBsYXN0UmVuZGVyZWRWaWV3cG9ydC5oZmxpcCAhPT0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuaGZsaXAgfHwgbGFzdFJlbmRlcmVkVmlld3BvcnQudmZsaXAgIT09IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnZmbGlwIHx8IGxhc3RSZW5kZXJlZFZpZXdwb3J0Lm1vZGFsaXR5TFVUICE9PSBlbmFibGVkRWxlbWVudC52aWV3cG9ydC5tb2RhbGl0eUxVVCB8fCBsYXN0UmVuZGVyZWRWaWV3cG9ydC52b2lMVVQgIT09IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnZvaUxVVCB8fCBsYXN0UmVuZGVyZWRWaWV3cG9ydC5jb2xvcm1hcCAhPT0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuY29sb3JtYXA7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvZ2V0THV0LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlbmRlcmluZy9nZXRMdXQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2NvbXB1dGVBdXRvVm9pX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9jb21wdXRlQXV0b1ZvaS5qcyAqLyBcIi4vaW50ZXJuYWwvY29tcHV0ZUF1dG9Wb2kuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2x1dE1hdGNoZXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbHV0TWF0Y2hlcy5qcyAqLyBcIi4vcmVuZGVyaW5nL2x1dE1hdGNoZXMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dlbmVyYXRlTHV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9nZW5lcmF0ZUx1dC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2VuZXJhdGVMdXQuanNcIik7XG5cblxuXG4vKipcbiAqIFJldHJpZXZlIG9yIGdlbmVyYXRlIGEgTFVUIEFycmF5IGZvciBhbiBJbWFnZSBhbmQgVmlld3BvcnRcbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBbiBJbWFnZSBPYmplY3RcbiAqIEBwYXJhbSB7Vmlld3BvcnR9IHZpZXdwb3J0IEFuIFZpZXdwb3J0IE9iamVjdFxuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCBXaGV0aGVyIG9yIG5vdCB0aGUgTFVUIGRhdGEgaGFzIGJlZW4gaW52YWxpZGF0ZWRcbiAqIChlLmcuIGJ5IGEgY2hhbmdlIHRvIHRoZSB3aW5kb3dXaWR0aCwgd2luZG93Q2VudGVyLCBvciBpbnZlcnQgdmlld3BvcnQgcGFyYW1ldGVycykuXG4gKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheX0gTFVUIEFycmF5XG4gKiBAbWVtYmVyb2YgcmVuZGVyaW5nXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoaW1hZ2UsIHZpZXdwb3J0LCBpbnZhbGlkYXRlZCkge1xuICAvLyBJZiB3ZSBoYXZlIGEgY2FjaGVkIGx1dCBhbmQgaXQgaGFzIHRoZSByaWdodCB2YWx1ZXMsIHJldHVybiBpdCBpbW1lZGlhdGVseVxuICBpZiAoaW1hZ2UuY2FjaGVkTHV0ICE9PSB1bmRlZmluZWQgJiYgaW1hZ2UuY2FjaGVkTHV0LndpbmRvd0NlbnRlciA9PT0gdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciAmJiBpbWFnZS5jYWNoZWRMdXQud2luZG93V2lkdGggPT09IHZpZXdwb3J0LnZvaS53aW5kb3dXaWR0aCAmJiBPYmplY3QoX2x1dE1hdGNoZXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKGltYWdlLmNhY2hlZEx1dC5tb2RhbGl0eUxVVCwgdmlld3BvcnQubW9kYWxpdHlMVVQpICYmIE9iamVjdChfbHV0TWF0Y2hlc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoaW1hZ2UuY2FjaGVkTHV0LnZvaUxVVCwgdmlld3BvcnQudm9pTFVUKSAmJiBpbWFnZS5jYWNoZWRMdXQuaW52ZXJ0ID09PSB2aWV3cG9ydC5pbnZlcnQgJiYgaW52YWxpZGF0ZWQgIT09IHRydWUpIHtcbiAgICByZXR1cm4gaW1hZ2UuY2FjaGVkTHV0Lmx1dEFycmF5O1xuICB9XG5cbiAgT2JqZWN0KF9pbnRlcm5hbF9jb21wdXRlQXV0b1ZvaV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkodmlld3BvcnQsIGltYWdlKTsgLy8gTHV0IGlzIGludmFsaWQgb3Igbm90IHByZXNlbnQsIHJlZ2VuZXJhdGUgaXQgYW5kIGNhY2hlIGl0XG5cbiAgT2JqZWN0KF9pbnRlcm5hbF9nZW5lcmF0ZUx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoaW1hZ2UsIHZpZXdwb3J0LnZvaS53aW5kb3dXaWR0aCwgdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciwgdmlld3BvcnQuaW52ZXJ0LCB2aWV3cG9ydC5tb2RhbGl0eUxVVCwgdmlld3BvcnQudm9pTFVUKTtcbiAgaW1hZ2UuY2FjaGVkTHV0LndpbmRvd1dpZHRoID0gdmlld3BvcnQudm9pLndpbmRvd1dpZHRoO1xuICBpbWFnZS5jYWNoZWRMdXQud2luZG93Q2VudGVyID0gdmlld3BvcnQudm9pLndpbmRvd0NlbnRlcjtcbiAgaW1hZ2UuY2FjaGVkTHV0LmludmVydCA9IHZpZXdwb3J0LmludmVydDtcbiAgaW1hZ2UuY2FjaGVkTHV0LnZvaUxVVCA9IHZpZXdwb3J0LnZvaUxVVDtcbiAgaW1hZ2UuY2FjaGVkTHV0Lm1vZGFsaXR5TFVUID0gdmlld3BvcnQubW9kYWxpdHlMVVQ7XG4gIHJldHVybiBpbWFnZS5jYWNoZWRMdXQubHV0QXJyYXk7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvaW5kZXguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9yZW5kZXJpbmcvaW5kZXguanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZW5kZXJDb2xvckltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyQ29sb3JJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyR3JheXNjYWxlSW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJHcmF5c2NhbGVJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyV2ViSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyV2ViSW1hZ2UuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJXZWJJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyUHNldWRvQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZW5kZXJQc2V1ZG9Db2xvckltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyUHNldWRvQ29sb3JJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyTGFiZWxNYXBJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZW5kZXJMYWJlbE1hcEltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyTGFiZWxNYXBJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyVG9DYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vcmVuZGVyVG9DYW52YXMuanMgKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJUb0NhbnZhcy5qc1wiKTtcblxuXG5cblxuXG5cbi8qKlxuICogQG1vZHVsZSByZW5kZXJpbmdcbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKHtcbiAgY29sb3JJbWFnZTogX3JlbmRlckNvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInJlbmRlckNvbG9ySW1hZ2VcIl0sXG4gIGdyYXlzY2FsZUltYWdlOiBfcmVuZGVyR3JheXNjYWxlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInJlbmRlckdyYXlzY2FsZUltYWdlXCJdLFxuICB3ZWJJbWFnZTogX3JlbmRlcldlYkltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJyZW5kZXJXZWJJbWFnZVwiXSxcbiAgcHNldWRvQ29sb3JJbWFnZTogX3JlbmRlclBzZXVkb0NvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfX1tcInJlbmRlclBzZXVkb0NvbG9ySW1hZ2VcIl0sXG4gIGxhYmVsTWFwSW1hZ2U6IF9yZW5kZXJMYWJlbE1hcEltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJyZW5kZXJMYWJlbE1hcEltYWdlXCJdLFxuICB0b0NhbnZhczogX3JlbmRlclRvQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X19bXCJkZWZhdWx0XCJdXG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvaW5pdGlhbGl6ZVJlbmRlckNhbnZhcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVuZGVyaW5nL2luaXRpYWxpemVSZW5kZXJDYW52YXMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyoqXG4gKiBTZXRzIHNpemUgYW5kIGNsZWFycyBjYW52YXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZW5hYmxlZEVsZW1lbnQgQ29ybmVyc3RvbmUgRW5hYmxlZCBFbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2UgSW1hZ2UgdG8gYmUgcmVuZGVyZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCwgaW1hZ2UpIHtcbiAgdmFyIHJlbmRlckNhbnZhcyA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhczsgLy8gUmVzaXplIHRoZSBjYW52YXNcblxuICByZW5kZXJDYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgcmVuZGVyQ2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgdmFyIGNhbnZhc0NvbnRleHQgPSByZW5kZXJDYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7XG4gICAgZGVzeW5jaHJvbml6ZWQ6IHRydWVcbiAgfSk7IC8vIE5PVEUgLSB3ZSBuZWVkIHRvIGZpbGwgdGhlIHJlbmRlciBjYW52YXMgd2l0aCB3aGl0ZSBwaXhlbHMgc2luY2Ugd2VcbiAgLy8gY29udHJvbCB0aGUgbHVtaW5hbmNlIHVzaW5nIHRoZSBhbHBoYSBjaGFubmVsIHRvIGltcHJvdmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlLlxuXG4gIGNhbnZhc0NvbnRleHQuZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgY2FudmFzQ29udGV4dC5maWxsUmVjdCgwLCAwLCByZW5kZXJDYW52YXMud2lkdGgsIHJlbmRlckNhbnZhcy5oZWlnaHQpO1xuICB2YXIgcmVuZGVyQ2FudmFzRGF0YSA9IGNhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xuICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXNDb250ZXh0ID0gY2FudmFzQ29udGV4dDtcbiAgZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzRGF0YSA9IHJlbmRlckNhbnZhc0RhdGE7XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvbHV0TWF0Y2hlcy5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVuZGVyaW5nL2x1dE1hdGNoZXMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyoqXG4gKiBDaGVjayBpZiB0d28gbG9va3VwIHRhYmxlcyBtYXRjaFxuICpcbiAqIEBwYXJhbSB7TFVUfSBhIEEgbG9va3VwIHRhYmxlIGZ1bmN0aW9uXG4gKiBAcGFyYW0ge0xVVH0gYiBBbm90aGVyIGxvb2t1cCB0YWJsZSBmdW5jdGlvblxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhleSBtYXRjaFxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChhLCBiKSB7XG4gIC8vIElmIHVuZGVmaW5lZCwgdGhleSBhcmUgZXF1YWxcbiAgaWYgKCFhICYmICFiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gLy8gSWYgb25lIGlzIHVuZGVmaW5lZCwgbm90IGVxdWFsXG5cblxuICBpZiAoIWEgfHwgIWIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gQ2hlY2sgdGhlIHVuaXF1ZSBpZHNcblxuXG4gIHJldHVybiBhLmlkID09PSBiLmlkO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vcmVuZGVyaW5nL3JlbmRlckNvbG9ySW1hZ2UuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlbmRlcmluZy9yZW5kZXJDb2xvckltYWdlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogcmVuZGVyQ29sb3JJbWFnZSwgYWRkQ29sb3JMYXllciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJDb2xvckltYWdlXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcmVuZGVyQ29sb3JJbWFnZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkQ29sb3JMYXllclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFkZENvbG9yTGF5ZXI7IH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL25vdy5qcyAqLyBcIi4vaW50ZXJuYWwvbm93LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXRGaWxsU3R5bGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL2dldEZpbGxTdHlsZS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RmlsbFN0eWxlLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZW5lcmF0ZUNvbG9yTHV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9nZW5lcmF0ZUNvbG9yTHV0LmpzICovIFwiLi9pbnRlcm5hbC9nZW5lcmF0ZUNvbG9yTHV0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9zdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9zdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzICovIFwiLi9pbnRlcm5hbC9zdG9yZWRDb2xvclBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9zdG9yZWRSR0JBUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL3N0b3JlZFJHQkFQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUkdCQVBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW0uanMgKi8gXCIuL3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF93ZWJnbF9pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vd2ViZ2wvaW5kZXguanMgKi8gXCIuL3dlYmdsL2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9kb2VzSW1hZ2VOZWVkVG9CZVJlbmRlcmVkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWQuanMgKi8gXCIuL3JlbmRlcmluZy9kb2VzSW1hZ2VOZWVkVG9CZVJlbmRlcmVkLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbml0aWFsaXplUmVuZGVyQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2luaXRpYWxpemVSZW5kZXJDYW52YXMuanMgKi8gXCIuL3JlbmRlcmluZy9pbml0aWFsaXplUmVuZGVyQ2FudmFzLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zYXZlTGFzdFJlbmRlcmVkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NhdmVMYXN0UmVuZGVyZWQuanMgKi8gXCIuL3JlbmRlcmluZy9zYXZlTGFzdFJlbmRlcmVkLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qc1wiKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAqIEdlbmVyYXRlcyBhbiBhcHByb3ByaWF0ZSBMb29rIFVwIFRhYmxlIHRvIHJlbmRlciB0aGUgZ2l2ZW4gaW1hZ2Ugd2l0aCB0aGUgZ2l2ZW4gd2luZG93IHdpZHRoIGFuZCBsZXZlbCAoc3BlY2lmaWVkIGluIHRoZSB2aWV3cG9ydClcbiAqIFVzZXMgYW4gaW50ZXJuYWwgY2FjaGUgZm9yIHBlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGltYWdlICBUaGUgaW1hZ2UgdG8gYmUgcmVuZGVyZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSB2aWV3cG9ydCBUaGUgdmlld3BvcnQgdmFsdWVzIHVzZWQgZm9yIHJlbmRlcmluZ1xuICogQHJldHVybnMge1VpbnQ4Q2xhbXBlZEFycmF5fSBMb29rIFVwIFRhYmxlIGFycmF5LlxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG5cbmZ1bmN0aW9uIGdldEx1dChpbWFnZSwgdmlld3BvcnQpIHtcbiAgLy8gSWYgd2UgaGF2ZSBhIGNhY2hlZCBsdXQgYW5kIGl0IGhhcyB0aGUgcmlnaHQgdmFsdWVzLCByZXR1cm4gaXQgaW1tZWRpYXRlbHlcbiAgaWYgKGltYWdlLmNhY2hlZEx1dCAhPT0gdW5kZWZpbmVkICYmIGltYWdlLmNhY2hlZEx1dC53aW5kb3dDZW50ZXIgPT09IHZpZXdwb3J0LnZvaS53aW5kb3dDZW50ZXIgJiYgaW1hZ2UuY2FjaGVkTHV0LndpbmRvd1dpZHRoID09PSB2aWV3cG9ydC52b2kud2luZG93V2lkdGggJiYgaW1hZ2UuY2FjaGVkTHV0LmludmVydCA9PT0gdmlld3BvcnQuaW52ZXJ0KSB7XG4gICAgcmV0dXJuIGltYWdlLmNhY2hlZEx1dC5sdXRBcnJheTtcbiAgfSAvLyBMdXQgaXMgaW52YWxpZCBvciBub3QgcHJlc2VudCwgcmVnZW5lcmF0ZSBpdCBhbmQgY2FjaGUgaXRcblxuXG4gIE9iamVjdChfaW50ZXJuYWxfZ2VuZXJhdGVDb2xvckx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoaW1hZ2UsIHZpZXdwb3J0LnZvaS53aW5kb3dXaWR0aCwgdmlld3BvcnQudm9pLndpbmRvd0NlbnRlciwgdmlld3BvcnQuaW52ZXJ0KTtcbiAgaW1hZ2UuY2FjaGVkTHV0LndpbmRvd1dpZHRoID0gdmlld3BvcnQudm9pLndpbmRvd1dpZHRoO1xuICBpbWFnZS5jYWNoZWRMdXQud2luZG93Q2VudGVyID0gdmlld3BvcnQudm9pLndpbmRvd0NlbnRlcjtcbiAgaW1hZ2UuY2FjaGVkTHV0LmludmVydCA9IHZpZXdwb3J0LmludmVydDtcbiAgcmV0dXJuIGltYWdlLmNhY2hlZEx1dC5sdXRBcnJheTtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3ByaWF0ZSBjYW52YXMgdG8gcmVuZGVyIHRoZSBJbWFnZS4gSWYgdGhlIGNhbnZhcyBhdmFpbGFibGUgaW4gdGhlIGNhY2hlIGlzIGFwcHJvcHJpYXRlXG4gKiBpdCBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIGFkanVzdG1lbnRzIGFyZSBtYWRlLiBJdCBhbHNvIHNldHMgdGhlIGNvbG9yIHRyYW5zZmVyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZW5hYmxlZEVsZW1lbnQgVGhlIGNvcm5lcnN0b25lIGVuYWJsZWQgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGltYWdlIFRoZSBpbWFnZSB0byBiZSByZW5kZXJlZFxuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCBJcyBwaXhlbCBkYXRhIHZhbGlkXG4gKiBAcmV0dXJucyB7SFRNTENhbnZhc0VsZW1lbnR9IEFuIGFwcHJvcHJpYXRlIGNhbnZhcyBmb3IgcmVuZGVyaW5nIHRoZSBpbWFnZVxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG5cblxuZnVuY3Rpb24gZ2V0UmVuZGVyQ2FudmFzKGVuYWJsZWRFbGVtZW50LCBpbWFnZSwgaW52YWxpZGF0ZWQpIHtcbiAgdmFyIGNhbnZhc1dhc0NvbG9yID0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMubGFzdFJlbmRlcmVkSXNDb2xvciA9PT0gdHJ1ZTtcblxuICBpZiAoIWVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhcyB8fCAhY2FudmFzV2FzQ29sb3IpIHtcbiAgICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgfVxuXG4gIHZhciByZW5kZXJDYW52YXMgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXM7IC8vIFRoZSB3dy93YyBpcyBpZGVudGl0eSBhbmQgbm90IGludmVydGVkIC0gZ2V0IGEgY2FudmFzIHdpdGggdGhlIGltYWdlIHJlbmRlcmVkIGludG8gaXQgZm9yXG4gIC8vIEZhc3QgZHJhd2luZ1xuXG4gIGlmIChlbmFibGVkRWxlbWVudC52aWV3cG9ydC52b2kud2luZG93V2lkdGggPT09IDI1NSAmJiBlbmFibGVkRWxlbWVudC52aWV3cG9ydC52b2kud2luZG93Q2VudGVyID09PSAxMjggJiYgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuaW52ZXJ0ID09PSBmYWxzZSAmJiBpbWFnZS5nZXRDYW52YXMgJiYgaW1hZ2UuZ2V0Q2FudmFzKCkpIHtcbiAgICByZXR1cm4gaW1hZ2UuZ2V0Q2FudmFzKCk7XG4gIH0gLy8gQXBwbHkgdGhlIGx1dCB0byB0aGUgc3RvcmVkIHBpeGVsIGRhdGEgb250byB0aGUgcmVuZGVyIGNhbnZhc1xuXG5cbiAgaWYgKE9iamVjdChfZG9lc0ltYWdlTmVlZFRvQmVSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGltYWdlKSA9PT0gZmFsc2UgJiYgaW52YWxpZGF0ZWQgIT09IHRydWUpIHtcbiAgICByZXR1cm4gcmVuZGVyQ2FudmFzO1xuICB9IC8vIElmIG91ciByZW5kZXIgY2FudmFzIGRvZXMgbm90IG1hdGNoIHRoZSBzaXplIG9mIHRoaXMgaW1hZ2UgcmVzZXQgaXRcbiAgLy8gTk9URTogVGhpcyBtaWdodCBiZSBpbmVmZmljaWVudCBpZiB3ZSBhcmUgdXBkYXRpbmcgbXVsdGlwbGUgaW1hZ2VzIG9mIGRpZmZlcmVudFxuICAvLyBTaXplcyBmcmVxdWVudGx5LlxuXG5cbiAgaWYgKHJlbmRlckNhbnZhcy53aWR0aCAhPT0gaW1hZ2Uud2lkdGggfHwgcmVuZGVyQ2FudmFzLmhlaWdodCAhPT0gaW1hZ2UuaGVpZ2h0KSB7XG4gICAgT2JqZWN0KF9pbml0aWFsaXplUmVuZGVyQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgaW1hZ2UpO1xuICB9IC8vIEdldCB0aGUgbHV0IHRvIHVzZVxuXG5cbiAgdmFyIHN0YXJ0ID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCk7XG4gIHZhciBjb2xvckx1dCA9IGdldEx1dChpbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQpO1xuICBpbWFnZS5zdGF0cyA9IGltYWdlLnN0YXRzIHx8IHt9O1xuICBpbWFnZS5zdGF0cy5sYXN0THV0R2VuZXJhdGVUaW1lID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgdmFyIHJlbmRlckNhbnZhc0RhdGEgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXNEYXRhO1xuICB2YXIgcmVuZGVyQ2FudmFzQ29udGV4dCA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhc0NvbnRleHQ7IC8vIFRoZSBjb2xvciBpbWFnZSB2b2kvaW52ZXJ0IGhhcyBiZWVuIG1vZGlmaWVkIC0gYXBwbHkgdGhlIGx1dCB0byB0aGUgdW5kZXJseWluZ1xuICAvLyBQaXhlbCBkYXRhIGFuZCBwdXQgaXQgaW50byB0aGUgcmVuZGVyQ2FudmFzXG5cbiAgaWYgKGltYWdlLnJnYmEpIHtcbiAgICBPYmplY3QoX2ludGVybmFsX3N0b3JlZFJHQkFQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSkoaW1hZ2UsIGNvbG9yTHV0LCByZW5kZXJDYW52YXNEYXRhLmRhdGEpO1xuICB9IGVsc2Uge1xuICAgIE9iamVjdChfaW50ZXJuYWxfc3RvcmVkQ29sb3JQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiZGVmYXVsdFwiXSkoaW1hZ2UsIGNvbG9yTHV0LCByZW5kZXJDYW52YXNEYXRhLmRhdGEpO1xuICB9XG5cbiAgc3RhcnQgPSBPYmplY3QoX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgcmVuZGVyQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEocmVuZGVyQ2FudmFzRGF0YSwgMCwgMCk7XG4gIGltYWdlLnN0YXRzLmxhc3RQdXRJbWFnZURhdGFUaW1lID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgcmV0dXJuIHJlbmRlckNhbnZhcztcbn1cbi8qKlxuICogQVBJIGZ1bmN0aW9uIHRvIHJlbmRlciBhIGNvbG9yIGltYWdlIHRvIGFuIGVuYWJsZWQgZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RW5hYmxlZEVsZW1lbnR9IGVuYWJsZWRFbGVtZW50IFRoZSBDb3JuZXJzdG9uZSBFbmFibGVkIEVsZW1lbnQgdG8gcmVkcmF3XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgcmVuZGVyaW5nXG4gKi9cblxuXG5mdW5jdGlvbiByZW5kZXJDb2xvckltYWdlKGVuYWJsZWRFbGVtZW50LCBpbnZhbGlkYXRlZCkge1xuICBpZiAoZW5hYmxlZEVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyQ29sb3JJbWFnZTogZW5hYmxlZEVsZW1lbnQgcGFyYW1ldGVyIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIGltYWdlID0gZW5hYmxlZEVsZW1lbnQuaW1hZ2U7XG5cbiAgaWYgKGltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlckNvbG9ySW1hZ2U6IGltYWdlIG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpdCBjYW4gYmUgZHJhd24nKTtcbiAgfSAvLyBHZXQgdGhlIGNhbnZhcyBjb250ZXh0IGFuZCByZXNldCB0aGUgdHJhbnNmb3JtXG5cblxuICB2YXIgY29udGV4dCA9IGVuYWJsZWRFbGVtZW50LmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICBkZXN5bmNocm9uaXplZDogdHJ1ZVxuICB9KTtcbiAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7IC8vIENsZWFyIHRoZSBjYW52YXNcblxuICBjb250ZXh0LmZpbGxTdHlsZSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0RmlsbFN0eWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG4gIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLndpZHRoLCBlbmFibGVkRWxlbWVudC5jYW52YXMuaGVpZ2h0KTsgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoL2ludGVycG9sYXRpb24gaWYgcGl4ZWxSZXBsaWNhdGlvbiBpcyBzZXQgaW4gdGhlIHZpZXdwb3J0XG5cbiAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSAhZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucGl4ZWxSZXBsaWNhdGlvbjtcbiAgY29udGV4dC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZDsgLy8gU2F2ZSB0aGUgY2FudmFzIGNvbnRleHQgc3RhdGUgYW5kIGFwcGx5IHRoZSB2aWV3cG9ydCBwcm9wZXJ0aWVzXG5cbiAgT2JqZWN0KF9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGNvbnRleHQpO1xuICB2YXIgcmVuZGVyQ2FudmFzO1xuXG4gIGlmIChlbmFibGVkRWxlbWVudC5vcHRpb25zICYmIGVuYWJsZWRFbGVtZW50Lm9wdGlvbnMucmVuZGVyZXIgJiYgZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5yZW5kZXJlci50b0xvd2VyQ2FzZSgpID09PSAnd2ViZ2wnKSB7XG4gICAgLy8gSWYgdGhpcyBlbmFibGVkIGVsZW1lbnQgaGFzIHRoZSBvcHRpb24gc2V0IGZvciBXZWJHTCwgd2Ugc2hvdWxkXG4gICAgLy8gVXNlciBpdCBhcyBvdXIgcmVuZGVyZXIuXG4gICAgcmVuZGVyQ2FudmFzID0gX3dlYmdsX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0XCJdLnJlbmRlcmVyLnJlbmRlcihlbmFibGVkRWxlbWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgbm8gb3B0aW9ucyBhcmUgc2V0IHdlIHdpbGwgcmV0cmlldmUgdGhlIHJlbmRlckNhbnZhcyB0aHJvdWdoIHRoZVxuICAgIC8vIE5vcm1hbCBDYW52YXMgcmVuZGVyaW5nIHBhdGhcbiAgICByZW5kZXJDYW52YXMgPSBnZXRSZW5kZXJDYW52YXMoZW5hYmxlZEVsZW1lbnQsIGltYWdlLCBpbnZhbGlkYXRlZCk7XG4gIH1cblxuICB2YXIgaW1hZ2VEaXNwbGF5ZWRBcmVhID0gT2JqZWN0KF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xMF9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQuaW1hZ2UsIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0KTtcbiAgdmFyIHN4ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueCAtIDE7XG4gIHZhciBzeSA9IGltYWdlRGlzcGxheWVkQXJlYS50bGhjLnkgLSAxO1xuICB2YXIgd2lkdGggPSBpbWFnZURpc3BsYXllZEFyZWEuYnJoYy54IC0gc3g7XG4gIHZhciBoZWlnaHQgPSBpbWFnZURpc3BsYXllZEFyZWEuYnJoYy55IC0gc3k7XG4gIGNvbnRleHQuZHJhd0ltYWdlKHJlbmRlckNhbnZhcywgc3gsIHN5LCB3aWR0aCwgaGVpZ2h0LCBzeCwgc3ksIHdpZHRoLCBoZWlnaHQpO1xuICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scyA9IE9iamVjdChfc2F2ZUxhc3RSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQpO1xufVxuZnVuY3Rpb24gYWRkQ29sb3JMYXllcihsYXllciwgaW52YWxpZGF0ZWQpIHtcbiAgaWYgKGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2FkZENvbG9yTGF5ZXI6IGxheWVyIHBhcmFtZXRlciBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZSA9IGxheWVyLmltYWdlO1xuXG4gIGlmIChpbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhZGRDb2xvckxheWVyOiBpbWFnZSBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaXQgY2FuIGJlIGRyYXduJyk7XG4gIH0gLy8gQWxsIG11bHRpLWxheWVyIGltYWdlcyBzaG91bGQgaW5jbHVkZSB0aGUgYWxwaGEgdmFsdWVcblxuXG4gIGltYWdlLnJnYmEgPSB0cnVlO1xuICBsYXllci5jYW52YXMgPSBnZXRSZW5kZXJDYW52YXMobGF5ZXIsIGltYWdlLCBpbnZhbGlkYXRlZCk7XG4gIHZhciBjb250ZXh0ID0gbGF5ZXIuY2FudmFzLmdldENvbnRleHQoJzJkJywge1xuICAgIGRlc3luY2hyb25pemVkOiB0cnVlXG4gIH0pOyAvLyBUdXJuIG9mZiBpbWFnZSBzbW9vdGgvaW50ZXJwb2xhdGlvbiBpZiBwaXhlbFJlcGxpY2F0aW9uIGlzIHNldCBpbiB0aGUgdmlld3BvcnRcblxuICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICFsYXllci52aWV3cG9ydC5waXhlbFJlcGxpY2F0aW9uO1xuICBjb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkO1xuICBsYXllci5yZW5kZXJpbmdUb29scyA9IE9iamVjdChfc2F2ZUxhc3RSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiZGVmYXVsdFwiXSkobGF5ZXIpO1xufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJHcmF5c2NhbGVJbWFnZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlbmRlcmluZy9yZW5kZXJHcmF5c2NhbGVJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiByZW5kZXJHcmF5c2NhbGVJbWFnZSwgYWRkR3JheXNjYWxlTGF5ZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVuZGVyR3JheXNjYWxlSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW5kZXJHcmF5c2NhbGVJbWFnZTsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiYWRkR3JheXNjYWxlTGF5ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBhZGRHcmF5c2NhbGVMYXllcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldEZpbGxTdHlsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZ2V0RmlsbFN0eWxlLmpzICovIFwiLi9pbnRlcm5hbC9nZXRGaWxsU3R5bGUuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YS5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGEuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUkdCQV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFSR0JBLmpzICovIFwiLi9pbnRlcm5hbC9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YVJHQkEuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qcyAqLyBcIi4vc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW0uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvbm93LmpzICovIFwiLi9pbnRlcm5hbC9ub3cuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3dlYmdsX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV81X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi93ZWJnbC9pbmRleC5qcyAqLyBcIi4vd2ViZ2wvaW5kZXguanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dldEx1dF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nZXRMdXQuanMgKi8gXCIuL3JlbmRlcmluZy9nZXRMdXQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZG9lc0ltYWdlTmVlZFRvQmVSZW5kZXJlZC5qcyAqLyBcIi4vcmVuZGVyaW5nL2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2luaXRpYWxpemVSZW5kZXJDYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW5pdGlhbGl6ZVJlbmRlckNhbnZhcy5qcyAqLyBcIi4vcmVuZGVyaW5nL2luaXRpYWxpemVSZW5kZXJDYW52YXMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NhdmVMYXN0UmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2F2ZUxhc3RSZW5kZXJlZC5qcyAqLyBcIi4vcmVuZGVyaW5nL3NhdmVMYXN0UmVuZGVyZWQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzICovIFwiLi9pbnRlcm5hbC9nZXREaXNwbGF5ZWRBcmVhLmpzXCIpO1xuXG5cblxuXG5cblxuXG5cblxuXG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3ByaWF0ZSBjYW52YXMgdG8gcmVuZGVyIHRoZSBJbWFnZS4gSWYgdGhlIGNhbnZhcyBhdmFpbGFibGUgaW4gdGhlIGNhY2hlIGlzIGFwcHJvcHJpYXRlXG4gKiBpdCBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIGFkanVzdG1lbnRzIGFyZSBtYWRlLiBJdCBhbHNvIHNldHMgdGhlIGNvbG9yIHRyYW5zZmVyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZW5hYmxlZEVsZW1lbnQgVGhlIGNvcm5lcnN0b25lIGVuYWJsZWQgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGltYWdlIFRoZSBpbWFnZSB0byBiZSByZW5kZXJlZFxuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCBJcyBwaXhlbCBkYXRhIHZhbGlkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VBbHBoYUNoYW5uZWwgPSB0cnVlXSBXaWxsIGFuIGFscGhhIGNoYW5uZWwgYmUgdXNlZFxuICogQHJldHVybnMge0hUTUxDYW52YXNFbGVtZW50fSBBbiBhcHByb3ByaWF0ZSBjYW52YXMgZm9yIHJlbmRlcmluZyB0aGUgaW1hZ2VcbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcbiAqL1xuXG5mdW5jdGlvbiBnZXRSZW5kZXJDYW52YXMoZW5hYmxlZEVsZW1lbnQsIGltYWdlLCBpbnZhbGlkYXRlZCkge1xuICB2YXIgdXNlQWxwaGFDaGFubmVsID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlO1xuICB2YXIgY2FudmFzV2FzQ29sb3IgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5sYXN0UmVuZGVyZWRJc0NvbG9yID09PSB0cnVlO1xuXG4gIGlmICghZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzIHx8IGNhbnZhc1dhc0NvbG9yKSB7XG4gICAgZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgT2JqZWN0KF9pbml0aWFsaXplUmVuZGVyQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgaW1hZ2UpO1xuICB9XG5cbiAgdmFyIHJlbmRlckNhbnZhcyA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhcztcblxuICBpZiAoT2JqZWN0KF9kb2VzSW1hZ2VOZWVkVG9CZVJlbmRlcmVkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV83X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgaW1hZ2UpID09PSBmYWxzZSAmJiBpbnZhbGlkYXRlZCAhPT0gdHJ1ZSkge1xuICAgIHJldHVybiByZW5kZXJDYW52YXM7XG4gIH0gLy8gSWYgb3VyIHJlbmRlciBjYW52YXMgZG9lcyBub3QgbWF0Y2ggdGhlIHNpemUgb2YgdGhpcyBpbWFnZSByZXNldCBpdFxuICAvLyBOT1RFOiBUaGlzIG1pZ2h0IGJlIGluZWZmaWNpZW50IGlmIHdlIGFyZSB1cGRhdGluZyBtdWx0aXBsZSBpbWFnZXMgb2YgZGlmZmVyZW50XG4gIC8vIFNpemVzIGZyZXF1ZW50bHkuXG5cblxuICBpZiAocmVuZGVyQ2FudmFzLndpZHRoICE9PSBpbWFnZS53aWR0aCB8fCByZW5kZXJDYW52YXMuaGVpZ2h0ICE9PSBpbWFnZS5oZWlnaHQpIHtcbiAgICBPYmplY3QoX2luaXRpYWxpemVSZW5kZXJDYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBpbWFnZSk7XG4gIH0gLy8gR2V0IHRoZSBsdXQgdG8gdXNlXG5cblxuICB2YXIgc3RhcnQgPSBPYmplY3QoX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgdmFyIGx1dCA9IE9iamVjdChfZ2V0THV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0XCJdKShpbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQsIGludmFsaWRhdGVkKTtcbiAgaW1hZ2Uuc3RhdHMgPSBpbWFnZS5zdGF0cyB8fCB7fTtcbiAgaW1hZ2Uuc3RhdHMubGFzdEx1dEdlbmVyYXRlVGltZSA9IE9iamVjdChfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciByZW5kZXJDYW52YXNEYXRhID0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzRGF0YTtcbiAgdmFyIHJlbmRlckNhbnZhc0NvbnRleHQgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXNDb250ZXh0OyAvLyBHcmF5IHNjYWxlIGltYWdlIC0gYXBwbHkgdGhlIGx1dCBhbmQgcHV0IHRoZSByZXN1bHRpbmcgaW1hZ2Ugb250byB0aGUgcmVuZGVyIGNhbnZhc1xuXG4gIGlmICh1c2VBbHBoYUNoYW5uZWwpIHtcbiAgICBPYmplY3QoX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKShpbWFnZSwgbHV0LCByZW5kZXJDYW52YXNEYXRhLmRhdGEpO1xuICB9IGVsc2Uge1xuICAgIE9iamVjdChfaW50ZXJuYWxfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFSR0JBX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShpbWFnZSwgbHV0LCByZW5kZXJDYW52YXNEYXRhLmRhdGEpO1xuICB9XG5cbiAgc3RhcnQgPSBPYmplY3QoX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSkoKTtcbiAgcmVuZGVyQ2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEocmVuZGVyQ2FudmFzRGF0YSwgMCwgMCk7XG4gIGltYWdlLnN0YXRzLmxhc3RQdXRJbWFnZURhdGFUaW1lID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgcmV0dXJuIHJlbmRlckNhbnZhcztcbn1cbi8qKlxuICogQVBJIGZ1bmN0aW9uIHRvIGRyYXcgYSBncmF5c2NhbGUgaW1hZ2UgdG8gYSBnaXZlbiBlbmFibGVkRWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RW5hYmxlZEVsZW1lbnR9IGVuYWJsZWRFbGVtZW50IFRoZSBDb3JuZXJzdG9uZSBFbmFibGVkIEVsZW1lbnQgdG8gcmVkcmF3XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKiBAbWVtYmVyb2YgcmVuZGVyaW5nXG4gKi9cblxuXG5mdW5jdGlvbiByZW5kZXJHcmF5c2NhbGVJbWFnZShlbmFibGVkRWxlbWVudCwgaW52YWxpZGF0ZWQpIHtcbiAgaWYgKGVuYWJsZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RyYXdJbWFnZTogZW5hYmxlZEVsZW1lbnQgcGFyYW1ldGVyIG11c3Qgbm90IGJlIHVuZGVmaW5lZCcpO1xuICB9XG5cbiAgdmFyIGltYWdlID0gZW5hYmxlZEVsZW1lbnQuaW1hZ2U7XG5cbiAgaWYgKGltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RyYXdJbWFnZTogaW1hZ2UgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGl0IGNhbiBiZSBkcmF3bicpO1xuICB9IC8vIEdldCB0aGUgY2FudmFzIGNvbnRleHQgYW5kIHJlc2V0IHRoZSB0cmFuc2Zvcm1cblxuXG4gIHZhciBjb250ZXh0ID0gZW5hYmxlZEVsZW1lbnQuY2FudmFzLmdldENvbnRleHQoJzJkJywge1xuICAgIGRlc3luY2hyb25pemVkOiB0cnVlXG4gIH0pO1xuICBjb250ZXh0LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsgLy8gQ2xlYXIgdGhlIGNhbnZhc1xuXG4gIGNvbnRleHQuZmlsbFN0eWxlID0gT2JqZWN0KF9pbnRlcm5hbF9nZXRGaWxsU3R5bGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50KTtcbiAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBlbmFibGVkRWxlbWVudC5jYW52YXMud2lkdGgsIGVuYWJsZWRFbGVtZW50LmNhbnZhcy5oZWlnaHQpOyAvLyBUdXJuIG9mZiBpbWFnZSBzbW9vdGgvaW50ZXJwb2xhdGlvbiBpZiBwaXhlbFJlcGxpY2F0aW9uIGlzIHNldCBpbiB0aGUgdmlld3BvcnRcblxuICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICFlbmFibGVkRWxlbWVudC52aWV3cG9ydC5waXhlbFJlcGxpY2F0aW9uO1xuICBjb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkOyAvLyBTYXZlIHRoZSBjYW52YXMgY29udGV4dCBzdGF0ZSBhbmQgYXBwbHkgdGhlIHZpZXdwb3J0IHByb3BlcnRpZXNcblxuICBPYmplY3QoX3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgY29udGV4dCk7XG4gIHZhciByZW5kZXJDYW52YXM7XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50Lm9wdGlvbnMgJiYgZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5yZW5kZXJlciAmJiBlbmFibGVkRWxlbWVudC5vcHRpb25zLnJlbmRlcmVyLnRvTG93ZXJDYXNlKCkgPT09ICd3ZWJnbCcpIHtcbiAgICAvLyBJZiB0aGlzIGVuYWJsZWQgZWxlbWVudCBoYXMgdGhlIG9wdGlvbiBzZXQgZm9yIFdlYkdMLCB3ZSBzaG91bGRcbiAgICAvLyBVc2VyIGl0IGFzIG91ciByZW5kZXJlci5cbiAgICByZW5kZXJDYW52YXMgPSBfd2ViZ2xfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0ucmVuZGVyZXIucmVuZGVyKGVuYWJsZWRFbGVtZW50KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiBubyBvcHRpb25zIGFyZSBzZXQgd2Ugd2lsbCByZXRyaWV2ZSB0aGUgcmVuZGVyQ2FudmFzIHRocm91Z2ggdGhlXG4gICAgLy8gTm9ybWFsIENhbnZhcyByZW5kZXJpbmcgcGF0aFxuICAgIHJlbmRlckNhbnZhcyA9IGdldFJlbmRlckNhbnZhcyhlbmFibGVkRWxlbWVudCwgaW1hZ2UsIGludmFsaWRhdGVkKTtcbiAgfVxuXG4gIHZhciBpbWFnZURpc3BsYXllZEFyZWEgPSBPYmplY3QoX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzEwX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5pbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQpO1xuICB2YXIgc3ggPSBpbWFnZURpc3BsYXllZEFyZWEudGxoYy54IC0gMTtcbiAgdmFyIHN5ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueSAtIDE7XG4gIHZhciB3aWR0aCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnggLSBzeDtcbiAgdmFyIGhlaWdodCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnkgLSBzeTtcbiAgY29udGV4dC5kcmF3SW1hZ2UocmVuZGVyQ2FudmFzLCBzeCwgc3ksIHdpZHRoLCBoZWlnaHQsIHN4LCBzeSwgd2lkdGgsIGhlaWdodCk7XG4gIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzID0gT2JqZWN0KF9zYXZlTGFzdFJlbmRlcmVkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV85X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG59XG4vKipcbiAqIEFQSSBmdW5jdGlvbiB0byBkcmF3IGEgZ3JheXNjYWxlIGltYWdlIHRvIGEgZ2l2ZW4gbGF5ZXJcbiAqXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50TGF5ZXJ9IGxheWVyIFRoZSBsYXllciB0aGF0IHRoZSBpbWFnZSB3aWxsIGJlIGFkZGVkIHRvXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHBhcmFtIHtCb29sZWFufSBbdXNlQWxwaGFDaGFubmVsXSAtIFdoZXRoZXIgb3Igbm90IHRvIHJlbmRlciB0aGUgZ3JheXNjYWxlIGltYWdlIHVzaW5nIG9ubHkgdGhlIGFscGhhIGNoYW5uZWwuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBkb2VzIG5vdCB3b3JrIGlmIHRoaXMgbGF5ZXIgaXMgbm90IHRoZSBmaXJzdCBsYXllciBpbiB0aGUgZW5hYmxlZEVsZW1lbnQuXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG5mdW5jdGlvbiBhZGRHcmF5c2NhbGVMYXllcihsYXllciwgaW52YWxpZGF0ZWQpIHtcbiAgdmFyIHVzZUFscGhhQ2hhbm5lbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7XG5cbiAgaWYgKGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2FkZEdyYXlzY2FsZUxheWVyOiBsYXllciBwYXJhbWV0ZXIgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgaW1hZ2UgPSBsYXllci5pbWFnZTtcblxuICBpZiAoaW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYWRkR3JheXNjYWxlTGF5ZXI6IGltYWdlIG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpdCBjYW4gYmUgZHJhd24nKTtcbiAgfVxuXG4gIGxheWVyLmNhbnZhcyA9IGdldFJlbmRlckNhbnZhcyhsYXllciwgaW1hZ2UsIGludmFsaWRhdGVkLCB1c2VBbHBoYUNoYW5uZWwpO1xuICB2YXIgY29udGV4dCA9IGxheWVyLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICBkZXN5bmNocm9uaXplZDogdHJ1ZVxuICB9KTsgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoL2ludGVycG9sYXRpb24gaWYgcGl4ZWxSZXBsaWNhdGlvbiBpcyBzZXQgaW4gdGhlIHZpZXdwb3J0XG5cbiAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSAhbGF5ZXIudmlld3BvcnQucGl4ZWxSZXBsaWNhdGlvbjtcbiAgY29udGV4dC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZDtcbiAgbGF5ZXIucmVuZGVyaW5nVG9vbHMgPSBPYmplY3QoX3NhdmVMYXN0UmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzlfX1tcImRlZmF1bHRcIl0pKGxheWVyKTtcbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvcmVuZGVyTGFiZWxNYXBJbWFnZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVuZGVyaW5nL3JlbmRlckxhYmVsTWFwSW1hZ2UuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiByZW5kZXJMYWJlbE1hcEltYWdlLCBhZGRMYWJlbE1hcExheWVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJlbmRlckxhYmVsTWFwSW1hZ2VcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW5kZXJMYWJlbE1hcEltYWdlOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJhZGRMYWJlbE1hcExheWVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gYWRkTGFiZWxNYXBMYXllcjsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qcyAqLyBcIi4vc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW0uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvbm93LmpzICovIFwiLi9pbnRlcm5hbC9ub3cuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldEZpbGxTdHlsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZ2V0RmlsbFN0eWxlLmpzICovIFwiLi9pbnRlcm5hbC9nZXRGaWxsU3R5bGUuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2luaXRpYWxpemVSZW5kZXJDYW52YXNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW5pdGlhbGl6ZVJlbmRlckNhbnZhcy5qcyAqLyBcIi4vcmVuZGVyaW5nL2luaXRpYWxpemVSZW5kZXJDYW52YXMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3NhdmVMYXN0UmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc2F2ZUxhc3RSZW5kZXJlZC5qcyAqLyBcIi4vcmVuZGVyaW5nL3NhdmVMYXN0UmVuZGVyZWQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZG9lc0ltYWdlTmVlZFRvQmVSZW5kZXJlZC5qcyAqLyBcIi4vcmVuZGVyaW5nL2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQuanMgKi8gXCIuL2ludGVybmFsL3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhQ29sb3JMVVQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbG9yc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vY29sb3JzL2luZGV4LmpzICovIFwiLi9jb2xvcnMvaW5kZXguanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludGVybmFsX2dldERpc3BsYXllZEFyZWFfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL2dldERpc3BsYXllZEFyZWEuanMgKi8gXCIuL2ludGVybmFsL2dldERpc3BsYXllZEFyZWEuanNcIik7XG5cblxuXG5cblxuXG5cblxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm9wcmlhdGUgY2FudmFzIHRvIHJlbmRlciB0aGUgSW1hZ2UuIElmIHRoZSBjYW52YXMgYXZhaWxhYmxlIGluIHRoZSBjYWNoZSBpcyBhcHByb3ByaWF0ZVxuICogaXQgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBhZGp1c3RtZW50cyBhcmUgbWFkZS4gSXQgYWxzbyBzZXRzIHRoZSBjb2xvciB0cmFuc2ZlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGVuYWJsZWRFbGVtZW50IFRoZSBjb3JuZXJzdG9uZSBlbmFibGVkIGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbWFnZSBUaGUgaW1hZ2UgdG8gYmUgcmVuZGVyZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW52YWxpZGF0ZWQgSXMgcGl4ZWwgZGF0YSB2YWxpZFxuICogQHJldHVybnMge0hUTUxDYW52YXNFbGVtZW50fSBBbiBhcHByb3ByaWF0ZSBjYW52YXMgZm9yIHJlbmRlcmluZyB0aGUgaW1hZ2VcbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcbiAqL1xuXG5mdW5jdGlvbiBnZXRSZW5kZXJDYW52YXMoZW5hYmxlZEVsZW1lbnQsIGltYWdlLCBpbnZhbGlkYXRlZCkge1xuICBpZiAoIWVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhcykge1xuICAgIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICB9XG5cbiAgdmFyIHJlbmRlckNhbnZhcyA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhcztcbiAgdmFyIGNvbG9ybWFwID0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuY29sb3JtYXAgfHwgZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5jb2xvcm1hcDtcblxuICBpZiAoZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5jb2xvcm1hcCkge1xuICAgIGNvbnNvbGUud2FybignZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5jb2xvcm1hcCBpcyBkZXByZWNhdGVkLiBVc2UgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuY29sb3JtYXAgaW5zdGVhZCcpO1xuICB9XG5cbiAgaWYgKGNvbG9ybWFwICYmIHR5cGVvZiBjb2xvcm1hcCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2xvcm1hcCA9IF9jb2xvcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcImRlZmF1bHRcIl0uZ2V0Q29sb3JtYXAoY29sb3JtYXApO1xuICB9XG5cbiAgaWYgKCFjb2xvcm1hcCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyTGFiZWxNYXBJbWFnZTogY29sb3JtYXAgbm90IGZvdW5kLicpO1xuICB9XG5cbiAgdmFyIGNvbG9ybWFwSWQgPSBjb2xvcm1hcC5nZXRJZCgpO1xuXG4gIGlmIChPYmplY3QoX2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBpbWFnZSkgPT09IGZhbHNlICYmIGludmFsaWRhdGVkICE9PSB0cnVlICYmIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLmNvbG9ybWFwSWQgPT09IGNvbG9ybWFwSWQpIHtcbiAgICByZXR1cm4gcmVuZGVyQ2FudmFzO1xuICB9IC8vIElmIG91ciByZW5kZXIgY2FudmFzIGRvZXMgbm90IG1hdGNoIHRoZSBzaXplIG9mIHRoaXMgaW1hZ2UgcmVzZXQgaXRcbiAgLy8gTk9URTogVGhpcyBtaWdodCBiZSBpbmVmZmljaWVudCBpZiB3ZSBhcmUgdXBkYXRpbmcgbXVsdGlwbGUgaW1hZ2VzIG9mIGRpZmZlcmVudFxuICAvLyBTaXplcyBmcmVxdWVudGx5LlxuXG5cbiAgaWYgKHJlbmRlckNhbnZhcy53aWR0aCAhPT0gaW1hZ2Uud2lkdGggfHwgcmVuZGVyQ2FudmFzLmhlaWdodCAhPT0gaW1hZ2UuaGVpZ2h0KSB7XG4gICAgT2JqZWN0KF9pbml0aWFsaXplUmVuZGVyQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgaW1hZ2UpO1xuICB9IC8vIEdldCB0aGUgbHV0IHRvIHVzZVxuXG5cbiAgdmFyIHN0YXJ0ID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKCk7XG5cbiAgaWYgKCFlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5jb2xvckx1dCB8fCBpbnZhbGlkYXRlZCB8fCBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5jb2xvcm1hcElkICE9PSBjb2xvcm1hcElkKSB7XG4gICAgZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMuY29sb3JMdXQgPSBjb2xvcm1hcC5jcmVhdGVMb29rdXBUYWJsZSgpO1xuICAgIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLmNvbG9ybWFwSWQgPSBjb2xvcm1hcElkO1xuICB9XG5cbiAgaW1hZ2Uuc3RhdHMgPSBpbWFnZS5zdGF0cyB8fCB7fTtcbiAgaW1hZ2Uuc3RhdHMubGFzdEx1dEdlbmVyYXRlVGltZSA9IE9iamVjdChfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHZhciBjb2xvckx1dCA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLmNvbG9yTHV0O1xuICB2YXIgcmVuZGVyQ2FudmFzRGF0YSA9IGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLnJlbmRlckNhbnZhc0RhdGE7XG4gIHZhciByZW5kZXJDYW52YXNDb250ZXh0ID0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzQ29udGV4dDtcbiAgT2JqZWN0KF9pbnRlcm5hbF9zdG9yZWRQaXhlbERhdGFUb0NhbnZhc0ltYWdlRGF0YUNvbG9yTFVUX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV82X19bXCJkZWZhdWx0XCJdKShpbWFnZSwgY29sb3JMdXQsIHJlbmRlckNhbnZhc0RhdGEuZGF0YSk7XG4gIHN0YXJ0ID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKCk7XG4gIHJlbmRlckNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKHJlbmRlckNhbnZhc0RhdGEsIDAsIDApO1xuICBpbWFnZS5zdGF0cy5sYXN0UHV0SW1hZ2VEYXRhVGltZSA9IE9iamVjdChfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKSgpIC0gc3RhcnQ7XG4gIHJldHVybiByZW5kZXJDYW52YXM7XG59XG4vKipcbiAqIEFQSSBmdW5jdGlvbiB0byBkcmF3IGEgbGFiZWwgbWFwIGltYWdlIHRvIGEgZ2l2ZW4gZW5hYmxlZEVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50fSBlbmFibGVkRWxlbWVudCBUaGUgQ29ybmVyc3RvbmUgRW5hYmxlZCBFbGVtZW50IHRvIHJlZHJhd1xuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCAtIHRydWUgaWYgcGl4ZWwgZGF0YSBoYXMgYmVlbiBpbnZhbGlkYXRlZCBhbmQgY2FjaGVkIHJlbmRlcmluZyBzaG91bGQgbm90IGJlIHVzZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG5cblxuZnVuY3Rpb24gcmVuZGVyTGFiZWxNYXBJbWFnZShlbmFibGVkRWxlbWVudCwgaW52YWxpZGF0ZWQpIHtcbiAgaWYgKGVuYWJsZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlckxhYmVsTWFwSW1hZ2U6IGVuYWJsZWRFbGVtZW50IHBhcmFtZXRlciBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZSA9IGVuYWJsZWRFbGVtZW50LmltYWdlO1xuXG4gIGlmIChpbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW5kZXJMYWJlbE1hcEltYWdlOiBpbWFnZSBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaXQgY2FuIGJlIGRyYXduJyk7XG4gIH0gLy8gR2V0IHRoZSBjYW52YXMgY29udGV4dCBhbmQgcmVzZXQgdGhlIHRyYW5zZm9ybVxuXG5cbiAgdmFyIGNvbnRleHQgPSBlbmFibGVkRWxlbWVudC5jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7XG4gICAgZGVzeW5jaHJvbml6ZWQ6IHRydWVcbiAgfSk7XG4gIGNvbnRleHQuc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApOyAvLyBDbGVhciB0aGUgY2FudmFzXG5cbiAgY29udGV4dC5maWxsU3R5bGUgPSBPYmplY3QoX2ludGVybmFsX2dldEZpbGxTdHlsZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQpO1xuICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGVuYWJsZWRFbGVtZW50LmNhbnZhcy53aWR0aCwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLmhlaWdodCk7IC8vIFR1cm4gb2ZmIGltYWdlIHNtb290aC9pbnRlcnBvbGF0aW9uIGlmIHBpeGVsUmVwbGljYXRpb24gaXMgc2V0IGluIHRoZSB2aWV3cG9ydFxuXG4gIGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gIWVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnBpeGVsUmVwbGljYXRpb247XG4gIGNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQ7IC8vIFNhdmUgdGhlIGNhbnZhcyBjb250ZXh0IHN0YXRlIGFuZCBhcHBseSB0aGUgdmlld3BvcnQgcHJvcGVydGllc1xuXG4gIE9iamVjdChfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBjb250ZXh0KTsgLy8gSWYgbm8gb3B0aW9ucyBhcmUgc2V0IHdlIHdpbGwgcmV0cmlldmUgdGhlIHJlbmRlckNhbnZhcyB0aHJvdWdoIHRoZVxuICAvLyBOb3JtYWwgQ2FudmFzIHJlbmRlcmluZyBwYXRoXG4gIC8vIFRPRE86IEFkZCBXZWJHTCBzdXBwb3J0IGZvciBsYWJlbCBtYXAgcGlwZWxpbmVcblxuICB2YXIgcmVuZGVyQ2FudmFzID0gZ2V0UmVuZGVyQ2FudmFzKGVuYWJsZWRFbGVtZW50LCBpbWFnZSwgaW52YWxpZGF0ZWQpO1xuICB2YXIgaW1hZ2VEaXNwbGF5ZWRBcmVhID0gT2JqZWN0KF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5pbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQpO1xuICB2YXIgc3ggPSBpbWFnZURpc3BsYXllZEFyZWEudGxoYy54IC0gMTtcbiAgdmFyIHN5ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueSAtIDE7XG4gIHZhciB3aWR0aCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnggLSBzeDtcbiAgdmFyIGhlaWdodCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnkgLSBzeTtcbiAgY29udGV4dC5kcmF3SW1hZ2UocmVuZGVyQ2FudmFzLCBzeCwgc3ksIHdpZHRoLCBoZWlnaHQsIHN4LCBzeSwgd2lkdGgsIGhlaWdodCk7XG4gIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzID0gT2JqZWN0KF9zYXZlTGFzdFJlbmRlcmVkX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG59XG4vKipcbiAqIEFQSSBmdW5jdGlvbiB0byBkcmF3IGEgcHNldWRvLWNvbG9yIGltYWdlIHRvIGEgZ2l2ZW4gbGF5ZXJcbiAqXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50TGF5ZXJ9IGxheWVyIFRoZSBsYXllciB0aGF0IHRoZSBpbWFnZSB3aWxsIGJlIGFkZGVkIHRvXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIC0gdHJ1ZSBpZiBwaXhlbCBkYXRhIGhhcyBiZWVuIGludmFsaWRhdGVkIGFuZCBjYWNoZWQgcmVuZGVyaW5nIHNob3VsZCBub3QgYmUgdXNlZFxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cblxuZnVuY3Rpb24gYWRkTGFiZWxNYXBMYXllcihsYXllciwgaW52YWxpZGF0ZWQpIHtcbiAgaWYgKGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2FkZExhYmVsTWFwTGF5ZXI6IGxheWVyIHBhcmFtZXRlciBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZSA9IGxheWVyLmltYWdlO1xuXG4gIGlmIChpbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhZGRMYWJlbE1hcExheWVyOiBpbWFnZSBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaXQgY2FuIGJlIGRyYXduJyk7XG4gIH1cblxuICBsYXllci5jYW52YXMgPSBnZXRSZW5kZXJDYW52YXMobGF5ZXIsIGltYWdlLCBpbnZhbGlkYXRlZCk7XG4gIHZhciBjb250ZXh0ID0gbGF5ZXIuY2FudmFzLmdldENvbnRleHQoJzJkJywge1xuICAgIGRlc3luY2hyb25pemVkOiB0cnVlXG4gIH0pOyAvLyBUdXJuIG9mZiBpbWFnZSBzbW9vdGgvaW50ZXJwb2xhdGlvbiBpZiBwaXhlbFJlcGxpY2F0aW9uIGlzIHNldCBpbiB0aGUgdmlld3BvcnRcblxuICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9ICFsYXllci52aWV3cG9ydC5waXhlbFJlcGxpY2F0aW9uO1xuICBjb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkO1xuICBsYXllci5yZW5kZXJpbmdUb29scyA9IE9iamVjdChfc2F2ZUxhc3RSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1wiZGVmYXVsdFwiXSkobGF5ZXIpO1xufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJQc2V1ZG9Db2xvckltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9yZW5kZXJpbmcvcmVuZGVyUHNldWRvQ29sb3JJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IHJlbmRlclBzZXVkb0NvbG9ySW1hZ2UsIGFkZFBzZXVkb0NvbG9yTGF5ZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwicmVuZGVyUHNldWRvQ29sb3JJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlbmRlclBzZXVkb0NvbG9ySW1hZ2U7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImFkZFBzZXVkb0NvbG9yTGF5ZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBhZGRQc2V1ZG9Db2xvckxheWVyOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtLmpzICovIFwiLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9ub3cuanMgKi8gXCIuL2ludGVybmFsL25vdy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RmlsbFN0eWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9nZXRGaWxsU3R5bGUuanMgKi8gXCIuL2ludGVybmFsL2dldEZpbGxTdHlsZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW5pdGlhbGl6ZVJlbmRlckNhbnZhc19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9pbml0aWFsaXplUmVuZGVyQ2FudmFzLmpzICovIFwiLi9yZW5kZXJpbmcvaW5pdGlhbGl6ZVJlbmRlckNhbnZhcy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2V0THV0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dldEx1dC5qcyAqLyBcIi4vcmVuZGVyaW5nL2dldEx1dC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2F2ZUxhc3RSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zYXZlTGFzdFJlbmRlcmVkLmpzICovIFwiLi9yZW5kZXJpbmcvc2F2ZUxhc3RSZW5kZXJlZC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZG9lc0ltYWdlTmVlZFRvQmVSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kb2VzSW1hZ2VOZWVkVG9CZVJlbmRlcmVkLmpzICovIFwiLi9yZW5kZXJpbmcvZG9lc0ltYWdlTmVlZFRvQmVSZW5kZXJlZC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfN19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVC5qcyAqLyBcIi4vaW50ZXJuYWwvc3RvcmVkUGl4ZWxEYXRhVG9DYW52YXNJbWFnZURhdGFQc2V1ZG9jb2xvckxVVC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29sb3JzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV84X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9jb2xvcnMvaW5kZXguanMgKi8gXCIuL2NvbG9ycy9pbmRleC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGlzcGxheWVkQXJlYV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qc1wiKTtcblxuXG5cblxuXG5cblxuXG5cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJvcHJpYXRlIGNhbnZhcyB0byByZW5kZXIgdGhlIEltYWdlLiBJZiB0aGUgY2FudmFzIGF2YWlsYWJsZSBpbiB0aGUgY2FjaGUgaXMgYXBwcm9wcmlhdGVcbiAqIGl0IGlzIHJldHVybmVkLCBvdGhlcndpc2UgYWRqdXN0bWVudHMgYXJlIG1hZGUuIEl0IGFsc28gc2V0cyB0aGUgY29sb3IgdHJhbnNmZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBlbmFibGVkRWxlbWVudCBUaGUgY29ybmVyc3RvbmUgZW5hYmxlZCBlbGVtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2UgVGhlIGltYWdlIHRvIGJlIHJlbmRlcmVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGludmFsaWRhdGVkIElzIHBpeGVsIGRhdGEgdmFsaWRcbiAqIEByZXR1cm5zIHtIVE1MQ2FudmFzRWxlbWVudH0gQW4gYXBwcm9wcmlhdGUgY2FudmFzIGZvciByZW5kZXJpbmcgdGhlIGltYWdlXG4gKiBAbWVtYmVyb2YgcmVuZGVyaW5nXG4gKi9cblxuZnVuY3Rpb24gZ2V0UmVuZGVyQ2FudmFzKGVuYWJsZWRFbGVtZW50LCBpbWFnZSwgaW52YWxpZGF0ZWQpIHtcbiAgaWYgKCFlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXMpIHtcbiAgICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgfVxuXG4gIHZhciByZW5kZXJDYW52YXMgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXM7XG4gIHZhciBjb2xvcm1hcCA9IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LmNvbG9ybWFwIHx8IGVuYWJsZWRFbGVtZW50Lm9wdGlvbnMuY29sb3JtYXA7XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50Lm9wdGlvbnMgJiYgZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5jb2xvcm1hcCkge1xuICAgIGNvbnNvbGUud2FybignZW5hYmxlZEVsZW1lbnQub3B0aW9ucy5jb2xvcm1hcCBpcyBkZXByZWNhdGVkLiBVc2UgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuY29sb3JtYXAgaW5zdGVhZCcpO1xuICB9XG5cbiAgaWYgKGNvbG9ybWFwICYmIHR5cGVvZiBjb2xvcm1hcCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2xvcm1hcCA9IF9jb2xvcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzhfX1tcImRlZmF1bHRcIl0uZ2V0Q29sb3JtYXAoY29sb3JtYXApO1xuICB9XG5cbiAgaWYgKCFjb2xvcm1hcCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyUHNldWRvQ29sb3JJbWFnZTogY29sb3JtYXAgbm90IGZvdW5kLicpO1xuICB9XG5cbiAgdmFyIGNvbG9ybWFwSWQgPSBjb2xvcm1hcC5nZXRJZCgpO1xuXG4gIGlmIChPYmplY3QoX2RvZXNJbWFnZU5lZWRUb0JlUmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzZfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBpbWFnZSkgPT09IGZhbHNlICYmIGludmFsaWRhdGVkICE9PSB0cnVlICYmIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLmNvbG9ybWFwSWQgPT09IGNvbG9ybWFwSWQpIHtcbiAgICByZXR1cm4gcmVuZGVyQ2FudmFzO1xuICB9IC8vIElmIG91ciByZW5kZXIgY2FudmFzIGRvZXMgbm90IG1hdGNoIHRoZSBzaXplIG9mIHRoaXMgaW1hZ2UgcmVzZXQgaXRcbiAgLy8gTk9URTogVGhpcyBtaWdodCBiZSBpbmVmZmljaWVudCBpZiB3ZSBhcmUgdXBkYXRpbmcgbXVsdGlwbGUgaW1hZ2VzIG9mIGRpZmZlcmVudFxuICAvLyBTaXplcyBmcmVxdWVudGx5LlxuXG5cbiAgaWYgKHJlbmRlckNhbnZhcy53aWR0aCAhPT0gaW1hZ2Uud2lkdGggfHwgcmVuZGVyQ2FudmFzLmhlaWdodCAhPT0gaW1hZ2UuaGVpZ2h0KSB7XG4gICAgT2JqZWN0KF9pbml0aWFsaXplUmVuZGVyQ2FudmFzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCwgaW1hZ2UpO1xuICB9IC8vIEdldCB0aGUgbHV0IHRvIHVzZVxuXG5cbiAgdmFyIHN0YXJ0ID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKCk7XG5cbiAgaWYgKCFlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5jb2xvckx1dCB8fCBpbnZhbGlkYXRlZCB8fCBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5jb2xvcm1hcElkICE9PSBjb2xvcm1hcElkKSB7XG4gICAgY29sb3JtYXAuc2V0TnVtYmVyT2ZDb2xvcnMoMjU2KTtcbiAgICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5jb2xvckx1dCA9IGNvbG9ybWFwLmNyZWF0ZUxvb2t1cFRhYmxlKCk7XG4gICAgZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMuY29sb3JtYXBJZCA9IGNvbG9ybWFwSWQ7XG4gIH1cblxuICB2YXIgbHV0ID0gT2JqZWN0KF9nZXRMdXRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcImRlZmF1bHRcIl0pKGltYWdlLCBlbmFibGVkRWxlbWVudC52aWV3cG9ydCwgaW52YWxpZGF0ZWQpO1xuICBpbWFnZS5zdGF0cyA9IGltYWdlLnN0YXRzIHx8IHt9O1xuICBpbWFnZS5zdGF0cy5sYXN0THV0R2VuZXJhdGVUaW1lID0gT2JqZWN0KF9pbnRlcm5hbF9ub3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKCkgLSBzdGFydDtcbiAgdmFyIGNvbG9yTHV0ID0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMuY29sb3JMdXQ7XG4gIHZhciByZW5kZXJDYW52YXNEYXRhID0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMucmVuZGVyQ2FudmFzRGF0YTtcbiAgdmFyIHJlbmRlckNhbnZhc0NvbnRleHQgPSBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5yZW5kZXJDYW52YXNDb250ZXh0O1xuICBPYmplY3QoX2ludGVybmFsX3N0b3JlZFBpeGVsRGF0YVRvQ2FudmFzSW1hZ2VEYXRhUHNldWRvY29sb3JMVVRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzdfX1tcImRlZmF1bHRcIl0pKGltYWdlLCBsdXQsIGNvbG9yTHV0LCByZW5kZXJDYW52YXNEYXRhLmRhdGEpO1xuICBzdGFydCA9IE9iamVjdChfaW50ZXJuYWxfbm93X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKSgpO1xuICByZW5kZXJDYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShyZW5kZXJDYW52YXNEYXRhLCAwLCAwKTtcbiAgaW1hZ2Uuc3RhdHMubGFzdFB1dEltYWdlRGF0YVRpbWUgPSBPYmplY3QoX2ludGVybmFsX25vd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoKSAtIHN0YXJ0O1xuICByZXR1cm4gcmVuZGVyQ2FudmFzO1xufVxuLyoqXG4gKiBBUEkgZnVuY3Rpb24gdG8gZHJhdyBhIHBzZXVkby1jb2xvciBpbWFnZSB0byBhIGdpdmVuIGVuYWJsZWRFbGVtZW50XG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgVGhlIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudCB0byByZWRyYXdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW52YWxpZGF0ZWQgLSB0cnVlIGlmIHBpeGVsIGRhdGEgaGFzIGJlZW4gaW52YWxpZGF0ZWQgYW5kIGNhY2hlZCByZW5kZXJpbmcgc2hvdWxkIG5vdCBiZSB1c2VkXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcbiAqL1xuXG5cbmZ1bmN0aW9uIHJlbmRlclBzZXVkb0NvbG9ySW1hZ2UoZW5hYmxlZEVsZW1lbnQsIGludmFsaWRhdGVkKSB7XG4gIGlmIChlbmFibGVkRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdkcmF3SW1hZ2U6IGVuYWJsZWRFbGVtZW50IHBhcmFtZXRlciBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZSA9IGVuYWJsZWRFbGVtZW50LmltYWdlO1xuXG4gIGlmIChpbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdkcmF3SW1hZ2U6IGltYWdlIG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpdCBjYW4gYmUgZHJhd24nKTtcbiAgfSAvLyBHZXQgdGhlIGNhbnZhcyBjb250ZXh0IGFuZCByZXNldCB0aGUgdHJhbnNmb3JtXG5cblxuICB2YXIgY29udGV4dCA9IGVuYWJsZWRFbGVtZW50LmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICBkZXN5bmNocm9uaXplZDogdHJ1ZVxuICB9KTtcbiAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7IC8vIENsZWFyIHRoZSBjYW52YXNcblxuICBjb250ZXh0LmZpbGxTdHlsZSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0RmlsbFN0eWxlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudCk7XG4gIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLndpZHRoLCBlbmFibGVkRWxlbWVudC5jYW52YXMuaGVpZ2h0KTsgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoL2ludGVycG9sYXRpb24gaWYgcGl4ZWxSZXBsaWNhdGlvbiBpcyBzZXQgaW4gdGhlIHZpZXdwb3J0XG5cbiAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSAhZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucGl4ZWxSZXBsaWNhdGlvbjtcbiAgY29udGV4dC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZDsgLy8gU2F2ZSB0aGUgY2FudmFzIGNvbnRleHQgc3RhdGUgYW5kIGFwcGx5IHRoZSB2aWV3cG9ydCBwcm9wZXJ0aWVzXG5cbiAgT2JqZWN0KF9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGNvbnRleHQpOyAvLyBJZiBubyBvcHRpb25zIGFyZSBzZXQgd2Ugd2lsbCByZXRyaWV2ZSB0aGUgcmVuZGVyQ2FudmFzIHRocm91Z2ggdGhlXG4gIC8vIE5vcm1hbCBDYW52YXMgcmVuZGVyaW5nIHBhdGhcbiAgLy8gVE9ETzogQWRkIFdlYkdMIHN1cHBvcnQgZm9yIHBzZXVkb2NvbG9yIHBpcGVsaW5lXG5cbiAgdmFyIHJlbmRlckNhbnZhcyA9IGdldFJlbmRlckNhbnZhcyhlbmFibGVkRWxlbWVudCwgaW1hZ2UsIGludmFsaWRhdGVkKTtcbiAgdmFyIGltYWdlRGlzcGxheWVkQXJlYSA9IE9iamVjdChfaW50ZXJuYWxfZ2V0RGlzcGxheWVkQXJlYV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfOV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQuaW1hZ2UsIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0KTtcbiAgdmFyIHN4ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLnRsaGMueCAtIDE7XG4gIHZhciBzeSA9IGltYWdlRGlzcGxheWVkQXJlYS50bGhjLnkgLSAxO1xuICB2YXIgd2lkdGggPSBpbWFnZURpc3BsYXllZEFyZWEuYnJoYy54IC0gc3g7XG4gIHZhciBoZWlnaHQgPSBpbWFnZURpc3BsYXllZEFyZWEuYnJoYy55IC0gc3k7XG4gIGNvbnRleHQuZHJhd0ltYWdlKHJlbmRlckNhbnZhcywgc3gsIHN5LCB3aWR0aCwgaGVpZ2h0LCBzeCwgc3ksIHdpZHRoLCBoZWlnaHQpO1xuICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scyA9IE9iamVjdChfc2F2ZUxhc3RSZW5kZXJlZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQpO1xufVxuLyoqXG4gKiBBUEkgZnVuY3Rpb24gdG8gZHJhdyBhIHBzZXVkby1jb2xvciBpbWFnZSB0byBhIGdpdmVuIGxheWVyXG4gKlxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudExheWVyfSBsYXllciBUaGUgbGF5ZXIgdGhhdCB0aGUgaW1hZ2Ugd2lsbCBiZSBhZGRlZCB0b1xuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCAtIHRydWUgaWYgcGl4ZWwgZGF0YSBoYXMgYmVlbiBpbnZhbGlkYXRlZCBhbmQgY2FjaGVkIHJlbmRlcmluZyBzaG91bGQgbm90IGJlIHVzZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbmZ1bmN0aW9uIGFkZFBzZXVkb0NvbG9yTGF5ZXIobGF5ZXIsIGludmFsaWRhdGVkKSB7XG4gIGlmIChsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdhZGRQc2V1ZG9Db2xvckxheWVyOiBsYXllciBwYXJhbWV0ZXIgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgaW1hZ2UgPSBsYXllci5pbWFnZTtcblxuICBpZiAoaW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYWRkUHNldWRvQ29sb3JMYXllcjogaW1hZ2UgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGl0IGNhbiBiZSBkcmF3bicpO1xuICB9XG5cbiAgbGF5ZXIuY2FudmFzID0gZ2V0UmVuZGVyQ2FudmFzKGxheWVyLCBpbWFnZSwgaW52YWxpZGF0ZWQpO1xuICB2YXIgY29udGV4dCA9IGxheWVyLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICBkZXN5bmNocm9uaXplZDogdHJ1ZVxuICB9KTsgLy8gVHVybiBvZmYgaW1hZ2Ugc21vb3RoL2ludGVycG9sYXRpb24gaWYgcGl4ZWxSZXBsaWNhdGlvbiBpcyBzZXQgaW4gdGhlIHZpZXdwb3J0XG5cbiAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSAhbGF5ZXIudmlld3BvcnQucGl4ZWxSZXBsaWNhdGlvbjtcbiAgY29udGV4dC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZDtcbiAgbGF5ZXIucmVuZGVyaW5nVG9vbHMgPSBPYmplY3QoX3NhdmVMYXN0UmVuZGVyZWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfX1tcImRlZmF1bHRcIl0pKGxheWVyKTtcbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvcmVuZGVyVG9DYW52YXMuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9yZW5kZXJpbmcvcmVuZGVyVG9DYW52YXMuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdHJpZ2dlckV2ZW50X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudHMuanMgKi8gXCIuL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZHJhd0ltYWdlU3luY19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZHJhd0ltYWdlU3luYy5qcyAqLyBcIi4vaW50ZXJuYWwvZHJhd0ltYWdlU3luYy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanMgKi8gXCIuL2ludGVybmFsL2dldERlZmF1bHRWaWV3cG9ydC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfdHJ5RW5hYmxlV2ViZ2xfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2ludGVybmFsL3RyeUVuYWJsZVdlYmdsLmpzICovIFwiLi9pbnRlcm5hbC90cnlFbmFibGVXZWJnbC5qc1wiKTtcblxuXG5cblxuXG4vKipcclxuICogQHR5cGVkZWYge09iamVjdH0gRW5hYmxlZEVsZW1lbnRTdHViXHJcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgIFRoZSBlbmFibGVkIGVsZW1lbnRcclxuICogQHByb3BlcnR5IHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzIFRoZSBjdXJyZW50IGNhbnZhc1xyXG4gKiBAcHJvcGVydHkge09iamVjdH0gaW1hZ2UgQ3VycmVudGx5IGRpc3BsYXllZCBpbWFnZVxyXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IGludmFsaWQgV2hldGhlciBvciBub3QgdGhlIGltYWdlIHBpeGVsIGRhdGEgaGFzIGJlZW4gY2hhbmdlZFxyXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IG5lZWRzUmVkcmF3ICBBIGZsYWcgZm9yIHRyaWdnZXJpbmcgYSByZWRyYXcgb2YgdGhlIGNhbnZhcyB3aXRob3V0IHJlLXJldHJpZXZpbmcgdGhlIHBpeGVsIGRhdGEsIHNpbmNlIGl0IHJlbWFpbnMgdmFsaWRcclxuICogQHByb3BlcnR5IHtPYmplY3R9IG9wdGlvbnMgTGF5ZXIgZHJhd2luZyBvcHRpb25zXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0W119IGxheWVycyBMYXllcnMgYWRkZWQgdG8gdGhlIEVuYWJsZWRFbGVtZW50XHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBkYXRhXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSByZW5kZXJpbmdUb29sc1xyXG4gKiBAcHJvcGVydHkge09iamVjdH0gdmlld3BvcnQgVGhlIGN1cnJlbnQgdmlld3BvcnRcclxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xyXG4gKi9cblxuLyoqXHJcbiAqIGNyZWF0ZXMgYSBkdW1teSBlbmFibGVkIGVsZW1lbnRcclxuICpcclxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gY2FudmFzIHRoZSBjYW52YXMgdGhhdCB3aWxsIGJlIGFzc2lnbmVkIHRvIHRoZSBlbmFibGVkIGVsZW1lbnQuXHJcbiAqIEBwYXJhbSB7YW55fSBpbWFnZSBBbiBJbWFnZSBsb2FkZWQgYnkgYSBDb3JuZXJzdG9uZSBJbWFnZSBMb2FkZXJcclxuICogQHBhcmFtIHsgYW55IH0gb3B0aW9ucyBPcHRpb25zIGZvciByZW5kZXJpbmcgdGhlIGltYWdlIChlLmcuZW5hYmxlIHdlYmdsIGJ5IHtyZW5kZXJlcjogJ3dlYmdsJyB9KVxyXG4gKiBAcGFyYW0geyBhbnkgfSB2aWV3cG9ydCBBIHNldCBvZiBDb3JuZXJzdG9uZSB2aWV3cG9ydCBwYXJhbWV0ZXJzXHJcbiAqIEByZXR1cm5zIHtFbmFibGVkRWxlbWVudFN0dWJ9IGEgZHVtbXkgZW5hYmxlZCBlbGVtZW50XHJcbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUVuYWJsZWRFbGVtZW50U3R1YihjYW52YXMsIGltYWdlLCBvcHRpb25zLCB2aWV3cG9ydCkge1xuICByZXR1cm4ge1xuICAgIGVsZW1lbnQ6IGNhbnZhcyxcbiAgICBjYW52YXM6IGNhbnZhcyxcbiAgICBpbWFnZTogaW1hZ2UsXG4gICAgaW52YWxpZDogdHJ1ZSxcbiAgICAvLyBUcnVlIGlmIGltYWdlIG5lZWRzIHRvIGJlIGRyYXduLCBmYWxzZSBpZiBub3RcbiAgICBuZWVkc1JlZHJhdzogdHJ1ZSxcbiAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgIGxheWVyczogW10sXG4gICAgZGF0YToge30sXG4gICAgcmVuZGVyaW5nVG9vbHM6IHt9LFxuICAgIHZpZXdwb3J0OiB2aWV3cG9ydFxuICB9O1xufVxuLyoqXHJcbiAqIFJlbmRlciB0aGUgaW1hZ2UgdG8gdGhlIHByb3ZpZGVkIGNhbnZhcyBpbW1lZGlhdGVseS5cclxuICogQHBhcmFtIHthbnl9IGNhbnZhcyBUaGUgSFRNTCBjYW52YXMgd2hlcmUgdGhlIGltYWdlIHdpbGwgYmUgcmVuZGVyZWQuXHJcbiAqIEBwYXJhbSB7YW55fSBpbWFnZSBBbiBJbWFnZSBsb2FkZWQgYnkgYSBDb3JuZXJzdG9uZSBJbWFnZSBMb2FkZXJcclxuICogQHBhcmFtIHthbnl9IFt2aWV3cG9ydCA9IG51bGxdIEEgc2V0IG9mIENvcm5lcnN0b25lIHZpZXdwb3J0IHBhcmFtZXRlcnNcclxuICogQHBhcmFtIHthbnl9IFtvcHRpb25zID0gbnVsbF0gT3B0aW9ucyBmb3IgcmVuZGVyaW5nIHRoZSBpbWFnZSAoZS5nLiBlbmFibGUgd2ViZ2wgYnkge3JlbmRlcmVyOiAnd2ViZ2wnfSlcclxuICogQHJldHVybnMge3ZvaWR9XHJcbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcclxuICovXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoY2FudmFzLCBpbWFnZSkge1xuICB2YXIgdmlld3BvcnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBudWxsO1xuXG4gIGlmIChjYW52YXMgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyVG9DYW52YXM6IHBhcmFtZXRlciBjYW52YXMgY2Fubm90IGJlIHVuZGVmaW5lZCcpO1xuICB9IC8vIElmIHRoaXMgZW5hYmxlZCBlbGVtZW50IGhhcyB0aGUgb3B0aW9uIHNldCBmb3IgV2ViR0wsIHdlIHNob3VsZFxuICAvLyBDaGVjayBpZiB0aGlzIGRldmljZSBhY3R1YWxseSBzdXBwb3J0cyBpdFxuXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZW5kZXJlciAmJiBvcHRpb25zLnJlbmRlcmVyLnRvTG93ZXJDYXNlKCkgPT09ICd3ZWJnbCcpIHtcbiAgICBPYmplY3QoX2ludGVybmFsX3RyeUVuYWJsZVdlYmdsX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X19bXCJkZWZhdWx0XCJdKShvcHRpb25zKTtcbiAgfVxuXG4gIHZhciBkZWZhdWx0Vmlld3BvcnQgPSBPYmplY3QoX2ludGVybmFsX2dldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiZGVmYXVsdFwiXSkoY2FudmFzLCBpbWFnZSk7XG5cbiAgaWYgKHZpZXdwb3J0KSB7XG4gICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0Vmlld3BvcnQsIHZpZXdwb3J0KTtcbiAgfVxuXG4gIHZhciBlbmFibGVkRWxlbWVudFN0dWIgPSBjcmVhdGVFbmFibGVkRWxlbWVudFN0dWIoY2FudmFzLCBpbWFnZSwgb3B0aW9ucywgZGVmYXVsdFZpZXdwb3J0KTtcbiAgdmFyIGV2ZW50RGV0YWlscyA9IHtcbiAgICBlbmFibGVkRWxlbWVudDogZW5hYmxlZEVsZW1lbnRTdHViLFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICB9O1xuICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnRTdHViLmVsZW1lbnQsIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0uUFJFX1JFTkRFUiwgZXZlbnREZXRhaWxzKTtcbiAgT2JqZWN0KF9pbnRlcm5hbF9kcmF3SW1hZ2VTeW5jX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudFN0dWIsIGVuYWJsZWRFbGVtZW50U3R1Yi5pbnZhbGlkKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlbmRlcmluZy9yZW5kZXJXZWJJbWFnZS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlbmRlcmluZy9yZW5kZXJXZWJJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiByZW5kZXJXZWJJbWFnZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJXZWJJbWFnZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHJlbmRlcldlYkltYWdlOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtLmpzICovIFwiLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmVuZGVyQ29sb3JJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9yZW5kZXJDb2xvckltYWdlLmpzICovIFwiLi9yZW5kZXJpbmcvcmVuZGVyQ29sb3JJbWFnZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGlzcGxheWVkQXJlYV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGlzcGxheWVkQXJlYS5qc1wiKTtcblxuXG5cbi8qKlxuICogQVBJIGZ1bmN0aW9uIHRvIGRyYXcgYSBzdGFuZGFyZCB3ZWIgaW1hZ2UgKFBORywgSlBHKSB0byBhbiBlbmFibGVkSW1hZ2VcbiAqXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50fSBlbmFibGVkRWxlbWVudCBUaGUgQ29ybmVyc3RvbmUgRW5hYmxlZCBFbGVtZW50IHRvIHJlZHJhd1xuICogQHBhcmFtIHtCb29sZWFufSBpbnZhbGlkYXRlZCAtIHRydWUgaWYgcGl4ZWwgZGF0YSBoYXMgYmVlbiBpbnZhbGlkYXRlZCBhbmQgY2FjaGVkIHJlbmRlcmluZyBzaG91bGQgbm90IGJlIHVzZWRcbiAqIEByZXR1cm5zIHt2b2lkfVxuICogQG1lbWJlcm9mIHJlbmRlcmluZ1xuICovXG5cbmZ1bmN0aW9uIHJlbmRlcldlYkltYWdlKGVuYWJsZWRFbGVtZW50LCBpbnZhbGlkYXRlZCkge1xuICBpZiAoZW5hYmxlZEVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncmVuZGVyV2ViSW1hZ2U6IGVuYWJsZWRFbGVtZW50IHBhcmFtZXRlciBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIHZhciBpbWFnZSA9IGVuYWJsZWRFbGVtZW50LmltYWdlO1xuXG4gIGlmIChpbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW5kZXJXZWJJbWFnZTogaW1hZ2UgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGl0IGNhbiBiZSBkcmF3bicpO1xuICB9IC8vIElmIHRoZSB2aWV3cG9ydCB3dy93YyBhbmQgaW52ZXJ0IGFsbCBtYXRjaCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgaW1hZ2UsIHdlIGNhbiBkcmF3IHRoZSBpbWFnZVxuICAvLyBEaXJlY3RseS4gSWYgYW55IG9mIHRob3NlIGFyZSBjaGFuZ2VkLCB3ZSBjYWxsIHJlbmRlckNvbG9ySW1hZ2UoKSB0byBhcHBseSB0aGUgbHV0XG5cblxuICBpZiAoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd1dpZHRoID09PSBlbmFibGVkRWxlbWVudC5pbWFnZS53aW5kb3dXaWR0aCAmJiBlbmFibGVkRWxlbWVudC52aWV3cG9ydC52b2kud2luZG93Q2VudGVyID09PSBlbmFibGVkRWxlbWVudC5pbWFnZS53aW5kb3dDZW50ZXIgJiYgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuaW52ZXJ0ID09PSBmYWxzZSkge1xuICAgIC8vIEdldCB0aGUgY2FudmFzIGNvbnRleHQgYW5kIHJlc2V0IHRoZSB0cmFuc2Zvcm1cbiAgICB2YXIgY29udGV4dCA9IGVuYWJsZWRFbGVtZW50LmNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgIGRlc3luY2hyb25pemVkOiB0cnVlXG4gICAgfSk7XG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7IC8vIENsZWFyIHRoZSBjYW52YXNcblxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGVuYWJsZWRFbGVtZW50LmNhbnZhcy53aWR0aCwgZW5hYmxlZEVsZW1lbnQuY2FudmFzLmhlaWdodCk7IC8vIFR1cm4gb2ZmIGltYWdlIHNtb290aC9pbnRlcnBvbGF0aW9uIGlmIHBpeGVsUmVwbGljYXRpb24gaXMgc2V0IGluIHRoZSB2aWV3cG9ydFxuXG4gICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSAhZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucGl4ZWxSZXBsaWNhdGlvbjtcbiAgICBjb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkOyAvLyBTYXZlIHRoZSBjYW52YXMgY29udGV4dCBzdGF0ZSBhbmQgYXBwbHkgdGhlIHZpZXdwb3J0IHByb3BlcnRpZXNcblxuICAgIE9iamVjdChfc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBjb250ZXh0KTtcbiAgICB2YXIgaW1hZ2VEaXNwbGF5ZWRBcmVhID0gT2JqZWN0KF9pbnRlcm5hbF9nZXREaXNwbGF5ZWRBcmVhX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5pbWFnZSwgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQpO1xuICAgIHZhciBzeCA9IGltYWdlRGlzcGxheWVkQXJlYS50bGhjLnggLSAxO1xuICAgIHZhciBzeSA9IGltYWdlRGlzcGxheWVkQXJlYS50bGhjLnkgLSAxO1xuICAgIHZhciB3aWR0aCA9IGltYWdlRGlzcGxheWVkQXJlYS5icmhjLnggLSBzeDtcbiAgICB2YXIgaGVpZ2h0ID0gaW1hZ2VEaXNwbGF5ZWRBcmVhLmJyaGMueSAtIHN5O1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLmdldEltYWdlKCksIHN4LCBzeSwgd2lkdGgsIGhlaWdodCwgc3gsIHN5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgfSBlbHNlIHtcbiAgICBPYmplY3QoX3JlbmRlckNvbG9ySW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcInJlbmRlckNvbG9ySW1hZ2VcIl0pKGVuYWJsZWRFbGVtZW50LCBpbnZhbGlkYXRlZCk7XG4gIH1cbn1cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZW5kZXJpbmcvc2F2ZUxhc3RSZW5kZXJlZC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVuZGVyaW5nL3NhdmVMYXN0UmVuZGVyZWQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyoqXG4gKiBTYXZlcyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgbGFzdCByZW5kZXIgaW50byByZW5kZXJpbmdUb29scywgdXNlZCBsYXRlciB0byBkZWNpZGUgaWYgZGF0YSBjYW4gYmUgcmV1c2VkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBlbmFibGVkRWxlbWVudCBDb3JuZXJzdG9uZSBFbmFibGVkRWxlbWVudFxuICogQHJldHVybnMge09iamVjdH0gZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHNcbiAqIEBtZW1iZXJvZiByZW5kZXJpbmdcbiAqL1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZW5hYmxlZEVsZW1lbnQpIHtcbiAgdmFyIGltYWdlSWQgPSBlbmFibGVkRWxlbWVudC5pbWFnZS5pbWFnZUlkO1xuICB2YXIgdmlld3BvcnQgPSBlbmFibGVkRWxlbWVudC52aWV3cG9ydDtcbiAgdmFyIGlzQ29sb3IgPSBlbmFibGVkRWxlbWVudC5pbWFnZS5jb2xvcjtcbiAgZW5hYmxlZEVsZW1lbnQucmVuZGVyaW5nVG9vbHMubGFzdFJlbmRlcmVkSW1hZ2VJZCA9IGltYWdlSWQ7XG4gIGVuYWJsZWRFbGVtZW50LnJlbmRlcmluZ1Rvb2xzLmxhc3RSZW5kZXJlZElzQ29sb3IgPSBpc0NvbG9yO1xuICBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scy5sYXN0UmVuZGVyZWRWaWV3cG9ydCA9IHtcbiAgICB3aW5kb3dDZW50ZXI6IHZpZXdwb3J0LnZvaS53aW5kb3dDZW50ZXIsXG4gICAgd2luZG93V2lkdGg6IHZpZXdwb3J0LnZvaS53aW5kb3dXaWR0aCxcbiAgICBpbnZlcnQ6IHZpZXdwb3J0LmludmVydCxcbiAgICByb3RhdGlvbjogdmlld3BvcnQucm90YXRpb24sXG4gICAgaGZsaXA6IHZpZXdwb3J0LmhmbGlwLFxuICAgIHZmbGlwOiB2aWV3cG9ydC52ZmxpcCxcbiAgICBtb2RhbGl0eUxVVDogdmlld3BvcnQubW9kYWxpdHlMVVQsXG4gICAgdm9pTFVUOiB2aWV3cG9ydC52b2lMVVQsXG4gICAgY29sb3JtYXA6IHZpZXdwb3J0LmNvbG9ybWFwXG4gIH07XG4gIHJldHVybiBlbmFibGVkRWxlbWVudC5yZW5kZXJpbmdUb29scztcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlcXVlc3RQb29sL1JlcXVlc3RQb29sTWFuYWdlci50c1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3JlcXVlc3RQb29sL1JlcXVlc3RQb29sTWFuYWdlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBSZXF1ZXN0UG9vbE1hbmFnZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiUmVxdWVzdFBvb2xNYW5hZ2VyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gUmVxdWVzdFBvb2xNYW5hZ2VyOyB9KTtcbmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bXCJAQGl0ZXJhdG9yXCJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXRbXCJyZXR1cm5cIl0gIT0gbnVsbCkgaXRbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIFJlcXVlc3RQb29sTWFuYWdlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8vIHByaW9yaXR5IGlzIGZpeGVkIGZvciBpbnRlcmFjdGlvbiBhbmQgdGh1bWJuYWlsIHRvIGJlIDAsIGhvd2V2ZXIsXG4gIC8vIHRoZSBwcmlvcml0eSBvZiBwcmVmZXRjaCBjYW4gYmUgY29uZmlndXJlZCBhbmQgaXQgY2FuIGhhdmUgcHJpb3JpdGllcyBvdGhlclxuICAvLyB0aGFuIDAgKGhpZ2hlc3QgcHJpb3JpdHkpXG4gIC8vIFRPRE86IFNvbWUgb2YgdGhpcyBzdHVmZiBzaG91bGRuJ3QgYmUgcHVibGljIGJ1dCBpdCdzIGVhc2llciByaWdodCBub3dcbiAgZnVuY3Rpb24gUmVxdWVzdFBvb2xNYW5hZ2VyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXF1ZXN0UG9vbE1hbmFnZXIpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVxdWVzdFBvb2xcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF3YWtlXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJudW1SZXF1ZXN0c1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4TnVtUmVxdWVzdHNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdyYWJEZWxheVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGltZW91dEhhbmRsZVwiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5yZXF1ZXN0UG9vbCA9IHtcbiAgICAgIGludGVyYWN0aW9uOiB7XG4gICAgICAgIDA6IFtdXG4gICAgICB9LFxuICAgICAgdGh1bWJuYWlsOiB7XG4gICAgICAgIDA6IFtdXG4gICAgICB9LFxuICAgICAgcHJlZmV0Y2g6IHtcbiAgICAgICAgMDogW11cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuYXdha2UgPSBmYWxzZTtcbiAgICB0aGlzLmdyYWJEZWxheSA9IDU7XG4gICAgdGhpcy5udW1SZXF1ZXN0cyA9IHtcbiAgICAgIGludGVyYWN0aW9uOiAwLFxuICAgICAgdGh1bWJuYWlsOiAwLFxuICAgICAgcHJlZmV0Y2g6IDBcbiAgICB9O1xuICAgIHRoaXMubWF4TnVtUmVxdWVzdHMgPSB7XG4gICAgICBpbnRlcmFjdGlvbjogNixcbiAgICAgIHRodW1ibmFpbDogNixcbiAgICAgIHByZWZldGNoOiA1XG4gICAgfTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZXF1ZXN0UG9vbE1hbmFnZXIsIFt7XG4gICAga2V5OiBcImRlc3Ryb3lcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgIGlmICh0aGlzLnRpbWVvdXRIYW5kbGUpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSByZXF1ZXN0cyB0byB0aGUgcG9vbCBvZiByZXF1ZXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXF1ZXN0Rm4gLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgaW4gdGhlIGltYWdlXG4gICAgICogQHBhcmFtIHR5cGUgLSBQcmlvcml0eSBjYXRlZ29yeSwgaXQgY2FuIGJlIGVpdGhlciBvZiBpbnRlcmFjdGlvbiwgcHJlZmV0Y2gsXG4gICAgICogb3IgdGh1bWJuYWlsLlxuICAgICAqIEBwYXJhbSBhZGRpdGlvbmFsRGV0YWlscyAtIEFkZGl0aW9uYWwgZGV0YWlscyB0aGF0IHJlcXVlc3RzIGNhbiBjb250YWluLlxuICAgICAqIEZvciBpbnN0YW5jZSB0aGUgdm9sdW1lVUlEIGZvciB0aGUgdm9sdW1lIHJlcXVlc3RzXG4gICAgICogQHBhcmFtIHByaW9yaXR5IC0gUHJpb3JpdHkgbnVtYmVyIGZvciBlYWNoIGNhdGVnb3J5IG9mIHJlcXVlc3RzLiBJdHMgZGVmYXVsdFxuICAgICAqIHZhbHVlIGlzIHByaW9yaXR5IDAuIFRoZSBsb3dlciB0aGUgcHJpb3JpdHkgbnVtYmVyLCB0aGUgaGlnaGVyIHRoZSBwcmlvcml0eSBudW1iZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkUmVxdWVzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRSZXF1ZXN0KHJlcXVlc3RGbiwgdHlwZSwgYWRkaXRpb25hbERldGFpbHMpIHtcbiAgICAgIHZhciBwcmlvcml0eSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMDtcbiAgICAgIHZhciBhZGRUb0JlZ2lubmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7XG4gICAgICAvLyBEZXNjcmliZSB0aGUgcmVxdWVzdFxuICAgICAgdmFyIHJlcXVlc3REZXRhaWxzID0ge1xuICAgICAgICByZXF1ZXN0Rm46IHJlcXVlc3RGbixcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgYWRkaXRpb25hbERldGFpbHM6IGFkZGl0aW9uYWxEZXRhaWxzXG4gICAgICB9OyAvLyBDaGVjayBpZiB0aGUgcHJpb3JpdHkgZ3JvdXAgZXhpc3RzIG9uIHRoZSByZXF1ZXN0IHR5cGVcblxuICAgICAgaWYgKHRoaXMucmVxdWVzdFBvb2xbdHlwZV1bcHJpb3JpdHldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0UG9vbFt0eXBlXVtwcmlvcml0eV0gPSBbXTtcbiAgICAgIH0gLy8gQWRkaW5nIHRoZSByZXF1ZXN0IHRvIHRoZSBjb3JyZWN0IHByaW9yaXR5IGdyb3VwIG9mIHRoZSByZXF1ZXN0IHR5cGVcblxuXG4gICAgICBpZiAoYWRkVG9CZWdpbm5pbmcpIHtcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0YWNrXG4gICAgICAgIHRoaXMucmVxdWVzdFBvb2xbdHlwZV1bcHJpb3JpdHldLnVuc2hpZnQocmVxdWVzdERldGFpbHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBlbmQgb2YgdGhlIHN0YWNrXG4gICAgICAgIHRoaXMucmVxdWVzdFBvb2xbdHlwZV1bcHJpb3JpdHldLnB1c2gocmVxdWVzdERldGFpbHMpO1xuICAgICAgfSAvLyBXYWtlIHVwXG5cblxuICAgICAgaWYgKCF0aGlzLmF3YWtlKSB7XG4gICAgICAgIHRoaXMuYXdha2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0YXJ0R3JhYmJpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIHRoZSByZXF1ZXN0UG9vbE1hbmFnZXIncyBwb29sIG9mIHJlcXVlc3QgYmFzZWQgb24gdGhlIHJlc3VsdCBvZlxuICAgICAqIHByb3ZpZGVkIGZpbHRlciBmdW5jdGlvbi4gVGhlIHByb3ZpZGVkIGZpbHRlciBmdW5jdGlvbiBuZWVkcyB0byByZXR1cm4gZmFsc2Ugb3IgdHJ1ZVxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlckZ1bmN0aW9uIFRoZSBmaWx0ZXIgZnVuY3Rpb24gZm9yIGZpbHRlcmluZyBvZiB0aGUgcmVxdWVzdHMgdG8ga2VlcFxuICAgICAqIEBjYXRlZ29yeSByZXF1ZXN0UG9vbFxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZmlsdGVyUmVxdWVzdHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyUmVxdWVzdHMoZmlsdGVyRnVuY3Rpb24pIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucmVxdWVzdFBvb2wpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgdmFyIHJlcXVlc3RUeXBlID0gX3RoaXMucmVxdWVzdFBvb2xbdHlwZV07XG4gICAgICAgIE9iamVjdC5rZXlzKHJlcXVlc3RUeXBlKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmlvcml0eSkge1xuICAgICAgICAgIHJlcXVlc3RUeXBlW3ByaW9yaXR5XSA9IHJlcXVlc3RUeXBlW3ByaW9yaXR5XS5maWx0ZXIoZnVuY3Rpb24gKHJlcXVlc3REZXRhaWxzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyRnVuY3Rpb24ocmVxdWVzdERldGFpbHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIHJlcXVlc3RzIHNwZWNpZmljIHRvIHRoZSBwcm92aWRlZCB0eXBlLiBGb3IgaW5zdGFuY2UsIHRoZVxuICAgICAqIHBvb2wgb2YgcmVxdWVzdHMgb2YgdHlwZSAnaW50ZXJhY3Rpb24nIGNhbiBiZSBjbGVhcmVkIHZpYSB0aGlzIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHlwZSBjYXRlZ29yeSBvZiB0aGUgcmVxdWVzdCAoZWl0aGVyIGludGVyYWN0aW9uLCBwcmVmZXRjaCBvciB0aHVtYm5haWwpXG4gICAgICogQGNhdGVnb3J5IHJlcXVlc3RQb29sXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJjbGVhclJlcXVlc3RTdGFja1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclJlcXVlc3RTdGFjayh0eXBlKSB7XG4gICAgICBpZiAoIXRoaXMucmVxdWVzdFBvb2xbdHlwZV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2F0ZWdvcnkgZm9yIHRoZSB0eXBlIFwiLmNvbmNhdCh0eXBlLCBcIiBmb3VuZFwiKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVxdWVzdFBvb2xbdHlwZV0gPSB7XG4gICAgICAgIDA6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZW5kUmVxdWVzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kUmVxdWVzdChfcmVmKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHJlcXVlc3RGbiA9IF9yZWYucmVxdWVzdEZuLFxuICAgICAgICAgIHR5cGUgPSBfcmVmLnR5cGU7XG4gICAgICAvLyBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBjdXJyZW50IHJlcXVlc3RzIG9mIHRoaXMgdHlwZVxuICAgICAgdGhpcy5udW1SZXF1ZXN0c1t0eXBlXSsrO1xuICAgICAgdGhpcy5hd2FrZSA9IHRydWU7XG4gICAgICByZXF1ZXN0Rm4oKVtcImZpbmFsbHlcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIubnVtUmVxdWVzdHNbdHlwZV0tLTtcblxuICAgICAgICBfdGhpczIuc3RhcnRBZ2FpbigpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInN0YXJ0R3JhYmJpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRHcmFiYmluZygpIHtcbiAgICAgIC8vIEJlZ2luIGJ5IGdyYWJiaW5nIFggaW1hZ2VzXG4gICAgICAvLyBUT0RPOiBUaGlzIGlzIHRoZSByZWFzb24gdGhpbmdzIGFyZW4ndCBnb2luZyBhcyBmYXN0IGFzIGV4cGVjdGVkXG4gICAgICAvLyBjb25zdCBtYXhTaW11bHRhbmVvdXNSZXF1ZXN0cyA9IGdldE1heFNpbXVsdGFuZW91c1JlcXVlc3RzKClcbiAgICAgIC8vIHRoaXMubWF4TnVtUmVxdWVzdHMgPSB7XG4gICAgICAvLyAgIGludGVyYWN0aW9uOiBNYXRoLm1heChtYXhTaW11bHRhbmVvdXNSZXF1ZXN0cywgMSksXG4gICAgICAvLyAgIHRodW1ibmFpbDogTWF0aC5tYXgobWF4U2ltdWx0YW5lb3VzUmVxdWVzdHMgLSAyLCAxKSxcbiAgICAgIC8vICAgcHJlZmV0Y2g6IE1hdGgubWF4KG1heFNpbXVsdGFuZW91c1JlcXVlc3RzIC0gMSwgMSksXG4gICAgICAvLyB9XG4gICAgICB2YXIgbWF4UmVxdWVzdHMgPSB0aGlzLm1heE51bVJlcXVlc3RzLmludGVyYWN0aW9uICsgdGhpcy5tYXhOdW1SZXF1ZXN0cy50aHVtYm5haWwgKyB0aGlzLm1heE51bVJlcXVlc3RzLnByZWZldGNoO1xuICAgICAgdmFyIGN1cnJlbnRSZXF1ZXN0cyA9IHRoaXMubnVtUmVxdWVzdHMuaW50ZXJhY3Rpb24gKyB0aGlzLm51bVJlcXVlc3RzLnRodW1ibmFpbCArIHRoaXMubnVtUmVxdWVzdHMucHJlZmV0Y2g7XG4gICAgICB2YXIgcmVxdWVzdHNUb1NlbmQgPSBtYXhSZXF1ZXN0cyAtIGN1cnJlbnRSZXF1ZXN0cztcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXF1ZXN0c1RvU2VuZDsgaSsrKSB7XG4gICAgICAgIHZhciBfcmVxdWVzdERldGFpbHMgPSB0aGlzLmdldE5leHRSZXF1ZXN0KCk7XG5cbiAgICAgICAgaWYgKF9yZXF1ZXN0RGV0YWlscyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChfcmVxdWVzdERldGFpbHMpIHtcbiAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KF9yZXF1ZXN0RGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3RhcnRBZ2FpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydEFnYWluKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICghdGhpcy5hd2FrZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmdyYWJEZWxheSkge1xuICAgICAgICB0aGlzLnRpbWVvdXRIYW5kbGUgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMzLnN0YXJ0R3JhYmJpbmcoKTtcbiAgICAgICAgfSwgdGhpcy5ncmFiRGVsYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGFydEdyYWJiaW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvcnRlZFByaW9yaXR5R3JvdXBzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvcnRlZFByaW9yaXR5R3JvdXBzKHR5cGUpIHtcbiAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICB2YXIgcHJpb3JpdGllcyA9IE9iamVjdC5rZXlzKHRoaXMucmVxdWVzdFBvb2xbdHlwZV0pLm1hcChOdW1iZXIpLmZpbHRlcihmdW5jdGlvbiAocHJpb3JpdHkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5yZXF1ZXN0UG9vbFt0eXBlXVtwcmlvcml0eV0ubGVuZ3RoO1xuICAgICAgfSkuc29ydCgpO1xuICAgICAgcmV0dXJuIHByaW9yaXRpZXM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldE5leHRSZXF1ZXN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5leHRSZXF1ZXN0KCkge1xuICAgICAgdmFyIGludGVyYWN0aW9uUHJpb3JpdGllcyA9IHRoaXMuZ2V0U29ydGVkUHJpb3JpdHlHcm91cHMoJ2ludGVyYWN0aW9uJyk7XG5cbiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihpbnRlcmFjdGlvblByaW9yaXRpZXMpLFxuICAgICAgICAgIF9zdGVwO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBwcmlvcml0eSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgaWYgKHRoaXMucmVxdWVzdFBvb2wuaW50ZXJhY3Rpb25bcHJpb3JpdHldLmxlbmd0aCAmJiB0aGlzLm51bVJlcXVlc3RzLmludGVyYWN0aW9uIDwgdGhpcy5tYXhOdW1SZXF1ZXN0cy5pbnRlcmFjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFBvb2wuaW50ZXJhY3Rpb25bcHJpb3JpdHldLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvci5mKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0aHVtYm5haWxQcmlvcml0aWVzID0gdGhpcy5nZXRTb3J0ZWRQcmlvcml0eUdyb3VwcygndGh1bWJuYWlsJyk7XG5cbiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGh1bWJuYWlsUHJpb3JpdGllcyksXG4gICAgICAgICAgX3N0ZXAyO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBfcHJpb3JpdHkgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0UG9vbC50aHVtYm5haWxbX3ByaW9yaXR5XS5sZW5ndGggJiYgdGhpcy5udW1SZXF1ZXN0cy50aHVtYm5haWwgPCB0aGlzLm1heE51bVJlcXVlc3RzLnRodW1ibmFpbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFBvb2wudGh1bWJuYWlsW19wcmlvcml0eV0uc2hpZnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJlZmV0Y2hQcmlvcml0aWVzID0gdGhpcy5nZXRTb3J0ZWRQcmlvcml0eUdyb3VwcygncHJlZmV0Y2gnKTtcblxuICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihwcmVmZXRjaFByaW9yaXRpZXMpLFxuICAgICAgICAgIF9zdGVwMztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgX3ByaW9yaXR5MiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3RQb29sLnByZWZldGNoW19wcmlvcml0eTJdLmxlbmd0aCAmJiB0aGlzLm51bVJlcXVlc3RzLnByZWZldGNoIDwgdGhpcy5tYXhOdW1SZXF1ZXN0cy5wcmVmZXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFBvb2wucHJlZmV0Y2hbX3ByaW9yaXR5Ml0uc2hpZnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvcjMuZigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWludGVyYWN0aW9uUHJpb3JpdGllcy5sZW5ndGggJiYgIXRodW1ibmFpbFByaW9yaXRpZXMubGVuZ3RoICYmICFwcmVmZXRjaFByaW9yaXRpZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYXdha2UgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXF1ZXN0IHBvb2wgY29udGFpbmluZyBkaWZmZXJlbnQgY2F0ZWdvcmllcywgdGhlaXIgcHJpb3JpdHkgYW5kXG4gICAgICogdGhlIGFkZGVkIHJlcXVlc3QgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zXG4gICAgICogQGNhdGVnb3J5IHJlcXVlc3RQb29sXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJnZXRSZXF1ZXN0UG9vbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXF1ZXN0UG9vbCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RQb29sO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSZXF1ZXN0UG9vbE1hbmFnZXI7XG59KCk7XG5cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlcXVlc3RQb29sL2ltYWdlTG9hZFBvb2xNYW5hZ2VyLnRzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9yZXF1ZXN0UG9vbC9pbWFnZUxvYWRQb29sTWFuYWdlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX1JlcXVlc3RQb29sTWFuYWdlcl90c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9SZXF1ZXN0UG9vbE1hbmFnZXIudHMgKi8gXCIuL3JlcXVlc3RQb29sL1JlcXVlc3RQb29sTWFuYWdlci50c1wiKTtcbiAvLyBMb2FkaW5nID0gUmV0cmlldmFsICsgRGVjb2RpbmdcblxudmFyIGltYWdlTG9hZFBvb2xNYW5hZ2VyID0gbmV3IF9SZXF1ZXN0UG9vbE1hbmFnZXJfdHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcIlJlcXVlc3RQb29sTWFuYWdlclwiXSgpO1xuaW1hZ2VMb2FkUG9vbE1hbmFnZXIubWF4TnVtUmVxdWVzdHMgPSB7XG4gIGludGVyYWN0aW9uOiAxMDAwLFxuICB0aHVtYm5haWw6IDEwMDAsXG4gIHByZWZldGNoOiAxMDAwXG59O1xuaW1hZ2VMb2FkUG9vbE1hbmFnZXIuZ3JhYkRlbGF5ID0gMDtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoaW1hZ2VMb2FkUG9vbE1hbmFnZXIpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3JlcXVlc3RQb29sL2ltYWdlUmV0cmlldmFsUG9vbE1hbmFnZXIudHNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVxdWVzdFBvb2wvaW1hZ2VSZXRyaWV2YWxQb29sTWFuYWdlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfUmVxdWVzdFBvb2xNYW5hZ2VyX3RzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1JlcXVlc3RQb29sTWFuYWdlci50cyAqLyBcIi4vcmVxdWVzdFBvb2wvUmVxdWVzdFBvb2xNYW5hZ2VyLnRzXCIpO1xuIC8vIFJldHJpZXZhbCAodXN1YWxseSkgPT09IFhIUiByZXF1ZXN0c1xuXG52YXIgaW1hZ2VSZXRyaWV2YWxQb29sTWFuYWdlciA9IG5ldyBfUmVxdWVzdFBvb2xNYW5hZ2VyX3RzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJSZXF1ZXN0UG9vbE1hbmFnZXJcIl0oKTtcbmltYWdlUmV0cmlldmFsUG9vbE1hbmFnZXIubWF4TnVtUmVxdWVzdHMgPSB7XG4gIGludGVyYWN0aW9uOiAyMCxcbiAgdGh1bWJuYWlsOiAyMCxcbiAgcHJlZmV0Y2g6IDIwXG59O1xuaW1hZ2VSZXRyaWV2YWxQb29sTWFuYWdlci5ncmFiRGVsYXkgPSAwO1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChpbWFnZVJldHJpZXZhbFBvb2xNYW5hZ2VyKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9yZXNldC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVzZXQuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9nZXREZWZhdWx0Vmlld3BvcnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzICovIFwiLi9pbnRlcm5hbC9nZXREZWZhdWx0Vmlld3BvcnQuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdXBkYXRlSW1hZ2UuanMgKi8gXCIuL3VwZGF0ZUltYWdlLmpzXCIpO1xuXG5cblxuLyoqXG4gKiBSZXNldHMgdGhlIHZpZXdwb3J0IHRvIHRoZSBkZWZhdWx0IHNldHRpbmdzXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBBbiBIVE1MIEVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gX193ZWJwYWNrX2V4cG9ydHNfX1tcImRlZmF1bHRcIl0gPSAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTtcbiAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQgPSBPYmplY3QoX2ludGVybmFsX2dldERlZmF1bHRWaWV3cG9ydF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQuY2FudmFzLCBlbmFibGVkRWxlbWVudC5pbWFnZSk7XG4gIE9iamVjdChfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQpO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vcmVzaXplLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vcmVzaXplLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZml0VG9XaW5kb3dfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZml0VG9XaW5kb3cuanMgKi8gXCIuL2ZpdFRvV2luZG93LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91cGRhdGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91cGRhdGVJbWFnZS5qcyAqLyBcIi4vdXBkYXRlSW1hZ2UuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90cmlnZ2VyRXZlbnQuanMgKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0SW1hZ2VTaXplX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldEltYWdlU2l6ZS5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0SW1hZ2VTaXplLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZXZlbnRzLmpzICovIFwiLi9ldmVudHMuanNcIik7XG5cblxuXG5cblxuXG4vKipcclxuICogVGhpcyBtb2R1bGUgaXMgcmVzcG9uc2libGUgZm9yIGVuYWJsaW5nIGFuIGVsZW1lbnQgdG8gZGlzcGxheSBpbWFnZXMgd2l0aCBjb3JuZXJzdG9uZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYW52YXMgVGhlIENhbnZhcyBET00gZWxlbWVudCB3aXRoaW4gdGhlIERPTSBlbGVtZW50IGVuYWJsZWQgZm9yIENvcm5lcnN0b25lXHJcbiAqIEByZXR1cm5zIHt2b2lkfVxyXG4gKi9cblxuZnVuY3Rpb24gc2V0Q2FudmFzU2l6ZShlbGVtZW50LCBjYW52YXMpIHtcbiAgLy8gVGhlIGRldmljZSBwaXhlbCByYXRpbyBpcyAxLjAgZm9yIG5vcm1hbCBkaXNwbGF5cyBhbmQgPiAxLjBcbiAgLy8gRm9yIGhpZ2ggRFBJIGRpc3BsYXlzIGxpa2UgUmV0aW5hXG5cbiAgLypcclxuICAgICAgVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGRpc2FibGVkIGR1ZSB0byBidWdneSBiZWhhdmlvciBvbiBzeXN0ZW1zIHdpdGggbWl4ZWQgRFBJJ3MuICBJZiB0aGUgY2FudmFzXHJcbiAgICBpcyBjcmVhdGVkIG9uIGEgZGlzcGxheSB3aXRoIGhpZ2ggRFBJIChlLmcuIDIuMCkgYW5kIHRoZW4gdGhlIGJyb3dzZXIgd2luZG93IGlzIGRyYWdnZWQgdG9cclxuICAgIGEgZGlmZmVyZW50IGRpc3BsYXkgd2l0aCBhIGRpZmZlcmVudCBEUEkgKGUuZy4gMS4wKSwgdGhlIGNhbnZhcyBpcyBub3QgcmVjcmVhdGVkIHNvIHRoZSBwYWdlVG9QaXhlbFxyXG4gICAgcHJvZHVjZXMgaW5jb3JyZWN0IHJlc3VsdHMuICBJIGNvdWxkbid0IGZpbmQgYW55IHdheSB0byBkZXRlcm1pbmUgd2hlbiB0aGUgRFBJIGNoYW5nZWQgb3RoZXIgdGhhblxyXG4gICAgYnkgcG9sbGluZyB3aGljaCBpcyBub3QgdmVyeSBjbGVhbi4gIElmIGFueW9uZSBoYXMgYW55IGlkZWFzIGhlcmUsIHBsZWFzZSBsZXQgbWUga25vdywgYnV0IGZvciBub3dcclxuICAgIHdlIHdpbGwgZGlzYWJsZSB0aGlzIGZ1bmN0aW9uYWxpdHkuICBXZSBtYXkgd2FudFxyXG4gICAgdG8gYWRkIGEgbWVjaGFuaXNtIHRvIG9wdGlvbmFsbHkgZW5hYmxlIHRoaXMgZnVuY3Rpb25hbGl0eSBpZiB3ZSBjYW4gZGV0ZXJtaW5lIGl0IGlzIHNhZmUgdG8gZG9cclxuICAgIHNvIChlLmcuIGlQYWQgb3IgaVBob25lIG9yIHBlcmhhcHMgZW51bWVyYXRlIHRoZSBkaXNwbGF5cyBvbiB0aGUgc3lzdGVtLiAgSSBhbSBjaG9vc2luZ1xyXG4gICAgdG8gYmUgY2F1dGlvdXMgaGVyZSBzaW5jZSBJIHdvdWxkIHJhdGhlciBub3QgaGF2ZSBidWcgcmVwb3J0cyBvciBzYWZldHkgaXNzdWVzIHJlbGF0ZWQgdG8gdGhpc1xyXG4gICAgc2NlbmFyaW8uXHJcbiAgICAgIHZhciBkZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICBpZihkZXZpY2VQaXhlbFJhdGlvID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBkZXZpY2VQaXhlbFJhdGlvID0gMS4wO1xyXG4gICAgfVxyXG4gICAgKi9cbiAgLy8gQXZvaWQgc2V0dGluZyB0aGUgc2FtZSB2YWx1ZSBiZWNhdXNlIGl0IGZsYXNoZXMgdGhlIGNhbnZhcyB3aXRoIElFIGFuZCBFZGdlXG4gIGlmIChjYW52YXMud2lkdGggIT09IGVsZW1lbnQuY2xpZW50V2lkdGgpIHtcbiAgICBjYW52YXMud2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IFwiXCIuY29uY2F0KGVsZW1lbnQuY2xpZW50V2lkdGgsIFwicHhcIik7XG4gIH0gLy8gQXZvaWQgc2V0dGluZyB0aGUgc2FtZSB2YWx1ZSBiZWNhdXNlIGl0IGZsYXNoZXMgdGhlIGNhbnZhcyB3aXRoIElFIGFuZCBFZGdlXG5cblxuICBpZiAoY2FudmFzLmhlaWdodCAhPT0gZWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICBjYW52YXMuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGVsZW1lbnQuY2xpZW50SGVpZ2h0LCBcInB4XCIpO1xuICB9XG59XG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSBpbWFnZSBvZiBhIGdpdmVuIGVuYWJsZWQgZWxlbWVudCBmaXR0ZWQgdGhlIHdpbmRvd1xyXG4gKiBiZWZvcmUgdGhlIHJlc2l6ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge0VuYWJsZWRFbGVtZW50fSBlbmFibGVkRWxlbWVudCBUaGUgQ29ybmVyc3RvbmUgRW5hYmxlZCBFbGVtZW50XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBvbGRDYW52YXNXaWR0aCBUaGUgd2lkdGggb2YgdGhlIGNhbnZhcyBiZWZvcmUgdGhlIHJlc2l6ZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gb2xkQ2FudmFzSGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIGNhbnZhcyBiZWZvcmUgdGhlIHJlc2l6ZVxyXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGl0IGZpdHRlZCB0aGUgd2luZG93cywgZmFsc2Ugb3RoZXJ3aXNlXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIHdhc0ZpdFRvV2luZG93KGVuYWJsZWRFbGVtZW50LCBvbGRDYW52YXNXaWR0aCwgb2xkQ2FudmFzSGVpZ2h0KSB7XG4gIHZhciBzY2FsZSA9IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnNjYWxlO1xuICB2YXIgaW1hZ2VTaXplID0gT2JqZWN0KF9pbnRlcm5hbF9nZXRJbWFnZVNpemVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LmltYWdlLCBlbmFibGVkRWxlbWVudC52aWV3cG9ydC5yb3RhdGlvbik7XG4gIHZhciBpbWFnZVdpZHRoID0gTWF0aC5yb3VuZChpbWFnZVNpemUud2lkdGggKiBzY2FsZSk7XG4gIHZhciBpbWFnZUhlaWdodCA9IE1hdGgucm91bmQoaW1hZ2VTaXplLmhlaWdodCAqIHNjYWxlKTtcbiAgdmFyIHggPSBlbmFibGVkRWxlbWVudC52aWV3cG9ydC50cmFuc2xhdGlvbi54O1xuICB2YXIgeSA9IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnRyYW5zbGF0aW9uLnk7XG4gIHJldHVybiBpbWFnZVdpZHRoID09PSBvbGRDYW52YXNXaWR0aCAmJiBpbWFnZUhlaWdodCA8PSBvbGRDYW52YXNIZWlnaHQgfHwgaW1hZ2VXaWR0aCA8PSBvbGRDYW52YXNXaWR0aCAmJiBpbWFnZUhlaWdodCA9PT0gb2xkQ2FudmFzSGVpZ2h0ICYmIHggPT09IDAgJiYgeSA9PT0gMDtcbn1cbi8qKlxyXG4gKiBSZXNjYWxlIHRoZSBpbWFnZSByZWxhdGl2ZSB0byB0aGUgY2hhbmdlZCBzaXplIG9mIHRoZSBjYW52YXNcclxuICpcclxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgVGhlIENvcm5lcnN0b25lIEVuYWJsZWQgRWxlbWVudFxyXG4gKiBAcGFyYW0ge251bWJlcn0gb2xkQ2FudmFzV2lkdGggVGhlIHdpZHRoIG9mIHRoZSBjYW52YXMgYmVmb3JlIHRoZSByZXNpemVcclxuICogQHBhcmFtIHtudW1iZXJ9IG9sZENhbnZhc0hlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBjYW52YXMgYmVmb3JlIHRoZSByZXNpemVcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXG5cblxuZnVuY3Rpb24gcmVsYXRpdmVSZXNjYWxlKGVuYWJsZWRFbGVtZW50LCBvbGRDYW52YXNXaWR0aCwgb2xkQ2FudmFzSGVpZ2h0KSB7XG4gIHZhciBzY2FsZSA9IGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnNjYWxlO1xuICB2YXIgY2FudmFzV2lkdGggPSBlbmFibGVkRWxlbWVudC5jYW52YXMud2lkdGg7XG4gIHZhciBjYW52YXNIZWlnaHQgPSBlbmFibGVkRWxlbWVudC5jYW52YXMuaGVpZ2h0O1xuICB2YXIgcmVsV2lkdGhDaGFuZ2UgPSBjYW52YXNXaWR0aCAvIG9sZENhbnZhc1dpZHRoO1xuICB2YXIgcmVsSGVpZ2h0Q2hhbmdlID0gY2FudmFzSGVpZ2h0IC8gb2xkQ2FudmFzSGVpZ2h0O1xuICB2YXIgcmVsQ2hhbmdlID0gTWF0aC5zcXJ0KHJlbFdpZHRoQ2hhbmdlICogcmVsSGVpZ2h0Q2hhbmdlKTtcbiAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuc2NhbGUgPSByZWxDaGFuZ2UgKiBzY2FsZTtcbn1cbi8qKlxyXG4gKiBSZXNpemVzIGFuIGVuYWJsZWQgZWxlbWVudCBhbmQgb3B0aW9uYWxseSBmaXRzIHRoZSBpbWFnZSB0byB3aW5kb3dcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCBUaGUgRE9NIGVsZW1lbnQgZW5hYmxlZCBmb3IgQ29ybmVyc3RvbmVcclxuICogQHBhcmFtIHtCb29sZWFufSBmb3JjZUZpdFRvV2luZG93IHRydWUgdG8gdG8gZm9yY2UgYSByZWZpdCwgZmFsc2UgdG8gcmVzY2FsZSBhY2NvcmRpbmdseVxyXG4gKiBAcmV0dXJucyB7dm9pZH1cclxuICovXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgZm9yY2VGaXRUb1dpbmRvdykge1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICB2YXIgb2xkQ2FudmFzV2lkdGggPSBlbmFibGVkRWxlbWVudC5jYW52YXMud2lkdGg7XG4gIHZhciBvbGRDYW52YXNIZWlnaHQgPSBlbmFibGVkRWxlbWVudC5jYW52YXMuaGVpZ2h0O1xuICBzZXRDYW52YXNTaXplKGVsZW1lbnQsIGVuYWJsZWRFbGVtZW50LmNhbnZhcyk7XG4gIHZhciBldmVudERhdGEgPSB7XG4gICAgZWxlbWVudDogZWxlbWVudFxuICB9O1xuICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1wiZGVmYXVsdFwiXSkoZWxlbWVudCwgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNV9fW1wiZGVmYXVsdFwiXS5FTEVNRU5UX1JFU0laRUQsIGV2ZW50RGF0YSk7XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LmltYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZm9yY2VGaXRUb1dpbmRvdyB8fCB3YXNGaXRUb1dpbmRvdyhlbmFibGVkRWxlbWVudCwgb2xkQ2FudmFzV2lkdGgsIG9sZENhbnZhc0hlaWdodCkpIHtcbiAgICAvLyBGaXQgdGhlIGltYWdlIHRvIHRoZSB3aW5kb3cgYWdhaW4gaWYgaXQgZml0dGVkIGJlZm9yZSB0aGUgcmVzaXplXG4gICAgT2JqZWN0KF9maXRUb1dpbmRvd19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZWxlbWVudCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQWRhcHQgdGhlIHNjYWxlIG9mIGEgem9vbWVkIG9yIHBhbm5lZCBpbWFnZSByZWxhdGl2ZSB0byB0aGUgc2l6ZSBjaGFuZ2VcbiAgICByZWxhdGl2ZVJlc2NhbGUoZW5hYmxlZEVsZW1lbnQsIG9sZENhbnZhc1dpZHRoLCBvbGRDYW52YXNIZWlnaHQpO1xuICAgIE9iamVjdChfdXBkYXRlSW1hZ2VfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl0pKGVsZW1lbnQpO1xuICB9XG59KTtcblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi9zZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbS5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc2V0VG9QaXhlbENvb3JkaW5hdGVTeXN0ZW0uanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnRlcm5hbF9jYWxjdWxhdGVUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vaW50ZXJuYWwvY2FsY3VsYXRlVHJhbnNmb3JtLmpzICovIFwiLi9pbnRlcm5hbC9jYWxjdWxhdGVUcmFuc2Zvcm0uanNcIik7XG5cbi8qKlxuICogU2V0cyB0aGUgY2FudmFzIGNvbnRleHQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRvIHRoZSBwaXhlbCBjb29yZGluYXRlIHN5c3RlbS4gIFRoaXMgYWxsb3dzXG4gKiBnZW9tZXRyeSB0byBiZSBkcml2ZW4gdXNpbmcgdGhlIGNhbnZhcyBjb250ZXh0IHVzaW5nIGNvb3JkaW5hdGVzIGluIHRoZSBwaXhlbCBjb29yZGluYXRlIHN5c3RlbVxuICogQHBhcmFtIHtFbmFibGVkRWxlbWVudH0gZW5hYmxlZEVsZW1lbnQgVGhlXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBUaGUgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIGZvciB0aGUgZW5hYmxlZEVsZW1lbnQncyBDYW52YXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIE9wdGlvbmFsIHNjYWxlIHRvIGFwcGx5XG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKGZ1bmN0aW9uIChlbmFibGVkRWxlbWVudCwgY29udGV4dCwgc2NhbGUpIHtcbiAgaWYgKGVuYWJsZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRvUGl4ZWxDb29yZGluYXRlU3lzdGVtOiBwYXJhbWV0ZXIgZW5hYmxlZEVsZW1lbnQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICBpZiAoY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUb1BpeGVsQ29vcmRpbmF0ZVN5c3RlbTogcGFyYW1ldGVyIGNvbnRleHQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgdHJhbnNmb3JtID0gT2JqZWN0KF9pbnRlcm5hbF9jYWxjdWxhdGVUcmFuc2Zvcm1fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0pKGVuYWJsZWRFbGVtZW50LCBzY2FsZSk7XG4gIGNvbnRleHQuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybS5tWzBdLCB0cmFuc2Zvcm0ubVsxXSwgdHJhbnNmb3JtLm1bMl0sIHRyYW5zZm9ybS5tWzNdLCB0cmFuc2Zvcm0ubVs0XSwgdHJhbnNmb3JtLm1bNV0pO1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vc2V0Vmlld3BvcnQuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NldFZpZXdwb3J0LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogZGVmYXVsdCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2dldERlZmF1bHRWaWV3cG9ydC5qcyAqLyBcIi4vaW50ZXJuYWwvZ2V0RGVmYXVsdFZpZXdwb3J0LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZW5hYmxlZEVsZW1lbnRzLmpzICovIFwiLi9lbmFibGVkRWxlbWVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3VwZGF0ZUltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3VwZGF0ZUltYWdlLmpzICovIFwiLi91cGRhdGVJbWFnZS5qc1wiKTtcblxuXG5cbnZhciBNSU5fV0lORE9XX1dJRFRIID0gMC4wMDAwMDE7XG52YXIgTUlOX1ZJRVdQT1JUX1NDQUxFID0gMC4wMDAxO1xuLyoqXG4gKiBTZXRzL3VwZGF0ZXMgdmlld3BvcnQgb2YgYSBnaXZlbiBlbmFibGVkIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gRE9NIGVsZW1lbnQgb2YgdGhlIGVuYWJsZWQgZWxlbWVudFxuICogQHBhcmFtIHtWaWV3cG9ydH0gW3ZpZXdwb3J0XSAtIE9iamVjdCBjb250YWluaW5nIHRoZSB2aWV3cG9ydCBwcm9wZXJ0aWVzXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBWaWV3cG9ydFNldHRpbmdzXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCwgdmlld3BvcnQpIHtcbiAgdmFyIGVuYWJsZWRFbGVtZW50ID0gT2JqZWN0KF9lbmFibGVkRWxlbWVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImdldEVuYWJsZWRFbGVtZW50XCJdKShlbGVtZW50KTsgLy8gSWYgdmlld3BvcnQgaXMgbm90IGFscmVhZHkgc2V0LCBzdGFydCB3aXRoIGRlZmF1bHQgYW5kIG1lcmdlIG5ld1xuICAvLyB2aWV3cG9ydCBvcHRpb25zIGxhdGVyXG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmFibGVkRWxlbWVudC52aWV3cG9ydCA9IE9iamVjdChfaW50ZXJuYWxfZ2V0RGVmYXVsdFZpZXdwb3J0X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKShlbmFibGVkRWxlbWVudC5jYW52YXMpO1xuICB9IC8vIE1lcmdlIHZpZXdwb3J0XG5cblxuICBpZiAodmlld3BvcnQpIHtcbiAgICBmb3IgKHZhciBhdHRybmFtZSBpbiB2aWV3cG9ydCkge1xuICAgICAgaWYgKHZpZXdwb3J0W2F0dHJuYW1lXSAhPT0gbnVsbCkge1xuICAgICAgICBlbmFibGVkRWxlbWVudC52aWV3cG9ydFthdHRybmFtZV0gPSB2aWV3cG9ydFthdHRybmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9IC8vIFByZXZlbnQgd2luZG93IHdpZHRoIGZyb20gYmVpbmcgdG9vIHNtYWxsIChub3RlIHRoYXQgdmFsdWVzIGNsb3NlIHRvIHplcm8gYXJlIHZhbGlkIGFuZCBjYW4gb2NjdXIgd2l0aFxuICAvLyBQRVQgaW1hZ2VzIGluIHBhcnRpY3VsYXIpXG5cblxuICBpZiAoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd1dpZHRoKSB7XG4gICAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd1dpZHRoID0gTWF0aC5tYXgoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQudm9pLndpbmRvd1dpZHRoLCBNSU5fV0lORE9XX1dJRFRIKTtcbiAgfSAvLyBQcmV2ZW50IHNjYWxlIGZyb20gZ2V0dGluZyB0b28gc21hbGxcblxuXG4gIGlmIChlbmFibGVkRWxlbWVudC52aWV3cG9ydC5zY2FsZSkge1xuICAgIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnNjYWxlID0gTWF0aC5tYXgoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQuc2NhbGUsIE1JTl9WSUVXUE9SVF9TQ0FMRSk7XG4gIH0gLy8gTm9ybWFsaXplIHRoZSByb3RhdGlvbiB2YWx1ZSB0byBhIHBvc2l0aXZlIHJvdGF0aW9uIGluIGRlZ3JlZXNcblxuXG4gIGVuYWJsZWRFbGVtZW50LnZpZXdwb3J0LnJvdGF0aW9uICU9IDM2MDtcblxuICBpZiAoZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucm90YXRpb24gPCAwKSB7XG4gICAgZW5hYmxlZEVsZW1lbnQudmlld3BvcnQucm90YXRpb24gKz0gMzYwO1xuICB9XG5cbiAgaWYgKGVuYWJsZWRFbGVtZW50LmltYWdlKSB7XG4gICAgLy8gRm9yY2UgdGhlIGltYWdlIHRvIGJlIHVwZGF0ZWQgc2luY2UgdGhlIHZpZXdwb3J0IGhhcyBiZWVuIG1vZGlmaWVkXG4gICAgT2JqZWN0KF91cGRhdGVJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXSkoZWxlbWVudCk7XG4gIH1cbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3RyaWdnZXJFdmVudC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3RyaWdnZXJFdmVudC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBkZWZhdWx0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB0cmlnZ2VyRXZlbnQ7IH0pO1xuLyoqXG4gKiBUcmlnZ2VyIGEgQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcGFyYW0ge0V2ZW50VGFyZ2V0fSBlbCBUaGUgZWxlbWVudCBvciBFdmVudFRhcmdldCB0byB0cmlnZ2VyIHRoZSBldmVudCB1cG9uXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZSBuYW1lXG4gKiBAcGFyYW0ge09iamVjdHxudWxsfSBkZXRhaWw9bnVsbCBUaGUgZXZlbnQgZGF0YSB0byBiZSBzZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVGhlIHJldHVybiB2YWx1ZSBpcyBmYWxzZSBpZiBhdCBsZWFzdCBvbmUgZXZlbnQgbGlzdGVuZXIgY2FsbGVkIHByZXZlbnREZWZhdWx0KCkuIE90aGVyd2lzZSBpdCByZXR1cm5zIHRydWUuXG4gKi9cbmZ1bmN0aW9uIHRyaWdnZXJFdmVudChlbCwgdHlwZSkge1xuICB2YXIgZGV0YWlsID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuICB2YXIgZXZlbnQ7IC8vIFRoaXMgY2hlY2sgaXMgbmVlZGVkIHRvIHBvbHlmaWxsIEN1c3RvbUV2ZW50IG9uIElFMTEtXG5cbiAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7XG4gICAgICBkZXRhaWw6IGRldGFpbCxcbiAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCB0cnVlLCB0cnVlLCBkZXRhaWwpO1xuICB9XG5cbiAgcmV0dXJuIGVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3VwZGF0ZUltYWdlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi91cGRhdGVJbWFnZS5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9lbmFibGVkRWxlbWVudHMuanMgKi8gXCIuL2VuYWJsZWRFbGVtZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfaW50ZXJuYWxfZHJhd0ltYWdlX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludGVybmFsL2RyYXdJbWFnZS5qcyAqLyBcIi4vaW50ZXJuYWwvZHJhd0ltYWdlLmpzXCIpO1xuXG5cbi8qKlxuICogRm9yY2VzIHRoZSBpbWFnZSB0byBiZSB1cGRhdGVkL3JlZHJhd24gZm9yIHRoZSBzcGVjaWZpZWQgZW5hYmxlZCBlbGVtZW50XG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IEFuIEhUTUwgRWxlbWVudCBlbmFibGVkIGZvciBDb3JuZXJzdG9uZVxuICogQHBhcmFtIHtCb29sZWFufSBbaW52YWxpZGF0ZWQ9ZmFsc2VdIFdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZSBwaXhlbCBkYXRhIGhhcyBiZWVuIGNoYW5nZWQsIG5lY2Vzc2l0YXRpbmcgYSByZWRyYXdcbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqIEBtZW1iZXJvZiBEcmF3aW5nXG4gKi9cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZWxlbWVudCkge1xuICB2YXIgaW52YWxpZGF0ZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuICB2YXIgZW5hYmxlZEVsZW1lbnQgPSBPYmplY3QoX2VuYWJsZWRFbGVtZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0RW5hYmxlZEVsZW1lbnRcIl0pKGVsZW1lbnQpO1xuICBPYmplY3QoX2ludGVybmFsX2RyYXdJbWFnZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoZW5hYmxlZEVsZW1lbnQsIGludmFsaWRhdGVkKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3dlYmdsL2NyZWF0ZVByb2dyYW1Gcm9tU3RyaW5nLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi93ZWJnbC9jcmVhdGVQcm9ncmFtRnJvbVN0cmluZy5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKipcbiAqIENyZWF0ZXMgYW5kIGNvbXBpbGVzIGEgc2hhZGVyLlxuICpcbiAqIEBwYXJhbSB7IVdlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgVGhlIFdlYkdMIENvbnRleHQuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2hhZGVyU291cmNlIFRoZSBHTFNMIHNvdXJjZSBjb2RlIGZvciB0aGUgc2hhZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHNoYWRlclR5cGUgVGhlIHR5cGUgb2Ygc2hhZGVyLCBWRVJURVhfU0hBREVSIG9yIEZSQUdNRU5UX1NIQURFUi5cbiAqXG4gKiBAcmV0dXJuIHshV2ViR0xTaGFkZXJ9IFRoZSBzaGFkZXIuXG4gKiBAbWVtYmVyb2YgV2ViR0xSZW5kZXJpbmdcbiAqL1xuZnVuY3Rpb24gY29tcGlsZVNoYWRlcihnbCwgc2hhZGVyU291cmNlLCBzaGFkZXJUeXBlKSB7XG4gIC8vIENyZWF0ZSB0aGUgc2hhZGVyIG9iamVjdFxuICB2YXIgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHNoYWRlclR5cGUpOyAvLyBTZXQgdGhlIHNoYWRlciBzb3VyY2UgY29kZS5cblxuICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzaGFkZXJTb3VyY2UpOyAvLyBDb21waWxlIHRoZSBzaGFkZXJcblxuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7IC8vIENoZWNrIGlmIGl0IGNvbXBpbGVkXG5cbiAgdmFyIHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XG5cbiAgaWYgKCFzdWNjZXNzICYmICFnbC5pc0NvbnRleHRMb3N0KCkpIHtcbiAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyBkdXJpbmcgY29tcGlsYXRpb247IGdldCB0aGUgZXJyb3JcbiAgICB2YXIgaW5mb0xvZyA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGNvbXBpbGUgc2hhZGVyOlxcblwiLmNvbmNhdChpbmZvTG9nKSk7XG4gIH1cblxuICByZXR1cm4gc2hhZGVyO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcHJvZ3JhbSBmcm9tIDIgc2hhZGVycy5cbiAqXG4gKiBAcGFyYW0geyFXZWJHTFJlbmRlcmluZ0NvbnRleHR9IGdsIFRoZSBXZWJHTCBjb250ZXh0LlxuICogQHBhcmFtIHshV2ViR0xTaGFkZXJ9IHZlcnRleFNoYWRlciBBIHZlcnRleCBzaGFkZXIuXG4gKiBAcGFyYW0geyFXZWJHTFNoYWRlcn0gZnJhZ21lbnRTaGFkZXIgQSBmcmFnbWVudCBzaGFkZXIuXG4gKiBAcmV0dXJuIHshV2ViR0xQcm9ncmFtfSBBIHByb2dyYW0uXG4gKiBAbWVtYmVyb2YgV2ViR0xSZW5kZXJpbmdcbiAqL1xuXG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0oZ2wsIHZlcnRleFNoYWRlciwgZnJhZ21lbnRTaGFkZXIpIHtcbiAgLy8gQ3JlYXRlIGEgcHJvZ3JhbS5cbiAgdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7IC8vIEF0dGFjaCB0aGUgc2hhZGVycy5cblxuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcbiAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTsgLy8gTGluayB0aGUgcHJvZ3JhbS5cblxuICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTsgLy8gQ2hlY2sgaWYgaXQgbGlua2VkLlxuXG4gIHZhciBzdWNjZXNzID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XG5cbiAgaWYgKCFzdWNjZXNzICYmICFnbC5pc0NvbnRleHRMb3N0KCkpIHtcbiAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHRoZSBsaW5rXG4gICAgdmFyIGluZm9Mb2cgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcbiAgICBjb25zb2xlLmVycm9yKFwiV2ViR0wgcHJvZ3JhbSBmaWxlZCB0byBsaW5rOlxcblwiLmNvbmNhdChpbmZvTG9nKSk7XG4gIH1cblxuICByZXR1cm4gcHJvZ3JhbTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHByb2dyYW0gZnJvbSAyIHNoYWRlcnMgc291cmNlIChTdHJpbmdzKVxuICogQHBhcmFtICB7IVdlYkdMUmVuZGVyaW5nQ29udGV4dH0gZ2wgICAgICAgICAgICAgIFRoZSBXZWJHTCBjb250ZXh0LlxuICogQHBhcmFtICB7IVdlYkdMU2hhZGVyfSB2ZXJ0ZXhTaGFkZXJTcmMgICBWZXJ0ZXggc2hhZGVyIHN0cmluZ1xuICogQHBhcmFtICB7IVdlYkdMU2hhZGVyfSBmcmFnU2hhZGVyU3JjIEZyYWdtZW50IHNoYWRlciBzdHJpbmdcbiAqIEByZXR1cm4geyFXZWJHTFByb2dyYW19ICAgICAgICAgICAgICAgICBBIHByb2dyYW1cbiAqIEBtZW1iZXJvZiBXZWJHTFJlbmRlcmluZ1xuICovXG5cblxuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChmdW5jdGlvbiAoZ2wsIHZlcnRleFNoYWRlclNyYywgZnJhZ1NoYWRlclNyYykge1xuICB2YXIgdmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcihnbCwgdmVydGV4U2hhZGVyU3JjLCBnbC5WRVJURVhfU0hBREVSKTtcbiAgdmFyIGZyYWdTaGFkZXIgPSBjb21waWxlU2hhZGVyKGdsLCBmcmFnU2hhZGVyU3JjLCBnbC5GUkFHTUVOVF9TSEFERVIpO1xuICByZXR1cm4gY3JlYXRlUHJvZ3JhbShnbCwgdmVydGV4U2hhZGVyLCBmcmFnU2hhZGVyKTtcbn0pO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3dlYmdsL2luZGV4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi93ZWJnbC9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JlbmRlcmVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JlbmRlcmVyLmpzICovIFwiLi93ZWJnbC9yZW5kZXJlci5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY3JlYXRlUHJvZ3JhbUZyb21TdHJpbmdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY3JlYXRlUHJvZ3JhbUZyb21TdHJpbmcuanMgKi8gXCIuL3dlYmdsL2NyZWF0ZVByb2dyYW1Gcm9tU3RyaW5nLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF90ZXh0dXJlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGV4dHVyZUNhY2hlLmpzICovIFwiLi93ZWJnbC90ZXh0dXJlQ2FjaGUuanNcIik7XG5cblxuXG4vKipcbiAqIEBtb2R1bGUgV2ViR0xSZW5kZXJpbmdcbiAqL1xuXG52YXIgbW9kID0ge1xuICBjcmVhdGVQcm9ncmFtRnJvbVN0cmluZzogX2NyZWF0ZVByb2dyYW1Gcm9tU3RyaW5nX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdLFxuICByZW5kZXJlcjoge1xuICAgIHJlbmRlcjogX3JlbmRlcmVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJyZW5kZXJcIl0sXG4gICAgaW5pdFJlbmRlcmVyOiBfcmVuZGVyZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImluaXRSZW5kZXJlclwiXSxcbiAgICBnZXRSZW5kZXJDYW52YXM6IF9yZW5kZXJlcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZ2V0UmVuZGVyQ2FudmFzXCJdLFxuICAgIGlzV2ViR0xBdmFpbGFibGU6IF9yZW5kZXJlcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiaXNXZWJHTEF2YWlsYWJsZVwiXVxuICB9LFxuICB0ZXh0dXJlQ2FjaGU6IF90ZXh0dXJlQ2FjaGVfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl1cbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkobW9kLCAnaXNXZWJHTEluaXRpYWxpemVkJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX3JlbmRlcmVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJpc1dlYkdMSW5pdGlhbGl6ZWRcIl07XG4gIH1cbn0pO1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBfX3dlYnBhY2tfZXhwb3J0c19fW1wiZGVmYXVsdFwiXSA9IChtb2QpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3dlYmdsL3JlbmRlcmVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi93ZWJnbC9yZW5kZXJlci5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGlzV2ViR0xJbml0aWFsaXplZCwgZ2V0UmVuZGVyQ2FudmFzLCBpbml0UmVuZGVyZXIsIHJlbmRlciwgaXNXZWJHTEF2YWlsYWJsZSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJpc1dlYkdMSW5pdGlhbGl6ZWRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpc1dlYkdMSW5pdGlhbGl6ZWQ7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImdldFJlbmRlckNhbnZhc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGdldFJlbmRlckNhbnZhczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW5pdFJlbmRlcmVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5pdFJlbmRlcmVyOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZW5kZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZW5kZXI7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImlzV2ViR0xBdmFpbGFibGVcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpc1dlYkdMQXZhaWxhYmxlOyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc2hhZGVyc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zaGFkZXJzL2luZGV4LmpzICovIFwiLi93ZWJnbC9zaGFkZXJzL2luZGV4LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF92ZXJ0ZXhTaGFkZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdmVydGV4U2hhZGVyLmpzICovIFwiLi93ZWJnbC92ZXJ0ZXhTaGFkZXIuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RleHR1cmVDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90ZXh0dXJlQ2FjaGUuanMgKi8gXCIuL3dlYmdsL3RleHR1cmVDYWNoZS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY3JlYXRlUHJvZ3JhbUZyb21TdHJpbmdfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY3JlYXRlUHJvZ3JhbUZyb21TdHJpbmcuanMgKi8gXCIuL3dlYmdsL2NyZWF0ZVByb2dyYW1Gcm9tU3RyaW5nLmpzXCIpO1xuLyogZXNsaW50IG5vLWJpdHdpc2U6IDAgKi9cblxuXG5cblxudmFyIHJlbmRlckNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xudmFyIGdsO1xudmFyIHRleENvb3JkQnVmZmVyO1xudmFyIHBvc2l0aW9uQnVmZmVyO1xudmFyIGlzV2ViR0xJbml0aWFsaXplZCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBnZXRSZW5kZXJDYW52YXMoKSB7XG4gIHJldHVybiByZW5kZXJDYW52YXM7XG59XG5cbmZ1bmN0aW9uIGluaXRTaGFkZXJzKCkge1xuICBmb3IgKHZhciBpZCBpbiBfc2hhZGVyc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wic2hhZGVyc1wiXSkge1xuICAgIC8vIENvbnNvbGUubG9nKFwiV0VCR0w6IExvYWRpbmcgc2hhZGVyXCIsIGlkKTtcbiAgICB2YXIgc2hhZGVyID0gX3NoYWRlcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInNoYWRlcnNcIl1baWRdO1xuICAgIHNoYWRlci5hdHRyaWJ1dGVzID0ge307XG4gICAgc2hhZGVyLnVuaWZvcm1zID0ge307XG4gICAgc2hhZGVyLnZlcnQgPSBfdmVydGV4U2hhZGVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJ2ZXJ0ZXhTaGFkZXJcIl07XG4gICAgc2hhZGVyLnByb2dyYW0gPSBPYmplY3QoX2NyZWF0ZVByb2dyYW1Gcm9tU3RyaW5nX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJkZWZhdWx0XCJdKShnbCwgc2hhZGVyLnZlcnQsIHNoYWRlci5mcmFnKTtcbiAgICBzaGFkZXIuYXR0cmlidXRlcy50ZXhDb29yZExvY2F0aW9uID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24oc2hhZGVyLnByb2dyYW0sICdhX3RleENvb3JkJyk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoc2hhZGVyLmF0dHJpYnV0ZXMudGV4Q29vcmRMb2NhdGlvbik7XG4gICAgc2hhZGVyLmF0dHJpYnV0ZXMucG9zaXRpb25Mb2NhdGlvbiA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHNoYWRlci5wcm9ncmFtLCAnYV9wb3NpdGlvbicpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHNoYWRlci5hdHRyaWJ1dGVzLnBvc2l0aW9uTG9jYXRpb24pO1xuICAgIHNoYWRlci51bmlmb3Jtcy5yZXNvbHV0aW9uTG9jYXRpb24gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24oc2hhZGVyLnByb2dyYW0sICd1X3Jlc29sdXRpb24nKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0UmVuZGVyZXIoKSB7XG4gIGlmIChpc1dlYkdMSW5pdGlhbGl6ZWQgPT09IHRydWUpIHtcbiAgICAvLyBDb25zb2xlLmxvZyhcIldFQkdMIFJlbmRlcmVyIGFscmVhZHkgaW5pdGlhbGl6ZWRcIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluaXRXZWJHTChyZW5kZXJDYW52YXMpKSB7XG4gICAgaW5pdEJ1ZmZlcnMoKTtcbiAgICBpbml0U2hhZGVycygpOyAvLyBDb25zb2xlLmxvZyhcIldFQkdMIFJlbmRlcmVyIGluaXRpYWxpemVkIVwiKTtcblxuICAgIGlzV2ViR0xJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlUmVjdGFuZ2xlKGdsLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFt3aWR0aCwgaGVpZ2h0LCAwLCBoZWlnaHQsIHdpZHRoLCAwLCAwLCAwXSksIGdsLlNUQVRJQ19EUkFXKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTG9zdENvbnRleHQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc29sZS53YXJuKCdXZWJHTCBDb250ZXh0IExvc3QhJyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVJlc3RvcmVkQ29udGV4dChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBpc1dlYkdMSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgX3RleHR1cmVDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXS5wdXJnZUNhY2hlKCk7XG4gIGluaXRSZW5kZXJlcigpOyAvLyBDb25zb2xlLmxvZygnV2ViR0wgQ29udGV4dCBSZXN0b3JlZC4nKTtcbn1cblxuZnVuY3Rpb24gaW5pdFdlYkdMKGNhbnZhcykge1xuICBnbCA9IG51bGw7XG5cbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gZ3JhYiB0aGUgc3RhbmRhcmQgY29udGV4dC4gSWYgaXQgZmFpbHMsIGZhbGxiYWNrIHRvIGV4cGVyaW1lbnRhbC5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIGRlc3luY2hyb25pemVkOiB0cnVlLFxuICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlIC8vIFByZXNlcnZlIGJ1ZmZlciBzbyB3ZSBjYW4gY29weSB0byBkaXNwbGF5IGNhbnZhcyBlbGVtZW50XG5cbiAgICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tIFRlc3RpbmcgcHVycG9zZXMgLS0tLS0tLS0tLS0tLVxuICAgIC8vIElmIChkZWJ1ZyA9PT0gdHJ1ZSAmJiBXZWJHTERlYnVnVXRpbHMpIHtcbiAgICAvLyAgICBSZW5kZXJDYW52YXMgPSBXZWJHTERlYnVnVXRpbHMubWFrZUxvc3RDb250ZXh0U2ltdWxhdGluZ0NhbnZhcyhyZW5kZXJDYW52YXMpO1xuICAgIC8vIH1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tIFRlc3RpbmcgcHVycG9zZXMgLS0tLS0tLS0tLS0tLVxuXG4gICAgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJywgb3B0aW9ucyk7IC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGNvbnRleHQgbG9zdCAvIGNvbnRleHQgcmVzdG9yZWRcblxuICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgaGFuZGxlTG9zdENvbnRleHQsIGZhbHNlKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsIGhhbmRsZUxvc3RDb250ZXh0LCBmYWxzZSk7XG4gICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgaGFuZGxlUmVzdG9yZWRDb250ZXh0LCBmYWxzZSk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgaGFuZGxlUmVzdG9yZWRDb250ZXh0LCBmYWxzZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBjcmVhdGluZyBXZWJHTCBjb250ZXh0Jyk7XG4gIH0gLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIEdMIGNvbnRleHQsIGdpdmUgdXAgbm93XG5cblxuICBpZiAoIWdsKSB7XG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGluaXRpYWxpemUgV2ViR0wuIFlvdXIgYnJvd3NlciBtYXkgbm90IHN1cHBvcnQgaXQuJyk7XG4gICAgZ2wgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGdsO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbWFnZSBkYXRhIHR5cGUgYXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKiBAcGFyYW0ge2FueX0gaW1hZ2UgVGhlIGNvcm5lcnN0b25lIGltYWdlIG9iamVjdFxuICogQHJldHVybnMge3N0cmluZ30gaW1hZ2UgZGF0YSB0eXBlIChyZ2IsIGlpbnQxNiwgdWludDE2LCBpbnQ4IGFuZCB1aW50OClcbiAqIEBtZW1iZXJvZiBXZWJHTFJlbmRlcmluZ1xuICovXG5cblxuZnVuY3Rpb24gZ2V0SW1hZ2VEYXRhVHlwZShpbWFnZSkge1xuICBpZiAoaW1hZ2UuY29sb3IpIHtcbiAgICByZXR1cm4gJ3JnYic7XG4gIH1cblxuICB2YXIgcGl4ZWxEYXRhID0gaW1hZ2UuZ2V0UGl4ZWxEYXRhKCk7XG5cbiAgaWYgKHBpeGVsRGF0YSBpbnN0YW5jZW9mIEludDE2QXJyYXkpIHtcbiAgICByZXR1cm4gJ2ludDE2JztcbiAgfVxuXG4gIGlmIChwaXhlbERhdGEgaW5zdGFuY2VvZiBVaW50MTZBcnJheSkge1xuICAgIHJldHVybiAndWludDE2JztcbiAgfVxuXG4gIGlmIChwaXhlbERhdGEgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpIHtcbiAgICByZXR1cm4gJ2ludDgnO1xuICB9XG5cbiAgcmV0dXJuICd1aW50OCc7XG59XG5cbmZ1bmN0aW9uIGdldFNoYWRlclByb2dyYW0oaW1hZ2UpIHtcbiAgdmFyIGRhdGF0eXBlID0gZ2V0SW1hZ2VEYXRhVHlwZShpbWFnZSk7IC8vIFdlIG5lZWQgYSBtZWNoYW5pc20gZm9yXG4gIC8vIENob29zaW5nIHRoZSBzaGFkZXIgYmFzZWQgb24gdGhlIGltYWdlIGRhdGF0eXBlXG4gIC8vIENvbnNvbGUubG9nKFwiRGF0YXR5cGU6IFwiICsgZGF0YXR5cGUpO1xuXG4gIGlmIChfc2hhZGVyc19pbmRleF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wic2hhZGVyc1wiXS5oYXNPd25Qcm9wZXJ0eShkYXRhdHlwZSkpIHtcbiAgICByZXR1cm4gX3NoYWRlcnNfaW5kZXhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcInNoYWRlcnNcIl1bZGF0YXR5cGVdO1xuICB9XG5cbiAgcmV0dXJuIF9zaGFkZXJzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJzaGFkZXJzXCJdLnJnYjtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVUZXh0dXJlKGltYWdlKSB7XG4gIHZhciBURVhUVVJFX0ZPUk1BVCA9IHtcbiAgICB1aW50ODogZ2wuTFVNSU5BTkNFLFxuICAgIGludDg6IGdsLkxVTUlOQU5DRV9BTFBIQSxcbiAgICB1aW50MTY6IGdsLkxVTUlOQU5DRV9BTFBIQSxcbiAgICBpbnQxNjogZ2wuUkdCLFxuICAgIHJnYjogZ2wuUkdCXG4gIH07XG4gIHZhciBURVhUVVJFX0JZVEVTID0ge1xuICAgIGludDg6IDEsXG4gICAgLy8gTHVtaW5hbmNlXG4gICAgdWludDE2OiAyLFxuICAgIC8vIEx1bWluYW5jZSArIEFscGhhXG4gICAgaW50MTY6IDMsXG4gICAgLy8gUkdCXG4gICAgcmdiOiAzIC8vIFJHQlxuXG4gIH07XG4gIHZhciBpbWFnZURhdGFUeXBlID0gZ2V0SW1hZ2VEYXRhVHlwZShpbWFnZSk7XG4gIHZhciBmb3JtYXQgPSBURVhUVVJFX0ZPUk1BVFtpbWFnZURhdGFUeXBlXTsgLy8gR0wgdGV4dHVyZSBjb25maWd1cmF0aW9uXG5cbiAgdmFyIHRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTkVBUkVTVCk7XG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBnbC5ORUFSRVNUKTtcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSk7XG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLkNMQU1QX1RPX0VER0UpO1xuICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfQUxJR05NRU5ULCAxKTtcbiAgdmFyIGltYWdlRGF0YSA9IF9zaGFkZXJzX2luZGV4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkYXRhVXRpbGl0aWVzXCJdW2ltYWdlRGF0YVR5cGVdLnN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhKGltYWdlLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTtcbiAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBmb3JtYXQsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQsIDAsIGZvcm1hdCwgZ2wuVU5TSUdORURfQllURSwgaW1hZ2VEYXRhKTsgLy8gQ2FsY3VsYXRlIHRoZSBzaXplIGluIGJ5dGVzIG9mIHRoaXMgaW1hZ2UgaW4gbWVtb3J5XG5cbiAgdmFyIHNpemVJbkJ5dGVzID0gaW1hZ2Uud2lkdGggKiBpbWFnZS5oZWlnaHQgKiBURVhUVVJFX0JZVEVTW2ltYWdlRGF0YVR5cGVdO1xuICByZXR1cm4ge1xuICAgIHRleHR1cmU6IHRleHR1cmUsXG4gICAgc2l6ZUluQnl0ZXM6IHNpemVJbkJ5dGVzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEltYWdlVGV4dHVyZShpbWFnZSkge1xuICB2YXIgaW1hZ2VUZXh0dXJlID0gX3RleHR1cmVDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXS5nZXRJbWFnZVRleHR1cmUoaW1hZ2UuaW1hZ2VJZCk7XG5cbiAgaWYgKCFpbWFnZVRleHR1cmUpIHtcbiAgICAvLyBDb25zb2xlLmxvZyhcIkdlbmVyYXRpbmcgdGV4dHVyZSBmb3IgaW1hZ2VpZDogXCIsIGltYWdlLmltYWdlSWQpO1xuICAgIGltYWdlVGV4dHVyZSA9IGdlbmVyYXRlVGV4dHVyZShpbWFnZSk7XG4gICAgX3RleHR1cmVDYWNoZV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fW1wiZGVmYXVsdFwiXS5wdXRJbWFnZVRleHR1cmUoaW1hZ2UsIGltYWdlVGV4dHVyZSk7XG4gIH1cblxuICByZXR1cm4gaW1hZ2VUZXh0dXJlLnRleHR1cmU7XG59XG5cbmZ1bmN0aW9uIGluaXRCdWZmZXJzKCkge1xuICBwb3NpdGlvbkJ1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgcG9zaXRpb25CdWZmZXIpO1xuICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMCwgMSwgMSwgMCwgMCwgMF0pLCBnbC5TVEFUSUNfRFJBVyk7XG4gIHRleENvb3JkQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhDb29yZEJ1ZmZlcik7XG4gIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KFsxLjAsIDEuMCwgMC4wLCAxLjAsIDEuMCwgMC4wLCAwLjAsIDAuMF0pLCBnbC5TVEFUSUNfRFJBVyk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclF1YWQoc2hhZGVyLCBwYXJhbWV0ZXJzLCB0ZXh0dXJlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGdsLmNsZWFyQ29sb3IoMS4wLCAwLjAsIDAuMCwgMS4wKTtcbiAgZ2wudmlld3BvcnQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcbiAgZ2wudXNlUHJvZ3JhbShzaGFkZXIucHJvZ3JhbSk7XG4gIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0ZXhDb29yZEJ1ZmZlcik7XG4gIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoc2hhZGVyLmF0dHJpYnV0ZXMudGV4Q29vcmRMb2NhdGlvbiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHBvc2l0aW9uQnVmZmVyKTtcbiAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihzaGFkZXIuYXR0cmlidXRlcy5wb3NpdGlvbkxvY2F0aW9uLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gIGZvciAodmFyIGtleSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgdmFyIHVuaWZvcm1Mb2NhdGlvbiA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihzaGFkZXIucHJvZ3JhbSwga2V5KTtcblxuICAgIGlmICghdW5pZm9ybUxvY2F0aW9uKSB7XG4gICAgICBjb250aW51ZTsgLy8gRGlzYWJsaW5nIHRoaXMgZXJyb3IgZm9yIG5vdyBzaW5jZSBSR0IgcmVxdWlyZXMgbWluUGl4ZWxWYWx1ZVxuICAgICAgLy8gYnV0IHRoZSBvdGhlciBzaGFkZXJzIGRvIG5vdC5cbiAgICAgIC8vIHRocm93IGBDb3VsZCBub3QgYWNjZXNzIGxvY2F0aW9uIGZvciB1bmlmb3JtOiAke2tleX1gO1xuICAgIH1cblxuICAgIHZhciB1bmlmb3JtID0gcGFyYW1ldGVyc1trZXldO1xuICAgIHZhciB0eXBlID0gdW5pZm9ybS50eXBlO1xuICAgIHZhciB2YWx1ZSA9IHVuaWZvcm0udmFsdWU7XG5cbiAgICBpZiAodHlwZSA9PT0gJ2knKSB7XG4gICAgICBnbC51bmlmb3JtMWkodW5pZm9ybUxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnZicpIHtcbiAgICAgIGdsLnVuaWZvcm0xZih1bmlmb3JtTG9jYXRpb24sIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICcyZicpIHtcbiAgICAgIGdsLnVuaWZvcm0yZih1bmlmb3JtTG9jYXRpb24sIHZhbHVlWzBdLCB2YWx1ZVsxXSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUmVjdGFuZ2xlKGdsLCB3aWR0aCwgaGVpZ2h0KTtcbiAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpO1xuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFX1NUUklQLCAwLCA0KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKGVuYWJsZWRFbGVtZW50KSB7XG4gIC8vIFJlc2l6ZSB0aGUgY2FudmFzXG4gIHZhciBpbWFnZSA9IGVuYWJsZWRFbGVtZW50LmltYWdlO1xuICByZW5kZXJDYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgcmVuZGVyQ2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgdmFyIHZpZXdwb3J0ID0gZW5hYmxlZEVsZW1lbnQudmlld3BvcnQ7IC8vIFJlbmRlciB0aGUgY3VycmVudCBpbWFnZVxuXG4gIHZhciBzaGFkZXIgPSBnZXRTaGFkZXJQcm9ncmFtKGltYWdlKTtcbiAgdmFyIHRleHR1cmUgPSBnZXRJbWFnZVRleHR1cmUoaW1hZ2UpO1xuICB2YXIgcGFyYW1ldGVycyA9IHtcbiAgICB1X3Jlc29sdXRpb246IHtcbiAgICAgIHR5cGU6ICcyZicsXG4gICAgICB2YWx1ZTogW2ltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHRdXG4gICAgfSxcbiAgICB3Yzoge1xuICAgICAgdHlwZTogJ2YnLFxuICAgICAgdmFsdWU6IHZpZXdwb3J0LnZvaS53aW5kb3dDZW50ZXJcbiAgICB9LFxuICAgIHd3OiB7XG4gICAgICB0eXBlOiAnZicsXG4gICAgICB2YWx1ZTogdmlld3BvcnQudm9pLndpbmRvd1dpZHRoXG4gICAgfSxcbiAgICBzbG9wZToge1xuICAgICAgdHlwZTogJ2YnLFxuICAgICAgdmFsdWU6IGltYWdlLnNsb3BlXG4gICAgfSxcbiAgICBpbnRlcmNlcHQ6IHtcbiAgICAgIHR5cGU6ICdmJyxcbiAgICAgIHZhbHVlOiBpbWFnZS5pbnRlcmNlcHRcbiAgICB9LFxuICAgIG1pblBpeGVsVmFsdWU6IHtcbiAgICAgIHR5cGU6ICdmJyxcbiAgICAgIHZhbHVlOiBpbWFnZS5taW5QaXhlbFZhbHVlXG4gICAgfSxcbiAgICBpbnZlcnQ6IHtcbiAgICAgIHR5cGU6ICdpJyxcbiAgICAgIHZhbHVlOiB2aWV3cG9ydC5pbnZlcnQgPyAxIDogMFxuICAgIH1cbiAgfTtcbiAgcmVuZGVyUXVhZChzaGFkZXIsIHBhcmFtZXRlcnMsIHRleHR1cmUsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xuICByZXR1cm4gcmVuZGVyQ2FudmFzO1xufVxuZnVuY3Rpb24gaXNXZWJHTEF2YWlsYWJsZSgpIHtcbiAgLy8gQWRhcHRlZCBmcm9tXG4gIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTg5OTgwNy90aHJlZS1qcy1kZXRlY3Qtd2ViZ2wtc3VwcG9ydC1hbmQtZmFsbGJhY2stdG8tcmVndWxhci1jYW52YXNcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdDogdHJ1ZVxuICB9O1xuXG4gIHRyeSB7XG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHJldHVybiBCb29sZWFuKHdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQpICYmIChjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRpb25zKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJywgb3B0aW9ucykpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvc2hhZGVycy9pbmRleC5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi93ZWJnbC9zaGFkZXJzL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBzaGFkZXJzLCBkYXRhVXRpbGl0aWVzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInNoYWRlcnNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBzaGFkZXJzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkYXRhVXRpbGl0aWVzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0YVV0aWxpdGllczsgfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2ludDE2X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludDE2LmpzICovIFwiLi93ZWJnbC9zaGFkZXJzL2ludDE2LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9pbnQ4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2ludDguanMgKi8gXCIuL3dlYmdsL3NoYWRlcnMvaW50OC5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcmdiX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3JnYi5qcyAqLyBcIi4vd2ViZ2wvc2hhZGVycy9yZ2IuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3VpbnQxNl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91aW50MTYuanMgKi8gXCIuL3dlYmdsL3NoYWRlcnMvdWludDE2LmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF91aW50OF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi91aW50OC5qcyAqLyBcIi4vd2ViZ2wvc2hhZGVycy91aW50OC5qc1wiKTtcblxuXG5cblxuXG52YXIgc2hhZGVycyA9IHtcbiAgaW50MTY6IF9pbnQxNl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiaW50MTZTaGFkZXJcIl0sXG4gIGludDg6IF9pbnQ4X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJpbnQ4U2hhZGVyXCJdLFxuICByZ2I6IF9yZ2JfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInJnYlNoYWRlclwiXSxcbiAgdWludDE2OiBfdWludDE2X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX19bXCJ1aW50MTZTaGFkZXJcIl0sXG4gIHVpbnQ4OiBfdWludDhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfX1tcInVpbnQ4U2hhZGVyXCJdXG59O1xudmFyIGRhdGFVdGlsaXRpZXMgPSB7XG4gIGludDE2OiBfaW50MTZfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImludDE2RGF0YVV0aWxpdGllc1wiXSxcbiAgaW50ODogX2ludDhfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImludDhEYXRhVXRpbGl0aWVzXCJdLFxuICByZ2I6IF9yZ2JfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcInJnYkRhdGFVdGlsaXRpZXNcIl0sXG4gIHVpbnQxNjogX3VpbnQxNl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fW1widWludDE2RGF0YVV0aWxpdGllc1wiXSxcbiAgdWludDg6IF91aW50OF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fW1widWludDhEYXRhVXRpbGl0aWVzXCJdXG59O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvc2hhZGVycy9pbnQxNi5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi93ZWJnbC9zaGFkZXJzL2ludDE2LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiBpbnQxNkRhdGFVdGlsaXRpZXMsIGludDE2U2hhZGVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImludDE2RGF0YVV0aWxpdGllc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGludDE2RGF0YVV0aWxpdGllczsgfSk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiaW50MTZTaGFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbnQxNlNoYWRlcjsgfSk7XG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xudmFyIGludDE2U2hhZGVyID0ge307XG4vKipcbiAqIENvbnZlcnQgc3RvcmVkIHBpeGVsIGRhdGEgdG8gaW1hZ2UgZGF0YS5cbiAqXG4gKiBQYWNrIGludDE2IGludG8gdGhyZWUgdWludDggY2hhbm5lbHMgKHIsIGcsIGIpXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBUaGUgaW1hZ2UgZGF0YSBmb3IgdXNlIGJ5IHRoZSBXZWJHTCBzaGFkZXJcbiAqIEBtZW1iZXJvZiBXZWJHTFJlbmRlcmluZ1xuICovXG5cbmZ1bmN0aW9uIHN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhKGltYWdlKSB7XG4gIC8vIFRyYW5zZmVyIGltYWdlIGRhdGEgdG8gYWxwaGEgYW5kIGx1bWluYW5jZSBjaGFubmVscyBvZiBXZWJHTCB0ZXh0dXJlXG4gIC8vIENyZWRpdCB0byBAanBhbWJydW4gYW5kIEBmZXJuYW5kb2pzZ1xuICAvLyBQYWNrIGludDE2IGludG8gdGhyZWUgdWludDggY2hhbm5lbHMgKHIsIGcsIGIpXG4gIHZhciBwaXhlbERhdGEgPSBpbWFnZS5nZXRQaXhlbERhdGEoKTtcbiAgdmFyIG51bWJlck9mQ2hhbm5lbHMgPSAzO1xuICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGltYWdlLndpZHRoICogaW1hZ2UuaGVpZ2h0ICogbnVtYmVyT2ZDaGFubmVscyk7XG4gIHZhciBvZmZzZXQgPSAwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGl4ZWxEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHZhbCA9IE1hdGguYWJzKHBpeGVsRGF0YVtpXSk7XG4gICAgZGF0YVtvZmZzZXQrK10gPSB2YWwgJiAweEZGO1xuICAgIGRhdGFbb2Zmc2V0KytdID0gdmFsID4+IDg7XG4gICAgZGF0YVtvZmZzZXQrK10gPSBwaXhlbERhdGFbaV0gPCAwID8gMCA6IDE7IC8vIDAgRm9yIG5lZ2F0aXZlLCAxIGZvciBwb3NpdGl2ZVxuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbnZhciBpbnQxNkRhdGFVdGlsaXRpZXMgPSB7XG4gIHN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhOiBzdG9yZWRQaXhlbERhdGFUb0ltYWdlRGF0YVxufTtcbmludDE2U2hhZGVyLmZyYWcgPSAncHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JyArICd1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlOycgKyAndW5pZm9ybSBmbG9hdCB3dzsnICsgJ3VuaWZvcm0gZmxvYXQgd2M7JyArICd1bmlmb3JtIGZsb2F0IHNsb3BlOycgKyAndW5pZm9ybSBmbG9hdCBpbnRlcmNlcHQ7JyArICd1bmlmb3JtIGludCBpbnZlcnQ7JyArICd2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDsnICsgJ3ZvaWQgbWFpbigpIHsnICsgLy8gR2V0IHRleHR1cmVcbid2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpOycgKyAvLyBDYWxjdWxhdGUgbHVtaW5hbmNlIGZyb20gcGFja2VkIHRleHR1cmVcbidmbG9hdCBpbnRlbnNpdHkgPSBjb2xvci5yKjI1Ni4wICsgY29sb3IuZyo2NTUzNi4wOycgKyAnaWYgKGNvbG9yLmIgPT0gMC4wKScgKyAnaW50ZW5zaXR5ID0gLWludGVuc2l0eTsnICsgLy8gUmVzY2FsZSBiYXNlZCBvbiBzbG9wZSBhbmQgd2luZG93IHNldHRpbmdzXG4naW50ZW5zaXR5ID0gaW50ZW5zaXR5ICogc2xvcGUgKyBpbnRlcmNlcHQ7JyArICdmbG9hdCBjZW50ZXIwID0gd2MgLSAwLjU7JyArICdmbG9hdCB3aWR0aDAgPSBtYXgod3csIDEuMCk7JyArICdpbnRlbnNpdHkgPSAoaW50ZW5zaXR5IC0gY2VudGVyMCkgLyB3aWR0aDAgKyAwLjU7JyArIC8vIENsYW1wIGludGVuc2l0eVxuJ2ludGVuc2l0eSA9IGNsYW1wKGludGVuc2l0eSwgMC4wLCAxLjApOycgKyAvLyBSR0JBIG91dHB1dFxuJ2dsX0ZyYWdDb2xvciA9IHZlYzQoaW50ZW5zaXR5LCBpbnRlbnNpdHksIGludGVuc2l0eSwgMS4wKTsnICsgLy8gQXBwbHkgYW55IGludmVyc2lvbiBuZWNlc3NhcnlcbidpZiAoaW52ZXJ0ID09IDEpJyArICdnbF9GcmFnQ29sb3IucmdiID0gMS4wIC0gZ2xfRnJhZ0NvbG9yLnJnYjsnICsgJ30nO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvc2hhZGVycy9pbnQ4LmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vd2ViZ2wvc2hhZGVycy9pbnQ4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGludDhEYXRhVXRpbGl0aWVzLCBpbnQ4U2hhZGVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImludDhEYXRhVXRpbGl0aWVzXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW50OERhdGFVdGlsaXRpZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImludDhTaGFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbnQ4U2hhZGVyOyB9KTtcbnZhciBpbnQ4U2hhZGVyID0ge307XG4vKipcbiAqIENvbnZlcnQgc3RvcmVkIHBpeGVsIGRhdGEgdG8gaW1hZ2UgZGF0YS5cbiAqXG4gKiBTdG9yZSBkYXRhIGluIFVpbnQ4QXJyYXlcbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFRoZSBpbWFnZSBkYXRhIGZvciB1c2UgYnkgdGhlIFdlYkdMIHNoYWRlclxuICogQG1lbWJlcm9mIFdlYkdMUmVuZGVyaW5nXG4gKi9cblxuZnVuY3Rpb24gc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGEoaW1hZ2UpIHtcbiAgLy8gVHJhbnNmZXIgaW1hZ2UgZGF0YSB0byBhbHBoYSBjaGFubmVsIG9mIFdlYkdMIHRleHR1cmVcbiAgLy8gU3RvcmUgZGF0YSBpbiBVaW50OEFycmF5XG4gIHZhciBwaXhlbERhdGEgPSBpbWFnZS5nZXRQaXhlbERhdGEoKTtcbiAgdmFyIG51bWJlck9mQ2hhbm5lbHMgPSAyO1xuICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGltYWdlLndpZHRoICogaW1hZ2UuaGVpZ2h0ICogbnVtYmVyT2ZDaGFubmVscyk7XG4gIHZhciBvZmZzZXQgPSAwO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGl4ZWxEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgZGF0YVtvZmZzZXQrK10gPSBwaXhlbERhdGFbaV07XG4gICAgZGF0YVtvZmZzZXQrK10gPSBwaXhlbERhdGFbaV0gPCAwID8gMCA6IDE7IC8vIDAgRm9yIG5lZ2F0aXZlLCAxIGZvciBwb3NpdGl2ZVxuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbnZhciBpbnQ4RGF0YVV0aWxpdGllcyA9IHtcbiAgc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGE6IHN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhXG59O1xuaW50OFNoYWRlci5mcmFnID0gJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgKyAndW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTsnICsgJ3VuaWZvcm0gZmxvYXQgd3c7JyArICd1bmlmb3JtIGZsb2F0IHdjOycgKyAndW5pZm9ybSBmbG9hdCBzbG9wZTsnICsgJ3VuaWZvcm0gZmxvYXQgaW50ZXJjZXB0OycgKyAndW5pZm9ybSBpbnQgaW52ZXJ0OycgKyAndmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7JyArICd2b2lkIG1haW4oKSB7JyArIC8vIEdldCB0ZXh0dXJlXG4ndmVjNCBjb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTsnICsgLy8gQ2FsY3VsYXRlIGx1bWluYW5jZSBmcm9tIHBhY2tlZCB0ZXh0dXJlXG4nZmxvYXQgaW50ZW5zaXR5ID0gY29sb3IucioyNTYuOycgKyAnaWYgKGNvbG9yLmEgPT0gMC4wKScgKyAnaW50ZW5zaXR5ID0gLWludGVuc2l0eTsnICsgLy8gUmVzY2FsZSBiYXNlZCBvbiBzbG9wZSBhbmQgd2luZG93IHNldHRpbmdzXG4naW50ZW5zaXR5ID0gaW50ZW5zaXR5ICogc2xvcGUgKyBpbnRlcmNlcHQ7JyArICdmbG9hdCBjZW50ZXIwID0gd2MgLSAwLjU7JyArICdmbG9hdCB3aWR0aDAgPSBtYXgod3csIDEuMCk7JyArICdpbnRlbnNpdHkgPSAoaW50ZW5zaXR5IC0gY2VudGVyMCkgLyB3aWR0aDAgKyAwLjU7JyArIC8vIENsYW1wIGludGVuc2l0eVxuJ2ludGVuc2l0eSA9IGNsYW1wKGludGVuc2l0eSwgMC4wLCAxLjApOycgKyAvLyBSR0JBIG91dHB1dFxuJ2dsX0ZyYWdDb2xvciA9IHZlYzQoaW50ZW5zaXR5LCBpbnRlbnNpdHksIGludGVuc2l0eSwgMS4wKTsnICsgLy8gQXBwbHkgYW55IGludmVyc2lvbiBuZWNlc3NhcnlcbidpZiAoaW52ZXJ0ID09IDEpJyArICdnbF9GcmFnQ29sb3IucmdiID0gMS4wIC0gZ2xfRnJhZ0NvbG9yLnJnYjsnICsgJ30nO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvc2hhZGVycy9yZ2IuanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3dlYmdsL3NoYWRlcnMvcmdiLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogcmdiRGF0YVV0aWxpdGllcywgcmdiU2hhZGVyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInJnYkRhdGFVdGlsaXRpZXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZ2JEYXRhVXRpbGl0aWVzOyB9KTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJyZ2JTaGFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiByZ2JTaGFkZXI7IH0pO1xudmFyIHJnYlNoYWRlciA9IHt9O1xuLyoqXG4gKiBDb252ZXJ0IHN0b3JlZCBwaXhlbCBkYXRhIHRvIGltYWdlIGRhdGEuXG4gKlxuICogUGFjayBSR0IgaW1hZ2VzIGludG8gYSAzLWNoYW5uZWwgUkdCIHRleHR1cmVcbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFRoZSBpbWFnZSBkYXRhIGZvciB1c2UgYnkgdGhlIFdlYkdMIHNoYWRlclxuICogQG1lbWJlcm9mIFdlYkdMUmVuZGVyaW5nXG4gKi9cblxuZnVuY3Rpb24gc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGEoaW1hZ2UpIHtcbiAgdmFyIG1pblBpeGVsVmFsdWUgPSBpbWFnZS5taW5QaXhlbFZhbHVlO1xuICB2YXIgY2FudmFzSW1hZ2VEYXRhSW5kZXggPSAwO1xuICB2YXIgc3RvcmVkUGl4ZWxEYXRhSW5kZXggPSAwOyAvLyBPbmx5IDMgY2hhbm5lbHMsIHNpbmNlIHdlIHVzZSBXZWJHTCdzIFJHQiB0ZXh0dXJlIGZvcm1hdFxuXG4gIHZhciBudW1TdG9yZWRQaXhlbHMgPSBpbWFnZS53aWR0aCAqIGltYWdlLmhlaWdodCAqIDQ7XG4gIHZhciBudW1PdXRwdXRQaXhlbHMgPSBpbWFnZS53aWR0aCAqIGltYWdlLmhlaWdodCAqIDM7XG4gIHZhciBzdG9yZWRQaXhlbERhdGEgPSBpbWFnZS5nZXRQaXhlbERhdGEoKTtcbiAgdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheShudW1PdXRwdXRQaXhlbHMpOyAvLyBOT1RFOiBBcyBvZiBOb3YgMjAxNCwgbW9zdCBqYXZhc2NyaXB0IGVuZ2luZXMgaGF2ZSBsb3dlciBwZXJmb3JtYW5jZSB3aGVuIGluZGV4aW5nIG5lZ2F0aXZlIGluZGV4ZXMuXG4gIC8vIFdlIGhhdmUgYSBzcGVjaWFsIGNvZGUgcGF0aCBmb3IgdGhpcyBjYXNlIHRoYXQgaW1wcm92ZXMgcGVyZm9ybWFuY2UuICBUaGFua3MgdG8gQGpwYW1icnVuIGZvciB0aGlzIGVuaGFuY2VtZW50XG5cbiAgaWYgKG1pblBpeGVsVmFsdWUgPCAwKSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtU3RvcmVkUGl4ZWxzKSB7XG4gICAgICBkYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gc3RvcmVkUGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdICsgLW1pblBpeGVsVmFsdWU7IC8vIFJlZFxuXG4gICAgICBkYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gc3RvcmVkUGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdICsgLW1pblBpeGVsVmFsdWU7IC8vIEdyZWVuXG5cbiAgICAgIGRhdGFbY2FudmFzSW1hZ2VEYXRhSW5kZXgrK10gPSBzdG9yZWRQaXhlbERhdGFbc3RvcmVkUGl4ZWxEYXRhSW5kZXgrK10gKyAtbWluUGl4ZWxWYWx1ZTsgLy8gQmx1ZVxuXG4gICAgICBzdG9yZWRQaXhlbERhdGFJbmRleCArPSAxOyAvLyBUaGUgc3RvcmVkIHBpeGVsIGRhdGEgaGFzIDQgY2hhbm5lbHNcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0b3JlZFBpeGVsRGF0YUluZGV4IDwgbnVtU3RvcmVkUGl4ZWxzKSB7XG4gICAgICBkYXRhW2NhbnZhc0ltYWdlRGF0YUluZGV4KytdID0gc3RvcmVkUGl4ZWxEYXRhW3N0b3JlZFBpeGVsRGF0YUluZGV4KytdOyAvLyBSZWRcblxuICAgICAgZGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHN0b3JlZFBpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXTsgLy8gR3JlZW5cblxuICAgICAgZGF0YVtjYW52YXNJbWFnZURhdGFJbmRleCsrXSA9IHN0b3JlZFBpeGVsRGF0YVtzdG9yZWRQaXhlbERhdGFJbmRleCsrXTsgLy8gQmx1ZVxuXG4gICAgICBzdG9yZWRQaXhlbERhdGFJbmRleCArPSAxOyAvLyBUaGUgc3RvcmVkIHBpeGVsIGRhdGEgaGFzIDQgY2hhbm5lbHNcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cblxudmFyIHJnYkRhdGFVdGlsaXRpZXMgPSB7XG4gIHN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhOiBzdG9yZWRQaXhlbERhdGFUb0ltYWdlRGF0YVxufTtcbnJnYlNoYWRlci5mcmFnID0gJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgKyAndW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTsnICsgJ3VuaWZvcm0gZmxvYXQgd3c7JyArICd1bmlmb3JtIGZsb2F0IHdjOycgKyAndW5pZm9ybSBmbG9hdCBzbG9wZTsnICsgJ3VuaWZvcm0gZmxvYXQgaW50ZXJjZXB0OycgKyAndW5pZm9ybSBmbG9hdCBtaW5QaXhlbFZhbHVlOycgKyAndW5pZm9ybSBpbnQgaW52ZXJ0OycgKyAndmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7JyArICd2b2lkIG1haW4oKSB7JyArIC8vIEdldCB0ZXh0dXJlXG4ndmVjMyBjb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKS54eXo7JyArIC8vIFJlc2NhbGUgYmFzZWQgb24gc2xvcGUgYW5kIGludGVyY2VwdFxuJ2NvbG9yID0gY29sb3IgKiAyNTYuMCAqIHNsb3BlICsgaW50ZXJjZXB0OycgKyAvLyBBcHBseSB3aW5kb3cgc2V0dGluZ3NcbidmbG9hdCBjZW50ZXIwID0gd2MgLSAwLjUgLSBtaW5QaXhlbFZhbHVlOycgKyAnZmxvYXQgd2lkdGgwID0gbWF4KHd3LCAxLjApOycgKyAnY29sb3IgPSAoY29sb3IgLSBjZW50ZXIwKSAvIHdpZHRoMCArIDAuNTsnICsgLy8gUkdCQSBvdXRwdXRcbidnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLCAxKTsnICsgLy8gQXBwbHkgYW55IGludmVyc2lvbiBuZWNlc3NhcnlcbidpZiAoaW52ZXJ0ID09IDEpJyArICdnbF9GcmFnQ29sb3IucmdiID0gMS4gLSBnbF9GcmFnQ29sb3IucmdiOycgKyAnfSc7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIFwiLi93ZWJnbC9zaGFkZXJzL3VpbnQxNi5qc1wiOlxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vd2ViZ2wvc2hhZGVycy91aW50MTYuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBleHBvcnRzIHByb3ZpZGVkOiB1aW50MTZEYXRhVXRpbGl0aWVzLCB1aW50MTZTaGFkZXIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwidWludDE2RGF0YVV0aWxpdGllc1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHVpbnQxNkRhdGFVdGlsaXRpZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInVpbnQxNlNoYWRlclwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHVpbnQxNlNoYWRlcjsgfSk7XG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xudmFyIHVpbnQxNlNoYWRlciA9IHt9O1xuLyoqXG4gKiBDb252ZXJ0IHN0b3JlZCBwaXhlbCBkYXRhIHRvIGltYWdlIGRhdGEuXG4gKlxuICogRm9yIHVpbnQxNiBwYWNrIHVpbnQxNiBpbnRvIHR3byB1aW50OCBjaGFubmVscyAociBhbmQgYSkuXG4gKlxuICogQHBhcmFtIHtJbWFnZX0gaW1hZ2UgQSBDb3JuZXJzdG9uZSBJbWFnZSBPYmplY3RcbiAqIEByZXR1cm5zIHtVaW50OEFycmF5fSBUaGUgaW1hZ2UgZGF0YSBmb3IgdXNlIGJ5IHRoZSBXZWJHTCBzaGFkZXJcbiAqIEBtZW1iZXJvZiBXZWJHTFJlbmRlcmluZ1xuICovXG5cbmZ1bmN0aW9uIHN0b3JlZFBpeGVsRGF0YVRvSW1hZ2VEYXRhKGltYWdlKSB7XG4gIC8vIFRyYW5zZmVyIGltYWdlIGRhdGEgdG8gYWxwaGEgYW5kIGx1bWluYW5jZSBjaGFubmVscyBvZiBXZWJHTCB0ZXh0dXJlXG4gIC8vIENyZWRpdCB0byBAanBhbWJydW4gYW5kIEBmZXJuYW5kb2pzZ1xuICAvLyBQYWNrIHVpbnQxNiBpbnRvIHR3byB1aW50OCBjaGFubmVscyAociBhbmQgYSlcbiAgdmFyIHBpeGVsRGF0YSA9IGltYWdlLmdldFBpeGVsRGF0YSgpO1xuICB2YXIgbnVtYmVyT2ZDaGFubmVscyA9IDI7XG4gIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoaW1hZ2Uud2lkdGggKiBpbWFnZS5oZWlnaHQgKiBudW1iZXJPZkNoYW5uZWxzKTtcbiAgdmFyIG9mZnNldCA9IDA7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaXhlbERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdmFsID0gcGl4ZWxEYXRhW2ldO1xuICAgIGRhdGFbb2Zmc2V0KytdID0gdmFsICYgMHhGRjtcbiAgICBkYXRhW29mZnNldCsrXSA9IHZhbCA+PiA4O1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbnZhciB1aW50MTZEYXRhVXRpbGl0aWVzID0ge1xuICBzdG9yZWRQaXhlbERhdGFUb0ltYWdlRGF0YTogc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGFcbn07XG51aW50MTZTaGFkZXIuZnJhZyA9ICdwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsnICsgJ3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7JyArICd1bmlmb3JtIGZsb2F0IHd3OycgKyAndW5pZm9ybSBmbG9hdCB3YzsnICsgJ3VuaWZvcm0gZmxvYXQgc2xvcGU7JyArICd1bmlmb3JtIGZsb2F0IGludGVyY2VwdDsnICsgJ3VuaWZvcm0gaW50IGludmVydDsnICsgJ3ZhcnlpbmcgdmVjMiB2X3RleENvb3JkOycgKyAndm9pZCBtYWluKCkgeycgKyAvLyBHZXQgdGV4dHVyZVxuJ3ZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7JyArIC8vIENhbGN1bGF0ZSBsdW1pbmFuY2UgZnJvbSBwYWNrZWQgdGV4dHVyZVxuJ2Zsb2F0IGludGVuc2l0eSA9IGNvbG9yLnIqMjU2LjAgKyBjb2xvci5hKjY1NTM2LjA7JyArIC8vIFJlc2NhbGUgYmFzZWQgb24gc2xvcGUgYW5kIHdpbmRvdyBzZXR0aW5nc1xuJ2ludGVuc2l0eSA9IGludGVuc2l0eSAqIHNsb3BlICsgaW50ZXJjZXB0OycgKyAnZmxvYXQgY2VudGVyMCA9IHdjIC0gMC41OycgKyAnZmxvYXQgd2lkdGgwID0gbWF4KHd3LCAxLjApOycgKyAnaW50ZW5zaXR5ID0gKGludGVuc2l0eSAtIGNlbnRlcjApIC8gd2lkdGgwICsgMC41OycgKyAvLyBDbGFtcCBpbnRlbnNpdHlcbidpbnRlbnNpdHkgPSBjbGFtcChpbnRlbnNpdHksIDAuMCwgMS4wKTsnICsgLy8gUkdCQSBvdXRwdXRcbidnbF9GcmFnQ29sb3IgPSB2ZWM0KGludGVuc2l0eSwgaW50ZW5zaXR5LCBpbnRlbnNpdHksIDEuMCk7JyArIC8vIEFwcGx5IGFueSBpbnZlcnNpb24gbmVjZXNzYXJ5XG4naWYgKGludmVydCA9PSAxKScgKyAnZ2xfRnJhZ0NvbG9yLnJnYiA9IDEuMCAtIGdsX0ZyYWdDb2xvci5yZ2I7JyArICd9JztcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gXCIuL3dlYmdsL3NoYWRlcnMvdWludDguanNcIjpcbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vd2ViZ2wvc2hhZGVycy91aW50OC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZXhwb3J0cyBwcm92aWRlZDogdWludDhEYXRhVXRpbGl0aWVzLCB1aW50OFNoYWRlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJ1aW50OERhdGFVdGlsaXRpZXNcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB1aW50OERhdGFVdGlsaXRpZXM7IH0pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcInVpbnQ4U2hhZGVyXCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gdWludDhTaGFkZXI7IH0pO1xudmFyIHVpbnQ4U2hhZGVyID0ge307XG4vKipcbiAqIENvbnZlcnQgc3RvcmVkIHBpeGVsIGRhdGEgdG8gaW1hZ2UgZGF0YS4gSGVyZSB3ZSB3aWxsIHN0b3JlXG4gKiBhbGwgZGF0YSBpbiB0aGUgYWxwaGEgY2hhbm5lbC5cbiAqXG4gKiBAcGFyYW0ge0ltYWdlfSBpbWFnZSBBIENvcm5lcnN0b25lIEltYWdlIE9iamVjdFxuICogQHJldHVybnMge1VpbnQ4QXJyYXl9IFRoZSBpbWFnZSBkYXRhIGZvciB1c2UgYnkgdGhlIFdlYkdMIHNoYWRlclxuICogQG1lbWJlcm9mIFdlYkdMUmVuZGVyaW5nXG4gKi9cblxuZnVuY3Rpb24gc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGEoaW1hZ2UpIHtcbiAgLy8gVHJhbnNmZXIgaW1hZ2UgZGF0YSB0byBhbHBoYSBjaGFubmVsIG9mIFdlYkdMIHRleHR1cmVcbiAgcmV0dXJuIGltYWdlLmdldFBpeGVsRGF0YSgpO1xufVxuXG52YXIgdWludDhEYXRhVXRpbGl0aWVzID0ge1xuICBzdG9yZWRQaXhlbERhdGFUb0ltYWdlRGF0YTogc3RvcmVkUGl4ZWxEYXRhVG9JbWFnZURhdGFcbn07XG51aW50OFNoYWRlci5mcmFnID0gJ3ByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OycgKyAndW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTsnICsgJ3VuaWZvcm0gZmxvYXQgd3c7JyArICd1bmlmb3JtIGZsb2F0IHdjOycgKyAndW5pZm9ybSBmbG9hdCBzbG9wZTsnICsgJ3VuaWZvcm0gZmxvYXQgaW50ZXJjZXB0OycgKyAndW5pZm9ybSBpbnQgaW52ZXJ0OycgKyAndmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7JyArICd2b2lkIG1haW4oKSB7JyArIC8vIEdldCB0ZXh0dXJlXG4ndmVjNCBjb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTsnICsgLy8gQ2FsY3VsYXRlIGx1bWluYW5jZSBmcm9tIHBhY2tlZCB0ZXh0dXJlXG4nZmxvYXQgaW50ZW5zaXR5ID0gY29sb3IucioyNTYuMDsnICsgLy8gUmVzY2FsZSBiYXNlZCBvbiBzbG9wZSBhbmQgd2luZG93IHNldHRpbmdzXG4naW50ZW5zaXR5ID0gaW50ZW5zaXR5ICogc2xvcGUgKyBpbnRlcmNlcHQ7JyArICdmbG9hdCBjZW50ZXIwID0gd2MgLSAwLjU7JyArICdmbG9hdCB3aWR0aDAgPSBtYXgod3csIDEuMCk7JyArICdpbnRlbnNpdHkgPSAoaW50ZW5zaXR5IC0gY2VudGVyMCkgLyB3aWR0aDAgKyAwLjU7JyArIC8vIENsYW1wIGludGVuc2l0eVxuJ2ludGVuc2l0eSA9IGNsYW1wKGludGVuc2l0eSwgMC4wLCAxLjApOycgKyAvLyBSR0JBIG91dHB1dFxuJ2dsX0ZyYWdDb2xvciA9IHZlYzQoaW50ZW5zaXR5LCBpbnRlbnNpdHksIGludGVuc2l0eSwgMS4wKTsnICsgLy8gQXBwbHkgYW55IGludmVyc2lvbiBuZWNlc3NhcnlcbidpZiAoaW52ZXJ0ID09IDEpJyArICdnbF9GcmFnQ29sb3IucmdiID0gMS4wIC0gZ2xfRnJhZ0NvbG9yLnJnYjsnICsgJ30nO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvdGV4dHVyZUNhY2hlLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vd2ViZ2wvdGV4dHVyZUNhY2hlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IGRlZmF1bHQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vZXZlbnRzLmpzICovIFwiLi9ldmVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vdHJpZ2dlckV2ZW50LmpzICovIFwiLi90cmlnZ2VyRXZlbnQuanNcIik7XG5cblxuLyoqXHJcbiAqIFRoaXMgbW9kdWxlIGRlYWxzIHdpdGggY2FjaGluZyBpbWFnZSB0ZXh0dXJlcyBpbiBWUkFNIGZvciBXZWJHTFxyXG4gKiBAbW9kdWxlIFdlYkdMVGV4dHVyZUNhY2hlXHJcbiAqL1xuXG52YXIgaW1hZ2VDYWNoZSA9IHt9O1xudmFyIGNhY2hlZEltYWdlcyA9IFtdO1xudmFyIG1heGltdW1TaXplSW5CeXRlcyA9IDEwMjQgKiAxMDI0ICogMjU2OyAvLyAyNTYgTUJcblxudmFyIGNhY2hlU2l6ZUluQnl0ZXMgPSAwO1xuXG5mdW5jdGlvbiBnZXRDYWNoZUluZm8oKSB7XG4gIHJldHVybiB7XG4gICAgbWF4aW11bVNpemVJbkJ5dGVzOiBtYXhpbXVtU2l6ZUluQnl0ZXMsXG4gICAgY2FjaGVTaXplSW5CeXRlczogY2FjaGVTaXplSW5CeXRlcyxcbiAgICBudW1iZXJPZkltYWdlc0NhY2hlZDogY2FjaGVkSW1hZ2VzLmxlbmd0aFxuICB9O1xufVxuXG5mdW5jdGlvbiBwdXJnZUNhY2hlSWZOZWNlc3NhcnkoKSB7XG4gIC8vIElmIG1heCBjYWNoZSBzaXplIGhhcyBub3QgYmVlbiBleGNlZWRlZCwgZG8gbm90aGluZ1xuICBpZiAoY2FjaGVTaXplSW5CeXRlcyA8PSBtYXhpbXVtU2l6ZUluQnl0ZXMpIHtcbiAgICByZXR1cm47XG4gIH0gLy8gQ2FjaGUgc2l6ZSBoYXMgYmVlbiBleGNlZWRlZCwgY3JlYXRlIGxpc3Qgb2YgaW1hZ2VzIHNvcnRlZCBieSB0aW1lU3RhbXBcbiAgLy8gU28gd2UgY2FuIHB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIGltYWdlXG5cblxuICBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgICBpZiAoYS50aW1lU3RhbXAgPiBiLnRpbWVTdGFtcCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIGlmIChhLnRpbWVTdGFtcCA8IGIudGltZVN0YW1wKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNhY2hlZEltYWdlcy5zb3J0KGNvbXBhcmUpOyAvLyBSZW1vdmUgaW1hZ2VzIGFzIG5lY2Vzc2FyeVxuXG4gIHdoaWxlIChjYWNoZVNpemVJbkJ5dGVzID4gbWF4aW11bVNpemVJbkJ5dGVzKSB7XG4gICAgdmFyIGxhc3RDYWNoZWRJbWFnZSA9IGNhY2hlZEltYWdlc1tjYWNoZWRJbWFnZXMubGVuZ3RoIC0gMV07XG4gICAgY2FjaGVTaXplSW5CeXRlcyAtPSBsYXN0Q2FjaGVkSW1hZ2Uuc2l6ZUluQnl0ZXM7XG4gICAgZGVsZXRlIGltYWdlQ2FjaGVbbGFzdENhY2hlZEltYWdlLmltYWdlSWRdO1xuICAgIGNhY2hlZEltYWdlcy5wb3AoKTtcbiAgICBPYmplY3QoX3RyaWdnZXJFdmVudF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXSkoX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZXZlbnRzXCJdLCBfZXZlbnRzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdLldFQkdMX1RFWFRVUkVfUkVNT1ZFRCwge1xuICAgICAgaW1hZ2VJZDogbGFzdENhY2hlZEltYWdlLmltYWdlSWRcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBjYWNoZUluZm8gPSBnZXRDYWNoZUluZm8oKTtcbiAgT2JqZWN0KF90cmlnZ2VyRXZlbnRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0pKF9ldmVudHNfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImV2ZW50c1wiXSwgX2V2ZW50c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXS5XRUJHTF9URVhUVVJFX0NBQ0hFX0ZVTEwsIGNhY2hlSW5mbyk7XG59XG5cbmZ1bmN0aW9uIHNldE1heGltdW1TaXplQnl0ZXMobnVtQnl0ZXMpIHtcbiAgaWYgKG51bUJ5dGVzID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldE1heGltdW1TaXplQnl0ZXM6IHBhcmFtZXRlciBudW1CeXRlcyBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChudW1CeXRlcy50b0ZpeGVkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldE1heGltdW1TaXplQnl0ZXM6IHBhcmFtZXRlciBudW1CeXRlcyBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gIH1cblxuICBtYXhpbXVtU2l6ZUluQnl0ZXMgPSBudW1CeXRlcztcbiAgcHVyZ2VDYWNoZUlmTmVjZXNzYXJ5KCk7XG59XG5cbmZ1bmN0aW9uIHB1dEltYWdlVGV4dHVyZShpbWFnZSwgaW1hZ2VUZXh0dXJlKSB7XG4gIHZhciBpbWFnZUlkID0gaW1hZ2UuaW1hZ2VJZDtcblxuICBpZiAoaW1hZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHV0SW1hZ2VUZXh0dXJlOiBpbWFnZSBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChpbWFnZUlkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3B1dEltYWdlVGV4dHVyZTogaW1hZ2VJZCBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChpbWFnZVRleHR1cmUgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHV0SW1hZ2VUZXh0dXJlOiBpbWFnZVRleHR1cmUgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGltYWdlQ2FjaGUsIGltYWdlSWQpID09PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZVRleHR1cmU6IGltYWdlSWQgYWxyZWFkeSBpbiBjYWNoZScpO1xuICB9XG5cbiAgdmFyIGNhY2hlZEltYWdlID0ge1xuICAgIGltYWdlSWQ6IGltYWdlSWQsXG4gICAgaW1hZ2VUZXh0dXJlOiBpbWFnZVRleHR1cmUsXG4gICAgdGltZVN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIHNpemVJbkJ5dGVzOiBpbWFnZVRleHR1cmUuc2l6ZUluQnl0ZXNcbiAgfTtcbiAgaW1hZ2VDYWNoZVtpbWFnZUlkXSA9IGNhY2hlZEltYWdlO1xuICBjYWNoZWRJbWFnZXMucHVzaChjYWNoZWRJbWFnZSk7XG5cbiAgaWYgKGltYWdlVGV4dHVyZS5zaXplSW5CeXRlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZVRleHR1cmU6IGltYWdlVGV4dHVyZS5zaXplSW5CeXRlcyBtdXN0IG5vdCBiZSB1bmRlZmluZWQnKTtcbiAgfVxuXG4gIGlmIChpbWFnZVRleHR1cmUuc2l6ZUluQnl0ZXMudG9GaXhlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwdXRJbWFnZVRleHR1cmU6IGltYWdlVGV4dHVyZS5zaXplSW5CeXRlcyBpcyBub3QgYSBudW1iZXInKTtcbiAgfVxuXG4gIGNhY2hlU2l6ZUluQnl0ZXMgKz0gY2FjaGVkSW1hZ2Uuc2l6ZUluQnl0ZXM7XG4gIHB1cmdlQ2FjaGVJZk5lY2Vzc2FyeSgpO1xufVxuXG5mdW5jdGlvbiBnZXRJbWFnZVRleHR1cmUoaW1hZ2VJZCkge1xuICBpZiAoaW1hZ2VJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdnZXRJbWFnZVRleHR1cmU6IGltYWdlSWQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgY2FjaGVkSW1hZ2UgPSBpbWFnZUNhY2hlW2ltYWdlSWRdO1xuXG4gIGlmIChjYWNoZWRJbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9IC8vIEJ1bXAgdGltZSBzdGFtcCBmb3IgY2FjaGVkIGltYWdlXG5cblxuICBjYWNoZWRJbWFnZS50aW1lU3RhbXAgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gY2FjaGVkSW1hZ2UuaW1hZ2VUZXh0dXJlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJbWFnZVRleHR1cmUoaW1hZ2VJZCkge1xuICBpZiAoaW1hZ2VJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW1vdmVJbWFnZVRleHR1cmU6IGltYWdlSWQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgY2FjaGVkSW1hZ2UgPSBpbWFnZUNhY2hlW2ltYWdlSWRdO1xuXG4gIGlmIChjYWNoZWRJbWFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdyZW1vdmVJbWFnZVRleHR1cmU6IGltYWdlSWQgbXVzdCBub3QgYmUgdW5kZWZpbmVkJyk7XG4gIH1cblxuICBjYWNoZWRJbWFnZXMuc3BsaWNlKGNhY2hlZEltYWdlcy5pbmRleE9mKGNhY2hlZEltYWdlKSwgMSk7XG4gIGNhY2hlU2l6ZUluQnl0ZXMgLT0gY2FjaGVkSW1hZ2Uuc2l6ZUluQnl0ZXM7XG4gIGRlbGV0ZSBpbWFnZUNhY2hlW2ltYWdlSWRdO1xuICByZXR1cm4gY2FjaGVkSW1hZ2UuaW1hZ2VUZXh0dXJlO1xufVxuXG5mdW5jdGlvbiBwdXJnZUNhY2hlKCkge1xuICB3aGlsZSAoY2FjaGVkSW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICB2YXIgcmVtb3ZlZENhY2hlZEltYWdlID0gY2FjaGVkSW1hZ2VzLnBvcCgpO1xuICAgIGRlbGV0ZSBpbWFnZUNhY2hlW3JlbW92ZWRDYWNoZWRJbWFnZS5pbWFnZUlkXTtcbiAgfVxuXG4gIGNhY2hlU2l6ZUluQnl0ZXMgPSAwO1xufVxuXG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIF9fd2VicGFja19leHBvcnRzX19bXCJkZWZhdWx0XCJdID0gKHtcbiAgcHVyZ2VDYWNoZTogcHVyZ2VDYWNoZSxcbiAgZ2V0SW1hZ2VUZXh0dXJlOiBnZXRJbWFnZVRleHR1cmUsXG4gIHB1dEltYWdlVGV4dHVyZTogcHV0SW1hZ2VUZXh0dXJlLFxuICByZW1vdmVJbWFnZVRleHR1cmU6IHJlbW92ZUltYWdlVGV4dHVyZSxcbiAgc2V0TWF4aW11bVNpemVCeXRlczogc2V0TWF4aW11bVNpemVCeXRlc1xufSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyBcIi4vd2ViZ2wvdmVydGV4U2hhZGVyLmpzXCI6XG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vd2ViZ2wvdmVydGV4U2hhZGVyLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGV4cG9ydHMgcHJvdmlkZWQ6IHZlcnRleFNoYWRlciAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJ2ZXJ0ZXhTaGFkZXJcIiwgZnVuY3Rpb24oKSB7IHJldHVybiB2ZXJ0ZXhTaGFkZXI7IH0pO1xudmFyIHZlcnRleFNoYWRlciA9ICdhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uOycgKyAnYXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDsnICsgJ3VuaWZvcm0gdmVjMiB1X3Jlc29sdXRpb247JyArICd2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDsnICsgJ3ZvaWQgbWFpbigpIHsnICsgJ3ZlYzIgemVyb1RvT25lID0gYV9wb3NpdGlvbiAvIHVfcmVzb2x1dGlvbjsnICsgJ3ZlYzIgemVyb1RvVHdvID0gemVyb1RvT25lICogMi4wOycgKyAndmVjMiBjbGlwU3BhY2UgPSB6ZXJvVG9Ud28gLSAxLjA7JyArICdnbF9Qb3NpdGlvbiA9IHZlYzQoY2xpcFNwYWNlICogdmVjMigxLCAtMSksIDAsIDEpOycgKyAndl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7JyArICd9JztcblxuLyoqKi8gfSlcblxuLyoqKioqKi8gfSk7XG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvcm5lcnN0b25lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/cornerstone-core/dist/cornerstone.js\n");

/***/ })

};
;